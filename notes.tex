\documentclass[numbers=enddot,12pt,final,onecolumn,notitlepage]{scrartcl}%
\usepackage[headsepline,footsepline,manualmark]{scrlayer-scrpage}
\usepackage[all,cmtip]{xy}
\usepackage{amssymb}
\usepackage{amsmath}
\usepackage{amsthm}
\usepackage{framed}
\usepackage{comment}
\usepackage{color}
\usepackage{hyperref}
\usepackage[sc]{mathpazo}
\usepackage[T1]{fontenc}
\usepackage{tikz}
\usepackage{needspace}
\usepackage{tabls}
\usepackage{wasysym}
%TCIDATA{OutputFilter=latex2.dll}
%TCIDATA{Version=5.50.0.2960}
%TCIDATA{LastRevised=Saturday, March 09, 2019 19:52:45}
%TCIDATA{SuppressPackageManagement}
%TCIDATA{<META NAME="GraphicsSave" CONTENT="32">}
%TCIDATA{<META NAME="SaveForMode" CONTENT="1">}
%TCIDATA{BibliographyScheme=Manual}
%TCIDATA{Language=American English}
%BeginMSIPreambleData
\providecommand{\U}[1]{\protect\rule{.1in}{.1in}}
%EndMSIPreambleData
\usetikzlibrary{arrows}
\newcounter{exer}
\newcounter{exera}
\numberwithin{exer}{subsection}
\theoremstyle{definition}
\newtheorem{theo}{Theorem}[subsection]
\newenvironment{theorem}[1][]
{\begin{theo}[#1]\begin{leftbar}}
{\end{leftbar}\end{theo}}
\newtheorem{lem}[theo]{Lemma}
\newenvironment{lemma}[1][]
{\begin{lem}[#1]\begin{leftbar}}
{\end{leftbar}\end{lem}}
\newtheorem{prop}[theo]{Proposition}
\newenvironment{proposition}[1][]
{\begin{prop}[#1]\begin{leftbar}}
{\end{leftbar}\end{prop}}
\newtheorem{defi}[theo]{Definition}
\newenvironment{definition}[1][]
{\begin{defi}[#1]\begin{leftbar}}
{\end{leftbar}\end{defi}}
\newtheorem{remk}[theo]{Remark}
\newenvironment{remark}[1][]
{\begin{remk}[#1]\begin{leftbar}}
{\end{leftbar}\end{remk}}
\newtheorem{coro}[theo]{Corollary}
\newenvironment{corollary}[1][]
{\begin{coro}[#1]\begin{leftbar}}
{\end{leftbar}\end{coro}}
\newtheorem{conv}[theo]{Convention}
\newenvironment{convention}[1][]
{\begin{conv}[#1]\begin{leftbar}}
{\end{leftbar}\end{conv}}
\newtheorem{quest}[theo]{Question}
\newenvironment{question}[1][]
{\begin{quest}[#1]\begin{leftbar}}
{\end{leftbar}\end{quest}}
\newtheorem{warn}[theo]{Warning}
\newenvironment{conclusion}[1][]
{\begin{warn}[#1]\begin{leftbar}}
{\end{leftbar}\end{warn}}
\newtheorem{conj}[theo]{Conjecture}
\newenvironment{conjecture}[1][]
{\begin{conj}[#1]\begin{leftbar}}
{\end{leftbar}\end{conj}}
\newtheorem{exam}[theo]{Example}
\newenvironment{example}[1][]
{\begin{exam}[#1]\begin{leftbar}}
{\end{leftbar}\end{exam}}
\newtheorem{exmp}[exer]{Exercise}
\newenvironment{exercise}[1][]
{\begin{exmp}[#1]\begin{leftbar}}
{\end{leftbar}\end{exmp}}
\newenvironment{statement}{\begin{quote}}{\end{quote}}
\newenvironment{fineprint}{\begin{small}}{\end{small}}
\iffalse
\newenvironment{proof}[1][Proof]{\noindent\textbf{#1.} }{\ \rule{0.5em}{0.5em}}
\newenvironment{question}[1][Question]{\noindent\textbf{#1.} }{\ \rule{0.5em}{0.5em}}
\newenvironment{teachingnote}[1][Teaching note]{\noindent\textbf{#1.} }{\ \rule{0.5em}{0.5em}}
\fi
\let\sumnonlimits\sum
\let\prodnonlimits\prod
\let\cupnonlimits\bigcup
\let\capnonlimits\bigcap
\renewcommand{\sum}{\sumnonlimits\limits}
\renewcommand{\prod}{\prodnonlimits\limits}
\renewcommand{\bigcup}{\cupnonlimits\limits}
\renewcommand{\bigcap}{\capnonlimits\limits}
\setlength\tablinesep{3pt}
\setlength\arraylinesep{3pt}
\setlength\extrarulesep{3pt}
\voffset=0cm
\hoffset=-0.7cm
\setlength\textheight{22.5cm}
\setlength\textwidth{15.5cm}
\newcommand\arxiv[1]{\href{http://www.arxiv.org/abs/#1}{\texttt{arXiv:#1}}}
\newenvironment{verlong}{}{}
\newenvironment{vershort}{}{}
\newenvironment{noncompile}{}{}
\newenvironment{teachingnote}{}{}
\excludecomment{verlong}
\includecomment{vershort}
\excludecomment{noncompile}
\excludecomment{teachingnote}
\newcommand{\CC}{\mathbb{C}}
\newcommand{\RR}{\mathbb{R}}
\newcommand{\QQ}{\mathbb{Q}}
\newcommand{\NN}{\mathbb{N}}
\newcommand{\ZZ}{\mathbb{Z}}
\newcommand{\id}{\operatorname{id}}
\newcommand{\lcm}{\operatorname{lcm}}
\newcommand{\rev}{\operatorname{rev}}
\newcommand{\powset}[2][]{\ifthenelse{\equal{#2}{}}{\mathcal{P}\left(#1\right)}{\mathcal{P}_{#1}\left(#2\right)}}
\newcommand{\set}[1]{\left\{ #1 \right\}}
\newcommand{\abs}[1]{\left| #1 \right|}
\newcommand{\tup}[1]{\left( #1 \right)}
\newcommand{\ive}[1]{\left[ #1 \right]}
\newcommand{\floor}[1]{\left\lfloor #1 \right\rfloor}
\newcommand{\lf}[2]{#1^{\underline{#2}}}
\newcommand{\underbrack}[2]{\underbrace{#1}_{\substack{#2}}}
\newcommand{\horrule}[1]{\rule{\linewidth}{#1}}
\newcommand{\nnn}{\nonumber\\}
\newcommand{\sslash}{\mathbin{/\mkern-6mu/}}
\ihead{Math 4281 notes}
\ohead{page \thepage}
\cfoot{}
\begin{document}

\title{UMN Spring 2019 Math 4281 notes}
\author{Darij Grinberg}
\date{
%TCIMACRO{\TeXButton{today}{\today} }%
%BeginExpansion
\today
%EndExpansion
}
\maketitle
\tableofcontents

\section{Introduction}

This file will contain the notes from the Math 4281 class (``Introduction to
Modern Algebra'') I am teaching at UMN in Spring 2019. I will type the first
draft directly in the classroom, and subsequently expand it into proper
writing. Occasionally, I will also add extra sections not covered in class.

The website of the class is
\url{http://www-users.math.umn.edu/~dgrinber/19s/index.html} ; you will find
homework sets there.

\subsection{Organisation}

See \href{http://www-users.math.umn.edu/~dgrinber/19s/syll.pdf}{the syllabus}
for the organization of this class and for the homework.

\subsection{Literature}

Many books have been written about abstract algebra. I have only a passing
familiarity with most of them. Some of the ``bibles'' of the subject (bulky
texts covering lots of material) are Dummit/Foote \cite{Dummit-Foote}, Knapp
\cite{Knapp1} and \cite{Knapp2} (both freely available), van der Waerden
\cite{Waerden1} and \cite{Waerden2} (one of the oldest texts on modern
algebra, thus rather dated, but still as readable as ever).
%Two other textbooks are Bosch \cite{Bosch} and Artin \cite{Artin}.


Of course, any book longer than 200 pages likely goes further than our course
will (unless it is full of details or solved exercises or printed in really
large letters). Thus, let me recommend some more introductory sources.
Siksek's lecture notes \cite{Siksek} are a readable introduction that is a lot
more amusing than I had ever expected an algebra text to be. Goodman's free
book \cite{Goodman} combines introductory material with geometric motivation
and applications, such as the classification of regular polyhedra and
2-dimensional crystals. In a sense, it is a great complement to our
ungeometric course. Pinter's \cite{Pinter} often gets used in classes like
ours. Armstrong's notes \cite{Armstrong} cover a significant part of what we
do (and he will likely have notes for a second course written up by the end of
this semester).

Keith Conrad's blurbs \cite{Conrad*} are not a book, as they only cover
selected topics. But at pretty much every topic they cover, they are one of
the best sources (clear, full of examples, and often going fairly deep). We
shall follow one of them particularly closely: the one on Gaussian integers
\cite{Conrad-Gauss}.

We will use some basic linear algebra, all of which can be found in Hefferon's
book \cite{Hefferon} (but we won't need all of this book). As far as
determinants are concerned, we will briefly build up their theory; we refer to
\cite[Section 12 \& Appendix B]{Strickland} for proofs (and to \cite[Chapter
6]{detnotes} for a really detailed and formal treatment).

This course will begin (after some motivating questions) with a survey of
elementary number theory. This is in itself a deep subject (despite the name)
with a long history (\href{https://en.wikipedia.org/wiki/Plimpton_322}{perhaps
as old as mathematics}), and of course we will just scratch the surface. Books
like \cite{NiZuMo91}, \cite{Burton} and \cite{Uspensky-Heaslet} cover a lot
more than we can do. The Gallier/Quaintance survey \cite{Gallier-RSA} covers a
good amount of basics and more.

We assume that the reader is familiar with the commonplaces of mathematical
argumentation, such as induction (including strong induction),
\textquotedblleft WLOG\textquotedblright\ arguments, proof by contradiction,
summation signs ($\sum$) and polynomials (a vague notion of polynomials will
suffice; we will give a precise definition when it becomes necessary). If not,
several texts can be helpful in achieving such familiarity: e.g.,
\cite[particularly Chapters 1--5]{LeLeMe}, \cite{Hammack}, \cite{Day}.

\begin{center}
\textbf{2019-01-23 lecture}
\end{center}

\subsection{The plan}

The material I am going to cover is mostly standard. However, the order in
which I will go through it is somewhat unusual: I will spend a lot of time
studying the basic examples before defining abstract notions such as
``group'', ``monoid'', ``ring'' and ``field''. This way, once I come to these
notions, you'll already have many examples to work with. (Don't be fooled by
the word ``example'': We will prove a lot about them, much of which is neither
straightforward nor easy.)

First, I will show some motivating questions that are easy to state yet
require abstract algebra to answer. We will hopefully see their answers by the
end of this class. (Some of them can also be answered elementarily, without
using abstract algebra, but such answers usually take more work and are harder
to find.)

\subsection{\label{sect.intro.sum-of-2sq}Motivation: $n=x^{2}+y^{2}$}

A \textit{perfect square} means the square of an integer. Thus, the perfect
squares are
\[
0^{2} = 0, \qquad1^{2} = 1, \qquad2^{2} = 4, \qquad3^{2} = 9, \qquad4^{2} =
16, \qquad\ldots.
\]


Here is an old problem (first solved by Pierre de Fermat in 1640, but
apparently already studied by Diophantus in the 3rd Century):

\begin{question}
\label{quest.intro.sum-of-2sq.1} What integers can be written as sums of two
perfect squares?
\end{question}

For example, $5$ can be written in this way, since $5=2^{2}+1^{2}$.

So can $4$, since $4=2^{2}+0^{2}$. (Keep in mind that $0$ is a perfect square.)

However, $7$ cannot be written in this way. In fact, if we had $7 = a^{2} +
b^{2}$ for two integers $a$ and $b$, then $a^{2}$ and $b^{2}$ would have to be
$\leq7$ (since $a^{2}$ and $b^{2}$ are always $\geq0$, no matter what sign $a$
and $b$ have); but the only perfect squares that are $\leq7$ are $0,1,4$, and
there is no way to write $7$ as a sum of two of these perfect squares (just
check all the possibilities).

For a similar but simpler reason, no negative number can be written as a sum
of two perfect squares.

We can of course approach Question~\ref{quest.intro.sum-of-2sq.1} using a
computer: It is easy to check, for a given integer $n$, whether $n$ is a sum
of two perfect squares. (Just check all possibilities for $a$ and $b$ for the
validity of the equation $n=a^{2}+b^{2}$. You only need to try $a$ and $b$
belonging to $\left\{  0,1,\ldots,\left\lfloor \sqrt{n}\right\rfloor \right\}
$, where $\left\lfloor y\right\rfloor $ (for a real number $y$) denotes the
largest integer that is less or equal than $y$ (also known as
\textquotedblleft$y$ rounded down\textquotedblright).) If you do this, you
will see that among the first $101$ nonnegative integers, the ones that can be
written as sums of two perfect squares are precisely
\begin{align*}
&  0,1,2,4,5,8,9,10,13,16,17,18,20,25,26,29,\\
&  32,34,36,37,40,41,45,49,50,52,53,58,61,64,\\
&  65,68,72,73,74,80,81,82,85,89,90,97,98,100.
\end{align*}
Having this data, you can look up the sequence in \href{https://oeis.org/}{the
Online Encyclopedia of Integer Sequences (short OEIS)}, and see that the
sequence of these integers is known as \href{https://oeis.org/A001481}{OEIS
Sequence A001481}. In the \textquotedblleft Comments\textquotedblright\ field,
you can read a lot of what is known about it (albeit in telegraphic style).

For example, one of the comments says ``Closed under multiplication''. This is
short for ``if you multiply two entries of the sequence, then the product will
again be an entry of the sequence''. In other words, if you multiply two
integers that are sums of two perfect squares, then you get another sum of two
perfect squares. Why is this so?

It turns out that there is a \textquotedblleft simple\textquotedblright%
\ reason for this: the identity
\begin{equation}
\left(  a^{2}+b^{2}\right)  \left(  c^{2}+d^{2}\right)  =\left(  ad+bc\right)
^{2}+\left(  ac-bd\right)  ^{2}, \label{eq.intro.sum-of-2sq.sum*sum}%
\end{equation}
which holds for arbitrary reals $a,b,c,d$ (and thus, in particular, for
integers). This is known as
\href{https://en.wikipedia.org/wiki/Brahmagupta-Fibonacci_identity}{the
Brahmagupta-Fibonacci identity}, and of course can easily be proven by
expanding both sides. But how would you come up with such an identity?

If you stare at the above sequence long enough, you may also discover another
pattern: An integer of the form $4k+3$ with integer $k$ (that is, an integer
that is larger by $3$ than a multiple of $4$) can never be written as a sum of
two perfect squares. (Thus, $3,7,11,15,19,23,\ldots$ cannot be written in this
way.) This does not account for all integers that cannot be written in this
way, but it does provide some clues to the answer that we will later see. In
order to prove this observation, we shall need basic modular arithmetic (or at
least division with remainder); we will see this proof very soon (see Exercise
\ref{exe.ent.even-odd-sumsq} \textbf{(c)}).

Further questions can be asked. One of them is: Given an integer $n$, how many
ways are there to represent $n$ as a sum of two perfect squares? This is
actually several questions masquerading as one, since it is not so clear what
a ``way'' is. Do $5 = 1^{2} + 2^{2}$ and $5 = 2^{2} + 1^{2}$ count as two
different ways? What about $5 = 1^{2} + 2^{2}$ versus $5 = \left(  -1 \right)
^{2} + 2^{2}$ (here, the perfect squares are the same, but do we really want
to count the squares or rather the numbers we are squaring?).

Let me formalize the question as follows:

\begin{question}
\label{quest.intro.sum-of-2sq.2} Let $n$ be an integer.

\textbf{(a)} How many pairs $\left(  a, b \right)  \in\mathbb{N}^{2}$ are
there that satisfy $n = a^{2} + b^{2}$ ? Here, and in the following,
$\mathbb{N}$ denotes the set $\left\{  0, 1, 2, \ldots\right\}  $ of all
nonnegative integers.

\textbf{(b)} How many pairs $\left(  a, b \right)  \in\mathbb{Z}^{2}$ are
there that satisfy $n = a^{2} + b^{2}$ ? Here, and in the following,
$\mathbb{Z}$ denotes the set $\left\{  \ldots, -2, -1, 0, 1, 2, \ldots
\right\}  $ of all integers.

\textbf{(c)} How do these counts change if we count \textbf{unordered} pairs
instead (i.e., count $\left(  a, b \right)  $ and $\left(  b, a \right)  $ as
one only)?
\end{question}

Note that when I say ``pair'', I always mean ``ordered pair'' by default,
unless I explicitly say ``unordered pair''.

Again, a little bit of programming easily yields answers to all three parts of
this question for small values of $n$, and the resulting data can be plugged
into the OEIS and yields lots of information.

\begin{proof}
[First steps toward answering Question~\ref{quest.intro.sum-of-2sq.2}%
.]\textbf{(a)} I claim that the number of such pairs is even unless $n$ is
twice a perfect square (i.e., unless $n = 2m^{2}$ for some integer $m$); in
the latter case, this number is odd instead.

Why? Let me define a \textit{solution} to be a pair $\left(  a,b\right)  $
such that $n=a^{2}+b^{2}$. So I want to know whether the number of solutions
is even or odd. But we have $a^{2}+b^{2}=b^{2}+a^{2}$ for all $a$ and $b$.
Thus, if $\left(  a,b\right)  $ is a solution, then so is $\left(  b,a\right)
$. Hence, the solutions themselves \textquotedblleft come in
pairs\textquotedblright, with each solution $\left(  a,b\right)  $ being
matched to the solution $\left(  b,a\right)  $, unless there is a solution
$\left(  a,b\right)  $ with $a=b$ (because such a solution would be matched to
itself, and thus not form an actual pair). But solutions $\left(  a,b\right)
$ with $a=b$ are easy to classify: If $n$ is twice a perfect square, then
there is exactly one such solution (namely, $\left(  \sqrt{n/2},\sqrt
{n/2}\right)  $); otherwise there is none (because $n=a^{2}+b^{2}$ with $a=b$
leads to $n=b^{2}+b^{2}=2b^{2}$, which can only happen when $n$ is twice a
perfect square). Since we know that all the other solutions \textquotedblleft
come in pairs\textquotedblright, we thus conclude that the number of solutions
is odd if $n$ is twice a perfect square and even otherwise. This proves our claim.

Of course, we have not made much headway into
Question~\ref{quest.intro.sum-of-2sq.2}; knowing whether a number is even or
odd is far from knowing the number itself. But I think the argument above was
worth showing; similar reasoning is used a lot in algebra.

\textbf{(b)} By reasoning analogous to the one we used in part \textbf{(a)},
we can see that the number of such pairs will be divisible by $8$ whenever $n$
is neither a perfect square nor twice a perfect square. Indeed, this relies on
the fact that
\begin{align*}
a^{2} + b^{2}  &  = b^{2} + a^{2} = \left(  -a \right)  ^{2} + b^{2} = b^{2} +
\left(  -a \right)  ^{2} = a^{2} + \left(  -b \right)  ^{2} = \left(  -b
\right)  ^{2} + a^{2}\\
&  = \left(  -a \right)  ^{2} + \left(  -b \right)  ^{2} = \left(  -b \right)
^{2} + \left(  -a \right)  ^{2}%
\end{align*}
for all $a$ and $b$. Thus the pairs $\left(  a, b \right)  \in\mathbb{Z}^{2}$
that satisfy $n = a^{2} + b^{2}$ don't just come in pairs; they come in sets
of $8$ (namely, each $\left(  a, b \right)  $ comes in a set with $\left(  b,
a \right)  $, $\left(  -a, b \right)  $, $\left(  b, -a \right)  $, $\left(
a, -b \right)  $, $\left(  -b, a \right)  $, $\left(  -a, -b \right)  $ and
$\left(  -b, -a \right)  $). These sets of $8$ can ``degenerate'' to smaller
sets when some of their elements coincide, but this can only happen when $n$
is a perfect square (in which case we can have $\left(  a, b \right)  =
\left(  -a, b \right)  $ for example) or twice a perfect square (in which case
we can have $\left(  a, b \right)  = \left(  b, a \right)  $ or $\left(  a, b
\right)  = \left(  -b, -a \right)  $ or other such coincidences). (Check this!)

\textbf{(c)} We can reduce this to parts \textbf{(a)} and \textbf{(b)}.
Indeed:\footnote{In the rest of this argument, \textquotedblleft
pair\textquotedblright\ will always mean \textquotedblleft pair $\left(
a,b\right)  $ satisfying $n=a^{2}+b^{2}$\textquotedblright.}

\begin{itemize}
\item When $n$ is not twice a perfect square, the number of unordered pairs
will be half the number of ordered pairs, since each unordered pair $\left(
u,v\right)  _{\text{unordered}}$ corresponds to precisely two ordered pairs
$\left(  u,v\right)  $ and $\left(  v,u\right)  $.

\item When $n$ is twice a perfect square, we have%
\begin{align*}
&  \left(  \text{the number of unordered pairs}\right) \\
&  =\dfrac{\left(  \text{the number of ordered pairs}\right)  +\left(
\text{the number of pairs with }a=b\right)  }{2}.
\end{align*}
Indeed, each unordered pair $\left(  u,v\right)  _{\text{unordered}}$
corresponds to precisely two ordered pairs $\left(  u,v\right)  $ and $\left(
v,u\right)  $ unless $u=v$, in which case it corresponds to only one ordered
pair. Thus, if we multiply the number of unordered pairs by $2$, then we
\textbf{overcount} the number of ordered pairs, because we are counting the
pairs $\left(  u,v\right)  $ with $u=v$ (that is, the pairs with $a=b$) twice.
So we get $\left(  \text{the number of ordered pairs}\right)  +\left(
\text{the number of pairs with }a=b\right)  $. This proves our above formula.

What is the number of pairs with $a=b$ ? If $n=0$, then it is $1$ (and the
only such pair is $\left(  0,0\right)  $). Otherwise, it is $1$ if we are
counting pairs in $\mathbb{N}^{2}$ (and the only such pair is $\left(
\sqrt{n/2},\sqrt{n/2}\right)  $), and is $2$ if we are counting pairs in
$\mathbb{Z}^{2}$ (and the only two such pairs are $\left(  \sqrt{n/2}%
,\sqrt{n/2}\right)  $ and $\left(  -\sqrt{n/2},-\sqrt{n/2}\right)  $).
\qedhere

\end{itemize}
\end{proof}

Note that sums of squares have a geometric meaning (going back to Pythagoras):
Two real numbers $a$ and $b$ satisfy $a^{2}+b^{2}=n$ (for a given integer
$n\geq0$) if and only if the point with Cartesian coordinates $\left(
a,b\right)  $ lies on the circle with center $0$ and radius $\sqrt{n}$. This
will actually prove a valuable insight that will lead us to the answers to the
above questions.

Just as a teaser: There are formulas for all three parts of
Question~\ref{quest.intro.sum-of-2sq.2}, in terms of divisors of $n$ of the
forms $4k+1$ and $4k+3$. We will see these formulas after we have properly
understood the concept of Gaussian integers.

\subsection{\label{sect.intro.algnum}Motivation: Algebraic numbers}

\begin{noncompile}
Recall how the number system was constructed. In a way, each extension was
done in order to allow a certain operation to proceed: The natural numbers
were extended to the integers in order to allow subtraction (in all cases, not
just when we are subtracting a smaller number from a larger). Then, the
integers were extended to the rational numbers in order to allow division (in
all reasonable cases\footnote{``Reasonable'' in this case means that division
by $0$ is still forbidden. If we allowed division by $0$ as well, then our
``rational numbers'' would all be equal to each other and therefore a huge
step back from the integers.}, not just when the division works out
remainder-less). Then, the rational numbers were extended to the real numbers
in order to allow limits (in all reasonable cases). Finally, the real numbers
were (or will be -- we will see this in more detail) extended to the complex
numbers in order to allow square roots.

From an algebraic point of view, the step from the rational numbers to the
real numbers is somewhat of an overkill. Algebraists often want to work with
roots, particularly roots of polynomials; ideally, every polynomial of degree
$n$ should have ``all'' $n$ roots (counted with multiplicity), so it can be
factored into linear factors. This does indeed happen once you get to complex
numbers (the so-called ``Fundamental Theorem of Algebra''), but the road there
is bumpy and non-algebraic (at the very least, you need continuity to prove
the ``Fundamental Theorem of Algebra''). So algebraists have wondered whether
there is a cheaper way to buy roots for their polynomials -- without having to
pay the price of analysis. (The question became even more relevant when they
started working over arbitrary fields and even commutative rings -- in a
sense, ``alternative number systems'' in which analysis won't help you.)

The answer is ``yes'', and we will eventually see how. But for now, let me
focus on a simple problem that is already interesting if one works inside the
real numbers.
\end{noncompile}

A real number $z$ is said to be \textit{algebraic} if there exists a nonzero
polynomial $P$ with rational coefficients such that $P\left(  z \right)  = 0$.
In other words, a real number $z$ is algebraic if and only if it is a root of
a nonzero polynomial with rational coefficients.

(If you know the complex numbers, you can replace \textquotedblleft
real\textquotedblright\ by \textquotedblleft complex\textquotedblright\ in
this definition; but we shall only see real numbers in this little
motivational section.)

Examples:

\begin{itemize}
\item Each rational number $a$ is algebraic (being a root of the nonzero
polynomial $x-a$ with rational coefficients).

\item The number $\sqrt{2}$ is algebraic (being a root of the nonzero
polynomial $x^{2}-2$).

\item The number $\sqrt[3]{5}$ is algebraic (being a root of $x^{3}-5$).

\item All the roots of the polynomial $f\left(  x \right)  := \dfrac{3}%
{2}x^{4}+17x^{3}-12x+\dfrac{9}{4}$ (whatever they are) are algebraic. \newline
Speaking of these roots, what are they? Using a computer, one can show that
this polynomial $f\left(  x \right)  $ has $4$ real roots ($-11.269\ldots,
-0.960\ldots, 0.198\ldots, 0.697\ldots$), which can be written as complicated
expressions with radicals (i.e., $\sqrt[k]{}$ signs), though complex numbers
appear in these expressions (despite the roots being real!). All this does not
matter to the fact that they are algebraic :)

\item All the roots of the polynomial $g\left(  x \right)  := x^{7} - x^{5} +
1$ are algebraic. \newline This polynomial has only one real root. This root
cannot be written as an expression with radicals (as can be proven using
\href{https://en.wikipedia.org/wiki/Galois_theory}{Galois theory} -- indeed,
the discovery of this theory greatly motivated the development of abstract
algebra).
%(Nor can the remaining $6$ complex roots be.)
Nevertheless, it is algebraic, by definition. (The same holds for the
remaining $6$ complex roots of $g$ -- we are working with real numbers here
only for the sake of familiarity.)

\item The most famous number that is not algebraic is $\pi$. This is a famous
result of Lindemann, but it belongs to analysis, not to algebra, because $\pi$
is not defined algebraically in the first place (it is defined as the length
of a curve or as an area of a curved region -- but either of these definitions
boils down to a limit of a sequence).

\item The second most famous number that is not algebraic is
\href{https://en.wikipedia.org/wiki/E_(mathematical_constant)}{Euler's number
$e$} (the basis of the natural logarithm). Again, analysis is needed to define
$e$, and thus also to prove its non-algebraicity.
\end{itemize}

Numbers that are not algebraic are called
\href{https://en.wikipedia.org/wiki/Transcendental_number}{\textit{transcendental}%
}. We shall not study them much, since most of them do not come from algebra.
Instead, we shall try our hands at the following question:

\begin{question}
\label{quest.intro.algnum.1} \textbf{(a)} Is the sum of two (or, more
generally, finitely many) algebraic numbers always algebraic?

\textbf{(b)} What if we replace ``sum'' by ``difference'' or ``product''?
\end{question}

Let me motivate why this is a natural question to ask. The sum of two integers
is still an integer; the sum of two rational numbers is still a rational
number. These facts are fundamental; without them we could hardly work with
integers and rational numbers. If a similar fact would not hold for algebraic
numbers, it would mean that the algebraic numbers are not a good ``number
system'' to work in; on a practical level, it would mean that (e.g.) if we
defined a function on the set of all algebraic numbers, then we could not plug
a sum of algebraic numbers into it.

\begin{proof}
[Attempts at answering Question~\ref{quest.intro.algnum.1} \textbf{(a)}.]Let
us try a particularly simple example of a sum of two algebraic numbers: Let
$w$ be $\sqrt{2} + \sqrt{3}$. Is $w$ algebraic?

To answer this question affirmatively, we need to find a nonzero polynomial
$f\left(  x \right)  $ with rational coefficients that has $w$ as a root.

Just looking at the equality $w = \sqrt{2} + \sqrt{3}$, we cannot directly
eyeball such an $f$. The problem, in a sense, is that there are too many
(namely, two) square roots in this equality.

However, if we square this equality, then we obtain
\[
w^{2}=\left(  \sqrt{2}+\sqrt{3}\right)  ^{2}=2+2\sqrt{2}\cdot\sqrt{3}+3
=5+2\sqrt{6},
\]
which is an equality with only one square root (a sign of progress).
Subtracting $5$ from this equality (in order to ``isolate'' this remaining
square root), we obtain $w^{2}-5=2\sqrt{6}$. If we now square this equality,
then we obtain $\left(  w^{2}-5\right)  ^{2}=\left(  2\sqrt{6}\right)
^{2}=24$. At this point all square roots are gone, and we are left with an
equality that contains rational numbers and $w$ only! We can further rewrite
it as $\left(  w^{2} - 5 \right)  ^{2} - 24 = 0$. Thus, $w$ is a root of the
polynomial $f\left(  x \right)  := \left(  x^{2}-5\right)  ^{2}-24 =
x^{4}-10x^{2}+1$. This means that $w$ is algebraic (since $f$ is nonzero).

Let us try a more complicated example: Let $z$ be the number $\sqrt
{2}+\sqrt[3]{2}$. Is $z$ algebraic? The squaring trick no longer works, since
squaring $\sqrt{2}+\sqrt[3]{2}$ does not reduce the number of radicals (= root
signs). Let's instead try rewriting $z=\sqrt{2}+\sqrt[3]{2}$ as $z-\sqrt
{2}=\sqrt[3]{2}$. Cubing this equality, we obtain $\left(  z-\sqrt{2}\right)
^{3}=2$. In view of
\[
\left(  z-\sqrt{2}\right)  ^{3}=z^{3}-3z^{2}\sqrt{2}+3z\left(  \sqrt
{2}\right)  ^{2}-\left(  \sqrt{2}\right)  ^{3}%
\]
(this is a particular case of the identity $\left(  a-b\right)  ^{3}%
=a^{3}-3a^{2}b+3ab^{2}-b^{3}$, which is one form of the Binomial Theorem for
exponent $3$), this rewrites a
\[
z^{3}-3z^{2}\sqrt{2}+3z\left(  \sqrt{2}\right)  ^{2}-\left(  \sqrt{2}\right)
^{3}=2.
\]
This simplifies to%
\[
z^{3}-3\sqrt{2}z^{2}+6z-2\sqrt{2}=2.
\]
Let us transform this inequality in such a way that all terms with a $\sqrt
{2}$ in them end up on the right hand side while all the remaining terms end
up on the left. We thus obtain
\[
z^{3}+6z-2=\sqrt{2}\left(  3z^{2}+2\right)  .
\]
Now, squaring this equality yields
\[
\left(  z^{3}+6z-2\right)  ^{2}=2\left(  3z^{2}+2\right)  ^{2}.
\]
Hence, $z$ is a root of the polynomial
\[
g\left(  x\right)  :=\left(  x^{3}+6x-2\right)  ^{2}-2\left(  3x^{2}+2\right)
^{2}=x^{6}-6x^{4}-4x^{3}+12x^{2}-24x-4.
\]
This is a nonzero polynomial with rational coefficients; hence, $z$ is algebraic.

We thus have verified that the sum of two algebraic numbers is algebraic in
two cases. What about more complicated cases, such as
\[
\sqrt{2}+\sqrt{3}+\sqrt[7]{11}\text{ ?}%
\]
This is a sum of two algebraic numbers (since we already know that $\sqrt
{2}+\sqrt{3}=w$ is algebraic). Is it algebraic? Neither of our above two
methods properly works here; do we have to come up with new ad-hoc tricks?
\end{proof}

\begin{center}
\textbf{2019-01-25 lecture}
\end{center}

\subsection{Motivation: Shamir's Secret Sharing Scheme}

\subsubsection{The problem}

Adi Shamir is one of the founders of modern mathematical cryptography (famous
in particular for \href{https://en.wikipedia.org/wiki/RSA_(cryptosystem)}{the
RSA cryptosystem}, see later).

Shamir's Secret Sharing Scheme is a way in which a secret $\mathbf{a}$ (a
piece of data -- e.g., nuclear launch codes) can be distributed among $n$
people in such a way that

\begin{itemize}
\item any $k$ of them can (if they come together) reconstruct it uniquely, but

\item any $k-1$ of them (if they come together) cannot gain \textbf{any}
insight about it (i.e., not only cannot they reconstruct it, but they cannot
even tell that some values are more likely than others to be $\mathbf{a}$).
\end{itemize}

Here $n$ and $k$ are fixed positive integers.

Understanding this scheme completely will require some abstract algebra, but
we can already start thinking about the problem and get reasonably far.

So we have $n$ people $1,2,\ldots,n$, a positive integer $k\in\left\{
1,2,\ldots,n\right\}  $ and a secret piece of data $\mathbf{a}$. We assume
that this data $\mathbf{a}$ is encoded as a \textit{bitstring} -- i.e., a
finite sequence of bits. A \textit{bit} is an element of the set $\left\{
0,1\right\}  $. Thus, examples of bitstrings are $\left(  0,1,1,0\right)  $
and $\left(  1,0\right)  $ and $\left(  1,1,0,1,0,0,0\right)  $ as well as the
empty sequence $\left(  {}\right)  $. When writing bitstring, we shall usually
omit both the commas and the parentheses; thus, e.g., the bitstring $\left(
1,1,0,1,0,0,0\right)  $ will become $1101000$. Make sure you don't mistake it
for a number. Our goal is to give each of the $n$ people $1,2,\ldots,n$ some
bitstring in such a way that:

\begin{itemize}
\item \textit{Requirement 1:} Any $k$ of the $n$ people can (if they come
together) reconstruct $\mathbf{a}$ uniquely.

\item \textit{Requirement 2:} Any $k-1$ of the $n$ people are unable to gain
any insight about $\mathbf{a}$ (even if they collaborate).
\end{itemize}

We denote the bitstrings given to the people $1,2,\ldots,n$ by $\mathbf{a}%
_{1},\mathbf{a}_{2},\ldots,\mathbf{a}_{n}$, respectively.

We assume that the length of our secret bitstring $\mathbf{a}$ is known in
advance to all parties; i.e., it is not a secret. Thus, when we say
\textquotedblleft$k-1$ persons cannot gain any insight about $\mathbf{a}%
$\textquotedblright, we do not mean that they don't know the length; and when
we say \textquotedblleft some values are more likely than others to be
$\mathbf{a}$\textquotedblright, we only mean values that fit this length.

\subsubsection{The $k=1$ case}

One simple special case of our problem is when $k=1$. In this case, it
suffices to give each of the $n$ people the full secret $\mathbf{a}$ (that is,
we set $\mathbf{a}_{i}=\mathbf{a}$ for all $i$). Then, Requirement 1 is
satisfied (since any $1$ of the $n$ people already knows $\mathbf{a}$), while
Requirement 2 is satisfied as well ($0$ people know nothing).

\subsubsection{The $k=n$ case: what doesn't work}

Let us now consider the case when $k=n$. This case will not help us solve the
general problem, but it will show some ideas that we will encounter again and
again in abstract algebra.

We want to ensure that all $n$ people needed to reconstruct the secret
$\mathbf{a}$, while any $n-1$ of them will be completely clueless.

It sounds reasonable to split $\mathbf{a}$ into $n$ parts, and give each
person one of these parts\footnote{assuming that $\mathbf{a}$ is long enough
for that} (i.e., we let $\mathbf{a}_{i}$ be the $i$-th part of $\mathbf{a}$
for each $i\in\left\{  1,2,\ldots,n\right\}  $). This method satisfies
Requirement 1 (indeed, all $n$ people together can reconstruct $\mathbf{a}$
simply by fusing the $n$ parts back together), but fails Requirement 2
(indeed, any $n-1$ people know $n-1$ parts of the secret $\mathbf{a}$, which
is a far from being clueless about $\mathbf{a}$). So this method doesn't work.
It is not that easy.

\subsubsection{The $\operatorname*{XOR}$ operations}

One way to solve the $k=n$ case is using the $\operatorname*{XOR}$ operation.

Let us first define some basic language. A \textit{binary operation} on a set
$S$ is (informally speaking) a function that takes two elements of $S$ and
assigns a new element of $S$ to them. More formally:

\begin{definition}
\label{def.intro.binop}A \textit{binary operation} on a set $S$ is a map $f$
from $S\times S$ to $S$. When $f$ is a binary operation on $S$ and $a$ and $b$
are two elements of $S$, we shall write $afb$ for the value $f\left(
a,b\right)  $.
\end{definition}

\begin{example}
Addition, subtraction and multiplication of integers are three binary
operations on the set $\mathbb{Q}$ (the set of all rational numbers). For
example, addition is the map from $\mathbb{Q}\times\mathbb{Q}$ to $\mathbb{Q}$
that sends each pair $\left(  a,b\right)  \in\mathbb{Q}\times\mathbb{Q}$ to
$a+b$.

Division is not a binary operation on the set $\mathbb{Q}$. Indeed, if it was,
then it would send the pair $\left(  1,0\right)  $ to some integer called
$1/0$; but there is no such integer.

There are myriad more complicated binary operations around waiting for someone
to name them. For example, you could define a binary operation $\smiley{}$ on
the set $\mathbb{Q}$ by $a\smiley{}b=\dfrac{a-b}{1+a^{2}+b^{2}}$. Indeed, you
can do this because $1+a^{2}+b^{2}$ is always nonzero when $a,b\in\mathbb{Q}$
(after all, squares are nonnegative, so that $1+\underbrace{a^{2}}_{\geq
0}+\underbrace{b^{2}}_{\geq0}\geq1>0$). I am not saying that you should...
\end{example}

Now, we define some specific binary operations on the set $\left\{
0,1\right\}  $ of all bits, and on the set $\left\{  0,1\right\}  ^{n}$ of all
length-$n$ bitstrings (for a given $n$).

\begin{definition}
We define a binary operation $\operatorname*{XOR}$ on the set $\left\{
0,1\right\}  $ by setting%
\begin{align*}
0\operatorname*{XOR}0  &  =0,\\
0\operatorname*{XOR}1  &  =1,\\
1\operatorname*{XOR}0  &  =1,\\
1\operatorname*{XOR}1  &  =0.
\end{align*}
This is a valid definition, because there are only four pairs $\left(
a,b\right)  \in\left\{  0,1\right\}  \times\left\{  0,1\right\}  $, and we
have just defined $a\operatorname*{XOR}b$ for each of these four options. We
can also rewrite this definition as follows:%
\[
a\operatorname*{XOR}b=%
\begin{cases}
1, & \text{if }a\neq b;\\
0, & \text{if }a=b
\end{cases}
=%
\begin{cases}
1, & \text{if \textbf{exactly} one of }a\text{ and }b\text{ is }1;\\
0, & \text{otherwise.}%
\end{cases}
\]
For lack of a better name, we refer to $a\operatorname*{XOR}b$ as the
\textquotedblleft XOR of $a$ and $b$\textquotedblright.
\end{definition}

The name \textquotedblleft$\operatorname*{XOR}$\textquotedblright\ is short
for \textquotedblleft exclusive or\textquotedblright. In fact, if you identify
bits with boolean truth values (so the bit $0$ stands for \textquotedblleft
False\textquotedblright\ and the bit $1$ stands for \textquotedblleft
True\textquotedblright), then $a\operatorname*{XOR}b$ is precisely the truth
value for \textquotedblleft exactly one of $a$ and $b$ is
True\textquotedblright, which is also known as \textquotedblleft$a$
exclusive-or $b$\textquotedblright.

\begin{definition}
Let $m$ be a nonnegative integer. We define a binary operation
$\operatorname*{XOR}$ on the set $\left\{  0,1\right\}  ^{m}$ (this is the set
of all length-$m$ bitstrings) by%
\[
\left(  a_{1},a_{2},\ldots,a_{m}\right)  \operatorname*{XOR}\left(
b_{1},b_{2},\ldots,b_{m}\right)  =\left(  a_{1}\operatorname*{XOR}b_{1}%
,a_{2}\operatorname*{XOR}b_{2},\ldots,a_{m}\operatorname*{XOR}b_{m}\right)  .
\]
In other words, if $\mathbf{a}$ and $\mathbf{b}$ are two length-$m$
bitstrings, then $\mathbf{a}\operatorname*{XOR}\mathbf{b}$ is obtained by
taking the XOR of each entry of $\mathbf{a}$ with the corresponding entry of
$\mathbf{b}$, and packing these $m$ XORs into a new length-$m$ bitstring.
\end{definition}

For example,%
\begin{align*}
\left(  1001\right)  \operatorname*{XOR}\left(  1100\right)   &  =0101;\\
\left(  11011\right)  \operatorname*{XOR}\left(  10101\right)   &  =01110;\\
\left(  11010\right)  \operatorname*{XOR}\left(  01011\right)   &  =10001;\\
\left(  1\right)  \operatorname*{XOR}\left(  0\right)   &  =1;\\
\left(  {}\right)  \operatorname*{XOR}\left(  {}\right)   &  =\left(
{}\right)  .
\end{align*}


Note that if $\mathbf{a}$ and $\mathbf{b}$ are two length-$m$ bitstrings, then
the $0$'s in the bitstring $\mathbf{a}\operatorname*{XOR}\mathbf{b}$ are at
the positions where $\mathbf{a}$ and $\mathbf{b}$ have equal entries, and the
$1$'s in $\mathbf{a}\operatorname*{XOR}\mathbf{b}$ are at the positions where
$\mathbf{a}$ and $\mathbf{b}$ have different entries. Thus, $\mathbf{a}%
\operatorname*{XOR}\mathbf{b}$ essentially pinpoints the differences between
$\mathbf{a}$ and $\mathbf{b}$.

We observe the following simple properties of these operations
$\operatorname*{XOR}$ on bits and on bitstrings\footnote{As a mnemonic, we
shall try to use boldfaced letters like $\mathbf{a}$ and $\mathbf{b}$ for
bitstrings and regular italic letters like $a$ and $b$ for single bits.}:

\begin{itemize}
\item We have $a\operatorname*{XOR}0=a$ for any bit $a$. (This can be
trivially checked by considering both possibilities for $a$.)

\item Thus, $\mathbf{a}\operatorname*{XOR}\mathbf{0}=\mathbf{a}$ for any
bitstring $\mathbf{a}$, where $\mathbf{0}$ denotes the bitstring
$00\cdots0=\left(  0,0,\ldots,0\right)  $ (of appropriate length -- i.e., of
the same length as $\mathbf{a}$).

\item We have $a\operatorname*{XOR}a=0$ for any bit $a$. (This can be
trivially checked by considering both possibilities for $a$.)

\item Thus, $\mathbf{a}\operatorname*{XOR}\mathbf{a}=\mathbf{0}$ for any
bitstring $\mathbf{a}$. We shall refer to this as the
\textit{self-cancellation law}.

\item We have $a\operatorname*{XOR}b=b\operatorname*{XOR}a$ for any bits
$a,b$. (Again, this is easy to check by going through all four options for $a$
and $b$.)

\item Thus, $\mathbf{a}\operatorname*{XOR}\mathbf{b}=\mathbf{b}%
\operatorname*{XOR}\mathbf{a}$ for any bitstrings $\mathbf{a},\mathbf{b}$.

\item We have $a\operatorname*{XOR}\left(  b\operatorname*{XOR}c\right)
=\left(  a\operatorname*{XOR}b\right)  \operatorname*{XOR}c$ for any bits
$a,b,c$. (Again, this is easy to check by going through all eight options for
$a,b,c$.)

\item Thus, $\mathbf{a}\operatorname*{XOR}\left(  \mathbf{b}%
\operatorname*{XOR}\mathbf{c}\right)  =\left(  \mathbf{a}\operatorname*{XOR}%
\mathbf{b}\right)  \operatorname*{XOR}\mathbf{c}$ for any bitstrings
$\mathbf{a},\mathbf{b},\mathbf{c}$.

\item Thus, for any bitstrings $\mathbf{a}$ and $\mathbf{b}$, we have%
\[
\left(  \mathbf{a}\operatorname*{XOR}\mathbf{b}\right)  \operatorname*{XOR}%
\mathbf{b}=\mathbf{a}\operatorname*{XOR}\underbrace{\left(  \mathbf{b}%
\operatorname*{XOR}\mathbf{b}\right)  }_{\substack{=\mathbf{0}\\\text{(by the
self-cancellation law)}}}=\mathbf{a}\operatorname*{XOR}\mathbf{0}=\mathbf{a}.
\]


This observation gives rise to a primitive cryptosystem (known as a
\textit{\href{https://en.wikipedia.org/wiki/One-time_pad}{\textit{one-time
pad}}}): If you have a secret bitstring $\mathbf{a}$ that you want to encrypt,
and another secret bitstring $\mathbf{b}$ that can be used as a key, then you
can encrypt\ $\mathbf{a}$ by XORing it with $\mathbf{b}$ (that is, you
transform it into $\mathbf{a}\operatorname*{XOR}\mathbf{b}$). Then, you can
decrypt it again by XORing it with $\mathbf{b}$ again; indeed, if you do this,
you will obtain $\left(  \mathbf{a}\operatorname*{XOR}\mathbf{b}\right)
\operatorname*{XOR}\mathbf{b}=\mathbf{a}$. This is a highly safe cryptosystem
as long as you can safely communicate the key $\mathbf{b}$ to whomever needs
to be able to decrypt (or encrypt) your secrets, and as long as you are able
to generate uniformly random keys $\mathbf{b}$ of sufficient length. Its only
weakness is its impracticality (in many situations): If the secret you want to
encrypt is long (say, a whole book), your key will need to be equally long.
Even storing such keys can become difficult.
\end{itemize}

We shall refer to the properties $a\operatorname*{XOR}b=b\operatorname*{XOR}a$
and $\mathbf{a}\operatorname*{XOR}\mathbf{b}=\mathbf{b}\operatorname*{XOR}%
\mathbf{a}$ as \textit{laws of commutativity}, and we shall refer to the
properties $a\operatorname*{XOR}\left(  b\operatorname*{XOR}c\right)  =\left(
a\operatorname*{XOR}b\right)  \operatorname*{XOR}c$ and $\mathbf{a}%
\operatorname*{XOR}\left(  \mathbf{b}\operatorname*{XOR}\mathbf{c}\right)
=\left(  \mathbf{a}\operatorname*{XOR}\mathbf{b}\right)  \operatorname*{XOR}%
\mathbf{c}$ as \textit{laws of associativity}. These are, of course, similar
to well-known facts like $\alpha+\beta=\beta+\alpha$ and $\alpha+\left(
\beta+\gamma\right)  =\left(  \alpha+\beta\right)  +\gamma$ for numbers
$\alpha,\beta,\gamma$ (which is why we are giving them the same names). This
similarity is not coincidental. Just as for addition or multiplication of
numbers, these laws lead to a notion of \textquotedblleft
XOR-products\textquotedblright:

\begin{proposition}
\label{prop.intro.xor.prodm}Let $m$ be a positive integer. Let $\mathbf{a}%
_{1},\mathbf{a}_{2},\ldots,\mathbf{a}_{m}$ be $m$ bitstrings. Then, the
\textquotedblleft$\operatorname*{XOR}$-product\textquotedblright\ expression%
\[
\mathbf{a}_{1}\operatorname*{XOR}\mathbf{a}_{2}\operatorname*{XOR}%
\mathbf{a}_{3}\operatorname*{XOR}\cdots\operatorname*{XOR}\mathbf{a}_{m}%
\]
is well-defined, in the sense that it does not depend on the parenthesization.
\end{proposition}

What do we mean by \textquotedblleft parenthesization\textquotedblright? To
clarify things, let us set $m=4$. In this case, we want to make sense of the
expression $\mathbf{a}_{1}\operatorname*{XOR}\mathbf{a}_{2}\operatorname*{XOR}%
\mathbf{a}_{3}\operatorname*{XOR}\mathbf{a}_{4}$. This expression does not
make sense a priori, since it is a $\operatorname*{XOR}$ of \textbf{four}
bitstrings, whereas we have defined only the $\operatorname*{XOR}$ of
\textbf{two} bitstrings. But there are five ways to put parentheses around
some of its sub-expressions such that the expression becomes meaningful:
\begin{align*}
&  \left(  \mathbf{a}_{1}\operatorname*{XOR}\mathbf{a}_{2}\right)
\operatorname*{XOR}\left(  \mathbf{a}_{3}\operatorname*{XOR}\mathbf{a}%
_{4}\right)  ,\\
&  \left(  \left(  \mathbf{a}_{1}\operatorname*{XOR}\mathbf{a}_{2}\right)
\operatorname*{XOR}\mathbf{a}_{3}\right)  \operatorname*{XOR}\mathbf{a}_{4},\\
&  \mathbf{a}_{1}\operatorname*{XOR}\left(  \left(  \mathbf{a}_{2}%
\operatorname*{XOR}\mathbf{a}_{3}\right)  \operatorname*{XOR}\mathbf{a}%
_{4}\right)  ,\\
&  \mathbf{a}_{1}\operatorname*{XOR}\left(  \mathbf{a}_{2}\operatorname*{XOR}%
\left(  \mathbf{a}_{3}\operatorname*{XOR}\mathbf{a}_{4}\right)  \right)  ,\\
&  \left(  \mathbf{a}_{1}\operatorname*{XOR}\left(  \mathbf{a}_{2}%
\operatorname*{XOR}\mathbf{a}_{3}\right)  \right)  \operatorname*{XOR}%
\mathbf{a}_{4}.
\end{align*}
Each of these five parenthesizations (= placements of parentheses) turns our
expression $\mathbf{a}_{1}\operatorname*{XOR}\mathbf{a}_{2}\operatorname*{XOR}%
\mathbf{a}_{3}\operatorname*{XOR}\mathbf{a}_{4}$ into a combination of
$\operatorname*{XOR}$'s of \textbf{two} bitstrings each, and thus gives it
meaning. The question is: Do these five parenthesizations give it the
\textbf{same} meaning?

Well, let us calculate:%
\begin{align*}
&  \left(  \mathbf{a}_{1}\operatorname*{XOR}\mathbf{a}_{2}\right)
\operatorname*{XOR}\left(  \mathbf{a}_{3}\operatorname*{XOR}\mathbf{a}%
_{4}\right) \\
&  =\mathbf{a}_{1}\operatorname*{XOR}\underbrace{\left(  \mathbf{a}%
_{2}\operatorname*{XOR}\left(  \mathbf{a}_{3}\operatorname*{XOR}\mathbf{a}%
_{4}\right)  \right)  }_{=\left(  \mathbf{a}_{2}\operatorname*{XOR}%
\mathbf{a}_{3}\right)  \operatorname*{XOR}\mathbf{a}_{4}}\\
&  =\mathbf{a}_{1}\operatorname*{XOR}\left(  \left(  \mathbf{a}_{2}%
\operatorname*{XOR}\mathbf{a}_{3}\right)  \operatorname*{XOR}\mathbf{a}%
_{4}\right) \\
&  =\underbrace{\left(  \mathbf{a}_{1}\operatorname*{XOR}\left(
\mathbf{a}_{2}\operatorname*{XOR}\mathbf{a}_{3}\right)  \right)  }_{=\left(
\mathbf{a}_{1}\operatorname*{XOR}\mathbf{a}_{2}\right)  \operatorname*{XOR}%
\mathbf{a}_{3}}\operatorname*{XOR}\mathbf{a}_{4}\\
&  =\left(  \left(  \mathbf{a}_{1}\operatorname*{XOR}\mathbf{a}_{2}\right)
\operatorname*{XOR}\mathbf{a}_{3}\right)  \operatorname*{XOR}\mathbf{a}_{4},
\end{align*}
where we used the law of associativity in each step. This shows that our five
parenthesizations yield the same result. Thus, they all give our
\textquotedblleft$\operatorname*{XOR}$-product\textquotedblright\ expression
$\mathbf{a}_{1}\operatorname*{XOR}\mathbf{a}_{2}\operatorname*{XOR}%
\mathbf{a}_{3}\operatorname*{XOR}\mathbf{a}_{4}$ the same meaning; so we can
say that this expression is well-defined. This confirms Proposition
\ref{prop.intro.xor.prodm} for $m=4$.

Of course, proving Proposition \ref{prop.intro.xor.prodm} is less simple. Such
a proof will appear in Exercise 4 on homework set \#0.

\subsubsection{The $k=n$ case: an answer}

Let us now return to our problem. We have $n$ persons $1,2,\ldots,n$ and a
secret $\mathbf{a}$ (encoded as a bitstring). We want to give each person $i$
some bitstring $\mathbf{a}_{i}$ such that only all $n$ of them can recover
$\mathbf{a}$ but any $n-1$ of them cannot gain any insight about $\mathbf{a}$.

We let $\mathbf{a}_{1},\mathbf{a}_{2},\ldots,\mathbf{a}_{n-1}$ be $n-1$
\textbf{uniformly} random bitstrings of the same length as $\mathbf{a}$.
(Think of them as random gibberish.) Set%
\[
\mathbf{a}_{n}=\mathbf{a}\operatorname*{XOR}\mathbf{a}_{1}\operatorname*{XOR}%
\mathbf{a}_{2}\operatorname*{XOR}\cdots\operatorname*{XOR}\mathbf{a}_{n-1}.
\]
(This expression makes sense because of Proposition \ref{prop.intro.xor.prodm}.)

Then,%
\begin{align*}
&  \mathbf{a}_{n}\operatorname*{XOR}\mathbf{a}_{n-1}\operatorname*{XOR}%
\mathbf{a}_{n-2}\operatorname*{XOR}\cdots\operatorname*{XOR}\mathbf{a}_{1}\\
&  =\left(  \mathbf{a}\operatorname*{XOR}\mathbf{a}_{1}\operatorname*{XOR}%
\mathbf{a}_{2}\operatorname*{XOR}\cdots\operatorname*{XOR}\mathbf{a}%
_{n-1}\right)  \operatorname*{XOR}\mathbf{a}_{n-1}\operatorname*{XOR}%
\mathbf{a}_{n-2}\operatorname*{XOR}\cdots\operatorname*{XOR}\mathbf{a}_{1}\\
&  =\mathbf{a}\operatorname*{XOR}\mathbf{a}_{1}\operatorname*{XOR}%
\mathbf{a}_{2}\operatorname*{XOR}\cdots\operatorname*{XOR}%
\underbrace{\mathbf{a}_{n-1}\operatorname*{XOR}\mathbf{a}_{n-1}}_{=\mathbf{0}%
}\operatorname*{XOR}\mathbf{a}_{n-2}\operatorname*{XOR}\cdots
\operatorname*{XOR}\mathbf{a}_{1}\\
&  =\mathbf{a}\operatorname*{XOR}\mathbf{a}_{1}\operatorname*{XOR}%
\mathbf{a}_{2}\operatorname*{XOR}\cdots\operatorname*{XOR}%
\underbrace{\mathbf{a}_{n-2}\operatorname*{XOR}\mathbf{0}}_{=\mathbf{a}_{n-2}%
}\operatorname*{XOR}\mathbf{a}_{n-2}\operatorname*{XOR}\cdots
\operatorname*{XOR}\mathbf{a}_{1}\\
&  =\mathbf{a}\operatorname*{XOR}\mathbf{a}_{1}\operatorname*{XOR}%
\mathbf{a}_{2}\operatorname*{XOR}\cdots\operatorname*{XOR}%
\underbrace{\mathbf{a}_{n-2}\operatorname*{XOR}\mathbf{a}_{n-2}}_{=\mathbf{0}%
}\operatorname*{XOR}\cdots\operatorname*{XOR}\mathbf{a}_{1}\\
&  =\cdots\\
&  =\mathbf{a}%
\end{align*}
(here, we have been unravelling the big $\operatorname*{XOR}$-product from the
middle on, by cancelling equal bitstrings using the self-cancellation law and
then removing the resulting $\mathbf{0}$ using the $\mathbf{a}%
\operatorname*{XOR}\mathbf{0}=\mathbf{a}$ law). Hence, the $n$ people together
can decrypt the secret $\mathbf{a}$.

Can $n-1$ people gain any insight about it? The $n-1$ people $1,2,\ldots,n-1$
certainly cannot, since all they know are the random bitstrings $\mathbf{a}%
_{1},\mathbf{a}_{2},\ldots,\mathbf{a}_{n-1}$. But the $n-1$ people
$2,3,\ldots,n$ cannot gain any insight about $\mathbf{a}$ either: In fact, all
they know are the random bitstrings $\mathbf{a}_{2},\mathbf{a}_{3}%
,\ldots,\mathbf{a}_{n-1}$ and the bitstring%
\[
\mathbf{a}_{n}=\mathbf{a}\operatorname*{XOR}\mathbf{a}_{1}\operatorname*{XOR}%
\mathbf{a}_{2}\operatorname*{XOR}\cdots\operatorname*{XOR}\mathbf{a}_{n-1};
\]
therefore, all the information they have about $\mathbf{a}$ and $\mathbf{a}%
_{1}$ comes to them through $\mathbf{a}\operatorname*{XOR}\mathbf{a}_{1}$,
which says nothing about $\mathbf{a}$ as long as they know nothing about
$\mathbf{a}_{1}$. (We used a bit of handwaving in this argument, but then
again we never formally defined what it means to \textquotedblleft gain no
insight\textquotedblright; this is done in courses on cryptography and
information theory.) Similar arguments show that any other choice of $n-1$
persons remains equally clueless about $\mathbf{a}$. So we have solved the
problem in the case $k=n$.

\subsubsection{The $k=2$ case}

The next simple case is when $k=2$. So we want to ensure that any $2$ of our
$n$ people can together recover the secret, but no $1$ person can learn
anything about it alone.

A really nice approach was suggested by Nathan in class: We pick $n$ random
bitstrings $\mathbf{x}_{1},\mathbf{x}_{2},\ldots,\mathbf{x}_{n-1}$ of the same
length as $\mathbf{a}$. Set
\[
\mathbf{x}_{n}=\mathbf{a}\operatorname*{XOR}\mathbf{x}_{1}\operatorname*{XOR}%
\mathbf{x}_{2}\operatorname*{XOR}\cdots\operatorname*{XOR}\mathbf{x}_{n-1};
\]
thus, as in the $k=n$ case, we have%
\begin{equation}
\mathbf{x}_{n}\operatorname*{XOR}\mathbf{x}_{n-1}\operatorname*{XOR}%
\mathbf{x}_{n-2}\operatorname*{XOR}\cdots\operatorname*{XOR}\mathbf{x}%
_{1}=\mathbf{a}. \label{eq.intro.shamir.k=2.2}%
\end{equation}


Each person $i$ now receives the bitstring%
\[
\mathbf{a}_{i}=\mathbf{x}_{1}\mathbf{x}_{2}\cdots\mathbf{x}_{i-1}%
\mathbf{x}_{i+1}\mathbf{x}_{i+2}\cdots\mathbf{x}_{n},
\]
where the product stands for \textit{concatenation} (i.e., the bitstring
$\mathbf{a}_{i}$ is formed by writing down all of the bitstrings
$\mathbf{x}_{1},\mathbf{x}_{2},\ldots,\mathbf{x}_{n}$ one after the other but
skipping $\mathbf{x}_{i}$). Thus, each person $i$ can recover all the $n-1$
bitstrings $\mathbf{x}_{1},\mathbf{x}_{2},\ldots,\mathbf{x}_{i-1}%
,\mathbf{x}_{i+1},\mathbf{x}_{i+2},\ldots,\mathbf{x}_{n}$ (because their
lengths are the length of $\mathbf{a}$, which is known), but knows nothing
about $\mathbf{x}_{i}$ (his \textquotedblleft blind spot\textquotedblright).
Hence, $2$ people together can recover all the $n$ bitstrings $\mathbf{x}%
_{1},\mathbf{x}_{2},\ldots,\mathbf{x}_{n}$ and therefore recover the secret
$\mathbf{a}$ (by (\ref{eq.intro.shamir.k=2.2})). On the other hand, each
single person has no insight about $\mathbf{a}$ (this is proven similarly to
the $k=n$ case). So again, the problem is solved in this case.

\subsubsection{The $k=3$ case}

Now, let us come to the case when $k=3$. Now I think the usefulness of the
$\operatorname*{XOR}$ approach has come to its end: at least I don't know how
to make it work here. Instead, out of the blue, I will invoke something
completely different: polynomials (let's say with rational coefficients).

Recall a fact you might have heard in high school: A polynomial $p\left(
x\right)  =cx^{2}+bx+a$ of degree $\leq2$ is uniquely determined by any three
of its values. More precisely: If $u,v,w$ are three fixed distinct numbers,
then a polynomial $p\left(  x\right)  =cx^{2}+bx+a$ of degree $\leq2$ is
uniquely determined by the values $p\left(  u\right)  ,p\left(  v\right)
,p\left(  w\right)  $. We will put this to use now, and sort-of solve the problem.

Also recall that any bitstring of given length $N$ can be encoded as an
integer in $\left\{  0,1,\ldots,2^{N}-1\right\}  $; just read it as a number
in binary. More precisely, any bitstring $a_{N-1}a_{N-2}\cdots a_{0}$ of
length $N$ becomes the integer $a_{N-1}\cdot2^{N-1}+a_{N-2}\cdot2^{N-2}%
+\cdots+a_{0}\cdot2^{0}\in\left\{  0,1,\ldots,2^{N}-1\right\}  $. For example,
the bitstring $010110$ of length $6$ becomes the integer%
\[
0\cdot2^{5}+1\cdot2^{4}+0\cdot2^{3}+1\cdot2^{2}+1\cdot2^{1}+0\cdot2^{0}%
=22\in\left\{  0,1,\ldots,2^{6}-1\right\}  .
\]


Choose two \textbf{uniformly random} bitstrings $\mathbf{c}$ and $\mathbf{b}$
(of the same length as $\mathbf{a}$) and encode them as numbers $c$ and $b$
(as just explained). Encode the secret $\mathbf{a}$ as a number $a$ as well
(in the same way). Define the polynomial $p\left(  x\right)  =cx^{2}+bx+a$.
Reveal to each person $i\in\left\{  1,2,\ldots,n\right\}  $ the value
$p\left(  i\right)  $ -- or, rather, a bitstring that encodes it in binary --
as $\mathbf{a}_{i}$.

As we know, any three of the values $p\left(  i\right)  $ uniquely determine
the polynomial $p$. Thus, any three people can use their bitstrings
$\mathbf{a}_{i}$ to recover three values $p\left(  i\right)  $ and therefore
$p$ and therefore $a$ (as the constant term of $p$) and therefore $\mathbf{a}$
(by decoding $a$). So our method satisfies Requirement 1.

Now, let us see whether it satisfies Requirement 2. Any $2$ people can recover
two values $p\left(  i\right)  $, which generally do not determine $p$
uniquely. It is not hard to show that they do not even determine $a$ uniquely;
thus, they do not determine $\mathbf{a}$ uniquely. What's better: If you know
just two values of $p$, there are infinitely many possible choices for $p$,
and all of them have distinct constant terms (unless one of the two values you
know is $p\left(  0\right)  $, which of course pins down the constant term).
So we get infinitely many possible values for $a$, and thus infinitely many
possible values for $\mathbf{a}$. This means that our $2$ people don't gain
any insight about $\mathbf{a}$, right?

Not so fast! We cannot really have \textquotedblleft infinitely many possible
values for $\mathbf{a}$\textquotedblright, since $\mathbf{a}$ is bound to be a
bitstring of a given length -- there are only finitely many of those! You can
only get infinitely many possible values for $p$ if you forget how $p$ was
constructed (from $c$, $b$ and $a$) and pretend that $p$ is just a
\textquotedblleft uniformly random\textquotedblright\ polynomial (whatever
this means). But no one can force the $2$ people to do this; it is certainly
not in their interest! Here are some things they might do with this knowledge:

\begin{itemize}
\item Let $N$ be the length of $\mathbf{a}$ (which, as we said, is known).
Thus, $\mathbf{c}$ and $\mathbf{b}$ are bitstrings of length $N$, so that $c$
and $b$ are integers in $\left\{  0,1,\ldots,2^{N}-1\right\}  $. Assume that
one of the $2$ people is person $2$. Now, person $2$ knows $p\left(  2\right)
=c2^{2}+b2+a=4c+2b+a$, and thus knows whether $a$ is even or odd (because $a$
is even resp. odd if and only if $4c+2b+a$ is even resp. odd). This means she
knows the last bit of the secret $\mathbf{a}$. This is not \textquotedblleft
clueless\textquotedblright.

\item You might try to fix this by picking $c$ and $b$ to be uniformly random
rational numbers instead (rather than using uniformly random bitstrings
$\mathbf{c}$ and $\mathbf{b}$).

Unfortunately, there is no such thing as a \textquotedblleft uniformly random
rational number\textquotedblright\ (in the sense that, e.g., larger numbers
aren't less likely to be picked than smaller numbers). Any probability
distribution will make some numbers more likely than others, and this will
usually cause information about $\mathbf{a}$ to \textquotedblleft
leak\textquotedblright. For example, if $c$ and $b$ are chosen from the
interval $\left[  0,2^{N}-1\right]  $, then person $1$'s knowledge of
$p\left(  1\right)  =c1^{2}+b1+a=c+b+a$ will sometimes reveal to person $1$
that $a\geq0.5\cdot\left(  2^{N}-1\right)  $ (namely, this will happen when
$p\left(  1\right)  \geq2.5\cdot\left(  2^{N}-1\right)  $, which occasionally
happens). This, again, is nontrivial information about the secret $\mathbf{a}%
$, which a single person (or even two people) should not be having.
\end{itemize}

So we cannot make Requirement 2 hold, and the culprit is that there are too
many numbers (namely, infinitely many). What would help is a finite
\textquotedblleft number system\textquotedblright\ in which we can add,
subtract, multiply and divide (so that we can define polynomials over it, and
a polynomial of degree $\leq2$ is still uniquely determined by any $3$
values). Assuming that this \textquotedblleft number system\textquotedblright%
\ is large enough that we can encode bitstrings using \textquotedblleft
numbers\textquotedblright\ of this system (instead of integers), we can then
play the above game using this \textquotedblleft number
system\textquotedblright\ and obtain actually uniformly random numbers.

It turns out that such \textquotedblleft number systems\textquotedblright%
\ exist. They are called \textit{finite fields}, and we will construct them
later in this course.

Assuming that they can be constructed, we thus obtain a method of solving the
problem for $k=3$. A similar method works for arbitrary $k$, using polynomials
of degree $\leq k-1$. This is called \textit{Shamir's secret sharing scheme}.

\begin{center}
\textbf{2019-01-30 lecture (virtual)}
\end{center}

\section{Elementary number theory}

Let us now begin a systematic introduction to algebra. We start with studying
integers and their divisibility properties -- the beginnings of number theory.
Part of these will be used directly in what will follow; part of these will
inspire more general results and proofs.

\subsection{Notations}

\begin{definition}
Let $\mathbb{N}=\left\{  0,1,2,\ldots\right\}  $ be the set of
\textbf{nonnegative} integers.

Let $\mathbb{P}=\left\{  1,2,3,\ldots\right\}  $ be the set of
\textbf{positive} integers.

Let $\mathbb{Z}=\left\{  \ldots,-1,0,1,\ldots\right\}  $ be the set of integers.

Let $\mathbb{Q}$ be the set of rational numbers.

Let $\mathbb{R}$ be the set of real numbers.
\end{definition}

Be careful with the notation $\mathbb{N}$: While I use it for $\left\{
0,1,2,\ldots\right\}  $, various other authors use it for $\left\{
1,2,3,\ldots\right\}  $ instead. There is no consensus in sight on what
$\mathbb{N}$ should mean.

Same holds for the word \textquotedblleft natural number\textquotedblright%
\ (which I will avoid): It means \textquotedblleft element of $\mathbb{N}%
$\textquotedblright, so again its ultimate meaning depends on the author.

\subsection{Divisibility}

We now go through the basics of divisibility of integers.

\begin{definition}
\label{def.ent.div.div}Let $a$ and $b$ be two integers. We say that $a\mid b$
(or \textquotedblleft$a$ \textit{divides} $b$\textquotedblright\ or
\textquotedblleft$b$ is \textit{divisible by }$a$\textquotedblright\ or
\textquotedblleft$b$ is a \textit{multiple} of $a$\textquotedblright) if there
exists an integer $c$ such that $b=ac$.

We furthermore say that $a\nmid b$ if $a$ does not divide $b$.
\end{definition}

Some authors define the \textquotedblleft divisibility\textquotedblright%
\ relation a bit differently, in that they forbid $a=0$. From the viewpoint of
abstract algebra, this feels like an unnecessary exception, so we don't follow them.

\begin{example}
\label{exa.ent.div.triv}\textbf{(a)} We have $4\mid12$, since $12=4\cdot3$.

\textbf{(b)} We have $a\mid0$ for any $a\in\mathbb{Z}$, since $0=a\cdot0$.

\textbf{(c)} An integer $b$ satisfies $0\mid b$ only when $b=0$, since $0\mid
b$ implies $b=0c=0$ (for some $c\in\mathbb{Z}$).

\textbf{(d)} We have $a\mid a$ for any $a\in\mathbb{Z}$, since $a=a\cdot1$.

\textbf{(e)} We have $1\mid b$ for each $b\in\mathbb{Z}$, since $b=1\cdot b$.
\end{example}

I apologize in advance for the next proposition, in which vertical bars stand
both for the \textquotedblleft divides\textquotedblright\ relation and for the
absolute value of a number. Unfortunately, both of these uses are standard
notation. Confusion is possible, but hopefully will not happen
much\footnote{Unfortunately, the use of vertical bars for absolute values
alone suffices to generate confusion! Just think of the meaning of
\textquotedblleft$\left\vert a\right\vert b\left\vert c\right\vert
$\textquotedblright\ when $a$, $b$ and $c$ are three numbers. Does it stand
for \textquotedblleft$\left(  \left\vert a\right\vert \right)  \cdot
b\cdot\left(  \left\vert c\right\vert \right)  $\textquotedblright\ (where I
am using parentheses to make the ambiguity disappear) or for \textquotedblleft%
$\left\vert \left(  a\cdot\left\vert b\right\vert \cdot c\right)  \right\vert
$\textquotedblright? If you see any expressions in my notes that allow for
more than one meaningful interpretation, please let me know!}.

\begin{proposition}
\label{prop.ent.div.1}Let $a$ and $b$ be two integers.

\textbf{(a)} We have $a\mid b$ if and only if $\left\vert a\right\vert
\mid\left\vert b\right\vert $. (Here, \textquotedblleft$\left\vert
a\right\vert \mid\left\vert b\right\vert $\textquotedblright\ means
\textquotedblleft$\left\vert a\right\vert $ divides $\left\vert b\right\vert
$\textquotedblright.)

\textbf{(b)} If $a\mid b$ and $b\neq0$, then $\left\vert a\right\vert
\leq\left\vert b\right\vert $.

\textbf{(c)} Assume that $a\neq0$. Then, $a\mid b$ if and only if $\dfrac
{b}{a}\in\mathbb{Z}$.
\end{proposition}

Before we prove this proposition, let us recall a well-known fact: We have
\begin{equation}
\left\vert xy\right\vert =\left\vert x\right\vert \cdot\left\vert y\right\vert
\label{eq.ent.div.abs(xy)}%
\end{equation}
for any two integers\footnote{or real numbers} $x$ and $y$. (This can be
easily proven by case distinction: $x$ is either nonnegative or negative, and
so is $y$.)

\begin{proof}
[Proof of Proposition \ref{prop.ent.div.1}.]\textbf{(a)} $\Longrightarrow
:$\footnote{If you are unfamiliar with the shorthand notation
\textquotedblleft$\Longrightarrow:$\textquotedblright, let me explain it. Our
goal is to prove that $a\mid b$ if and only if $\left\vert a\right\vert
\mid\left\vert b\right\vert $. In other words, we need to prove the
equivalence $\left(  a\mid b\right)  \Longleftrightarrow\left(  \left\vert
a\right\vert \mid\left\vert b\right\vert \right)  $. In order to prove this
equivalence, it suffices to prove the two implications $\left(  a\mid
b\right)  \Longrightarrow\left(  \left\vert a\right\vert \mid\left\vert
b\right\vert \right)  $ (called the \textquotedblleft forward
implication\textquotedblright\ or the \textquotedblleft$\Longrightarrow$
direction\textquotedblright\ of the equivalence) and $\left(  a\mid b\right)
\Longleftarrow\left(  \left\vert a\right\vert \mid\left\vert b\right\vert
\right)  $ (called the \textquotedblleft backward
implication\textquotedblright\ or the \textquotedblleft$\Longleftarrow$
direction\textquotedblright). The shorthand \textquotedblleft$\Longrightarrow
:$\textquotedblright\ simply marks the beginning of the proof of the forward
implication; similarly, the symbol \textquotedblleft$\Longleftarrow
:$\textquotedblright\ heralds in the proof of the backward implication.}
Assume that $a\mid b$. Thus, there exists an integer $d$ such that $b=ad$ (by
Definition \ref{def.ent.div.div}). Consider\footnote{Me saying
\textquotedblleft Consider this $d$\textquotedblright\ means that I am picking
some integer $d$ such that $b=ad$ (this can be done, since we have just proven
that such a $d$ exists), and will be referring to it as $d$ from now on.} this
$d$. We have $b=ad$ and thus $\left\vert b\right\vert =\left\vert
ad\right\vert =\left\vert a\right\vert \cdot\left\vert d\right\vert $ (by
(\ref{eq.ent.div.abs(xy)})). Thus, there exists an integer $c$ such that
$\left\vert b\right\vert =\left\vert a\right\vert \cdot c$ (namely,
$c=\left\vert d\right\vert $). In other words, $\left\vert a\right\vert
\mid\left\vert b\right\vert $. This proves the \textquotedblleft%
$\Longrightarrow$\textquotedblright\ direction of Proposition
\ref{prop.ent.div.1} \textbf{(a)}.

$\Longleftarrow:$ Assume that $\left\vert a\right\vert \mid\left\vert
b\right\vert $. Thus, there exists an integer $f$ such that $\left\vert
b\right\vert =\left\vert a\right\vert \cdot f$ (by Definition
\ref{def.ent.div.div}). Consider this $f$.

The definition of $\left\vert b\right\vert $ shows that $\left\vert
b\right\vert $ equals either $b$ or $-b$. In other words, $\left\vert
b\right\vert $ equals either $1b$ or $\left(  -1\right)  b$ (since $b=1b$ and
$-b=\left(  -1\right)  b$). In other words, $\left\vert b\right\vert =qb$ for
some $q\in\left\{  1,-1\right\}  $. Similarly, $\left\vert a\right\vert =ra$
for some $r\in\left\{  1,-1\right\}  $. Consider these $q$ and $r$.

From $q\in\left\{  1,-1\right\}  $, we obtain $q^{2}\in\left\{
\underbrace{1^{2}}_{=1},\underbrace{\left(  -1\right)  ^{2}}_{=1}\right\}
=\left\{  1,1\right\}  =\left\{  1\right\}  $. In other words, $q^{2}=1$.

Now, $q\underbrace{\left\vert b\right\vert }_{=qb}=\underbrace{qq}_{=q^{2}%
=1}b=b$, so that $b=q\underbrace{\left\vert b\right\vert }_{=\left\vert
a\right\vert \cdot f}=q\underbrace{\left\vert a\right\vert }_{=ra}\cdot
f=qra\cdot f=a\cdot qfr$. Hence, there exists an integer $c$ such that $b=ac$
(namely, $c=qfr$). In other words, $a\mid b$. This proves the
\textquotedblleft$\Longleftarrow$\textquotedblright\ direction of Proposition
\ref{prop.ent.div.1} \textbf{(a)}.

Thus, the proof of Proposition \ref{prop.ent.div.1} \textbf{(a)} is complete.

\textbf{(b)} Assume that $a\mid b$ and $b\neq0$.

From $a\mid b$, we conclude that there exists an integer $c$ such that $b=ac$.
Consider this $c$. We have $ac=b\neq0$, thus $c\neq0$. Hence, $\left\vert
c\right\vert >0$, and thus $\left\vert c\right\vert \geq1$ (since $\left\vert
c\right\vert $ is an integer). We can multiply this inequality by $\left\vert
a\right\vert $ (since $\left\vert a\right\vert \geq0$), and obtain $\left\vert
a\right\vert \cdot\left\vert c\right\vert \geq\left\vert a\right\vert
\cdot1=\left\vert a\right\vert $.

From $b=ac$, we obtain $\left\vert b\right\vert =\left\vert ac\right\vert
=\left\vert a\right\vert \cdot\left\vert c\right\vert $ (by
(\ref{eq.ent.div.abs(xy)})). Hence, $\left\vert b\right\vert =\left\vert
a\right\vert \cdot\left\vert c\right\vert \geq\left\vert a\right\vert $. This
proves Proposition \ref{prop.ent.div.1} \textbf{(b)}.

\textbf{(c)} $\Longrightarrow:$ Assume that $a\mid b$. We must prove that
$\dfrac{b}{a}\in\mathbb{Z}$.

We have $a\mid b$. In other words, there exists an integer $d$ such that
$b=ad$. Consider this $d$. We can divide the equality $b=ad$ by $a$ (since
$a\neq0$), and thus obtain $\dfrac{b}{a}=d\in\mathbb{Z}$. This proves the
\textquotedblleft$\Longrightarrow$\textquotedblright\ direction of Proposition
\ref{prop.ent.div.1} \textbf{(c)}.

$\Longleftarrow:$ Assume that $\dfrac{b}{a}\in\mathbb{Z}$. We must prove that
$a\mid b$.

We have $\dfrac{b}{a}\in\mathbb{Z}$ and $b=a\cdot\dfrac{b}{a}$. Thus, there
exists an integer $c$ such that $b=ac$ (namely, $c=\dfrac{b}{a}$). In other
words, $a\mid b$. This proves the \textquotedblleft$\Longleftarrow
$\textquotedblright\ direction of Proposition \ref{prop.ent.div.1}
\textbf{(c)}. Hence, the proof of Proposition \ref{prop.ent.div.1}
\textbf{(c)} is complete.
\end{proof}

Proposition \ref{prop.ent.div.1} \textbf{(a)} shows that both $a$ and $b$ in
the statement \textquotedblleft$a\mid b$\textquotedblright\ can be replaced by
their absolute values. Thus, when we talk about divisibility of integers, the
sign of the integers does not really matter -- it usually suffices to work
with nonnegative integers. We will often use this (tacitly, after a couple
times) in proofs.

The next proposition shows some basic properties of the divisibility relation:

\begin{proposition}
\label{prop.ent.div.2}\textbf{(a)} We have $a\mid a$ for every $a\in
\mathbb{Z}$. (This is called the \textit{reflexivity of divisibility}.)

\textbf{(b)} If $a,b,c\in\mathbb{Z}$ satisfy $a\mid b$ and $b\mid c$, then
$a\mid c$. (This is called the \textit{transitivity of divisibility}.)

\textbf{(c)} If $a_{1},a_{2},b_{1},b_{2}\in\mathbb{Z}$ satisfy $a_{1}\mid
b_{1}$ and $a_{2}\mid b_{2}$, then $a_{1}a_{2}\mid b_{1}b_{2}$.
\end{proposition}

\begin{proof}
\textbf{(a)} Let $a\in\mathbb{Z}$. Then, there exists an integer $c$ such that
$a=ac$ (namely, $c=1$). In other words, $a\mid a$. This proves Proposition
\ref{prop.ent.div.2} \textbf{(a)}.

\textbf{(b)} Let $a,b,c\in\mathbb{Z}$ satisfy $a\mid b$ and $b\mid c$.

From $a\mid b$, we conclude that there exists an integer $d$ such that $b=ad$.
Consider this $d$.

From $b\mid c$, we conclude that there exists an integer $e$ such that $c=be$.
Consider this $e$.

We have $c=\underbrace{b}_{=ad}e=ade$. Hence, there exists an integer $f$ such
that $c=af$ (namely, $f=de$). In other words, $a\mid c$ (by Definition
\ref{def.ent.div.div}). This proves Proposition \ref{prop.ent.div.2}
\textbf{(b)}.

\textbf{(c)} Let $a_{1},a_{2},b_{1},b_{2}\in\mathbb{Z}$ satisfy $a_{1}\mid
b_{1}$ and $a_{2}\mid b_{2}$.

From $a_{1}\mid b_{1}$, we conclude that there exists an integer $d$ such that
$b_{1}=a_{1}d$. Consider this $d$.

From $a_{2}\mid b_{2}$, we conclude that there exists an integer $e$ such that
$b_{2}=a_{2}e$. Consider this $e$.

We have $\underbrace{b_{1}}_{=a_{1}d}\underbrace{b_{2}}_{=a_{2}e}=a_{1}%
da_{2}e=a_{1}a_{2}de$. Hence, there exists an integer $f$ such that
$b_{1}b_{2}=a_{1}a_{2}f$ (namely, $f=de$). In other words, $a_{1}a_{2}\mid
b_{1}b_{2}$ (by Definition \ref{def.ent.div.div}). This proves Proposition
\ref{prop.ent.div.2} \textbf{(c)}.
\end{proof}

\begin{exercise}
\label{exe.ent.div.aabs}Let $a\in\mathbb{Z}$.

\textbf{(a)} Prove that $a\mid\left\vert a\right\vert $. (This means
\textquotedblleft$a$ divides $\left\vert a\right\vert $\textquotedblright.)

\textbf{(b)} Prove that $\left\vert a\right\vert \mid a$. (This means
\textquotedblleft$\left\vert a\right\vert $ divides $a$\textquotedblright.)
\end{exercise}

\begin{exercise}
\label{exe.ent.div.abba}Let $a$ and $b$ be two integers such that $a\mid b$
and $b\mid a$. Prove that $\left\vert a\right\vert =\left\vert b\right\vert $.
\end{exercise}

\begin{exercise}
\label{exe.ent.div.acbc}Let $a,b,c$ be three integers such that $c\neq0$.
Prove that $a\mid b$ holds if and only if $ac\mid bc$.
\end{exercise}

\begin{exercise}
\label{exe.ent.div.powers}Let $n\in\mathbb{Z}$. Let $a,b\in\mathbb{N}$ be such
that $a\leq b$. Prove that $n^{a}\mid n^{b}$.
\end{exercise}

\begin{exercise}
\label{exe.ent.div.g|1}Let $g$ be a nonnegative integer such that $g\mid1$.
Prove that $g=1$.
\end{exercise}

\subsection{Congruence modulo $n$}

The next definition is simple but crucial:

\begin{definition}
\label{def.ent.cong}Let $n,a,b\in\mathbb{Z}$. We say that $a$ \textit{is
congruent to }$b$ \textit{modulo }$n$ if and only if $n\mid a-b$. We shall use
the notation \textquotedblleft$a\equiv b\operatorname{mod}n$\textquotedblright%
\ for \textquotedblleft$a$ is congruent to $b$ modulo $n$\textquotedblright.

We furthermore shall use the notation \textquotedblleft$a\not \equiv
b\operatorname{mod}n$\textquotedblright\ for \textquotedblleft$a$ is not
congruent to $b$ modulo $n$\textquotedblright.
\end{definition}

\begin{example}
\label{exa.ent.cong.triv}\textbf{(a)} Is $3\equiv7\operatorname{mod}2$ ? Yes,
since $2\mid3-7=-4$.

\textbf{(b)} Is $3\equiv6\operatorname{mod}2$ ? No, since $2\nmid3-6=-3$. So
we have $3\not \equiv 6\operatorname{mod}2$.

Now, let $a$ and $b$ be two integers.

\textbf{(c)} We have $a\equiv b\operatorname{mod}0$ if and only if $a=b$.
(Indeed, $a\equiv b\operatorname{mod}0$ is defined to mean $0\mid a-b$, but
the latter divisibility happens only when $a-b=0$, which is tantamount to
saying $a=b$.)

\textbf{(d)} We have $a\equiv b\operatorname{mod}1$ always, since $1\mid a-b$
always holds (remember: $1$ divides everything).
\end{example}

Note that being congruent modulo $2$ means having the same parity: i.e., two
even numbers will be congruent modulo $2$, and two odd numbers will be, but an
even number will never be congruent to an odd number modulo $2$. (To be
rigorous: This is not quite obvious at this point yet; but it will be easy
once we have properly introduced division with remainder. See Exercise
\ref{exe.ent.even-odd.1} \textbf{(i)} below for the proof.)

\href{https://en.wikipedia.org/wiki/Modulo_(jargon)}{The word
\textquotedblleft modulo\textquotedblright}\ in the phrase \textquotedblleft%
$a$ is congruent to $b$ modulo $n$\textquotedblright\ is due to Gauss and
means something like \textquotedblleft with respect to\textquotedblright. You
should think of \textquotedblleft$a$ is congruent to $b$ modulo $n$%
\textquotedblright\ as a relation between all three of the numbers $a$, $b$
and $n$, but $a$ and $b$ are the \textquotedblleft main
characters\textquotedblright\ and $n$ sets the scene.

\begin{exercise}
\label{exe.ent.mod.a+b=a-b}Let $a,b\in\mathbb{Z}$. Prove that $a+b\equiv
a-b\operatorname{mod}2$.
\end{exercise}

We begin with a proposition so fundamental that we will always use it without saying:

\begin{proposition}
\label{prop.ent.mod.0}Let $n\in\mathbb{Z}$ and $a\in\mathbb{Z}$. Then,
$a\equiv0\operatorname{mod}n$ if and only if $n\mid a$.
\end{proposition}

\begin{proof}
[Proof of Proposition \ref{prop.ent.mod.0}.]We have the following chain of
equivalences:%
\begin{align*}
\left(  a\equiv0\operatorname{mod}n\right)  \  &  \Longleftrightarrow\ \left(
n\mid a-0\right)  \ \ \ \ \ \ \ \ \ \ \left(  \text{by Definition
\ref{def.ent.cong}}\right) \\
&  \Longleftrightarrow\ \left(  n\mid a\right)  \ \ \ \ \ \ \ \ \ \ \left(
\text{since }a-0=a\right)  .
\end{align*}
This proves Proposition \ref{prop.ent.mod.0}.
\end{proof}

Next come some staple properties of congruences:

\begin{proposition}
\label{prop.ent.mod.basics}Let $n\in\mathbb{Z}$.

\textbf{(a)} We have $a\equiv a\operatorname{mod}n$ for every $a\in\mathbb{Z}$.

\textbf{(b)} If $a,b,c\in\mathbb{Z}$ satisfy $a\equiv b\operatorname{mod}n$
and $b\equiv c\operatorname{mod}n$, then $a\equiv c\operatorname{mod}n$.

\textbf{(c)} If $a,b\in\mathbb{Z}$ satisfy $a\equiv b\operatorname{mod}n$,
then $b\equiv a\operatorname{mod}n$.

\textbf{(d)} If $a_{1},a_{2},b_{1},b_{2}\in\mathbb{Z}$ satisfy $a_{1}\equiv
b_{1}\operatorname{mod}n$ and $a_{2}\equiv b_{2}\operatorname{mod}n$, then%
\begin{align}
a_{1}+a_{2}  &  \equiv b_{1}+b_{2}\operatorname{mod}%
n;\label{eq.prop.ent.mod.basics.d.1}\\
a_{1}-a_{2}  &  \equiv b_{1}-b_{2}\operatorname{mod}%
n;\label{eq.prop.ent.mod.basics.d.2}\\
a_{1}a_{2}  &  \equiv b_{1}b_{2}\operatorname{mod}n.
\label{eq.prop.ent.mod.basics.d.3}%
\end{align}


\textbf{(e)} Let $m\in\mathbb{Z}$ be such that $m\mid n$. If $a,b\in
\mathbb{Z}$ satisfy $a\equiv b\operatorname{mod}n$, then $a\equiv
b\operatorname{mod}m$.
\end{proposition}

\begin{proof}
\textbf{(a)} Let $a\in\mathbb{Z}$. Recall that $a\equiv a\operatorname{mod}n$
is defined to mean $n\mid a-a$. Since $n\mid a-a$ holds (because
$a-a=0=n\cdot0$), we thus see that $a\equiv a\operatorname{mod}n$ holds. This
proves Proposition \ref{prop.ent.mod.basics} \textbf{(a)}.

\textbf{(b)} Let $a,b,c\in\mathbb{Z}$ satisfy $a\equiv b\operatorname{mod}n$
and $b\equiv c\operatorname{mod}n$.

We have $a\equiv b\operatorname{mod}n$. In other words, $n\mid a-b$ (by
Definition \ref{def.ent.cong}). In other words, there exists an integer $p$
such that $a-b=np$ (by Definition \ref{def.ent.div.div}). Consider this $p$.

We have $b\equiv c\operatorname{mod}n$. In other words, $n\mid b-c$ (by
Definition \ref{def.ent.cong}). In other words, there exists an integer $q$
such that $b-c=nq$ (by Definition \ref{def.ent.div.div}). Consider this $q$.

Now,
\[
a-c=\underbrace{\left(  a-b\right)  }_{=np}+\underbrace{\left(  b-c\right)
}_{=nq}=np+nq=n\left(  p+q\right)  .
\]
Hence, there exists an integer $r$ such that $a-c=nr$ (namely, $r=p+q$). In
other words, $n\mid a-c$ (by Definition \ref{def.ent.div.div}). In other
words, $a\equiv c\operatorname{mod}n$ (by Definition \ref{def.ent.cong}). This
proves Proposition \ref{prop.ent.mod.basics} \textbf{(b)}.

\textbf{(c)} Let $a,b\in\mathbb{Z}$ satisfy $a\equiv b\operatorname{mod}n$.

We have $a\equiv b\operatorname{mod}n$. In other words, $n\mid a-b$ (by
Definition \ref{def.ent.cong}). In other words, there exists an integer $p$
such that $a-b=np$ (by Definition \ref{def.ent.div.div}). Consider this $p$.
Now,%
\[
b-a=-\underbrace{\left(  a-b\right)  }_{=np}=-np=n\left(  -p\right)  .
\]
Hence, there exists an integer $c$ such that $b-a=nc$ (namely, $c=-p$). In
other words, $n\mid b-a$ (by Definition \ref{def.ent.div.div}). In other
words, $b\equiv a\operatorname{mod}n$ (by Definition \ref{def.ent.cong}). This
proves Proposition \ref{prop.ent.mod.basics} \textbf{(c)}.

\textbf{(d)} Let $a_{1},a_{2},b_{1},b_{2}\in\mathbb{Z}$ satisfy $a_{1}\equiv
b_{1}\operatorname{mod}n$ and $a_{2}\equiv b_{2}\operatorname{mod}n$.

We have $a_{1}\equiv b_{1}\operatorname{mod}n$. In other words, $n\mid
a_{1}-b_{1}$ (by Definition \ref{def.ent.cong}). In other words, there exists
an integer $p$ such that $a_{1}-b_{1}=np$ (by Definition \ref{def.ent.div.div}%
). Consider this $p$.

We have $a_{2}\equiv b_{2}\operatorname{mod}n$. In other words, $n\mid
a_{2}-b_{2}$ (by Definition \ref{def.ent.cong}). In other words, there exists
an integer $q$ such that $a_{2}-b_{2}=nq$ (by Definition \ref{def.ent.div.div}%
). Consider this $q$.

We have%
\[
\left(  a_{1}+a_{2}\right)  -\left(  b_{1}+b_{2}\right)  =\underbrace{\left(
a_{1}-b_{1}\right)  }_{=np}+\underbrace{\left(  a_{2}-b_{2}\right)  }%
_{=nq}=np+nq=n\left(  p+q\right)  .
\]
Hence, there exists an integer $c$ such that $\left(  a_{1}+a_{2}\right)
-\left(  b_{1}+b_{2}\right)  =nc$ (namely, $c=p+q$). In other words,
$n\mid\left(  a_{1}+a_{2}\right)  -\left(  b_{1}+b_{2}\right)  $ (by
Definition \ref{def.ent.div.div}). In other words, $a_{1}+a_{2}\equiv
b_{1}+b_{2}\operatorname{mod}n$ (by Definition \ref{def.ent.cong}). A similar
argument (using $p-q$ instead of $p+q$) shows that $a_{1}-a_{2}\equiv
b_{1}-b_{2}\operatorname{mod}n$. It thus remains to show that $a_{1}%
a_{2}\equiv b_{1}b_{2}\operatorname{mod}n$.

Let us first show that $a_{1}a_{2}\equiv a_{1}b_{2}\operatorname{mod}n$.
Indeed, $a_{1}a_{2}-a_{1}b_{2}=a_{1}\underbrace{\left(  a_{2}-b_{2}\right)
}_{=nq}=a_{1}nq=n\left(  a_{1}q\right)  $. Hence, there exists an integer $c$
such that $a_{1}a_{2}-a_{1}b_{2}=nc$ (namely, $c=a_{1}q$). In other words,
$n\mid a_{1}a_{2}-a_{1}b_{2}$ (by Definition \ref{def.ent.div.div}). In other
words, $a_{1}a_{2}\equiv a_{1}b_{2}\operatorname{mod}n$ (by Definition
\ref{def.ent.cong}).

Next, let us show that $a_{1}b_{2}\equiv b_{1}b_{2}\operatorname{mod}n$.
Indeed, $a_{1}b_{2}-b_{1}b_{2}=b_{2}\underbrace{\left(  a_{1}-b_{1}\right)
}_{=np}=b_{2}np=n\left(  b_{2}p\right)  $. Hence, there exists an integer $c$
such that $a_{1}b_{2}-b_{1}b_{2}=nc$ (namely, $c=b_{2}p$). In other words,
$n\mid a_{1}b_{2}-b_{1}b_{2}$ (by Definition \ref{def.ent.div.div}). In other
words, $a_{1}b_{2}\equiv b_{1}b_{2}\operatorname{mod}n$ (by Definition
\ref{def.ent.cong}).

From $a_{1}a_{2}\equiv a_{1}b_{2}\operatorname{mod}n$ and $a_{1}b_{2}\equiv
b_{1}b_{2}\operatorname{mod}n$, we now conclude that $a_{1}a_{2}\equiv
b_{1}b_{2}\operatorname{mod}n$ (by Proposition \ref{prop.ent.mod.basics}
\textbf{(c)}, applied to $a=a_{1}a_{2}$, $b=a_{1}b_{2}$ and $c=b_{1}b_{2}$).
This completes the proof of Proposition \ref{prop.ent.mod.basics} \textbf{(d)}.

\textbf{(e)} Let $a,b\in\mathbb{Z}$ satisfy $a\equiv b\operatorname{mod}n$.

We have $a\equiv b\operatorname{mod}n$. In other words, $n\mid a-b$ (by
Definition \ref{def.ent.cong}). From $m\mid n$ and $n\mid a-b$, we obtain
$m\mid a-b$ (by Proposition \ref{prop.ent.div.2} \textbf{(b)}, applied to $m$,
$n$ and $a-b$ instead of $a$, $b$ and $c$). In other words, $a\equiv
b\operatorname{mod}m$ (by Definition \ref{def.ent.cong}). This proves
Proposition \ref{prop.ent.mod.basics} \textbf{(e)}.
\end{proof}

In the above proof, we took care to explicitly cite Definition
\ref{def.ent.div.div} and Definition \ref{def.ent.cong} whenever we used them;
in the following, we will omit references like this.

Proposition \ref{prop.ent.mod.basics} \textbf{(d)} is saying that congruences
modulo $n$ (for a fixed integer $n$) can be added, subtracted and multiplied
together. This does not mean that you can do everything with them that you can
do with equalities. The next exercise shows that dividing congruences and
taking a congruence to the power of another does not generally work:

\begin{exercise}
\label{exe.ent.mod.basics-nope}Let $n,a_{1},a_{2},b_{1},b_{2}\in\mathbb{Z}$
satisfy $a_{1}\equiv b_{1}\operatorname{mod}n$ and $a_{2}\equiv b_{2}%
\operatorname{mod}n$. Then, \textbf{in general}, neither $a_{1}/a_{2}\equiv
b_{1}/b_{2}\operatorname{mod}n$ nor $a_{1}^{a_{2}}\equiv b_{1}^{b_{2}%
}\operatorname{mod}n$ is necessarily true. Of course, this is partly due to
the fact that $a_{1}/a_{2}$, $b_{1}/b_{2}$ and $a_{1}^{a_{2}}$ and
$b_{1}^{b_{2}}$ are not always integers in the first place (and being
congruent modulo $n$ only makes sense for integers, at least for now). But
even when $a_{1}/a_{2}$, $b_{1}/b_{2}$ and $a_{1}^{a_{2}}$ and $b_{1}^{b_{2}}$
are integers, the congruences $a_{1}/a_{2}\equiv b_{1}/b_{2}\operatorname{mod}%
n$ and $a_{1}^{a_{2}}\equiv b_{1}^{b_{2}}\operatorname{mod}n$ are often false.
Find examples of $n,a_{1},a_{2},b_{1},b_{2}$ such that $a_{1}/a_{2}$,
$b_{1}/b_{2}$ and $a_{1}^{a_{2}}$ and $b_{1}^{b_{2}}$ are integers but the
congruences $a_{1}/a_{2}\equiv b_{1}/b_{2}\operatorname{mod}n$ and
$a_{1}^{a_{2}}\equiv b_{1}^{b_{2}}\operatorname{mod}n$ are false.
\end{exercise}

However, we can divide a congruence $a\equiv b\operatorname{mod}n$ by a
nonzero integer $d$ when all of $a,b,n$ are divisible by $d$:

\begin{exercise}
\label{exe.ent.mod.basics.2}Let $n,d,a,b\in\mathbb{Z}$, and assume that
$d\neq0$. Assume that $d$ divides each of $a,b,n$, and assume that $a\equiv
b\operatorname{mod}n$. Prove that $a/d\equiv b/d\operatorname{mod}n/d$.
\end{exercise}

We can also take a congruence to the $k$-th power when $k\in\mathbb{N}$:

\begin{exercise}
\label{exe.ent.mod.basics.k-power}Let $n,a,b\in\mathbb{Z}$ be such that
$a\equiv b\operatorname{mod}n$. Prove that $a^{k}\equiv b^{k}%
\operatorname{mod}n$ for each $k\in\mathbb{N}$.
\end{exercise}

(Note that the \textquotedblleft$n$\textquotedblright\ is not being taken to
the $k$-th power here.)

We can add not just two, but any number of congruences (where
\textquotedblleft number\textquotedblright\ means \textquotedblleft finite
number\textquotedblright):

\begin{exercise}
\label{exe.ent.mod.k-sum}Let $n$ be an integer. Let $S$ be a finite set. For
each $s\in S$, let $a_{s}$ and $b_{s}$ be two integers. Assume that%
\begin{equation}
a_{s}\equiv b_{s}\operatorname{mod}n\ \ \ \ \ \ \ \ \ \ \text{for each }s\in
S. \label{eq.exe.ent.mod.k-sum.ass}%
\end{equation}


\textbf{(a)} Prove that%
\begin{equation}
\sum_{s\in S}a_{s}\equiv\sum_{s\in S}b_{s}\operatorname{mod}n.
\label{eq.exe.ent.mod.k-sum.a}%
\end{equation}


\textbf{(b)} Prove that
\begin{equation}
\prod_{s\in S}a_{s}\equiv\prod_{s\in S}b_{s}\operatorname{mod}n.
\label{eq.exe.ent.mod.k-sum.b}%
\end{equation}


(Keep in mind that if the set $S$ is empty, then $\sum_{s\in S}a_{s}%
=\sum_{s\in S}b_{s}=0$ and $\prod_{s\in S}a_{s}=\prod_{s\in S}b_{s}=1$; this
holds by the definition of empty sums and of empty products.)
\end{exercise}

\begin{exercise}
\label{exe.ent.mod.prod-wrong}Is it true that if $a_{1},a_{2},b_{1}%
,b_{2},n_{1},n_{2}\in\mathbb{Z}$ satisfy $a_{1}\equiv b_{1}\operatorname{mod}%
n_{1}$ and $a_{2}\equiv b_{2}\operatorname{mod}n_{2}$, then $a_{1}a_{2}\equiv
b_{1}b_{2}\operatorname{mod}n_{1}n_{2}$ ?
\end{exercise}

\begin{exercise}
\label{exe.ent.mod.a+nd}Let $a,b,n\in\mathbb{Z}$. Prove that $a\equiv
b\operatorname{mod}n$ if and only if there exists some $d\in\mathbb{Z}$ such
that $b=a+nd$.
\end{exercise}

\begin{exercise}
\label{exe.ent.mod.diff}Let $a,b,c,n\in\mathbb{Z}$. Prove that we have
$a-b\equiv c\operatorname{mod}n$ if and only if $a\equiv b+c\operatorname{mod}%
n$.
\end{exercise}

\subsection{\label{sect.ent.subst-chain}Chains of congruences}

For this whole Section \ref{sect.ent.subst-chain}, we fix an integer $n$.

Chains of equalities are a fundamental piece of notation used throughout
mathematics. For example, here is a chain of equalities:%
\begin{align*}
&  \left(  ad+bc\right)  ^{2}+\left(  ac-bd\right)  ^{2}\\
&  =\left(  ad\right)  ^{2}+2ad\cdot bc+\left(  bc\right)  ^{2}+\left(
ac\right)  ^{2}-2ac\cdot bd+\left(  bd\right)  ^{2}\\
&  =a^{2}d^{2}+2abcd+b^{2}c^{2}+a^{2}c^{2}-2abcd+b^{2}d^{2}\\
&  =a^{2}c^{2}+a^{2}d^{2}+b^{2}c^{2}+b^{2}d^{2}\\
&  =\left(  a^{2}+b^{2}\right)  \left(  c^{2}+d^{2}\right)
\end{align*}
(where $a,b,c,d$ are arbitrary numbers). This chain proves the equality
(\ref{eq.intro.sum-of-2sq.sum*sum}). But why does it really? If we look
closely at this chain of equalities, we see that it has the form
\textquotedblleft$A=B=C=D=E$\textquotedblright, where $A,B,C,D,E$ are five
numbers (namely, $A=\left(  ad+bc\right)  ^{2}+\left(  ac-bd\right)  ^{2}$ and
$B=\left(  ad\right)  ^{2}+2ad\cdot bc+\left(  bc\right)  ^{2}+\left(
ac\right)  ^{2}-2ac\cdot bd+\left(  bd\right)  ^{2}$ and so on). This kind of
statement is called a \textquotedblleft chain of equalities\textquotedblright,
and, a priori, it simply means that any two \textbf{adjacent} numbers in this
chain are equal: $A=B$ and $B=C$ and $C=D$ and $D=E$. Without as much as
noticing it, we have concluded that \textbf{any} two numbers in this chain are
equal; thus, in particular, $A=E$, which is precisely the equality
(\ref{eq.intro.sum-of-2sq.sum*sum}) we wanted to prove.

That this kind of \textquotedblleft chaining\textquotedblright\ is possible is
one of the most basic facts in mathematics. Let us define a chain of
equalities formally:

\begin{definition}
If $a_{1},a_{2},\ldots,a_{k}$ are $k$ objects\footnotemark, then the statement
\textquotedblleft$a_{1}=a_{2}=\cdots=a_{k}$\textquotedblright\ shall mean
that
\[
a_{i}=a_{i+1}\text{ holds for each }i\in\left\{  1,2,\ldots,k-1\right\}  .
\]
(In other words, it shall mean that $a_{1}=a_{2}$ and $a_{2}=a_{3}$ and
$a_{3}=a_{4}$ and $\cdots$ and $a_{k-1}=a_{k}$. This is vacuously true when
$k\leq1$. If $k=2$, then it simply means that $a_{1}=a_{2}$.)

Such a statement will be called a \textit{chain of equalities}.
\end{definition}

\footnotetext{\textquotedblleft Objects\textquotedblright\ can be numbers,
sets, tuples or any other well-defined things in mathematics.}

\begin{proposition}
\label{prop.mod.chain-eq}Let $a_{1},a_{2},\ldots,a_{k}$ be $k$ objects such
that $a_{1}=a_{2}=\cdots=a_{k}$. Let $u$ and $v$ be two elements of $\left\{
1,2,\ldots,k\right\}  $. Then, $a_{u}=a_{v}$.
\end{proposition}

So we have defined a chain of equalities to be true if and only if any two
adjacent terms in this chain are equal (i.e., if \textquotedblleft each
equality sign in the chain is satisfied\textquotedblright). Proposition
\ref{prop.mod.chain-eq} shows that in such a chain, \textbf{any two} terms are
equal. This is intuitively rather clear, but can also be formally proven by
induction using the basic properties of equality
(transitivity\footnote{\textit{Transitivity of equality} says that if $a,b,c$
are three objects satisfying $a=b$ and $b=c$, then $a=c$.},
reflexivity\footnote{\textit{Reflexivity of equality} says that every object
$a$ satisfies $a=a$.} and symmetry\footnote{\textit{Symmetry of equality} says
that if $a,b$ are two objects satisfying $a=b$, then $b=a$.}).

But our goal is to understand basic number theory, not to scrutinize the
foundations of mathematics. So let us recall that we have fixed an integer
$n$, and consider congruences modulo $n$. We claim that these can be chained
just as equalities:

\begin{definition}
If $a_{1},a_{2},\ldots,a_{k}$ are $k$ integers, then the statement
\textquotedblleft$a_{1}\equiv a_{2}\equiv\cdots\equiv a_{k}\operatorname{mod}%
n$\textquotedblright\ shall mean that
\[
a_{i}\equiv a_{i+1}\operatorname{mod}n\text{ holds for each }i\in\left\{
1,2,\ldots,k-1\right\}  .
\]
(In other words, it shall mean that $a_{1}\equiv a_{2}\operatorname{mod}n$ and
$a_{2}\equiv a_{3}\operatorname{mod}n$ and $a_{3}\equiv a_{4}%
\operatorname{mod}n$ and $\cdots$ and $a_{k-1}\equiv a_{k}\operatorname{mod}%
n$. This is vacuously true when $k\leq1$. If $k=2$, then it simply means that
$a_{1}\equiv a_{2}\operatorname{mod}n$.)

Such a statement will be called a \textit{chain of congruences modulo }$n$.
\end{definition}

\begin{proposition}
\label{prop.mod.chain}Let $a_{1},a_{2},\ldots,a_{k}$ be $k$ integers such that
$a_{1}\equiv a_{2}\equiv\cdots\equiv a_{k}\operatorname{mod}n$. Let $u$ and
$v$ be two elements of $\left\{  1,2,\ldots,k\right\}  $. Then, $a_{u}\equiv
a_{v}\operatorname{mod}n$.
\end{proposition}

Proposition \ref{prop.mod.chain} shows that any two terms in a chain of
congruences modulo $n$ must be congruent to each other modulo $n$. Again, this
can be formally proven by induction; see \cite[proof of Proposition
2.16]{detnotes}. The ingredients of the proof are basic properties of
congruence modulo $n$: transitivity, reflexivity and symmetry. These are fancy
names for parts \textbf{(b)}, \textbf{(a)} and \textbf{(c)} of Proposition
\ref{prop.ent.mod.basics}.

We will use Proposition \ref{prop.mod.chain} tacitly (just as you would use
Proposition \ref{prop.mod.chain-eq}): i.e., every time we prove a chain of
congruences like $a_{1}\equiv a_{2}\equiv\cdots\equiv a_{k}\operatorname{mod}%
n$, we assume that the reader will automatically conclude that any two of its
terms are congruent to each other modulo $n$ (and will remember this
conclusion). For instance, if we show that $1\equiv4\equiv34\equiv
334\equiv304\operatorname{mod}3$, then we automatically get the congruences
$1\equiv304\operatorname{mod}3$ and $334\equiv1\operatorname{mod}3$ and
$4\equiv334\operatorname{mod}3$ and several others out of this chain.

Chains of congruences can also include equality signs. For example, if
$a,b,c,d$ are integers, then \textquotedblleft$a\equiv b=c\equiv
d\operatorname{mod}n$\textquotedblright\ means that $a\equiv
b\operatorname{mod}n$ and $b=c$ and $c\equiv d\operatorname{mod}n$. Such a
chain is still a chain of congruences, because $b=c$ implies $b\equiv
c\operatorname{mod}n$ (by Proposition \ref{prop.ent.mod.basics} \textbf{(a)}).

Just as there are chains of equalities and chains of congruences, there are
chains of divisibilities:

\begin{definition}
If $a_{1},a_{2},\ldots,a_{k}$ are $k$ integers, then the statement
\textquotedblleft$a_{1}\mid a_{2}\mid\cdots\mid a_{k}$\textquotedblright%
\ shall mean that
\[
a_{i}\mid a_{i+1}\text{ holds for each }i\in\left\{  1,2,\ldots,k-1\right\}
.
\]
(In other words, it shall mean that $a_{1}\mid a_{2}$ and $a_{2}\mid a_{3}$
and $a_{3}\mid a_{4}$ and $\cdots$ and $a_{k-1}\mid a_{k}$. This is vacuously
true when $k\leq1$. If $k=2$, then it simply means that $a_{1}\mid a_{2}$.)

Such a statement will be called a \textit{chain of divisibilities}.
\end{definition}

\begin{proposition}
\label{prop.ent.div.chain}Let $a_{1},a_{2},\ldots,a_{k}$ be $k$ integers such
that $a_{1}\mid a_{2}\mid\cdots\mid a_{k}$. Let $u$ and $v$ be two elements of
$\left\{  1,2,\ldots,k\right\}  $ such that $u\leq v$. Then, $a_{u}\mid a_{v}$.
\end{proposition}

Note that we had to require $u\leq v$ in this proposition, unlike the
analogous propositions for chains of equalities and chains of congruences,
because there is no \textquotedblleft symmetry of
divisibility\textquotedblright\ (i.e., if $a\mid b$, then we don't generally
have $b\mid a$). The proof of Proposition \ref{prop.ent.div.chain} relies on
the reflexivity of divisibility (Proposition \ref{prop.ent.div.2}
\textbf{(a)}) and on the transitivity of divisibility (Proposition
\ref{prop.ent.div.2} \textbf{(b)}).

Again, chains of divisibilities can include equality signs. For example,
$4\mid3\cdot4=12=2\cdot6\mid4\cdot6=24$.

\subsection{\label{sect.ent.subst-mod}Substitutivity for congruences}

In\ Section \ref{sect.ent.subst-chain}, we have learnt that congruences modulo
an integer $n$ can be chained together like equalities. A further important
feature of congruences is the principle of \textit{substitutivity for
congruences}. This is yet another way in which congruences behave like
equalities. We are not going to state it fully formally (as it is a
meta-mathematical principle), but merely explain its meaning. Later on, once
we understand what the rings $\mathbb{Z}/n$ (for integer $n$) are, we will no
longer need this principle, since it will just boil down to \textquotedblleft
equal things can be substituted for one another\textquotedblright\ (the whole
point of $\mathbb{Z}/n$ is to \textquotedblleft make congruent numbers
equal\textquotedblright); but for now, we cannot treat \textquotedblleft
congruent modulo $n$\textquotedblright\ as \textquotedblleft
equal\textquotedblright, so we have to state it.

You are probably used to making computations like these:%
\begin{align*}
\underbrace{\left(  a+b\right)  ^{2}}_{=a^{2}+2ab+b^{2}}+\underbrace{\left(
a-b\right)  ^{2}}_{=a^{2}-2ab+b^{2}}  &  =\left(  a^{2}+2ab+b^{2}\right)
+\left(  a^{2}-2ab+b^{2}\right) \\
&  =\underbrace{a^{2}+a^{2}}_{=2a^{2}}+\underbrace{b^{2}+b^{2}}_{=2b^{2}%
}=2a^{2}+2b^{2}%
\end{align*}
(for any two numbers $a$ and $b$). What is going on in these underbraces (like
\textquotedblleft$\underbrace{\left(  a+b\right)  ^{2}}_{=a^{2}+2ab+b^{2}}%
$\textquotedblright)? Something pretty simple is going on: You are replacing a
number (in this case, $\left(  a+b\right)  ^{2}$) by an equal number (in this
case, $a^{2}+2ab+b^{2}$). This relies on a fundamental principle of
mathematics (called the \textit{principle of substitutivity for equalities}),
which says that an object in an expression can indeed be replaced by any
object equal to it (without changing the value of the expression). (This is
also known as \textit{Leibniz's equality law}.) To be precise, we are using
this principle twice in some of our equality signs above, since we are making
several replacements at the same time; but this is fine (we can just do the
replacement one by one instead).

We would like to have a similar principle for congruences modulo $n$: We would
like to be able to replace any integer by an integer congruent to it modulo
$n$. For example, we would like to be able to say that if seven integers
$a,a^{\prime},b,b^{\prime},c,c^{\prime},n$ satisfy $a\equiv a^{\prime
}\operatorname{mod}n$ and $b\equiv b^{\prime}\operatorname{mod}n$ and $c\equiv
c^{\prime}\operatorname{mod}n$, then%
\[
\underbrace{b}_{\equiv b^{\prime}\operatorname{mod}n}\ \ \underbrace{c}%
_{\equiv c^{\prime}\operatorname{mod}n}+\underbrace{c}_{\equiv c^{\prime
}\operatorname{mod}n}\ \ \underbrace{a}_{\equiv a^{\prime}\operatorname{mod}%
n}+\underbrace{a}_{\equiv a^{\prime}\operatorname{mod}n}\ \ \underbrace{b}%
_{\equiv b^{\prime}\operatorname{mod}n}\equiv b^{\prime}c^{\prime}+c^{\prime
}a^{\prime}+a^{\prime}b^{\prime}\operatorname{mod}n.
\]


We have to be careful with this: For example, we run into troubles if division
is involved in our expressions. For example, we have $6\equiv
9\operatorname{mod}3$, but we do not have $\underbrace{6}_{\equiv
9\operatorname{mod}3}/3\equiv9/3\operatorname{mod}3$. Similarly,
exponentiation can be problematic. So we need to state the principle we are
using here in clearer terms, so that we know what we can do.

For this whole Section \ref{sect.ent.subst-mod}, we fix an integer $n$.

The \textit{principle of substitutivity for equalities} says the following:

\begin{statement}
\textit{Principle of substitutivity for equalities (PSE):} If two objects $x$
and $x^{\prime}$ are equal, and if we have any expression $A$ that involves
the object $x$, then we can replace this $x$ (or, more precisely, any
arbitrary appearance of $x$ in $A$) in $A$ by $x^{\prime}$; the resulting
expression $A^{\prime}$ will be equal to $A$.
\end{statement}

Here are two examples of how this principle can be used:

\begin{itemize}
\item If $a,b,c,d,e,c^{\prime}$ are numbers such that $c=c^{\prime}$, then the
PSE says that we can replace $c$ by $c^{\prime}$ in the expression $a\left(
b-\left(  c+d\right)  e\right)  $, and the resulting expression $a\left(
b-\left(  c^{\prime}+d\right)  e\right)  $ will be equal to $a\left(
b-\left(  c+d\right)  e\right)  $; that is, we have%
\begin{equation}
a\left(  b-\left(  c+d\right)  e\right)  =a\left(  b-\left(  c^{\prime
}+d\right)  e\right)  . \label{eq.mod.substitutivity-nums.1}%
\end{equation}


\item If $a,b,c,a^{\prime}$ are numbers such that $a=a^{\prime}$, then
\begin{equation}
\left(  a-b\right)  \left(  a+b\right)  =\left(  a^{\prime}-b\right)  \left(
a+b\right)  , \label{eq.mod.substitutivity-nums.2}%
\end{equation}
because the PSE allows us to replace the first $a$ appearing in the expression
$\left(  a-b\right)  \left(  a+b\right)  $ by an $a^{\prime}$. (We can also
replace the second $a$ by $a^{\prime}$, of course.)
\end{itemize}

More generally, we can make several such replacements at the same time.

The PSE is one of the headstones of mathematical logic; it is the essence of
what it means for two objects to be equal.

The \textit{principle of substitutivity for congruences} is similar, but far
less fundamental; it says the following:

\begin{statement}
\textit{Principle of substitutivity for congruences (PSC):} If two numbers $x$
and $x^{\prime}$ are congruent to each other modulo $n$ (that is, $x\equiv
x^{\prime}\operatorname{mod}n$), and if we have any expression $A$ that
involves only integers, addition, subtraction and multiplication, and involves
the object $x$, then we can replace this $x$ (or, more precisely, any
arbitrary appearance of $x$ in $A$) in $A$ by $x^{\prime}$; the resulting
expression $A^{\prime}$ will be congruent to $A$ modulo $n$.
\end{statement}

This principle is less general than the PSE, since it only applies to
expressions that are built from integers and certain operations (note that
division is not one of these operations). But it still lets us prove analogues
of our above examples (\ref{eq.mod.substitutivity-nums.1}) and
(\ref{eq.mod.substitutivity-nums.2}):

\begin{itemize}
\item If $a,b,c,d,e,c^{\prime}$ are integers such that $c\equiv c^{\prime
}\operatorname{mod}n$, then the PSC says that we can replace $c$ by
$c^{\prime}$ in the expression $a\left(  b-\left(  c+d\right)  e\right)  $,
and the resulting expression $a\left(  b-\left(  c^{\prime}+d\right)
e\right)  $ will be congruent to $a\left(  b-\left(  c+d\right)  e\right)  $
modulo $n$; that is, we have%
\begin{equation}
a\left(  b-\left(  c+d\right)  e\right)  \equiv a\left(  b-\left(  c^{\prime
}+d\right)  e\right)  \operatorname{mod}n.
\label{eq.mod.substitutivity-congs.1}%
\end{equation}


\item If $a,b,c,a^{\prime}$ are integers such that $a\equiv a^{\prime
}\operatorname{mod}n$, then
\begin{equation}
\left(  a-b\right)  \left(  a+b\right)  \equiv\left(  a^{\prime}-b\right)
\left(  a+b\right)  \operatorname{mod}n, \label{eq.mod.substitutivity-congs.2}%
\end{equation}
because the PSC allows us to replace the first $a$ appearing in the expression
$\left(  a-b\right)  \left(  a+b\right)  $ by an $a^{\prime}$. (We can also
replace the second $a$ by $a^{\prime}$, of course.)
\end{itemize}

We shall not prove the PSC, since we have not formalized it (after all, we
have not defined what an \textquotedblleft expression\textquotedblright\ is).
But we shall prove the specific congruences
(\ref{eq.mod.substitutivity-congs.1}) and (\ref{eq.mod.substitutivity-congs.2}%
) using Proposition \ref{prop.ent.mod.basics}; the way in which we prove these
congruences is symptomatic: Every congruence obtained from the PSC can be
proven in a manner like these. Thus, the proofs of
(\ref{eq.mod.substitutivity-congs.1}) and (\ref{eq.mod.substitutivity-congs.2}%
) given below can serve as templates which can easily be adapted to any other
situation in which an application of the PSC needs to be justified.

\begin{proof}
[Proof of (\ref{eq.mod.substitutivity-congs.1}).]Let $n$ be any integer, and
let $a,b,c,d,e,c^{\prime}$ be integers such that $c\equiv c^{\prime
}\operatorname{mod}n$.

Adding the congruence\footnote{Proposition \ref{prop.ent.mod.basics}
\textbf{(d)} shows that we can add, subtract and multiply congruences modulo
$n$ at will. We are using this freedom here and will use it many times below.}
$c\equiv c^{\prime}\operatorname{mod}n$ with the congruence $d\equiv
d\operatorname{mod}n$ (which follows from Proposition
\ref{prop.ent.mod.basics} \textbf{(a)}), we obtain $c+d\equiv c^{\prime
}+d\operatorname{mod}n$. Multiplying this congruence with the congruence
$e\equiv e\operatorname{mod}n$ (which follows from Proposition
\ref{prop.ent.mod.basics} \textbf{(a)}), we obtain $\left(  c+d\right)
e\equiv\left(  c^{\prime}+d\right)  e\operatorname{mod}n$. Subtracting this
congruence from the congruence $b\equiv b\operatorname{mod}n$ (which, again,
follows from Proposition \ref{prop.ent.mod.basics} \textbf{(a)}), we obtain
$b-\left(  c+d\right)  e\equiv b-\left(  c^{\prime}+d\right)
e\operatorname{mod}n$. Multiplying the congruence $a\equiv a\operatorname{mod}%
n$ (which follows from Proposition \ref{prop.ent.mod.basics} \textbf{(a)})
with this congruence, we obtain $a\left(  b-\left(  c+d\right)  e\right)
\equiv a\left(  b-\left(  c^{\prime}+d\right)  e\right)  \operatorname{mod}n$.
This proves (\ref{eq.mod.substitutivity-congs.1}).
\end{proof}

\begin{proof}
[Proof of (\ref{eq.mod.substitutivity-congs.2}).]Let $n$ be any integer, and
let $a,b,c,a^{\prime}$ be integers such that $a\equiv a^{\prime}%
\operatorname{mod}n$.

Subtracting the congruence $b\equiv b\operatorname{mod}n$ (which follows from
Proposition \ref{prop.ent.mod.basics} \textbf{(a)}) from the congruence
$a\equiv a^{\prime}\operatorname{mod}n$, we obtain $a-b\equiv a^{\prime
}-b\operatorname{mod}n$. Multiplying this congruence with the congruence
$a+b\equiv a+b\operatorname{mod}n$ (which follows from Proposition
\ref{prop.ent.mod.basics} \textbf{(a)}), we obtain $\left(  a-b\right)
\left(  a+b\right)  \equiv\left(  a^{\prime}-b\right)  \left(  a+b\right)
\operatorname{mod}n$. This proves (\ref{eq.mod.substitutivity-congs.2}).
\end{proof}

As we said, these two proofs are exemplary: Any congruence obtained from the
PSC can be proven in such a way (starting with the congruence $x\equiv
x^{\prime}\operatorname{mod}n$, and then \textquotedblleft
wrapping\textquotedblright\ it up in the expression $A$ by repeatedly adding,
multiplying and subtracting congruences that follow from Proposition
\ref{prop.ent.mod.basics} \textbf{(a)}).

When we apply the PSC, we shall use underbraces to point out which integers we
are replacing. For example, when deriving (\ref{eq.mod.substitutivity-congs.1}%
) from this principle, we shall write%
\[
a\left(  b-\left(  \underbrace{c}_{\equiv c^{\prime}\operatorname{mod}%
n}+d\right)  e\right)  \equiv a\left(  b-\left(  c^{\prime}+d\right)
e\right)  \operatorname{mod}n,
\]
in order to stress that we are replacing $c$ by $c^{\prime}$. Likewise, when
deriving (\ref{eq.mod.substitutivity-congs.2}) from the PSC, we shall write%
\[
\left(  \underbrace{a}_{\equiv a^{\prime}\operatorname{mod}n}-b\right)
\left(  a+b\right)  \equiv\left(  a^{\prime}-b\right)  \left(  a+b\right)
\operatorname{mod}n,
\]
in order to stress that we are replacing the first $a$ (but not the second
$a$) by $a^{\prime}$.

The PSC allows us to replace a \textbf{single} integer $x$ appearing in an
expression by another integer $x^{\prime}$ that is congruent to $x$ modulo
$n$. Applying this principle many times, we thus conclude that we can also
replace \textbf{several} integers at the same time (because we can get to the
same result by performing these replacements one at a time, and Proposition
\ref{prop.mod.chain} shows that the final result will be congruent to the
original result). For example, if seven integers $a,a^{\prime},b,b^{\prime
},c,c^{\prime},n$ satisfy $a\equiv a^{\prime}\operatorname{mod}n$ and $b\equiv
b^{\prime}\operatorname{mod}n$ and $c\equiv c^{\prime}\operatorname{mod}n$,
then%
\begin{equation}
bc+ca+ab\equiv b^{\prime}c^{\prime}+c^{\prime}a^{\prime}+a^{\prime}b^{\prime
}\operatorname{mod}n, \label{eq.mod.substitutivity-congs.3}%
\end{equation}
because we can replace all the six integers $b,c,c,a,a,b$ in the expression
$bc+ca+ab$ (listed in the order of their appearance in this expression) by
$b^{\prime},c^{\prime},c^{\prime},a^{\prime},a^{\prime},b^{\prime}$,
respectively. If we want to derive this from the PSC, then we must perform the
replacements one at a time, e.g., as follows:%
\begin{align*}
\underbrace{b}_{\equiv b^{\prime}\operatorname{mod}n}c+ca+ab  &  \equiv
b^{\prime}\underbrace{c}_{\equiv c^{\prime}\operatorname{mod}n}+ca+ab\equiv
b^{\prime}c^{\prime}+\underbrace{c}_{\equiv c^{\prime}\operatorname{mod}%
n}a+ab\\
&  \equiv b^{\prime}c^{\prime}+c^{\prime}\underbrace{a}_{\equiv a^{\prime
}\operatorname{mod}n}+ab\equiv b^{\prime}c^{\prime}+c^{\prime}a^{\prime
}+\underbrace{a}_{\equiv a^{\prime}\operatorname{mod}n}b\\
&  \equiv b^{\prime}c^{\prime}+c^{\prime}a^{\prime}+a^{\prime}\underbrace{b}%
_{\equiv b^{\prime}\operatorname{mod}n}\equiv b^{\prime}c^{\prime}+c^{\prime
}a^{\prime}+a^{\prime}b^{\prime}\operatorname{mod}n.
\end{align*}
Of course, we shall always just show the replacements as a single step:%
\[
\underbrace{b}_{\equiv b^{\prime}\operatorname{mod}n}\ \ \underbrace{c}%
_{\equiv c^{\prime}\operatorname{mod}n}+\underbrace{c}_{\equiv c^{\prime
}\operatorname{mod}n}\ \ \underbrace{a}_{\equiv a^{\prime}\operatorname{mod}%
n}+\underbrace{a}_{\equiv a^{\prime}\operatorname{mod}n}\ \ \underbrace{b}%
_{\equiv b^{\prime}\operatorname{mod}n}\equiv b^{\prime}c^{\prime}+c^{\prime
}a^{\prime}+a^{\prime}b^{\prime}\operatorname{mod}n.
\]


The PSC can be extended: The expression $A$ can be allowed to involve not only
integers, addition, subtraction, multiplication and $x$, but also $k$-th
powers for $k\in\mathbb{N}$ (as long as $k$ remains unchanged in our
replacement) as well as finite sums and products (as long as the bounds of the
sums and products are unchanged). This follows from Exercise
\ref{exe.ent.mod.basics.k-power} and Exercise \ref{exe.ent.mod.k-sum}.

\begin{exercise}
\label{exe.ent.mod.substitutivity.7div}Let $n\in\mathbb{N}$. Show that
$7\mid3^{2n+1}+2^{n+2}$.
\end{exercise}

\begin{center}
\textbf{2019-02-01 lecture}
\end{center}

\subsection{\label{sect.ent.quorem}Division with remainder}

The following fact you likely remember from high school:

\begin{theorem}
\label{thm.ent.quorem.full}Let $n$ be a positive integer. Let $u\in\mathbb{Z}%
$. Then, there exists a unique pair $\left(  q,r\right)  \in\mathbb{Z}%
\times\left\{  0,1,\ldots,n-1\right\}  $ such that $u=qn+r$.
\end{theorem}

We shall refer to this as the \textquotedblleft\textit{division-with-remainder
theorem for integers}\textquotedblright. Before we prove this theorem, let us
introduce the notations that it justifies:

\begin{definition}
\label{def.ent.quorem}Let $n$ be a positive integer. Let $u\in\mathbb{Z}$.
Theorem \ref{thm.ent.quorem.full} shows that there exists a unique pair
$\left(  q,r\right)  \in\mathbb{Z}\times\left\{  0,1,\ldots,n-1\right\}  $
such that $u=qn+r$. Consider this pair.

\textbf{(a)} We denote the integer $q$ by $u//n$, and refer to it as the
\textit{quotient of the division of }$u$ \textit{by }$n$.

\textbf{(b)} We denote the integer $r$ by $u\%n$, and refer to it as the
\textit{remainder of the division of }$u$ \textit{by }$n$.
\end{definition}

The words \textquotedblleft quotient\textquotedblright\ and \textquotedblleft
remainder\textquotedblright\ are standard, but the notations \textquotedblleft%
$u//n$\textquotedblright\ and \textquotedblleft$u\%n$\textquotedblright\ are
not (I have taken them from the Python programming language); be prepared to
see other notations in the literature (e.g., the notations \textquotedblleft%
$\operatorname*{quo}\left(  u,n\right)  $\textquotedblright\ and
\textquotedblleft$\operatorname*{rem}\left(  u,n\right)  $\textquotedblright%
\ for $u//n$ and $u\%n$, respectively).

\begin{example}
\textbf{(a)} We have $14//3=4$ and $14\%3=2$, because $\left(  4,2\right)  $
is the unique pair $\left(  q,r\right)  \in\mathbb{Z}\times\left\{
0,1,2\right\}  $ satisfying $14=q\cdot3+r$.

\textbf{(b)} We have $18//3=6$ and $18\%3=0$, because $\left(  6,0\right)  $
is the unique pair $\left(  q,r\right)  \in\mathbb{Z}\times\left\{
0,1,2\right\}  $ satisfying $18=q\cdot3+r$.

\textbf{(c)} We have $\left(  -2\right)  //3=-1$ and $\left(  -2\right)
\%3=1$, because $\left(  -1,1\right)  $ is the unique pair $\left(
q,r\right)  \in\mathbb{Z}\times\left\{  0,1,2\right\}  $ satisfying
$-2=q\cdot3+r$.

\textbf{(d)} For each $u\in\mathbb{Z}$, we have $u//1=u$ and $u\%1=0$, because
$\left(  u,0\right)  $ is the unique pair $\left(  q,r\right)  \in
\mathbb{Z}\times\left\{  0\right\}  $ satisfying $u=q\cdot1+r$.
\end{example}

But we have gotten ahead of ourselves: We need to prove Theorem
\ref{thm.ent.quorem.full} before we can use the notations \textquotedblleft%
$u//n$\textquotedblright\ and \textquotedblleft$u\%n$\textquotedblright.

Let us split Theorem \ref{thm.ent.quorem.full} into two parts: existence and uniqueness:

\begin{lemma}
\label{lem.ent.quorem.exist}Let $n$ be a positive integer. Let $u\in
\mathbb{Z}$. Then, there exists \textbf{at least one} pair $\left(
q,r\right)  \in\mathbb{Z}\times\left\{  0,1,\ldots,n-1\right\}  $ such that
$u=qn+r$.
\end{lemma}

\begin{lemma}
\label{lem.ent.quorem.unique}Let $n$ be a positive integer. Let $u\in
\mathbb{Z}$. Then, there exists \textbf{at most one} pair $\left(  q,r\right)
\in\mathbb{Z}\times\left\{  0,1,\ldots,n-1\right\}  $ such that $u=qn+r$.
\end{lemma}

We begin by proving Lemma \ref{lem.ent.quorem.unique} (which is the easier one):

\begin{proof}
[Proof of Lemma \ref{lem.ent.quorem.unique}.]Let $\left(  q_{1},r_{1}\right)
$ and $\left(  q_{2},r_{2}\right)  $ be two pairs $\left(  q,r\right)
\in\mathbb{Z}\times\left\{  0,1,\ldots,n-1\right\}  $ such that $u=qn+r$. We
shall show that $\left(  q_{1},r_{1}\right)  =\left(  q_{2},r_{2}\right)  $.

We know that $\left(  q_{1},r_{1}\right)  $ is a pair $\left(  q,r\right)
\in\mathbb{Z}\times\left\{  0,1,\ldots,n-1\right\}  $ such that $u=qn+r$. In
other words, $\left(  q_{1},r_{1}\right)  \in\mathbb{Z}\times\left\{
0,1,\ldots,n-1\right\}  $ and $u=q_{1}n+r_{1}$. Similarly, $\left(
q_{2},r_{2}\right)  \in\mathbb{Z}\times\left\{  0,1,\ldots,n-1\right\}  $ and
$u=q_{2}n+r_{2}$.

From $\left(  q_{1},r_{1}\right)  \in\mathbb{Z}\times\left\{  0,1,\ldots
,n-1\right\}  $, we obtain $q_{1}\in\mathbb{Z}$ and $r_{1}\in\left\{
0,1,\ldots,n-1\right\}  $. Similarly, $q_{2}\in\mathbb{Z}$ and $r_{2}%
\in\left\{  0,1,\ldots,n-1\right\}  $. Thus, in particular, $q_{1},q_{2}%
,r_{1},r_{2}$ are integers.

From $r_{1}\in\left\{  0,1,\ldots,n-1\right\}  $ and $r_{2}\in\left\{
0,1,\ldots,n-1\right\}  $, we can easily derive%
\begin{equation}
\left\vert r_{2}-r_{1}\right\vert \leq n-1.
\label{pf.lem.ent.quorem.unique.ineq}%
\end{equation}


\begin{fineprint}
[\textit{Proof of (\ref{pf.lem.ent.quorem.unique.ineq}):} Intuitively, this
should be clear: Both $r_{1}$ and $r_{2}$ belong to the integer interval
$\left\{  0,1,\ldots,n-1\right\}  $, and thus the unsigned distance between
$r_{1}$ and $r_{2}$ is at most $n-1$ (with the worst case being when $r_{1}$
and $r_{2}$ are at opposite ends of this interval).

Here is a formal restatement of this argument: We have $r_{1}\in\left\{
0,1,\ldots,n-1\right\}  $, thus $r_{1}\geq0$. Also, $r_{2}\in\left\{
0,1,\ldots,n-1\right\}  $, hence $r_{2}\leq n-1$. Hence, $\underbrace{r_{2}%
}_{\leq n-1}-\underbrace{r_{1}}_{\geq0}\leq\left(  n-1\right)  -0=n-1$.
Similarly, $r_{1}-r_{2}\leq n-1$. But recall that $\left\vert x\right\vert
\in\left\{  x,-x\right\}  $ for each $x\in\mathbb{Z}$. Applying this to
$x=r_{2}-r_{1}$, we obtain
\[
\left\vert r_{2}-r_{1}\right\vert \in\left\{  r_{2}-r_{1},\underbrace{-\left(
r_{2}-r_{1}\right)  }_{=r_{1}-r_{2}}\right\}  =\left\{  r_{2}-r_{1}%
,r_{1}-r_{2}\right\}  .
\]
In other words, $\left\vert r_{2}-r_{1}\right\vert $ is one of the two numbers
$r_{2}-r_{1}$ and $r_{1}-r_{2}$. Since both of these numbers $r_{2}-r_{1}$ and
$r_{1}-r_{2}$ are $\leq n-1$ (as we have just shown), we thus conclude that
$\left\vert r_{2}-r_{1}\right\vert \leq n-1$. This proves
(\ref{pf.lem.ent.quorem.unique.ineq}).]
\end{fineprint}

We have $q_{1}n+r_{1}=u=q_{2}n+r_{2}$, thus $q_{1}n-q_{2}n=r_{2}-r_{1}$.
Hence,%
\begin{equation}
r_{2}-r_{1}=q_{1}n-q_{2}n=\left(  q_{1}-q_{2}\right)  n.
\label{pf.lem.ent.quorem.unique.1}%
\end{equation}


Assume (for the sake of contradiction) that $q_{1}\neq q_{2}$. Thus,
$q_{1}-q_{2}\neq0$, so that $\left\vert q_{1}-q_{2}\right\vert >0$ and
therefore $\left\vert q_{1}-q_{2}\right\vert \geq1$ (since $\left\vert
q_{1}-q_{2}\right\vert $ is an integer). We can multiply this inequality by
$n$ (since $n$ is positive) and thus obtain $\left\vert q_{1}-q_{2}\right\vert
n\geq1n=n$. But from (\ref{pf.lem.ent.quorem.unique.1}), we obtain%
\begin{align*}
\left\vert r_{2}-r_{1}\right\vert  &  =\left\vert \left(  q_{1}-q_{2}\right)
n\right\vert =\left\vert q_{1}-q_{2}\right\vert \cdot\underbrace{\left\vert
n\right\vert }_{\substack{=n\\\text{(since }n\text{ is positive)}%
}}\ \ \ \ \ \ \ \ \ \ \left(  \text{by (\ref{eq.ent.div.abs(xy)})}\right) \\
&  =\left\vert q_{1}-q_{2}\right\vert n\geq n>n-1.
\end{align*}
This contradicts (\ref{pf.lem.ent.quorem.unique.ineq}). This contradiction
shows that our assumption (that $q_{1}\neq q_{2}$) was false. Hence, we have
$q_{1}=q_{2}$. Thus, $q_{1}-q_{2}=0$, so that
(\ref{pf.lem.ent.quorem.unique.1}) becomes $r_{2}-r_{1}=\underbrace{\left(
q_{1}-q_{2}\right)  }_{=0}n=0$ and thus $r_{2}=r_{1}$, so that $r_{1}=r_{2}$.
Combining this with $q_{1}=q_{2}$, we obtain $\left(  q_{1},r_{1}\right)
=\left(  q_{2},r_{2}\right)  $.

Now, forget that we have fixed $\left(  q_{1},r_{1}\right)  $ and $\left(
q_{2},r_{2}\right)  $. We thus have proven that if $\left(  q_{1}%
,r_{1}\right)  $ and $\left(  q_{2},r_{2}\right)  $ are two pairs $\left(
q,r\right)  \in\mathbb{Z}\times\left\{  0,1,\ldots,n-1\right\}  $ such that
$u=qn+r$, then $\left(  q_{1},r_{1}\right)  =\left(  q_{2},r_{2}\right)  $. In
other words, any two pairs $\left(  q,r\right)  \in\mathbb{Z}\times\left\{
0,1,\ldots,n-1\right\}  $ such that $u=qn+r$ must be equal. In other words,
there exists at most one such pair. This proves Lemma
\ref{lem.ent.quorem.unique}.
\end{proof}

But we also need to prove Lemma \ref{lem.ent.quorem.exist}. This lemma can be
proven by induction on $u$, but not without some complications: Since it is
stated for all integers $u$ (rather than just for nonnegative or positive
integers), the classical induction principle (with an induction base and a
\textquotedblleft$u$ to $u+1$\textquotedblright\ step) cannot prove it
directly. Instead, we have to either add a \textquotedblleft$u$ to
$u-1$\textquotedblright\ step to our induction (resulting in a
\textquotedblleft two-sided induction\textquotedblright\ or \textquotedblleft
up- and down-induction\textquotedblright\ argument), or to treat the case of
negative $u$ separately. A proof using the first of these two methods can be
found in \cite[proof of Proposition 2.150]{detnotes} (where $n$ and $u$ are
denoted by $N$ and $n$). We shall instead give a proof using the second
method; thus, we first state the particular case of Lemma
\ref{lem.ent.quorem.exist} when $u$ is nonnegative:

\begin{lemma}
\label{lem.ent.quorem.existN}Let $n$ be a positive integer. Let $u\in
\mathbb{N}$. Then, there exists \textbf{at least one} pair $\left(
q,r\right)  \in\mathbb{Z}\times\left\{  0,1,\ldots,n-1\right\}  $ such that
$u=qn+r$.
\end{lemma}

This lemma can be proven by induction on $u$ as in \cite[proof of Proposition
2.150]{detnotes}. Let us instead prove it by \textbf{strong} induction on $u$.
See \cite[\S 2.8]{detnotes} for an introduction to strong induction; in
particular, recall that a strong induction needs no induction base (but often
contains a case distinction in its \textquotedblleft induction
step\textquotedblright\ that, in some way, does give the first few values a
special treatment). The proof of Lemma \ref{lem.ent.quorem.existN} that we
give below follows a stupid but valid method of finding the pair $\left(
q,r\right)  $: Keep subtracting $n$ from $u$ until $u$ becomes $<n$; then $r$
will be the resulting number, whereas $q$ will be the number of times you have
subtracted $n$.

\begin{proof}
[Proof of Lemma \ref{lem.ent.quorem.existN}.]We proceed by strong induction on
$u$.

Let $U\in\mathbb{N}$. Assume (as the induction hypothesis) that Lemma
\ref{lem.ent.quorem.existN} holds for every $u\in\mathbb{N}$ satisfying $u<U$.
We must prove that Lemma \ref{lem.ent.quorem.existN} also holds for $u=U$. In
other words, we must prove that there exists \textbf{at least one} pair
$\left(  q,r\right)  \in\mathbb{Z}\times\left\{  0,1,\ldots,n-1\right\}  $
such that $U=qn+r$.

We are in one of the following two cases:

\textit{Case 1:} We have $U<n$.

\textit{Case 2:} We have $U\geq n$.

Let us first consider Case 1. In this case, we have $U<n$. Thus, $U\leq n-1$
(since $U$ and $n$ are integers), so that $U\in\left\{  0,1,\ldots
,n-1\right\}  $ (since $U\in\mathbb{N}$). Combining this with $0\in\mathbb{Z}%
$, we obtain $\left(  0,U\right)  \in\mathbb{Z}\times\left\{  0,1,\ldots
,n-1\right\}  $. Hence, $\left(  0,U\right)  $ is a pair $\left(  q,r\right)
\in\mathbb{Z}\times\left\{  0,1,\ldots,n-1\right\}  $ such that $U=qn+r$
(since $U=0n+U$). Thus, there exists \textbf{at least one} pair $\left(
q,r\right)  \in\mathbb{Z}\times\left\{  0,1,\ldots,n-1\right\}  $ such that
$U=qn+r$ (namely, $\left(  q,r\right)  =\left(  0,U\right)  $).

Let us now consider Case 2. In this case, we have $U\geq n$. Hence, $U-n\geq
0$, so that $U-n\in\mathbb{N}$ (remember that $\mathbb{N}=\left\{
0,1,2,\ldots\right\}  $). Also, $U-n<U$ (since $n$ is positive). But our
induction hypothesis said that Lemma \ref{lem.ent.quorem.existN} holds for
every $u\in\mathbb{N}$ satisfying $u<U$. Hence, in particular, Lemma
\ref{lem.ent.quorem.existN} holds for $u=U-n$ (since $U-n\in\mathbb{N}$ and
$U-n<U$). In other words, there exists \textbf{at least one} pair $\left(
q,r\right)  \in\mathbb{Z}\times\left\{  0,1,\ldots,n-1\right\}  $ such that
$U-n=qn+r$. Fix such a pair and denote it by $\left(  q_{0},r_{0}\right)  $.
Thus, $\left(  q_{0},r_{0}\right)  \in\mathbb{Z}\times\left\{  0,1,\ldots
,n-1\right\}  $ and $U-n=q_{0}n+r_{0}$.

From $U-n=q_{0}n+r_{0}$, we obtain $U=n+\left(  q_{0}n+r_{0}\right)  =\left(
q_{0}+1\right)  n+r_{0}$. Also, from $\left(  q_{0},r_{0}\right)
\in\mathbb{Z}\times\left\{  0,1,\ldots,n-1\right\}  $, we obtain $q_{0}%
\in\mathbb{Z}$ and $r_{0}\in\left\{  0,1,\ldots,n-1\right\}  $, and thus
$\left(  q_{0}+1,r_{0}\right)  \in\mathbb{Z}\times\left\{  0,1,\ldots
,n-1\right\}  $. Thus, the pair $\left(  q_{0}+1,r_{0}\right)  $ is a pair
$\left(  q,r\right)  \in\mathbb{Z}\times\left\{  0,1,\ldots,n-1\right\}  $
such that $U=qn+r$ (since $U=\left(  q_{0}+1\right)  n+r_{0}$). Therefore,
there exists \textbf{at least one} pair $\left(  q,r\right)  \in
\mathbb{Z}\times\left\{  0,1,\ldots,n-1\right\}  $ such that $U=qn+r$ (namely,
$\left(  q,r\right)  =\left(  q_{0}+1,r_{0}\right)  $).

Now, in each of the two Cases 1 and 2, we have shown that there exists
\textbf{at least one} pair $\left(  q,r\right)  \in\mathbb{Z}\times\left\{
0,1,\ldots,n-1\right\}  $ such that $U=qn+r$. Hence, this holds always. In
other words, Lemma \ref{lem.ent.quorem.existN} holds for $u=U$. This completes
the induction step; thus, Lemma \ref{lem.ent.quorem.existN} is proven by
strong induction.
\end{proof}

In order to derive Lemma \ref{lem.ent.quorem.exist} from Lemma
\ref{lem.ent.quorem.existN} (that is, to extend Lemma
\ref{lem.ent.quorem.existN} to the case of negative $u$), we shall need a
simple but important trick:

\begin{lemma}
\label{lem.ent.cong-to-nonneg}Let $n$ be a positive integer. Let
$u\in\mathbb{Z}$. Then, there exists a $v\in\mathbb{N}$ such that $u\equiv
v\operatorname{mod}n$.
\end{lemma}

\begin{proof}
[Proof of Lemma \ref{lem.ent.cong-to-nonneg}.]We are in one of the following
two cases:

\textit{Case 1:} We have $u\geq0$.

\textit{Case 2:} We have $u<0$.

Let us first consider Case 1. In this case, we have $u\geq0$. Thus,
$u\in\mathbb{N}$. Also, $u\equiv u\operatorname{mod}n$ (by Proposition
\ref{prop.ent.mod.basics} \textbf{(a)}). Thus, there exists a $v\in\mathbb{N}$
such that $u\equiv v\operatorname{mod}n$ (namely, $v=u$). This proves Lemma
\ref{lem.ent.cong-to-nonneg} in Case 1.

Let us now consider Case 2. In this case, we have $u<0$. Hence, $-u>0$. Now,
$u-\left(  n-1\right)  \left(  -u\right)  =nu$ is divisible by $n$ (since
$u\in\mathbb{Z}$). In other words, $n\mid u-\left(  n-1\right)  \left(
-u\right)  $. In other words, $u\equiv\left(  n-1\right)  \left(  -u\right)
\operatorname{mod}n$. Moreover, $n\geq1$ (since $n$ is a positive integer), so
that $n-1\geq0$. We can multiply this inequality with $-u$ (since $-u>0$), and
thus obtain $\left(  n-1\right)  \left(  -u\right)  \geq0\left(  -u\right)
=0$. In other words, $\left(  n-1\right)  \left(  -u\right)  \in\mathbb{N}$.
Thus, there exists a $v\in\mathbb{N}$ such that $u\equiv v\operatorname{mod}n$
(namely, $v=\left(  n-1\right)  \left(  -u\right)  $). This proves Lemma
\ref{lem.ent.cong-to-nonneg} in Case 2.

We have now proven Lemma \ref{lem.ent.cong-to-nonneg} in both Cases 1 and 2;
hence, Lemma \ref{lem.ent.cong-to-nonneg} always holds.
\end{proof}

\begin{proof}
[Proof of Lemma \ref{lem.ent.quorem.exist}.]Lemma \ref{lem.ent.cong-to-nonneg}
shows that there exists a $v\in\mathbb{N}$ such that $u\equiv
v\operatorname{mod}n$. Consider this $v$.

Note that $n\mid u-v$ (since $u\equiv v\operatorname{mod}n$). In other words,
there exists an integer $c$ such that $u-v=nc$. Consider this $c$. From
$u-v=nc$, we obtain $u=v+nc$.

Lemma \ref{lem.ent.quorem.existN} (applied to $v$ instead of $u$) yields that
there exists \textbf{at least one} pair $\left(  q,r\right)  \in
\mathbb{Z}\times\left\{  0,1,\ldots,n-1\right\}  $ such that $v=qn+r$. Fix
such a pair, and denote it by $\left(  q_{0},r_{0}\right)  $. Thus, $\left(
q_{0},r_{0}\right)  \in\mathbb{Z}\times\left\{  0,1,\ldots,n-1\right\}  $ and
$v=q_{0}n+r_{0}$. Now,%
\[
u=\underbrace{v}_{=q_{0}n+r_{0}}+nc=\left(  q_{0}n+r_{0}\right)  +nc=\left(
q_{0}+c\right)  n+r_{0}.
\]
Also, from $\left(  q_{0},r_{0}\right)  \in\mathbb{Z}\times\left\{
0,1,\ldots,n-1\right\}  $, we obtain $q_{0}\in\mathbb{Z}$ and $r_{0}%
\in\left\{  0,1,\ldots,n-1\right\}  $, and thus $\left(  q_{0}+c,r_{0}\right)
\in\mathbb{Z}\times\left\{  0,1,\ldots,n-1\right\}  $. Thus, the pair $\left(
q_{0}+c,r_{0}\right)  $ is a pair $\left(  q,r\right)  \in\mathbb{Z}%
\times\left\{  0,1,\ldots,n-1\right\}  $ such that $u=qn+r$ (since $u=\left(
q_{0}+c\right)  n+r_{0}$). Therefore, there exists \textbf{at least one} pair
$\left(  q,r\right)  \in\mathbb{Z}\times\left\{  0,1,\ldots,n-1\right\}  $
such that $u=qn+r$ (namely, $\left(  q,r\right)  =\left(  q_{0}+c,r_{0}%
\right)  $). This proves Lemma \ref{lem.ent.quorem.exist}.
\end{proof}

\begin{proof}
[Proof of Theorem \ref{thm.ent.quorem.full}.]Theorem \ref{thm.ent.quorem.full}
follows by combining Lemma \ref{lem.ent.quorem.exist} with Lemma
\ref{lem.ent.quorem.unique}.
\end{proof}

\begin{remark}
\label{rmk.ent.quo-rem.full.geo}We can visualize Theorem
\ref{thm.ent.quorem.full} as follows: Mark all the multiples of $n$ on the
real line. These multiples are evenly spaced points, with a distance of $n$
between any two neighboring multiples. Thus, they subdivide the real line into
infinitely many intervals of length $n$. More precisely, for each
$a\in\mathbb{Z}$, let $I_{a}$ be the interval $\left[  an,\left(  a+1\right)
n\right)  =\left\{  x\in\mathbb{Z}\ \mid\ an\leq x<\left(  a+1\right)
n\right\}  $; then, every real belongs to exactly one of these intervals
$I_{a}$. (This is intuitively clear -- I am not saying this is a rigorous
proof.) Thus, in particular, $u$ belongs to $I_{q}$ for some $q\in\mathbb{Z}$.
This $q$ is precisely the $q$ in the unique pair $\left(  q,r\right)
\in\mathbb{Z}\times\left\{  0,1,\ldots,n-1\right\}  $ satisfying $u=qn+r$.
Moreover, the $r$ from this pair specifies the relative position of $u$ in the
interval $I_{q}$.

(Unfortunately, it is not clear to me whether this intuition can be turned
into a proper proof of Theorem \ref{thm.ent.quorem.full}, since it relies on
the fact that every real number belongs to exactly one of the intervals
$I_{a}$, which fact may well require Theorem \ref{thm.ent.quorem.full} for its proof.)
\end{remark}

The following properties of the quotient and the remainder are simple but will
be used all the time:

\begin{corollary}
\label{cor.ent.quo-rem.remmod}Let $n$ be a positive integer. Let
$u\in\mathbb{Z}$.

\textbf{(a)} Then, $u\%n\in\left\{  0,1,\ldots,n-1\right\}  $ and $u\%n\equiv
u\operatorname{mod}n$.

\textbf{(b)} We have $n\mid u$ if and only if $u\%n=0$.

\textbf{(c)} If $c\in\left\{  0,1,\ldots,n-1\right\}  $ is such that $c\equiv
u\operatorname{mod}n$, then $c=u\%n$.

\textbf{(d)} We have $u=\left(  u//n\right)  n+\left(  u\%n\right)  $.
\end{corollary}

Before we prove this corollary, let us explain its purpose. Corollary
\ref{cor.ent.quo-rem.remmod} \textbf{(a)} says that $u\%n$ is a number in the
set $\left\{  0,1,\ldots,n-1\right\}  $ that is congruent to $u$ modulo $n$.
Corollary \ref{cor.ent.quo-rem.remmod} \textbf{(c)} says that $u\%n$ is the
\textbf{only} such number (as it says that any further such number $c$ must be
equal to $u\%n$). Corollary \ref{cor.ent.quo-rem.remmod} \textbf{(b)} gives an
algorithm to check whether $n\mid u$ holds (namely, compute $u\%n$ and check
whether $u\%n=0$). Corollary \ref{cor.ent.quo-rem.remmod} \textbf{(d)} is a
trivial consequence of the definition of quotient and remainder.

\begin{proof}
[Proof of Corollary \ref{cor.ent.quo-rem.remmod}.]Theorem
\ref{thm.ent.quorem.full} says that there is a unique pair $\left(
q,r\right)  \in\mathbb{Z}\times\left\{  0,1,\ldots,n-1\right\}  $ such that
$u=qn+r$. Consider this pair $\left(  q,r\right)  $. The uniqueness of this
pair can be restated as follows: If $\left(  q^{\prime},r^{\prime}\right)
\in\mathbb{Z}\times\left\{  0,1,\ldots,n-1\right\}  $ is any further pair such
that $u=q^{\prime}n+r^{\prime}$, then%
\begin{equation}
\left(  q^{\prime},r^{\prime}\right)  =\left(  q,r\right)  .
\label{pf.cor.ent.quo-rem.remmod.uni}%
\end{equation}


Recall that $u\%n$ was defined to be $r$ (in Definition \ref{def.ent.quorem}
\textbf{(b)}). Thus, $u\%n=r$. Now, $n\mid qn=u-r$ (since $u=qn+r$). In other
words, $u\equiv r\operatorname{mod}n$. Hence, $r\equiv u\operatorname{mod}n$
(by Proposition \ref{prop.ent.mod.basics} \textbf{(c)}). This rewrites as
$u\%n\equiv u\operatorname{mod}n$ (since $r=u\%n$).

Furthermore, $u\%n=r\in\left\{  0,1,\ldots,n-1\right\}  $ (since $\left(
q,r\right)  \in\mathbb{Z}\times\left\{  0,1,\ldots,n-1\right\}  $). This
completes the proof of Corollary \ref{cor.ent.quo-rem.remmod} \textbf{(a)}.

Also, $u//n$ was defined to be $q$ (in Definition \ref{def.ent.quorem}
\textbf{(a)}). Hence, $u//n=q$. Now,%
\[
u=\underbrace{q}_{=u//n}n+\underbrace{r}_{=u\%n}=\left(  u//n\right)
n+\left(  u\%n\right)  .
\]
This proves Corollary \ref{cor.ent.quo-rem.remmod} \textbf{(d)}.

\textbf{(b)} $\Longrightarrow:$ Assume that $n\mid u$. We must prove that
$u\%n=0$.

We have $n\mid u$. In other words, there exists some integer $w$ such that
$u=nw$. Consider this $w$.

We have $n-1\in\mathbb{N}$ (since $n$ is a positive integer), thus
$0\in\left\{  0,1,\ldots,n-1\right\}  $. Hence, $\left(  w,0\right)
\in\mathbb{Z}\times\left\{  0,1,\ldots,n-1\right\}  $ (since $w\in\mathbb{Z}%
$). Also, $u=nw=wn=wn+0$. Hence, (\ref{pf.cor.ent.quo-rem.remmod.uni})
(applied to $\left(  q^{\prime},r^{\prime}\right)  =\left(  w,0\right)  $)
yields $\left(  w,0\right)  =\left(  q,r\right)  $. In other words, $w=q$ and
$0=r$. Hence, $r=0$, so that $u\%n=r=0$. This proves the \textquotedblleft%
$\Longrightarrow$\textquotedblright\ implication of Corollary
\ref{cor.ent.quo-rem.remmod} \textbf{(b)}.

$\Longleftarrow:$ Assume that $u\%n=0$. We must prove that $n\mid u$.

We have $u=qn+\underbrace{r}_{=u\%n=0}=qn=nq$. Thus, $n\mid u$. This proves
the \textquotedblleft$\Longleftarrow$\textquotedblright\ implication of
Corollary \ref{cor.ent.quo-rem.remmod} \textbf{(b)}.

\textbf{(c)} Let $c\in\left\{  0,1,\ldots,n-1\right\}  $ be such that $c\equiv
u\operatorname{mod}n$.

We have $c\equiv u\operatorname{mod}n$. In other words, $n\mid c-u$. In other
words, there exists some integer $w$ such that $c-u=nw$. Consider this $w$.

From $-w\in\mathbb{Z}$ and $c\in\left\{  0,1,\ldots,n-1\right\}  $, we obtain
$\left(  -w,c\right)  \in\mathbb{Z}\times\left\{  0,1,\ldots,n-1\right\}  $.
Also, from $c-u=nw$, we obtain $u=c-nw=\left(  -w\right)  n+c$. Hence,
(\ref{pf.cor.ent.quo-rem.remmod.uni}) (applied to $\left(  q^{\prime
},r^{\prime}\right)  =\left(  -w,c\right)  $) yields $\left(  -w,c\right)
=\left(  q,r\right)  $. In other words, $-w=q$ and $c=r$. Hence, $c=r=u\%n$.
This proves Corollary \ref{cor.ent.quo-rem.remmod} \textbf{(c)}.
\end{proof}

\begin{exercise}
\label{exe.ent.quo-rem.mod=rem}Let $n$ be a positive integer. Let $u$ and $v$
be integers. Prove that $u\equiv v\operatorname{mod}n$ if and only if
$u\%n=v\%n$.
\end{exercise}

The following exercise provides an analogue of Theorem
\ref{thm.ent.quorem.full}, in which $r$ is required to be an integer
satisfying $\left\vert r\right\vert \leq n/2$ rather than an element of
$\left\{  0,1,\ldots,n-1\right\}  $. Note, however, that $r$ is not always
unique in this case.

\begin{exercise}
\label{exe.ent.quo-rem.minrem}Let $n$ be a positive integer. Let
$u\in\mathbb{Z}$.

\textbf{(a)} Prove that there exists a pair $\left(  q,r\right)  \in
\mathbb{Z}\times\mathbb{Z}$ such that $u=qn+r$ and $\left\vert r\right\vert
\leq n/2$.

\textbf{(b)} Prove that this pair is not unique in general (i.e., find $n$ and
$u$ for which it is not unique).
\end{exercise}

\begin{remark}
\label{rmk.ent.quo-rem.minrem.geo}There is a simple visualization that makes
Exercise \ref{exe.ent.quo-rem.minrem} \textbf{(a)} intuitively obvious: Mark
all the multiples of $n$ on the real line. These multiples are evenly spaced
points, with a distance of $n$ between any two neighboring multiples. Hence,
every point on the real line is at most a distance of $n/2$ away from the
closest multiple of $n$. Applying this to the point $u$, we conclude that $u$
is at most a distance of $n/2$ away from the closest multiple of $n$. In other
words, if $qn$ is the closest multiple of $n$ to $u$ (or one of the two
closest multiples of $n$, if $u$ is in the middle between two multiples), then
$\left\vert u-qn\right\vert \leq n/2$. Thus, if we set $r=u-qn$, then $u=qn+r$
and $\left\vert r\right\vert \leq n/2$. This proves Exercise
\ref{exe.ent.quo-rem.minrem} \textbf{(a)} intuitively.

This point of view also makes Exercise \ref{exe.ent.quo-rem.minrem}
\textbf{(b)} evident: When the point $u$ is exactly in the middle of one of
the length-$n$ intervals between multiples of $n$, then there are two
multiples of $n$ equally close to $u$, and we can pick either of them; hence,
the pair $\left(  q,r\right)  $ is not unique.
\end{remark}

\begin{convention}
The symbols $//$ and $\%$ will be granted higher precedence (in the sense of
\href{https://en.wikipedia.org/wiki/Order_of_operations}{operator precedence})
than addition. This means that an expression of the form \textquotedblleft%
$c+a//n+b$\textquotedblright\ will always be interpreted as \textquotedblleft%
$c+\left(  a//n\right)  +b$\textquotedblright, rather than as
\textquotedblleft$\left(  c+a\right)  //\left(  n+b\right)  $%
\textquotedblright\ (or in any other way). Likewise, an expression of the form
\textquotedblleft$c+a\%n+b$\textquotedblright\ will always be interpreted as
\textquotedblleft$c+\left(  a\%n\right)  +b$\textquotedblright, rather than as
\textquotedblleft$\left(  c+a\right)  \%\left(  n+b\right)  $%
\textquotedblright.
\end{convention}

\begin{exercise}
\label{exe.ent.quo-rem.u+v}Let $u$ and $v$ be two integers. Let $n$ be a
positive integer. Prove that
\[
u\%n+v\%n-\left(  u+v\right)  \%n\in\left\{  0,n\right\}  .
\]

\end{exercise}

\subsection{Even and odd numbers}

Recall the following:

\begin{definition}
\label{def.ent.even-odd}Let $u$ be an integer.

\textbf{(a)} We say that $u$ is \textit{even} if $u$ is divisible by $2$.

\textbf{(b)} We say that $u$ is \textit{odd }if $u$ is not divisible by $2$.
\end{definition}

So an integer is either even or odd (but not both at the same time). The
following exercise collects various properties of even and odd integers:

\begin{exercise}
\label{exe.ent.even-odd.1}Let $u$ be an integer.

\textbf{(a)} Prove that $u$ is even if and only if $u\%2=0$.

\textbf{(b)} Prove that $u$ is odd if and only if $u\%2=1$.

\textbf{(c)} Prove that $u$ is even if and only if $u\equiv0\operatorname{mod}%
2$.

\textbf{(d)} Prove that $u$ is odd if and only if $u\equiv1\operatorname{mod}%
2$.

\textbf{(e)} Prove that $u$ is odd if and only if $u+1$ is even.

\textbf{(f)} Prove that exactly one of the two numbers $u$ and $u+1$ is even.

\textbf{(g)} Prove that $u\left(  u+1\right)  \equiv0\operatorname{mod}2$.

\textbf{(h)} Prove that $u^{2}\equiv-u\equiv u\operatorname{mod}2$.

\textbf{(i)} Let $v$ be a further integer. Prove that $u\equiv
v\operatorname{mod}2$ holds if and only if $u$ and $v$ are either both odd or
both even.
\end{exercise}

\begin{exercise}
\label{exe.ent.even-odd-sumsq}\textbf{(a)} Prove that each even integer $u$
satisfies $u^{2}\equiv0\operatorname{mod}4$.

\textbf{(b)} Prove that each odd integer $u$ satisfies $u^{2}\equiv
1\operatorname{mod}4$.

\textbf{(c)} Prove that no two integers $x$ and $y$ satisfy $x^{2}+y^{2}%
\equiv3\operatorname{mod}4$.

\textbf{(d)} Prove that if $x$ and $y$ are two integers satisfying
$x^{2}+y^{2}\equiv2\operatorname{mod}4$, then $x$ and $y$ are both odd.
\end{exercise}

Exercise \ref{exe.ent.even-odd-sumsq} \textbf{(c)} establishes our previous
experimental observation that an integer of the form $4k+3$ with integer $k$
(that is, an integer that is larger by $3$ than a multiple of $4$) can never
be written as a sum of two perfect squares.

\begin{center}
\textbf{2019-02-04 lecture}
\end{center}

\subsection{The floor function}

\begin{definition}
\label{def.ent.floor}Let $x$ be a real number. Then, $\left\lfloor
x\right\rfloor $ is defined to be the unique integer $n$ satisfying $n\leq
x<n+1$. This integer $\left\lfloor x\right\rfloor $ is called the
\textit{floor} of $x$, or the \textit{integer part} of $x$.
\end{definition}

\begin{remark}
\label{rmk.ent.floor}\textbf{(a)} Why is $\left\lfloor x\right\rfloor $
well-defined? I mean, why does the unique integer $n$ in Definition
\ref{def.ent.floor} exist, and why is it unique? This question is trickier
than it sounds and relies on the construction of real numbers. However, in the
case when $x$ is rational, the well-definedness of $\left\lfloor
x\right\rfloor $ follows from Proposition \ref{prop.ent.floor.quorem} below.

\textbf{(b)} What we call $\left\lfloor x\right\rfloor $ is typically called
$\left[  x\right]  $ in older books (such as \cite{NiZuMo91}). I suggest
avoiding the notation $\left[  x\right]  $ wherever possible; it has too many
different meanings (whereas $\left\lfloor x\right\rfloor $ almost always means
the floor of $x$).

\textbf{(c)} The map $\mathbb{R}\rightarrow\mathbb{Z},\ x\mapsto\left\lfloor
x\right\rfloor $ is called the \textit{floor function} or the \textit{greatest
integer function}.

There is also a \textit{ceiling function}, which sends each $x\in\mathbb{R}$
to the unique integer $n$ satisfying $n-1<x\leq n$; this latter integer is
called $\left\lceil x\right\rceil $. The two functions are connected by the
rule $\left\lceil x\right\rceil =-\left\lfloor -x\right\rfloor $ (for all
$x\in\mathbb{R}$).

The floor and the ceiling functions are some of the simplest examples of
discontinuous functions.

\textbf{(d)} Here are some examples of floors:%
\begin{align*}
\left\lfloor n\right\rfloor  &  =n\ \ \ \ \ \ \ \ \ \ \text{for every }%
n\in\mathbb{Z};\\
\left\lfloor 1.32\right\rfloor  &  =1;\ \ \ \ \ \ \ \ \ \ \left\lfloor
\pi\right\rfloor =3;\ \ \ \ \ \ \ \ \ \ \left\lfloor 0.98\right\rfloor =0;\\
\left\lfloor -2.3\right\rfloor  &  =-3;\ \ \ \ \ \ \ \ \ \ \left\lfloor
-0.4\right\rfloor =-1.
\end{align*}


\textbf{(e)} You might have the impression that $\left\lfloor x\right\rfloor $
is \textquotedblleft what remains from $x$ if the digits behind the comma are
removed\textquotedblright. This impression is highly imprecise. For one, it is
completely broken for negative $x$ (for example, $\left\lfloor
-2.3\right\rfloor $ is $-3$, not $-2$). But more importantly, the operation of
\textquotedblleft removing the digits behind the comma\textquotedblright\ from
a number is not well-defined; the periodic decimal representations
$0.999\ldots$ and $1.000\ldots$ belong to the same real number ($1$), but
removing their digits behind the comma leaves us with different integers.

\textbf{(f)} A related map is the map $\mathbb{R}\rightarrow\mathbb{Z}%
,\ x\mapsto\left\lfloor x+\dfrac{1}{2}\right\rfloor $. It sends each real $x$
to the integer that is closest to $x$, choosing the larger one in the case of
a tie. This is one of the many things that are commonly known as
\textquotedblleft rounding\textquotedblright\ a number.
\end{remark}

\begin{proposition}
\label{prop.ent.floor.quorem}Let $a$ and $b$ be integers such that $b>0$.
Then, $\left\lfloor \dfrac{a}{b}\right\rfloor $ is well-defined and equals
$a//b$.
\end{proposition}

\begin{proof}
[Proof of Proposition \ref{prop.ent.floor.quorem}.]This is a rather easy and
neat exercise. A full proof can be found in \cite[proof of Proposition
1.1.3]{floor}.
\end{proof}

\subsection{Common divisors, the Euclidean algorithm and the Bezout theorem}

\subsubsection{Divisors}

\begin{definition}
\label{def.ent.divisors.divisors}Let $b\in\mathbb{Z}$. The \textit{divisors}
of $b$ are defined as the integers that divide $b$.
\end{definition}

Be aware that some authors use a mildly different definition of
\textquotedblleft divisors\textquotedblright; namely, they additionally
require them to be positive. We don't make such a requirement.

For example, the divisors of $6$ are $-6,-3,-2,-1,1,2,3,6$. Of course, the
negative divisors of an integer $b$ are merely the reflections of the positive
divisors through the origin\footnote{\textquotedblleft Reflection through the
origin\textquotedblright\ is just a poetic way to say \textquotedblleft
negative\textquotedblright; i.e., the reflection of a number $a$ through the
origin is $-a$.} (this follows easily from Proposition \ref{prop.ent.div.1}
\textbf{(a)}); thus, the positive divisors are usually the only ones of interest.

Here are some basic properties of divisors:

\begin{proposition}
\label{prop.ent.divisors.find}\textbf{(a)} If $b\in\mathbb{Z}$, then $1$ and
$b$ are divisors of $b$.

\textbf{(b)} The divisors of $0$ are all the integers.

\textbf{(c)} Let $b\in\mathbb{Z}$ be nonzero. Then, all divisors of $b$ belong
to the set $\left\{  -\left\vert b\right\vert ,-\left\vert b\right\vert
+1,\ldots,\left\vert b\right\vert \right\}  \setminus\left\{  0\right\}  $.
\end{proposition}

\begin{proof}
[Proof of Proposition \ref{prop.ent.divisors.find}.]\textbf{(a)} Clearly,
$1\mid b$ (since $b=1b$), so that $1$ is a divisor of $b$. Also, $b\mid b$
(since $b=b\cdot1$), so that $b$ is a divisor of $b$.

\textbf{(b)} Each integer $a$ divides $0$ (since $0=a\cdot0$) and thus is a
divisor of $0$. This proves Proposition \ref{prop.ent.divisors.find}
\textbf{(b)}.

\textbf{(c)} Let $a$ be a divisor of $b$. Then, $a$ divides $b$. In other
words, $a\mid b$. Hence, Proposition \ref{prop.ent.div.1} \textbf{(b)} yields
$\left\vert a\right\vert \leq\left\vert b\right\vert $ (since $b\neq0$). But
$\left\vert a\right\vert \geq a$ (since $\left\vert x\right\vert \geq x$ for
each $x\in\mathbb{R}$), so that $a\leq\left\vert a\right\vert \leq\left\vert
b\right\vert $. Also, $\left\vert a\right\vert \geq-a$ (since $\left\vert
x\right\vert \geq-x$ for each $x\in\mathbb{R}$) and thus $-a\leq\left\vert
a\right\vert \leq\left\vert b\right\vert $, so that $a\geq-\left\vert
b\right\vert $. Combining this with $a\leq\left\vert b\right\vert $, we obtain
$-\left\vert b\right\vert \leq a\leq\left\vert b\right\vert $ and thus
$a\in\left\{  -\left\vert b\right\vert ,-\left\vert b\right\vert
+1,\ldots,\left\vert b\right\vert \right\}  $ (since $a$ is an integer).

From Example \ref{exa.ent.div.triv} \textbf{(c)}, we know that $0\mid b$ only
when $b=0$. Thus, we don't have $0\mid b$ (since $b\neq0$).

If we had $a=0$, then we would have $0=a\mid b$, which would contradict the
fact that we don't have $0\mid b$. Thus, we cannot have $a=0$. Hence, $a\neq
0$. Combining $a\in\left\{  -\left\vert b\right\vert ,-\left\vert b\right\vert
+1,\ldots,\left\vert b\right\vert \right\}  $ with $a\neq0$, we obtain
$a\in\left\{  -\left\vert b\right\vert ,-\left\vert b\right\vert
+1,\ldots,\left\vert b\right\vert \right\}  \setminus\left\{  0\right\}  $.

We have proven this for each divisor $a$ of $b$. Thus, we conclude that all
divisors of $b$ belong to the set $\left\{  -\left\vert b\right\vert
,-\left\vert b\right\vert +1,\ldots,\left\vert b\right\vert \right\}
\setminus\left\{  0\right\}  $. This proves Proposition
\ref{prop.ent.divisors.find} \textbf{(c)}.
\end{proof}

Thanks to Proposition \ref{prop.ent.divisors.find}, we have a method to find
all divisors of an integer $b$: If $b=0$, then Proposition
\ref{prop.ent.divisors.find} \textbf{(b)} directly yields the result;
otherwise, Proposition \ref{prop.ent.divisors.find} \textbf{(c)} shows that
there is only a finite set of numbers we have to check. When $b$ is large,
this is slow, but to some extent that is because the problem is
computationally hard (or at least suspected to be hard).

\subsubsection{Common divisors}

It is somewhat more interesting to consider the common divisors of two or more integers:

\begin{definition}
\label{def.ent.Div}Let $b_{1},b_{2},\ldots,b_{k}$ be integers. Then, the
\textit{common divisors} of $b_{1},b_{2},\ldots,b_{k}$ are defined to be the
integers $a$ that satisfy%
\begin{equation}
\left(  a\mid b_{i}\text{ for all }i\in\left\{  1,2,\ldots,k\right\}  \right)
\label{eq.def.ent.Div.cond}%
\end{equation}
(in other words, that divide all of the integers $b_{1},b_{2},\ldots,b_{k}$).
We let $\operatorname*{Div}\left(  b_{1},b_{2},\ldots,b_{k}\right)  $ denote
the set of these common divisors.
\end{definition}

Note that the concept of common divisors encompasses the concept of divisors:
The common divisors of a single integer $b$ are merely the divisors of $b$.
Thus, $\operatorname*{Div}\left(  b\right)  $ is the set of all divisors of
$b$ whenever $b\in\mathbb{Z}$. (Of course, speaking of \textquotedblleft
common divisors\textquotedblright\ of just one integer is like speaking of a
conspiracy of just one person. But the definition fits, and we algebraists
don't exclude cases just because they are ridiculous.)

(Also, the common divisors of an empty list of integers are all the integers,
because the requirement (\ref{eq.def.ent.Div.cond}) is vacuously true for
$k=0$. In other words, $\operatorname*{Div}\left(  {}\right)  =\mathbb{Z}$.)

Here are some more interesting examples of common divisors:

\begin{example}
\textbf{(a)} The common divisors of $6$ and $8$ are $-2,-1,1,2$. (In order to
see this, just observe that the divisors of $6$ are $-6,-3,-2,-1,1,2,3,6$,
whereas the divisors of $8$ are $-8,-4,-2,-1,1,2,4,8$; now you can find the
common divisors of $6$ and $8$ by taking the numbers common to these two
lists.) Thus,%
\[
\operatorname*{Div}\left(  6,8\right)  =\left\{  -2,-1,1,2\right\}  .
\]


\textbf{(b)} The common divisors of $6$ and $14$ are $-2,-1,1,2$ again. (In
order to see this, just observe that the divisors of $6$ are
$-6,-3,-2,-1,1,2,3,6$, whereas the divisors of $14$ are
$-14,-7,-2,-1,1,2,7,14$.)

\textbf{(c)} The common divisors of $6$, $10$ and $15$ are $-1$ and $1$. (In
order to see this, note that:

\begin{itemize}
\item The divisors of $6$ are $-6,-3,-2,-1,1,2,3,6$.

\item The divisors of $10$ are $-10,-5,-2,-1,1,2,5,10$.

\item The divisors of $15$ are $-15,-5,-3,-1,1,3,5,15$.
\end{itemize}

\noindent The only numbers common to these three lists are $-1$ and $1$.) However:

\begin{itemize}
\item The common divisors of $6$ and $10$ are $-2,-1,1,2$.

\item The common divisors of $6$ and $15$ are $-3,-1,1,3$.

\item The common divisors of $10$ and $15$ are $-5,-1,1,5$.
\end{itemize}

\noindent This illustrates the fact that three numbers can have pairwise
nontrivial common divisors (where \textquotedblleft
nontrivial\textquotedblright\ means \textquotedblleft distinct from $1$ and
$-1$\textquotedblright), but the only common divisors of all three of them may
still be just $1$ and $-1$.
\end{example}

\begin{proposition}
\label{prop.ent.Div.fin}Let $b_{1},b_{2},\ldots,b_{k}$ be finitely many
integers that are not all $0$. Then, the set $\operatorname*{Div}\left(
b_{1},b_{2},\ldots,b_{k}\right)  $ has a largest element, and this largest
element is a positive integer.
\end{proposition}

\begin{proof}
[Proof of Proposition \ref{prop.ent.Div.fin}.]The integer $1$ satisfies
$\left(  1\mid b_{i}\text{ for all }i\in\left\{  1,2,\ldots,k\right\}
\right)  $. Thus, $1$ is a common divisor of $b_{1},b_{2},\ldots,b_{k}$ (by
the definition of a \textquotedblleft common divisor\textquotedblright). In
other words, $1\in\operatorname*{Div}\left(  b_{1},b_{2},\ldots,b_{k}\right)
$ (by the definition of $\operatorname*{Div}\left(  b_{1},b_{2},\ldots
,b_{k}\right)  $). Hence, the set $\operatorname*{Div}\left(  b_{1}%
,b_{2},\ldots,b_{k}\right)  $ is nonempty.

Moreover, it is easy to see that the set $\operatorname*{Div}\left(
b_{1},b_{2},\ldots,b_{k}\right)  $ is finite.

\begin{fineprint}
[\textit{Proof:} We have assumed that $b_{1},b_{2},\ldots,b_{k}$ are not all
$0$. In other words, there exists a $j\in\left\{  1,2,\ldots,k\right\}  $ such
that $b_{j}$ is nonzero. Consider such a $j$.

Let $d\in\operatorname*{Div}\left(  b_{1},b_{2},\ldots,b_{k}\right)  $. Thus,
$d$ is a common divisor of $b_{1},b_{2},\ldots,b_{k}$ (by the definition of
$\operatorname*{Div}\left(  b_{1},b_{2},\ldots,b_{k}\right)  $). In other
words, $d\mid b_{i}$ for all $i\in\left\{  1,2,\ldots,k\right\}  $ (by the
definition of \textquotedblleft common divisor\textquotedblright). Applying
this to $i=j$, we obtain $d\mid b_{j}$. Hence, $d$ is a divisor of $b_{j}$.
But Proposition \ref{prop.ent.divisors.find} \textbf{(c)} (applied to
$b=b_{j}$) shows that all divisors of $b_{j}$ belong to the set $\left\{
-\left\vert b_{j}\right\vert ,-\left\vert b_{j}\right\vert +1,\ldots
,\left\vert b_{j}\right\vert \right\}  \setminus\left\{  0\right\}  $. Hence,
$d$ must belong to this set (since $d$ is a divisor of $b_{j}$). In other
words, $d\in\left\{  -\left\vert b_{j}\right\vert ,-\left\vert b_{j}%
\right\vert +1,\ldots,\left\vert b_{j}\right\vert \right\}  \setminus\left\{
0\right\}  $.

Now, forget that we fixed $d$. We thus have shown that $d\in\left\{
-\left\vert b_{j}\right\vert ,-\left\vert b_{j}\right\vert +1,\ldots
,\left\vert b_{j}\right\vert \right\}  \setminus\left\{  0\right\}  $ for each
$d\in\operatorname*{Div}\left(  b_{1},b_{2},\ldots,b_{k}\right)  $. In other
words,
\[
\operatorname*{Div}\left(  b_{1},b_{2},\ldots,b_{k}\right)  \subseteq\left\{
-\left\vert b_{j}\right\vert ,-\left\vert b_{j}\right\vert +1,\ldots
,\left\vert b_{j}\right\vert \right\}  \setminus\left\{  0\right\}  .
\]
Thus, the set $\operatorname*{Div}\left(  b_{1},b_{2},\ldots,b_{k}\right)  $
is finite (since the set $\left\{  -\left\vert b_{j}\right\vert ,-\left\vert
b_{j}\right\vert +1,\ldots,\left\vert b_{j}\right\vert \right\}
\setminus\left\{  0\right\}  $ is finite).]
\end{fineprint}

Now we know that the set $\operatorname*{Div}\left(  b_{1},b_{2},\ldots
,b_{k}\right)  $ is a nonempty finite set of integers. Thus, this set
$\operatorname*{Div}\left(  b_{1},b_{2},\ldots,b_{k}\right)  $ has a largest
element (since every nonempty finite set of integers has a largest element).
It remains to prove that this largest element is a positive integer.

Let $g$ be this largest element. Thus, we must prove that $g$ is a positive
integer. Clearly, $g$ is an integer (since all elements of
$\operatorname*{Div}\left(  b_{1},b_{2},\ldots,b_{k}\right)  $ are integers);
it thus remains to show that $g$ is positive.

The element $g$ is the largest element of the set $\operatorname*{Div}\left(
b_{1},b_{2},\ldots,b_{k}\right)  $, and thus is $\geq$ to every element of
this set. In other words, $g\geq x$ for each $x\in\operatorname*{Div}\left(
b_{1},b_{2},\ldots,b_{k}\right)  $. Applying this to $x=1$, we obtain $g\geq1$
(since $1\in\operatorname*{Div}\left(  b_{1},b_{2},\ldots,b_{k}\right)  $).
Hence, $g$ is positive. This completes the proof of Proposition
\ref{prop.ent.Div.fin}.
\end{proof}

The following exercise shows that the set $\operatorname*{Div}\left(
b_{1},b_{2},\ldots,b_{k}\right)  $ depends only on the \textbf{set} $\left\{
b_{1},b_{2},\ldots,b_{k}\right\}  $, but not on the numbers $b_{1}%
,b_{2},\ldots,b_{k}$ themselves. Thus, for example, any integers $a$, $b$ and
$c$ satisfy $\operatorname*{Div}\left(  a,b,c,a\right)  =\operatorname*{Div}%
\left(  c,a,b\right)  $ (since $\left\{  a,b,c,a\right\}  =\left\{
c,a,b\right\}  $) and $\operatorname*{Div}\left(  a,a,b,a\right)
=\operatorname*{Div}\left(  a,b,b\right)  $ (since $\left\{  a,a,b,a\right\}
=\left\{  a,b,b\right\}  $).

\begin{exercise}
\label{exe.ent.Div.set}Let $b_{1},b_{2},\ldots,b_{k}$ be finitely many
integers. Let $c_{1},c_{2},\ldots,c_{\ell}$ be finitely many integers. Prove
that if%
\[
\left\{  b_{1},b_{2},\ldots,b_{k}\right\}  =\left\{  c_{1},c_{2}%
,\ldots,c_{\ell}\right\}  ,
\]
then%
\[
\operatorname*{Div}\left(  b_{1},b_{2},\ldots,b_{k}\right)
=\operatorname*{Div}\left(  c_{1},c_{2},\ldots,c_{\ell}\right)  .
\]

\end{exercise}

\subsubsection{Greatest common divisors}

Proposition \ref{prop.ent.Div.fin} allows us to make a crucial definition:

\begin{definition}
\label{def.ent.gcd.gcd}Let $b_{1},b_{2},\ldots,b_{k}$ be finitely many
integers. The \textit{greatest common divisor} of $b_{1},b_{2},\ldots,b_{k}$
is defined as follows:

\begin{itemize}
\item If $b_{1},b_{2},\ldots,b_{k}$ are not all $0$, then it is defined as the
largest element of the set $\operatorname*{Div}\left(  b_{1},b_{2}%
,\ldots,b_{k}\right)  $. This largest element is well-defined (by Proposition
\ref{prop.ent.Div.fin}), and is a positive integer (by Proposition
\ref{prop.ent.Div.fin} again).

\item If $b_{1},b_{2},\ldots,b_{k}$ are all $0$, then it is defined to be $0$.
(This is a slight abuse of the word \textquotedblleft greatest common
divisor\textquotedblright, because $0$ is not actually the greatest among the
common divisors of $b_{1},b_{2},\ldots,b_{k}$ in this case. In fact, when
$b_{1},b_{2},\ldots,b_{k}$ are all $0$, \textbf{every} integer is a common
divisor of $b_{1},b_{2},\ldots,b_{k}$, so that there is no greatest among
these common divisors, because there is no \textquotedblleft greatest
integer\textquotedblright. Nevertheless, defining the greatest common divisor
of $b_{1},b_{2},\ldots,b_{k}$ to be $0$ in this case will prove to be a good
decision, as it will greatly reduce the number of exceptions in our results.)
\end{itemize}

Thus, in either case, this greatest common divisor is a nonnegative integer.
We denote it by $\gcd\left(  b_{1},b_{2},\ldots,b_{k}\right)  $. (Some authors
also call it $\left(  b_{1},b_{2},\ldots,b_{k}\right)  $, which is rather
dangerous as the same notation stands for a $k$-tuple. We shall avoid this
notation at all cost, but you should be aware of it when reading
number-theoretical literature.)

We shall also use the word \textquotedblleft\textit{gcd}\textquotedblright\ as
shorthand for \textquotedblleft greatest common divisor\textquotedblright.
\end{definition}

The greatest common divisors you will most commonly see are those of two
integers. Indeed, any other gcd can be rewritten in terms of these: for
example,%
\[
\gcd\left(  a,b,c,d,e\right)  =\gcd\left(  a,\gcd\left(  b,\gcd\left(
c,\gcd\left(  d,e\right)  \right)  \right)  \right)
\]
for all $a,b,c,d,e\in\mathbb{Z}$. This is, in fact, a consequence of
Proposition \ref{thm.ent.gcd.uniprop-mul} \textbf{(d)} (which we will prove
later), applied several times.

First, let us observe several properties of greatest common divisors:

\begin{proposition}
\label{prop.ent.gcd.props1}\textbf{(a)} We have $\gcd\left(  a,0\right)
=\gcd\left(  a\right)  =\left\vert a\right\vert $ for all $a\in\mathbb{Z}$.

\textbf{(b)} We have $\gcd\left(  a,b\right)  =\gcd\left(  b,a\right)  $ for
all $a,b\in\mathbb{Z}$.

\textbf{(c)} We have $\gcd\left(  a,ua+b\right)  =\gcd\left(  a,b\right)  $
for all $a,b,u\in\mathbb{Z}$.

\textbf{(d)} If $a,b,c\in\mathbb{Z}$ satisfy $b\equiv c\operatorname{mod}a$,
then $\gcd\left(  a,b\right)  =\gcd\left(  a,c\right)  $.

\textbf{(e)} If $a,b\in\mathbb{Z}$ are such that $a$ is positive, then
$\gcd\left(  a,b\right)  =\gcd\left(  a,b\%a\right)  $.

\textbf{(f)} We have $\gcd\left(  a,b\right)  \mid a$ and $\gcd\left(
a,b\right)  \mid b$ for all $a,b\in\mathbb{Z}$.

\textbf{(g)} We have $\gcd\left(  -a,b\right)  =\gcd\left(  a,b\right)  $ for
all $a,b\in\mathbb{Z}$.

\textbf{(h)} We have $\gcd\left(  a,-b\right)  =\gcd\left(  a,b\right)  $ for
all $a,b\in\mathbb{Z}$.

\textbf{(i)} If $a,b\in\mathbb{Z}$ satisfy $a\mid b$, then $\gcd\left(
a,b\right)  =\left\vert a\right\vert $.

\textbf{(j)} The greatest common divisor of the empty list of integers is
$\gcd\left(  {}\right)  =0$.
\end{proposition}

Proposition \ref{prop.ent.gcd.props1} is not difficult and we could start
proving it right away. However, such a proof would require some annoying case
distinctions due to the special treatment that the \textquotedblleft%
$b_{1},b_{2},\ldots,b_{k}$ are all $0$\textquotedblright\ case required in
Definition \ref{def.ent.gcd.gcd}. Fortunately, we can circumnavigate these
annoyances by stating a simple rule how the gcd of $k$ integers $b_{1}%
,b_{2},\ldots,b_{k}$ can be computed from their set of common divisors
(including the case when $b_{1},b_{2},\ldots,b_{k}$ are all $0$):

\begin{lemma}
\label{lem.ent.gcd.through-Div}Let $b_{1},b_{2},\ldots,b_{k}$ be finitely many
integers. Then,%
\[
\gcd\left(  b_{1},b_{2},\ldots,b_{k}\right)  =%
\begin{cases}
\max\left(  \operatorname*{Div}\left(  b_{1},b_{2},\ldots,b_{k}\right)
\right)  , & \text{if }0\notin\operatorname*{Div}\left(  b_{1},b_{2}%
,\ldots,b_{k}\right)  ;\\
0, & \text{if }0\in\operatorname*{Div}\left(  b_{1},b_{2},\ldots,b_{k}\right)
.
\end{cases}
\]
(Here, $\max S$ denotes the largest element of a set $S$ of integers, whenever
this largest element exists.)
\end{lemma}

\begin{proof}
[Proof of Lemma \ref{lem.ent.gcd.through-Div}.]We are in one of the following
two cases:

\textit{Case 1:} The integers $b_{1},b_{2},\ldots,b_{k}$ are not all $0$.

\textit{Case 2:} The integers $b_{1},b_{2},\ldots,b_{k}$ are all $0$.

Let us consider Case 1 first. In this case, the integers $b_{1},b_{2}%
,\ldots,b_{k}$ are not all $0$. Hence, $\gcd\left(  b_{1},b_{2},\ldots
,b_{k}\right)  $ is defined as the largest element of the set
$\operatorname*{Div}\left(  b_{1},b_{2},\ldots,b_{k}\right)  $ (by Definition
\ref{def.ent.gcd.gcd}). In other words,
\begin{equation}
\gcd\left(  b_{1},b_{2},\ldots,b_{k}\right)  =\max\left(  \operatorname*{Div}%
\left(  b_{1},b_{2},\ldots,b_{k}\right)  \right)  .
\label{pf.lem.ent.gcd.through-Div.c1.1}%
\end{equation}


On the other hand, $0\notin\operatorname*{Div}\left(  b_{1},b_{2},\ldots
,b_{k}\right)  $\ \ \ \ \footnote{\textit{Proof.} Assume the contrary. Thus,
$0\in\operatorname*{Div}\left(  b_{1},b_{2},\ldots,b_{k}\right)  $. In other
words, $0$ is a common divisor of $b_{1},b_{2},\ldots,b_{k}$ (by the
definition of $\operatorname*{Div}\left(  b_{1},b_{2},\ldots,b_{k}\right)  $).
In other words, $0\mid b_{i}$ for all $i\in\left\{  1,2,\ldots,k\right\}  $
(by the definition of \textquotedblleft common divisor\textquotedblright).
Thus, for all $i\in\left\{  1,2,\ldots,k\right\}  $, we have $b_{i}=0$ (since
$0\mid b_{i}$, so that $b_{i}=0c$ for some integer $c$; but this yields
$b_{i}=0c=0$). In other words, $b_{1},b_{2},\ldots,b_{k}$ are all $0$. But
this contradicts the fact that $b_{1},b_{2},\ldots,b_{k}$ are not all $0$.
This contradiction shows that our assumption was false, qed.}. Hence,%
\[%
\begin{cases}
\max\left(  \operatorname*{Div}\left(  b_{1},b_{2},\ldots,b_{k}\right)
\right)  , & \text{if }0\notin\operatorname*{Div}\left(  b_{1},b_{2}%
,\ldots,b_{k}\right)  ;\\
0, & \text{if }0\in\operatorname*{Div}\left(  b_{1},b_{2},\ldots,b_{k}\right)
\end{cases}
=\max\left(  \operatorname*{Div}\left(  b_{1},b_{2},\ldots,b_{k}\right)
\right)  .
\]
Comparing this with (\ref{pf.lem.ent.gcd.through-Div.c1.1}), we obtain%
\[
\gcd\left(  b_{1},b_{2},\ldots,b_{k}\right)  =%
\begin{cases}
\max\left(  \operatorname*{Div}\left(  b_{1},b_{2},\ldots,b_{k}\right)
\right)  , & \text{if }0\notin\operatorname*{Div}\left(  b_{1},b_{2}%
,\ldots,b_{k}\right)  ;\\
0, & \text{if }0\in\operatorname*{Div}\left(  b_{1},b_{2},\ldots,b_{k}\right)
.
\end{cases}
\]
Hence, Lemma \ref{lem.ent.gcd.through-Div} is proven in Case 1.

Let us now consider Case 2. In this case, the integers $b_{1},b_{2}%
,\ldots,b_{k}$ are all $0$. Hence, $\gcd\left(  b_{1},b_{2},\ldots
,b_{k}\right)  $ is defined as $0$ (by Definition \ref{def.ent.gcd.gcd}). In
other words,
\begin{equation}
\gcd\left(  b_{1},b_{2},\ldots,b_{k}\right)  =0.
\label{pf.lem.ent.gcd.through-Div.c2.1}%
\end{equation}


On the other hand, $0\in\operatorname*{Div}\left(  b_{1},b_{2},\ldots
,b_{k}\right)  $\ \ \ \ \footnote{\textit{Proof.} The integers $b_{1}%
,b_{2},\ldots,b_{k}$ are all $0$. In other words, $b_{i}=0$ for all
$i\in\left\{  1,2,\ldots,k\right\}  $. Hence, $0\mid b_{i}$ for all
$i\in\left\{  1,2,\ldots,k\right\}  $ (since each $i\in\left\{  1,2,\ldots
,k\right\}  $ satisfies $b_{i}=0=0\cdot0$). In other words, $0$ is a common
divisor of $b_{1},b_{2},\ldots,b_{k}$ (by the definition of \textquotedblleft
common divisor\textquotedblright). In other words, $0\in\operatorname*{Div}%
\left(  b_{1},b_{2},\ldots,b_{k}\right)  $ (by the definition of
$\operatorname*{Div}\left(  b_{1},b_{2},\ldots,b_{k}\right)  $).}. Hence,%
\[%
\begin{cases}
\max\left(  \operatorname*{Div}\left(  b_{1},b_{2},\ldots,b_{k}\right)
\right)  , & \text{if }0\notin\operatorname*{Div}\left(  b_{1},b_{2}%
,\ldots,b_{k}\right)  ;\\
0, & \text{if }0\in\operatorname*{Div}\left(  b_{1},b_{2},\ldots,b_{k}\right)
\end{cases}
=0.
\]
Comparing this with (\ref{pf.lem.ent.gcd.through-Div.c2.1}), we obtain%
\[
\gcd\left(  b_{1},b_{2},\ldots,b_{k}\right)  =%
\begin{cases}
\max\left(  \operatorname*{Div}\left(  b_{1},b_{2},\ldots,b_{k}\right)
\right)  , & \text{if }0\notin\operatorname*{Div}\left(  b_{1},b_{2}%
,\ldots,b_{k}\right)  ;\\
0, & \text{if }0\in\operatorname*{Div}\left(  b_{1},b_{2},\ldots,b_{k}\right)
.
\end{cases}
\]
Hence, Lemma \ref{lem.ent.gcd.through-Div} is proven in Case 2.

We have now proven Lemma \ref{lem.ent.gcd.through-Div} in both Cases 1 and 2.
Thus, Lemma \ref{lem.ent.gcd.through-Div} always holds.
\end{proof}

A corollary of Lemma \ref{lem.ent.gcd.through-Div} is the following:

\begin{lemma}
\label{lem.ent.gcd.through-Divc}Let $b_{1},b_{2},\ldots,b_{k}$ be finitely
many integers. Let $c_{1},c_{2},\ldots,c_{\ell}$ be finitely many integers. If%
\[
\operatorname*{Div}\left(  b_{1},b_{2},\ldots,b_{k}\right)
=\operatorname*{Div}\left(  c_{1},c_{2},\ldots,c_{\ell}\right)  ,
\]
then%
\[
\gcd\left(  b_{1},b_{2},\ldots,b_{k}\right)  =\gcd\left(  c_{1},c_{2}%
,\ldots,c_{\ell}\right)  .
\]

\end{lemma}

\begin{proof}
[Proof of Lemma \ref{lem.ent.gcd.through-Div}.]Assume that
$\operatorname*{Div}\left(  b_{1},b_{2},\ldots,b_{k}\right)
=\operatorname*{Div}\left(  c_{1},c_{2},\ldots,c_{\ell}\right)  $. Lemma
\ref{lem.ent.gcd.through-Div} yields%
\begin{align*}
\gcd\left(  b_{1},b_{2},\ldots,b_{k}\right)   &  =%
\begin{cases}
\max\left(  \operatorname*{Div}\left(  b_{1},b_{2},\ldots,b_{k}\right)
\right)  , & \text{if }0\notin\operatorname*{Div}\left(  b_{1},b_{2}%
,\ldots,b_{k}\right)  ;\\
0, & \text{if }0\in\operatorname*{Div}\left(  b_{1},b_{2},\ldots,b_{k}\right)
\end{cases}
\\
&  =%
\begin{cases}
\max\left(  \operatorname*{Div}\left(  c_{1},c_{2},\ldots,c_{\ell}\right)
\right)  , & \text{if }0\notin\operatorname*{Div}\left(  c_{1},c_{2}%
,\ldots,c_{\ell}\right)  ;\\
0, & \text{if }0\in\operatorname*{Div}\left(  c_{1},c_{2},\ldots,c_{\ell
}\right)
\end{cases}
\end{align*}
(since $\operatorname*{Div}\left(  b_{1},b_{2},\ldots,b_{k}\right)
=\operatorname*{Div}\left(  c_{1},c_{2},\ldots,c_{\ell}\right)  $). But Lemma
\ref{lem.ent.gcd.through-Div} (applied to $c_{1},c_{2},\ldots,c_{\ell}$
instead of $b_{1},b_{2},\ldots,b_{k}$) yields%
\[
\gcd\left(  c_{1},c_{2},\ldots,c_{\ell}\right)  =%
\begin{cases}
\max\left(  \operatorname*{Div}\left(  c_{1},c_{2},\ldots,c_{\ell}\right)
\right)  , & \text{if }0\notin\operatorname*{Div}\left(  c_{1},c_{2}%
,\ldots,c_{\ell}\right)  ;\\
0, & \text{if }0\in\operatorname*{Div}\left(  c_{1},c_{2},\ldots,c_{\ell
}\right)  .
\end{cases}
\]
Comparing these two equalities, we obtain $\gcd\left(  b_{1},b_{2}%
,\ldots,b_{k}\right)  =\gcd\left(  c_{1},c_{2},\ldots,c_{\ell}\right)  $. This
proves Lemma \ref{lem.ent.gcd.through-Div}.
\end{proof}

\begin{proof}
[Proof of Proposition \ref{prop.ent.gcd.props1}.]\textbf{(a)} Here is a sketch
of the proof: The number $0$ is a \textquotedblleft joker\textquotedblright%
\ when it comes to common divisors: For example, if $a\in\mathbb{Z}$, then the
common divisors of $a$ and $0$ are the same as the divisors of $a$, because
every integer divides $0$. Thus, if $a\in\mathbb{Z}$ is nonzero, then the
greatest common divisor of $a$ and $0$ is the greatest divisor of $a$, which
is $\left\vert a\right\vert $ (an easy consequence of Proposition
\ref{prop.ent.divisors.find} \textbf{(b)}).

For the sake of completeness, let us give a detailed proof of Proposition
\ref{prop.ent.gcd.props1} \textbf{(a)}:

\begin{fineprint}
Let $a\in\mathbb{Z}$. Definition \ref{def.ent.gcd.gcd} (specifically, its case
when $b_{1},b_{2},\ldots,b_{k}$ are all $0$) shows that $\gcd\left(
0,0\right)  =0$ and $\gcd\left(  0\right)  =0$. Combining this with
$\left\vert 0\right\vert =0$, we obtain $\gcd\left(  0,0\right)  =\gcd\left(
0\right)  =\left\vert 0\right\vert $. In other words, Proposition
\ref{prop.ent.gcd.props1} \textbf{(a)} holds if $a=0$. Thus, for the rest of
this proof, we WLOG assume that $a\neq0$. Hence, the two integers $a,0$ are
not all zero. Thus, $\gcd\left(  a,0\right)  $ is defined to be the largest
element of the set $\operatorname*{Div}\left(  a,0\right)  $ (by Definition
\ref{def.ent.gcd.gcd}). Likewise, $\gcd\left(  a\right)  $ is the largest
element of the set $\operatorname*{Div}\left(  a\right)  $.

We shall now prove that $\operatorname*{Div}\left(  a,0\right)
=\operatorname*{Div}\left(  a\right)  $. Indeed, for any integer $x$, we have
the following chain of equivalences:%
\begin{align*}
&  \ \left(  x\in\operatorname*{Div}\left(  a,0\right)  \right) \\
&  \Longleftrightarrow\ \left(  x\text{ is a common divisor of }a\text{ and
}0\right)  \ \ \ \ \ \ \ \ \ \ \left(  \text{by the definition of
}\operatorname*{Div}\left(  a,0\right)  \right) \\
&  \Longleftrightarrow\ \left(  x\mid a\text{ and }x\mid0\right)
\ \ \ \ \ \ \ \ \ \ \left(  \text{by the definition of a \textquotedblleft
common divisor\textquotedblright}\right) \\
&  \Longleftrightarrow\ \left(  x\mid a\right)  \ \ \ \ \ \ \ \ \ \ \left(
\text{since }x\mid0\text{ always holds (since }0=x\cdot0\text{)}\right) \\
&  \Longleftrightarrow\ \left(  x\text{ is a common divisor of }a\right)
\ \ \ \ \ \ \ \ \ \ \left(  \text{by the definition of a \textquotedblleft
common divisor\textquotedblright}\right) \\
&  \Longleftrightarrow\ \left(  x\in\operatorname*{Div}\left(  a\right)
\right)  \ \ \ \ \ \ \ \ \ \ \left(  \text{by the definition of }%
\operatorname*{Div}\left(  a\right)  \right)  .
\end{align*}
In other words, an integer belongs to $\operatorname*{Div}\left(  a,0\right)
$ if and only if it belongs to $\operatorname*{Div}\left(  a\right)  $. Thus,
$\operatorname*{Div}\left(  a,0\right)  =\operatorname*{Div}\left(  a\right)
$ (since both $\operatorname*{Div}\left(  a,0\right)  $ and
$\operatorname*{Div}\left(  a\right)  $ are sets of integers). Thus, Lemma
\ref{lem.ent.gcd.through-Div} (applied to $\left(  a,0\right)  $ and $\left(
a\right)  $ instead of $\left(  b_{1},b_{2},\ldots,b_{k}\right)  $ and
$\left(  c_{1},c_{2},\ldots,c_{\ell}\right)  $) yields $\gcd\left(
a,0\right)  =\gcd\left(  a\right)  $.

For any integer $x$, we have the following chain of equivalences:
\begin{align*}
&  \ \left(  x\in\operatorname*{Div}\left(  a\right)  \right) \\
&  \Longleftrightarrow\ \left(  x\text{ is a common divisor of }a\right)
\ \ \ \ \ \ \ \ \ \ \left(  \text{by the definition of }\operatorname*{Div}%
\left(  a\right)  \right) \\
&  \Longleftrightarrow\ \left(  x\mid a\right)  \ \ \ \ \ \ \ \ \ \ \left(
\text{by the definition of a \textquotedblleft common
divisor\textquotedblright}\right) \\
&  \Longleftrightarrow\ \left(  x\text{ is a divisor of }a\right)  .
\end{align*}
Thus, $\operatorname*{Div}\left(  a\right)  $ is the set of all divisors of
$a$.

Exercise \ref{exe.ent.div.aabs} \textbf{(b)} yields $\left\vert a\right\vert
\mid a$. In other words, $\left\vert a\right\vert $ is a divisor of $a$.

Moreover, $a$ is nonzero (since $a\neq0$). Hence, Proposition
\ref{prop.ent.divisors.find} \textbf{(b)} (applied to $b=a$) shows that all
divisors of $a$ belong to the set $\left\{  -\left\vert a\right\vert
,-\left\vert a\right\vert +1,\ldots,\left\vert a\right\vert \right\}
\setminus\left\{  0\right\}  $. Hence, they belong to the set $\left\{
-\left\vert a\right\vert ,-\left\vert a\right\vert +1,\ldots,\left\vert
a\right\vert \right\}  $, and thus are $\leq\left\vert a\right\vert $.

Recall that $\left\vert a\right\vert $ is a divisor of $a$. Since we also know
that all divisors of $a$ are $\leq\left\vert a\right\vert $, we can thus
conclude that $\left\vert a\right\vert $ is the \textbf{largest} divisor of
$a$. In other words, $\left\vert a\right\vert $ is the largest element of the
set $\operatorname*{Div}\left(  a\right)  $ (since $\operatorname*{Div}\left(
a\right)  $ is the set of all divisors of $a$). In other words, $\left\vert
a\right\vert $ is $\gcd\left(  a\right)  $ (since $\gcd\left(  a\right)  $ is
the largest element of the set $\operatorname*{Div}\left(  a\right)  $). Thus,
$\gcd\left(  a\right)  =\left\vert a\right\vert $. Combining this with
$\gcd\left(  a,0\right)  =\gcd\left(  a\right)  $, this yields $\gcd\left(
a,0\right)  =\gcd\left(  a\right)  =\left\vert a\right\vert $. Thus,
Proposition \ref{prop.ent.gcd.props1} \textbf{(a)} is finally proven.
\end{fineprint}

\textbf{(b)} For any integer $x$, we have the following chain of equivalences:%
\begin{align*}
&  \ \left(  x\in\operatorname*{Div}\left(  a,b\right)  \right) \\
&  \Longleftrightarrow\ \left(  x\text{ is a common divisor of }a\text{ and
}b\right)  \ \ \ \ \ \ \ \ \ \ \left(  \text{by the definition of
}\operatorname*{Div}\left(  a,b\right)  \right) \\
&  \Longleftrightarrow\ \left(  x\mid a\text{ and }x\mid b\right)
\ \ \ \ \ \ \ \ \ \ \left(  \text{by the definition of a \textquotedblleft
common divisor\textquotedblright}\right) \\
&  \Longleftrightarrow\ \left(  x\mid b\text{ and }x\mid a\right) \\
&  \Longleftrightarrow\ \left(  x\text{ is a common divisor of }b\text{ and
}a\right) \\
&  \ \ \ \ \ \ \ \ \ \ \left(  \text{by the definition of a \textquotedblleft
common divisor\textquotedblright}\right) \\
&  \Longleftrightarrow\ \left(  x\in\operatorname*{Div}\left(  b,a\right)
\right)  \ \ \ \ \ \ \ \ \ \ \left(  \text{by the definition of }%
\operatorname*{Div}\left(  b,a\right)  \right)  .
\end{align*}
In other words, an integer belongs to $\operatorname*{Div}\left(  a,b\right)
$ if and only if it belongs to $\operatorname*{Div}\left(  b,a\right)  $.
Thus, $\operatorname*{Div}\left(  a,b\right)  =\operatorname*{Div}\left(
b,a\right)  $ (since both $\operatorname*{Div}\left(  a,b\right)  $ and
$\operatorname*{Div}\left(  b,a\right)  $ are sets of integers). Thus, Lemma
\ref{lem.ent.gcd.through-Div} (applied to $\left(  a,b\right)  $ and $\left(
b,a\right)  $ instead of $\left(  b_{1},b_{2},\ldots,b_{k}\right)  $ and
$\left(  c_{1},c_{2},\ldots,c_{\ell}\right)  $) yields $\gcd\left(
a,b\right)  =\gcd\left(  b,a\right)  $. This proves Proposition
\ref{prop.ent.gcd.props1} \textbf{(b)}.

Let us prove part \textbf{(d)} now, and then derive part \textbf{(c)} from it.

\textbf{(d)} Let $a,b,c\in\mathbb{Z}$ satisfy $b\equiv c\operatorname{mod}a$.
We must prove that $\gcd\left(  a,b\right)  =\gcd\left(  a,c\right)  $. To do
so, we shall first prove that $\operatorname*{Div}\left(  a,b\right)
=\operatorname*{Div}\left(  a,c\right)  $.

From $b\equiv c\operatorname{mod}a$, we obtain $c\equiv b\operatorname{mod}a$
(by Proposition \ref{prop.ent.mod.basics} \textbf{(c)}). Hence, our situation
is symmetric with respect to $b$ and $c$.

We shall now show that $\operatorname*{Div}\left(  a,b\right)  \subseteq
\operatorname*{Div}\left(  a,c\right)  $. Indeed, let $x\in\operatorname*{Div}%
\left(  a,b\right)  $. Then, $x$ is a common divisor of $a$ and $b$ (by the
definition of $\operatorname*{Div}\left(  a,b\right)  $). In other words,
$x\mid a$ and $x\mid b$ (by the definition of a \textquotedblleft common
divisor\textquotedblright). From $x\mid b$, we obtain $b\equiv
0\operatorname{mod}x$. But from $x\mid a$ and $c\equiv b\operatorname{mod}a$,
we obtain $c\equiv b\operatorname{mod}x$ (by Proposition
\ref{prop.ent.mod.basics} \textbf{(e)}, applied to $a$, $x$, $c$ and $b$
instead of $n$, $m$, $c$ and $b$). Thus, $c\equiv b\equiv0\operatorname{mod}%
x$, so that $x\mid c$. Combining $x\mid a$ and $x\mid c$, we see that $x$ is a
common divisor of $a$ and $c$ (by the definition of a \textquotedblleft common
divisor\textquotedblright). In other words, $x\in\operatorname*{Div}\left(
a,c\right)  $ (by the definition of $\operatorname*{Div}\left(  a,c\right)  $).

Now, forget that we fixed $x$. We thus have proven that $x\in
\operatorname*{Div}\left(  a,c\right)  $ for each $x\in\operatorname*{Div}%
\left(  a,b\right)  $. In other words, $\operatorname*{Div}\left(  a,b\right)
\subseteq\operatorname*{Div}\left(  a,c\right)  $.

The same argument (but with the roles of $b$ and $c$ swapped) shows that
$\operatorname*{Div}\left(  a,c\right)  \subseteq\operatorname*{Div}\left(
a,b\right)  $ (since our situation is symmetric with respect to $b$ and $c$).
Combining this with $\operatorname*{Div}\left(  a,b\right)  \subseteq
\operatorname*{Div}\left(  a,c\right)  $, we obtain $\operatorname*{Div}%
\left(  a,b\right)  =\operatorname*{Div}\left(  a,c\right)  $. Thus, Lemma
\ref{lem.ent.gcd.through-Div} (applied to $\left(  a,b\right)  $ and $\left(
a,c\right)  $ instead of $\left(  b_{1},b_{2},\ldots,b_{k}\right)  $ and
$\left(  c_{1},c_{2},\ldots,c_{\ell}\right)  $) yields $\gcd\left(
a,b\right)  =\gcd\left(  a,c\right)  $. This proves Proposition
\ref{prop.ent.gcd.props1} \textbf{(d)}.

\textbf{(c)} Let $a,b,u\in\mathbb{Z}$. Then, $ua+b\equiv b\operatorname{mod}a$
(since $\left(  ua+b\right)  -b=ua$ is clearly divisible by $a$). Thus,
Proposition \ref{prop.ent.gcd.props1} \textbf{(d)} (applied to $ua+b$ and $b$
instead of $b$ and $c$) yields $\gcd\left(  a,ua+b\right)  =\gcd\left(
a,b\right)  $. This proves Proposition \ref{prop.ent.gcd.props1} \textbf{(c)}.

\textbf{(e)} Let $a,b\in\mathbb{Z}$ be such that $a$ is positive. Then,
$b\%a\equiv b\operatorname{mod}a$ (by Corollary \ref{cor.ent.quo-rem.remmod}
\textbf{(a)}, applied to $a$ and $b$ instead of $n$ and $u$), thus $b\equiv
b\%a\operatorname{mod}a$. Hence, $\gcd\left(  a,b\right)  =\gcd\left(
a,b\%a\right)  $ (by Proposition \ref{prop.ent.gcd.props1} \textbf{(d)},
applied to $c=b\%a$). This proves Proposition \ref{prop.ent.gcd.props1}
\textbf{(e)}.

\textbf{(f)} Let $a,b\in\mathbb{Z}$. We must prove that $\gcd\left(
a,b\right)  \mid a$ and $\gcd\left(  a,b\right)  \mid b$.

If the two integers $a,b$ are all $0$, then this is
obvious\footnote{\textit{Proof.} Assume that $a,b$ are all $0$. Then,
$a=0=\gcd\left(  a,b\right)  \cdot0$, so that $\gcd\left(  a,b\right)  \mid
a$; similarly, $\gcd\left(  a,b\right)  \mid b$. Hence, we have proven that
$\gcd\left(  a,b\right)  \mid a$ and $\gcd\left(  a,b\right)  \mid b$ if the
integers $a,b$ are all $0$.}. Hence, for the rest of this proof, we WLOG
assume that $a,b$ are not all $0$. Thus, $\gcd\left(  a,b\right)  $ is defined
to be the largest element of the set $\operatorname*{Div}\left(  a,b\right)  $
(by Definition \ref{def.ent.gcd.gcd}). Hence, $\gcd\left(  a,b\right)  $ is an
element of this set $\operatorname*{Div}\left(  a,b\right)  $. In other words,
$\gcd\left(  a,b\right)  $ is a common divisor of $a$ and $b$ (by the
definition of $\operatorname*{Div}\left(  a,b\right)  $). In other words,
$\gcd\left(  a,b\right)  \mid a$ and $\gcd\left(  a,b\right)  \mid b$. This
proves Proposition \ref{prop.ent.gcd.props1} \textbf{(f)}.

\textbf{(g)} Let $a,b\in\mathbb{Z}$. We must prove that $\gcd\left(
-a,b\right)  =\gcd\left(  a,b\right)  $. Again, we shall achieve this via
showing that $\operatorname*{Div}\left(  -a,b\right)  =\operatorname*{Div}%
\left(  a,b\right)  $.

First, we will show that $\operatorname*{Div}\left(  a,b\right)
\subseteq\operatorname*{Div}\left(  -a,b\right)  $. Indeed, let $x\in
\operatorname*{Div}\left(  a,b\right)  $. Then, $x$ is a common divisor of $a$
and $b$ (by the definition of $\operatorname*{Div}\left(  a,b\right)  $). In
other words, $x\mid a$ and $x\mid b$ (by the definition of a \textquotedblleft
common divisor\textquotedblright). We have $a\mid-a$ (since $-a=a\cdot\left(
-1\right)  $). Thus, $x\mid a\mid-a$. Combining $x\mid-a$ and $x\mid b$, we
see that $x$ is a common divisor of $-a$ and $b$ (by the definition of a
\textquotedblleft common divisor\textquotedblright). In other words,
$x\in\operatorname*{Div}\left(  -a,b\right)  $ (by the definition of
$\operatorname*{Div}\left(  -a,b\right)  $).

Now, forget that we fixed $x$. We thus have proven that $x\in
\operatorname*{Div}\left(  -a,b\right)  $ for each $x\in\operatorname*{Div}%
\left(  a,b\right)  $. In other words, $\operatorname*{Div}\left(  a,b\right)
\subseteq\operatorname*{Div}\left(  -a,b\right)  $.

The same argument (but applied to $-a$ instead of $a$) shows that
$\operatorname*{Div}\left(  -a,b\right)  \subseteq\operatorname*{Div}\left(
-\left(  -a\right)  ,b\right)  $. Since $-\left(  -a\right)  =a$, this
rewrites as $\operatorname*{Div}\left(  -a,b\right)  \subseteq
\operatorname*{Div}\left(  a,b\right)  $. Combining this with
$\operatorname*{Div}\left(  a,b\right)  \subseteq\operatorname*{Div}\left(
-a,b\right)  $, we obtain $\operatorname*{Div}\left(  -a,b\right)
=\operatorname*{Div}\left(  a,b\right)  $. Thus, Lemma
\ref{lem.ent.gcd.through-Div} (applied to $\left(  -a,b\right)  $ and $\left(
a,b\right)  $ instead of $\left(  b_{1},b_{2},\ldots,b_{k}\right)  $ and
$\left(  c_{1},c_{2},\ldots,c_{\ell}\right)  $) yields $\gcd\left(
-a,b\right)  =\gcd\left(  a,b\right)  $. This proves Proposition
\ref{prop.ent.gcd.props1} \textbf{(g)}.

\textbf{(h)} We can prove this similarly to how we just proved Proposition
\ref{prop.ent.gcd.props1} \textbf{(g)}, but it is easier to derive it from
what was already shown.

Let $a,b\in\mathbb{Z}$. Proposition \ref{prop.ent.gcd.props1} \textbf{(b)}
(applied to $-b$ instead of $b$) yields%
\begin{align*}
\gcd\left(  a,-b\right)   &  =\gcd\left(  -b,a\right)  =\gcd\left(
b,a\right)  \ \ \ \ \ \ \ \ \ \ \left(
\begin{array}
[c]{c}%
\text{by Proposition \ref{prop.ent.gcd.props1} \textbf{(g),}}\\
\text{applied to }b\text{ and }a\text{ instead of }a\text{ and }b
\end{array}
\right) \\
&  =\gcd\left(  a,b\right)  \ \ \ \ \ \ \ \ \ \ \left(  \text{by Proposition
\ref{prop.ent.gcd.props1} \textbf{(b)}}\right)  .
\end{align*}
This proves Proposition \ref{prop.ent.gcd.props1} \textbf{(h)}.

\textbf{(i)} Let $a,b\in\mathbb{Z}$ satisfy $a\mid b$. From $a\mid b$, we
obtain $b\equiv0\operatorname{mod}a$. Hence, Proposition
\ref{prop.ent.gcd.props1} \textbf{(d)} (applied to $c=0$) yields $\gcd\left(
a,b\right)  =\gcd\left(  a,0\right)  =\left\vert a\right\vert $ (by
Proposition \ref{prop.ent.gcd.props1} \textbf{(a)}). This proves Proposition
\ref{prop.ent.gcd.props1} \textbf{(i)}.

\textbf{(j)} The empty list of integers $\left(  {}\right)  $ has the property
that all its entries are $0$ (indeed, this is vacuously true because it has no
entries at all). Thus, its greatest common divisor is defined to be $0$ (by
the \textquotedblleft If $b_{1},b_{2},\ldots,b_{k}$ are not all $0$%
\textquotedblright\ case of Definition \ref{def.ent.gcd.gcd}). In other words,
$\gcd\left(  {}\right)  =0$. This proves Proposition \ref{prop.ent.gcd.props1}
\textbf{(j)}.
\end{proof}

\begin{remark}
Proposition \ref{prop.ent.gcd.props1} \textbf{(c)} says that if we add a
multiple of $a$ to $b$, then $\gcd\left(  a,b\right)  $ does not change.
Similarly, if we add a multiple of $b$ to $a$, then $\gcd\left(  a,b\right)  $
does not change (i.e., we have $\gcd\left(  vb+a,b\right)  =\gcd\left(
a,b\right)  $ for all $a,b,v\in\mathbb{Z}$).

However, if we \textbf{simultaneously} add a multiple of $a$ to $b$ and a
multiple of $b$ to $a$, then $\gcd\left(  a,b\right)  $ may well change: i.e.,
we may have $\gcd\left(  vb+a,ua+b\right)  \neq\gcd\left(  a,b\right)  $ for
all $a,b,u,v\in\mathbb{Z}$. Examples are easy to find (just take $v=1$ and
$u=1$).
\end{remark}

Proposition \ref{prop.ent.gcd.props1} gives a quick way to compute
$\gcd\left(  a,b\right)  $ for two nonnegative integers $a$ and $b$, by
repeatedly applying division with remainder. For example, let us compute
$\gcd\left(  210,45\right)  $ as follows:%
\begin{align*}
\gcd\left(  210,45\right)   &  =\gcd\left(  45,210\right)
\ \ \ \ \ \ \ \ \ \ \left(  \text{by Proposition \ref{prop.ent.gcd.props1}
\textbf{(b)}}\right) \\
&  =\gcd\left(  45,\underbrace{210\%45}_{=30}\right)
\ \ \ \ \ \ \ \ \ \ \left(  \text{by Proposition \ref{prop.ent.gcd.props1}
\textbf{(e)}}\right) \\
&  =\gcd\left(  45,30\right) \\
&  =\gcd\left(  30,45\right)  \ \ \ \ \ \ \ \ \ \ \left(  \text{by Proposition
\ref{prop.ent.gcd.props1} \textbf{(b)}}\right) \\
&  =\gcd\left(  30,\underbrace{45\%30}_{=15}\right)
\ \ \ \ \ \ \ \ \ \ \left(  \text{by Proposition \ref{prop.ent.gcd.props1}
\textbf{(e)}}\right) \\
&  =\gcd\left(  30,15\right) \\
&  =\gcd\left(  15,30\right)  \ \ \ \ \ \ \ \ \ \ \left(  \text{by Proposition
\ref{prop.ent.gcd.props1} \textbf{(b)}}\right) \\
&  =\gcd\left(  15,\underbrace{30\%15}_{=0}\right)
\ \ \ \ \ \ \ \ \ \ \left(  \text{by Proposition \ref{prop.ent.gcd.props1}
\textbf{(e)}}\right) \\
&  =\gcd\left(  15,0\right)  =\left\vert 15\right\vert
\ \ \ \ \ \ \ \ \ \ \left(  \text{by Proposition \ref{prop.ent.gcd.props1}
\textbf{(a)}}\right) \\
&  =15.
\end{align*}
This method of computing $\gcd\left(  a,b\right)  $ is called the
\textit{Euclidean algorithm}, and is usually much faster than the divisors of
$a$ or the divisors of $b$ can be found!

The following exercise shows that the number $\gcd\left(  b_{1},b_{2}%
,\ldots,b_{k}\right)  $ depends only on the \textbf{set} $\left\{  b_{1}%
,b_{2},\ldots,b_{k}\right\}  $, but not on the numbers $b_{1},b_{2}%
,\ldots,b_{k}$ themselves. Thus, for example, any integers $a$, $b$ and $c$
satisfy $\gcd\left(  a,b,c,a\right)  =\gcd\left(  c,a,b\right)  $ (since
$\left\{  a,b,c,a\right\}  =\left\{  c,a,b\right\}  $) and $\gcd\left(
a,a,b,a\right)  =\gcd\left(  a,b,b\right)  $ (since $\left\{  a,a,b,a\right\}
=\left\{  a,b,b\right\}  $).

\begin{exercise}
\label{exe.ent.gcd.set}Let $b_{1},b_{2},\ldots,b_{k}$ be finitely many
integers. Let $c_{1},c_{2},\ldots,c_{\ell}$ be finitely many integers. Prove
that if%
\[
\left\{  b_{1},b_{2},\ldots,b_{k}\right\}  =\left\{  c_{1},c_{2}%
,\ldots,c_{\ell}\right\}  ,
\]
then%
\[
\gcd\left(  b_{1},b_{2},\ldots,b_{k}\right)  =\gcd\left(  c_{1},c_{2}%
,\ldots,c_{\ell}\right)  .
\]

\end{exercise}

\subsubsection{Bezout's theorem}

The following fact about gcds is one of the most important facts in number theory:

\begin{theorem}
\label{thm.ent.gcd.bezout}Let $a$ and $b$ be two integers. Then, there exist
integers $x\in\mathbb{Z}$ and $y\in\mathbb{Z}$ such that%
\[
\gcd\left(  a,b\right)  =xa+yb.
\]

\end{theorem}

Theorem \ref{thm.ent.gcd.bezout} is often stated as follows: \textquotedblleft
If $a$ and $b$ are two integers, then $\gcd\left(  a,b\right)  $ is a
$\mathbb{Z}$-linear combination of $a$ and $b$\textquotedblright. The notion
\textquotedblleft$\mathbb{Z}$-linear combination of $a$ and $b$%
\textquotedblright\ simply means \textquotedblleft a number of the form
$xa+yb$ with $x\in\mathbb{Z}$ and $y\in\mathbb{Z}$\textquotedblright\ (this is
exactly the notion of a \textquotedblleft linear combination\textquotedblright%
\ in linear algebra, except that now the scalars must come from $\mathbb{Z}$),
so this is just a restatement of Theorem \ref{thm.ent.gcd.bezout}.

\begin{teachingnote}
The following proof of Bezout's theorem is not quite the fastest, nor does it
generalize to polynomial rings over fields. Maybe replace it by another, which
uses division with remainder and induction on $\left\vert a\right\vert
+\left\vert b\right\vert $ (so no need to split into three steps).
\end{teachingnote}

Theorem \ref{thm.ent.gcd.bezout} is known as \textit{Bezout's theorem} (or
\textit{Bezout's identity})\footnote{or \textit{Bezout's theorem for integers}
if you want to be more precise (as there are similar theorems for other
objects)}. We shall prove it in several steps. The first step is to show it
when $a$ and $b$ are nonnegative:

\begin{lemma}
\label{lem.ent.gcd.bezout.++}Let $a\in\mathbb{N}$ and $b\in\mathbb{N}$. Then,
there exist integers $x\in\mathbb{Z}$ and $y\in\mathbb{Z}$ such that%
\[
\gcd\left(  a,b\right)  =xa+yb.
\]

\end{lemma}

\begin{proof}
[Proof of Lemma \ref{lem.ent.gcd.bezout.++}.]The following proof uses a
strategy similar to the Euclidean algorithm (making one of $a$ and $b$ smaller
repeatedly until one of $a$ and $b$ becomes $0$), and can in fact be viewed as
a \textquotedblleft protocol\textquotedblright\ of the algorithm\footnote{or,
rather, of a more primitive version of the Euclidean algorithm, in which we
apply not the full power of Proposition \ref{prop.ent.gcd.props1} \textbf{(e)}
but only the identity $\gcd\left(  a,b\right)  =\gcd\left(  a,b-a\right)  $}.

We use strong induction on $a+b$. Thus, we fix an $n\in\mathbb{N}$, and assume
(as induction hypothesis) that Lemma \ref{lem.ent.gcd.bezout.++} holds
whenever $a+b<n$. We must now prove that Lemma \ref{lem.ent.gcd.bezout.++}
holds whenever $a+b=n$.

We have assumed that Lemma \ref{lem.ent.gcd.bezout.++} holds whenever $a+b<n$.
In other words, the following statement holds:

\begin{statement}
\textit{Statement 1:} Let $a\in\mathbb{N}$ and $b\in\mathbb{N}$ be such that
$a+b<n$. Then, there exist integers $x\in\mathbb{Z}$ and $y\in\mathbb{Z}$ such
that $\gcd\left(  a,b\right)  =xa+yb$.
\end{statement}

Now, we must prove that Lemma \ref{lem.ent.gcd.bezout.++} holds whenever
$a+b=n$. Let us first prove this in the case when $b\geq a$:

\begin{statement}
\textit{Statement 2:} Let $a\in\mathbb{N}$ and $b\in\mathbb{N}$ be such that
$a+b=n$ and $b\geq a$. Then, there exist integers $x\in\mathbb{Z}$ and
$y\in\mathbb{Z}$ such that $\gcd\left(  a,b\right)  =xa+yb$.
\end{statement}

[\textit{Proof of Statement 2:} We are in one of the following two cases:

\textit{Case 1:} We have $a=0$.

\textit{Case 2:} We have $a\neq0$.

Let us first consider Case 1. In this case, we have $a=0$. Now, Proposition
\ref{prop.ent.gcd.props1} \textbf{(a)} (applied to $b$ instead of $a$) yields
$\gcd\left(  b,0\right)  =\gcd\left(  b\right)  =\left\vert b\right\vert
\in\left\{  b,-b\right\}  $. In other words, $\gcd\left(  b,0\right)  =ub$ for
some $u\in\left\{  1,-1\right\}  $. Consider this $u$. Now, Proposition
\ref{prop.ent.gcd.props1} \textbf{(b)} yields%
\[
\gcd\left(  a,b\right)  =\gcd\left(  b,\underbrace{a}_{=0}\right)
=\gcd\left(  b,0\right)  =ub=0a+ub.
\]
Hence, there exist integers $x\in\mathbb{Z}$ and $y\in\mathbb{Z}$ such that
$\gcd\left(  a,b\right)  =xa+yb$ (namely, $x=0$ and $y=u$). Thus, Statement 2
is proven in Case 1.

Let us next consider Case 2. In this case, we have $a\neq0$. Hence, $a>0$
(since $a\in\mathbb{N}$), so that $a+b>b$. Hence, $b<a+b=n$.

From $b\geq a$, we obtain $b-a\in\mathbb{N}$. Moreover, $a\in\mathbb{N}$ and
$b-a\in\mathbb{N}$ satisfy $a+\left(  b-a\right)  =b<n$. Therefore, we can
apply Statement 1 \textbf{to }$b-a$ \textbf{instead of }$b$. Thus we obtain
that there exist integers $x\in\mathbb{Z}$ and $y\in\mathbb{Z}$ such that
$\gcd\left(  a,b-a\right)  =xa+y\left(  b-a\right)  $. Fix two such integers
$x$ and $y$, and denote them by $x_{0}$ and $y_{0}$. Thus, $x_{0}$ and $y_{0}$
are two integers such that $\gcd\left(  a,b-a\right)  =x_{0}a+y_{0}\left(
b-a\right)  $.

Also, Proposition \ref{prop.ent.gcd.props1} \textbf{(c)} (applied to $u=-1$)
yields $\gcd\left(  a,\left(  -1\right)  a+b\right)  =\gcd\left(  a,b\right)
$. Hence,%
\begin{align*}
\gcd\left(  a,b\right)   &  =\gcd\left(  a,\underbrace{\left(  -1\right)
a+b}_{=b-a}\right)  =\gcd\left(  a,b-a\right)  =x_{0}a+y_{0}\left(  b-a\right)
\\
&  =x_{0}a+y_{0}b-y_{0}a=\left(  x_{0}-y_{0}\right)  a+y_{0}b.
\end{align*}
Hence, there exist integers $x\in\mathbb{Z}$ and $y\in\mathbb{Z}$ such that
$\gcd\left(  a,b\right)  =xa+yb$ (namely, $x=x_{0}-y_{0}$ and $y=y_{0}$).
Thus, Statement 2 is proven in Case 2.

We have now proven Statement 2 in both Cases 1 and 2. Hence, Statement 2 is
always proven.]

Now, we can prove that Lemma \ref{lem.ent.gcd.bezout.++} holds whenever
$a+b=n$:

\begin{statement}
\textit{Statement 3:} Let $a\in\mathbb{N}$ and $b\in\mathbb{N}$ be such that
$a+b=n$. Then, there exist integers $x\in\mathbb{Z}$ and $y\in\mathbb{Z}$ such
that $\gcd\left(  a,b\right)  =xa+yb$.
\end{statement}

[\textit{Proof of Statement 3:} We are in one of the following two cases:

\textit{Case 1:} We have $b\geq a$.

\textit{Case 2:} We have $b<a$.

Let us first consider Case 1. In this case, we have $b\geq a$. Hence,
Statement 2 shows that there exist integers $x\in\mathbb{Z}$ and
$y\in\mathbb{Z}$ such that $\gcd\left(  a,b\right)  =xa+yb$. Thus, Statement 3
is proven in Case 1.

Let us next consider Case 2. In this case, we have $b<a$. Hence, $a>b$, so
that $a\geq b$. This shows that we can apply Statement 2 \textbf{to }%
$b$\textbf{ and }$a$ \textbf{instead of }$a$ \textbf{and }$b$. Thus we obtain
that there exist integers $x\in\mathbb{Z}$ and $y\in\mathbb{Z}$ such that
$\gcd\left(  b,a\right)  =xb+ya$. Fix two such integers $x$ and $y$, and
denote them by $x_{0}$ and $y_{0}$. Thus, $x_{0}$ and $y_{0}$ are two integers
such that $\gcd\left(  b,a\right)  =x_{0}b+y_{0}a$. Now, Proposition
\ref{prop.ent.gcd.props1} \textbf{(b)} yields $\gcd\left(  a,b\right)
=\gcd\left(  b,a\right)  =x_{0}b+y_{0}a=y_{0}a+x_{0}b$. Hence, there exist
integers $x\in\mathbb{Z}$ and $y\in\mathbb{Z}$ such that $\gcd\left(
a,b\right)  =xa+yb$ (namely, $x=y_{0}$ and $y=x_{0}$). Thus, Statement 3 is
proven in Case 2.

We have now proven Statement 3 in both Cases 1 and 2. Hence, Statement 3 is
always proven.]

By proving Statement 3, we have shown that Lemma \ref{lem.ent.gcd.bezout.++}
holds whenever $a+b=n$. This completes the induction step. Thus, Lemma
\ref{lem.ent.gcd.bezout.++} is proven by strong induction.
\end{proof}

Next, we shall prove Theorem \ref{thm.ent.gcd.bezout} when $a\in\mathbb{N}$
but $b$ may be negative:

\begin{lemma}
\label{lem.ent.gcd.bezout.+}Let $a\in\mathbb{N}$ and $b\in\mathbb{Z}$. Then,
there exist integers $x\in\mathbb{Z}$ and $y\in\mathbb{Z}$ such that%
\[
\gcd\left(  a,b\right)  =xa+yb.
\]

\end{lemma}

\begin{proof}
[Proof of Lemma \ref{lem.ent.gcd.bezout.+}.]We are in one of the following two cases:

\textit{Case 1:} We have $b\geq0$.

\textit{Case 2:} We have $b<0$.

Let us first consider Case 1. In this case, we have $b\geq0$. Thus,
$b\in\mathbb{N}$ (since $b\in\mathbb{Z}$). Therefore, Lemma
\ref{lem.ent.gcd.bezout.++} shows that there exist integers $x\in\mathbb{Z}$
and $y\in\mathbb{Z}$ such that $\gcd\left(  a,b\right)  =xa+yb$. Thus, Lemma
\ref{lem.ent.gcd.bezout.+} is proven in Case 1.

Let us now consider Case 2. In this case, we have $b<0$. Hence, $-b>0$, so
that $-b\in\mathbb{N}$ (since $-b\in\mathbb{Z}$). Therefore, Lemma
\ref{lem.ent.gcd.bezout.++} (applied to $-b$ instead of $b$) shows that there
exist integers $x\in\mathbb{Z}$ and $y\in\mathbb{Z}$ such that $\gcd\left(
a,-b\right)  =xa+y\left(  -b\right)  $. Fix such integers, and denote them by
$x_{0}$ and $y_{0}$. Thus, $x_{0}\in\mathbb{Z}$ and $y_{0}\in\mathbb{Z}$ are
integers such that $\gcd\left(  a,-b\right)  =x_{0}a+y_{0}\left(  -b\right)  $.

Now, Proposition \ref{prop.ent.gcd.props1} \textbf{(h)} yields $\gcd\left(
a,-b\right)  =\gcd\left(  a,b\right)  $. Hence,%
\[
\gcd\left(  a,b\right)  =\gcd\left(  a,-b\right)  =x_{0}a+y_{0}\left(
-b\right)  =x_{0}a+\left(  -y_{0}\right)  b.
\]
Hence, there exist integers $x\in\mathbb{Z}$ and $y\in\mathbb{Z}$ such that
$\gcd\left(  a,b\right)  =xa+yb$ (namely, $x=x_{0}$ and $y=-y_{0}$). Thus,
Lemma \ref{lem.ent.gcd.bezout.+} is proven in Case 2.

We have now proven Lemma \ref{lem.ent.gcd.bezout.+} in both Cases 1 and 2.
Hence, Lemma \ref{lem.ent.gcd.bezout.+} is proven.
\end{proof}

Now, we can prove the whole Theorem \ref{thm.ent.gcd.bezout}:

\begin{proof}
[Proof of Theorem \ref{thm.ent.gcd.bezout}.]Theorem \ref{thm.ent.gcd.bezout}
can be derived from Lemma \ref{lem.ent.gcd.bezout.+} in the same way as Lemma
\ref{lem.ent.gcd.bezout.+} was derived from Lemma \ref{lem.ent.gcd.bezout.++}
(except that this time, we have to distinguish between the cases $a\geq0$ and
$a<0$, and we have to use Proposition \ref{prop.ent.gcd.props1} \textbf{(g)}
instead of Proposition \ref{prop.ent.gcd.props1} \textbf{(h)}). Again, let us
give the detailed argument for the sake of completeness:

\begin{fineprint}
We are in one of the following two cases:

\textit{Case 1:} We have $a\geq0$.

\textit{Case 2:} We have $a<0$.

Let us first consider Case 1. In this case, we have $a\geq0$. Thus,
$a\in\mathbb{N}$ (since $a\in\mathbb{Z}$). Therefore, Lemma
\ref{lem.ent.gcd.bezout.+} shows that there exist integers $x\in\mathbb{Z}$
and $y\in\mathbb{Z}$ such that $\gcd\left(  a,b\right)  =xa+yb$. Thus, Theorem
\ref{thm.ent.gcd.bezout} is proven in Case 1.

Let us now consider Case 2. In this case, we have $a<0$. Hence, $-a>0$, so
that $-a\in\mathbb{N}$ (since $-a\in\mathbb{Z}$). Therefore, Lemma
\ref{lem.ent.gcd.bezout.+} (applied to $-a$ instead of $a$) shows that there
exist integers $x\in\mathbb{Z}$ and $y\in\mathbb{Z}$ such that $\gcd\left(
-a,b\right)  =x\left(  -a\right)  +yb$. Fix such integers, and denote them by
$x_{0}$ and $y_{0}$. Thus, $x_{0}\in\mathbb{Z}$ and $y_{0}\in\mathbb{Z}$ are
integers such that $\gcd\left(  -a,b\right)  =x_{0}\left(  -a\right)  +y_{0}b$.

Now, Proposition \ref{prop.ent.gcd.props1} \textbf{(g)} yields $\gcd\left(
-a,b\right)  =\gcd\left(  a,b\right)  $. Hence,%
\[
\gcd\left(  a,b\right)  =\gcd\left(  -a,b\right)  =x_{0}\left(  -a\right)
+y_{0}b=\left(  -x_{0}\right)  a+y_{0}b.
\]
Hence, there exist integers $x\in\mathbb{Z}$ and $y\in\mathbb{Z}$ such that
$\gcd\left(  a,b\right)  =xa+yb$ (namely, $x=-x_{0}$ and $y=y_{0}$). Thus,
Theorem \ref{thm.ent.gcd.bezout} is proven in Case 2.

We have now proven Theorem \ref{thm.ent.gcd.bezout} in both Cases 1 and 2.
Hence, Theorem \ref{thm.ent.gcd.bezout} is proven.
\end{fineprint}
\end{proof}

\begin{exercise}
\label{exe.ent.gcd.an-1}Let $u$ be an integer.

\textbf{(a)} Prove that $u^{b}-1\equiv u^{a}-1\operatorname{mod}u^{b-a}-1$ for
any $a\in\mathbb{N}$ and $b\in\mathbb{N}$ satisfying $b\geq a$.

\textbf{(b)} Prove that $\gcd\left(  u^{a}-1,u^{b}-1\right)  =\left\vert
u^{\gcd\left(  a,b\right)  }-1\right\vert $ for all $a\in\mathbb{N}$ and
$b\in\mathbb{N}$.
\end{exercise}

\subsubsection{First applications of Bezout's theorem}

An important corollary of Theorem \ref{thm.ent.gcd.bezout} is the following fact:

\begin{theorem}
\label{thm.ent.gcd.uniprop}Let $a,b\in\mathbb{Z}$. Then:

\textbf{(a)} For each $m\in\mathbb{Z}$, we have the following logical
equivalence:%
\begin{equation}
\left(  m\mid a\ \text{and }m\mid b\right)  \ \Longleftrightarrow\ \left(
m\mid\gcd\left(  a,b\right)  \right)  . \label{eq.thm.ent.gcd.uniprop.equiv}%
\end{equation}


\textbf{(b)} The common divisors of $a$ and $b$ are precisely the divisors of
$\gcd\left(  a,b\right)  $.

\textbf{(c)} We have $\operatorname*{Div}\left(  a,b\right)
=\operatorname*{Div}\left(  \gcd\left(  a,b\right)  \right)  $.
\end{theorem}

The three parts of this theorem are saying the same thing from slightly
different perspectives; the importance of the theorem nevertheless justifies
this repetition. To prove the theorem, we first show the following:

\begin{lemma}
\label{lem.ent.gcd.uniprop}Let $m,a,b\in\mathbb{Z}$ be such that $m\mid a$ and
$m\mid b$. Then, $m\mid\gcd\left(  a,b\right)  $.
\end{lemma}

\begin{proof}
[Proof of Lemma \ref{lem.ent.gcd.uniprop}.]Theorem \ref{thm.ent.gcd.bezout}
shows that there exist integers $x\in\mathbb{Z}$ and $y\in\mathbb{Z}$ such
that%
\begin{equation}
\gcd\left(  a,b\right)  =xa+yb. \label{pf.lem.ent.gcd.uniprop.1}%
\end{equation}
Consider these $x$ and $y$. Now, $m\mid a\mid xa$, so that $xa\equiv
0\operatorname{mod}m$. Also, $m\mid b\mid yb$, thus $yb\equiv
0\operatorname{mod}m$. Adding the congruences $xa\equiv0\operatorname{mod}m$
and $yb\equiv0\operatorname{mod}m$ together, we find $xa+yb\equiv
0+0=0\operatorname{mod}m$; in other words, $m\mid xa+yb$. In view of
(\ref{pf.lem.ent.gcd.uniprop.1}), this rewrites as $m\mid\gcd\left(
a,b\right)  $. This proves Lemma \ref{lem.ent.gcd.uniprop}.
\end{proof}

\begin{proof}
[Proof of Theorem \ref{thm.ent.gcd.uniprop}.]\textbf{(a)} Let $m\in\mathbb{Z}%
$. In order to prove (\ref{eq.thm.ent.gcd.uniprop.equiv}), we need to prove
the \textquotedblleft$\Longrightarrow$\textquotedblright\ and
\textquotedblleft$\Longleftarrow$\textquotedblright\ directions of the
equivalence (\ref{eq.thm.ent.gcd.uniprop.equiv}). But this is easy: The
\textquotedblleft$\Longrightarrow$\textquotedblright\ direction is just the
statement of Lemma \ref{lem.ent.gcd.uniprop}, whereas the \textquotedblleft%
$\Longleftarrow$\textquotedblright\ direction is trivial (to wit: if
$m\mid\gcd\left(  a,b\right)  $, then
\[
m\mid\gcd\left(  a,b\right)  \mid a\ \ \ \ \ \ \ \ \ \ \left(  \text{by
Proposition \ref{prop.ent.gcd.props1} \textbf{(e)}}\right)
\]
and%
\[
m\mid\gcd\left(  a,b\right)  \mid b\ \ \ \ \ \ \ \ \ \ \left(  \text{by
Proposition \ref{prop.ent.gcd.props1} \textbf{(e)}}\right)  ,
\]
and thus $\left(  m\mid a\ \text{and }m\mid b\right)  $). Hence, the
equivalence (\ref{eq.thm.ent.gcd.uniprop.equiv}) is proven. This proves
Theorem \ref{thm.ent.gcd.uniprop} \textbf{(a)}.

\textbf{(b)} The common divisors of $a$ and $b$ are precisely the integers $m$
that satisfy $\left(  m\mid a\text{ and }m\mid b\right)  $ (by the definition
of \textquotedblleft common divisor\textquotedblright). In view of the
equivalence (\ref{eq.thm.ent.gcd.uniprop.equiv}), this rewrites as follows:
The common divisors of $a$ and $b$ are precisely the integers $m$ that satisfy
$m\mid\gcd\left(  a,b\right)  $. In other words, the common divisors of $a$
and $b$ are precisely the divisors of $\gcd\left(  a,b\right)  $. This proves
Theorem \ref{thm.ent.gcd.uniprop} \textbf{(b)}.

\textbf{(c)} Recall that each $c\in\mathbb{Z}$ satisfies%
\begin{align*}
\operatorname*{Div}\left(  c\right)   &  =\left\{  \text{the common divisors
of }c\right\}  \ \ \ \ \ \ \ \ \ \ \left(  \text{by the definition of
}\operatorname*{Div}\left(  c\right)  \right) \\
&  =\left\{  \text{the integers }x\text{ such that }x\mid c\right\} \\
&  \ \ \ \ \ \ \ \ \ \ \left(  \text{by the definition of \textquotedblleft
common divisors\textquotedblright}\right) \\
&  =\left\{  \text{the divisors of }c\right\}  .
\end{align*}
Applying this to $c=\gcd\left(  a,b\right)  $, we obtain%
\begin{equation}
\operatorname*{Div}\left(  \gcd\left(  a,b\right)  \right)  =\left\{
\text{the divisors of }\gcd\left(  a,b\right)  \right\}  .
\label{pf.thm.ent.gcd.uniprop.c.1a}%
\end{equation}


The definition of $\operatorname*{Div}\left(  a,b\right)  $ yields%
\begin{align*}
\operatorname*{Div}\left(  a,b\right)   &  =\left\{  \text{the common divisors
of }a\text{ and }b\right\} \\
&  =\left\{  \text{the divisors of }\gcd\left(  a,b\right)  \right\}
\ \ \ \ \ \ \ \ \ \ \left(  \text{by Theorem \ref{thm.ent.gcd.uniprop}
\textbf{(b)}}\right) \\
&  =\operatorname*{Div}\left(  \gcd\left(  a,b\right)  \right)
\ \ \ \ \ \ \ \ \ \ \left(  \text{by (\ref{pf.thm.ent.gcd.uniprop.c.1a}%
)}\right)  .
\end{align*}
This proves Theorem \ref{thm.ent.gcd.uniprop} \textbf{(c)}.
\end{proof}

The following corollary of Theorem \ref{thm.ent.gcd.bezout} let us
\textquotedblleft combine\textquotedblright\ two divisibilities $a\mid c$ and
$b\mid c$. In fact, Proposition \ref{prop.ent.div.2} \textbf{(c)} would
already allow us to \textquotedblleft combine\textquotedblright\ them to form
$ab\mid cc=c^{2}$; but we can also \textquotedblleft combine\textquotedblright%
\ them to $ab\mid\gcd\left(  a,b\right)  \cdot c$ using the following fact:

\begin{theorem}
\label{thm.ent.gcd.combine}Let $a,b,c\in\mathbb{Z}$ satisfy $a\mid c$ and
$b\mid c$. Then, $ab\mid\gcd\left(  a,b\right)  \cdot c$.
\end{theorem}

\begin{example}
Let $a=6$ and $b=10$ and $c=30$. Then, $a=6\mid30=c$ and $b=10\mid30=c$. Thus,
Theorem \ref{thm.ent.gcd.combine} yields $ab\mid\gcd\left(  a,b\right)  \cdot
c$. And indeed, this is true, since $ab=6\cdot10\mid2\cdot30=\gcd\left(
a,b\right)  \cdot c$ (because $\gcd\left(  a,b\right)  =\gcd\left(
6,10\right)  =2$). Note that this latter divisibility is actually an equality:
we have $6\cdot10=2\cdot30$. Note also that we do \textbf{not} obtain $ab\mid
c$ (and indeed, this does not hold).
\end{example}

\begin{proof}
[Proof of Theorem \ref{thm.ent.gcd.combine}.]Theorem \ref{thm.ent.gcd.bezout}
yields that there exist integers $x\in\mathbb{Z}$ and $y\in\mathbb{Z}$ such
that $\gcd\left(  a,b\right)  =xa+yb$. Consider these $x$ and $y$.

We have $a\mid c$. In other words, there exists an integer $u$ such that
$c=au$. Consider this $u$.

We have $b\mid c$. In other words, there exists an integer $v$ such that
$c=bv$. Consider this $v$.

Now,%
\[
\underbrace{\gcd\left(  a,b\right)  }_{=xa+yb}\cdot c=\left(  xa+yb\right)
c=xa\underbrace{c}_{=bv}+yb\underbrace{c}_{=au}=xabv+ybau=ab\left(
xv+yu\right)  .
\]
Thus, there exists an integer $d$ such that $\gcd\left(  a,b\right)  \cdot
c=abd$ (namely, $d=xv+yu$). In other words, $ab\mid\gcd\left(  a,b\right)
\cdot c$. This proves Theorem \ref{thm.ent.gcd.combine}.
\end{proof}

Here is another corollary of Theorem \ref{thm.ent.gcd.bezout} whose usefulness
will become clearer later on:

\begin{theorem}
\label{thm.ent.gcd.cancel}Let $a,b,c\in\mathbb{Z}$ satisfy $a\mid bc$. Then,
$a\mid\gcd\left(  a,b\right)  \cdot c$.
\end{theorem}

At this point, you should see that Theorem \ref{thm.ent.gcd.cancel} allows
\textquotedblleft strengthening\textquotedblright\ divisibilities: You give it
a \textquotedblleft weak\textquotedblright\ divisibility $a\mid bc$, and
obtain a \textquotedblleft stronger\textquotedblright\ divisibility $a\mid
\gcd\left(  a,b\right)  \cdot c$ from it (stronger because $\gcd\left(
a,b\right)  $ is usually smaller than $b$).

\begin{proof}
[Proof of Theorem \ref{thm.ent.gcd.cancel}.]Theorem \ref{thm.ent.gcd.bezout}
yields that there exist integers $x\in\mathbb{Z}$ and $y\in\mathbb{Z}$ such
that $\gcd\left(  a,b\right)  =xa+yb$. Consider these $x$ and $y$.

We have $a\mid bc\mid ybc$; in other words, $ybc\equiv0\operatorname{mod}a$.
Also, $a\mid axc$, so that $axc\equiv0\operatorname{mod}a$. Adding the two
congruences $axc\equiv0\operatorname{mod}a$ and $ybc\equiv0\operatorname{mod}%
a$ together, we obtain $axc+ybc\equiv0+0=0\operatorname{mod}a$. In view of
$axc+ybc=\underbrace{\left(  xa+yb\right)  }_{=\gcd\left(  a,b\right)  }%
c=\gcd\left(  a,b\right)  \cdot c$, this rewrites as $\gcd\left(  a,b\right)
\cdot c\equiv0\operatorname{mod}a$. In other words, $a\mid\gcd\left(
a,b\right)  \cdot c$. This proves Theorem \ref{thm.ent.gcd.cancel}.
\end{proof}

\begin{corollary}
\label{cor.ent.gcd.sa,sb}Let $s,a,b\in\mathbb{Z}$. Then,
\[
\gcd\left(  sa,sb\right)  =\left\vert s\right\vert \gcd\left(  a,b\right)  .
\]

\end{corollary}

\begin{proof}
[Proof of Corollary \ref{cor.ent.gcd.sa,sb}.]We shall prove that the two
integers $\gcd\left(  sa,sb\right)  $ and $s\gcd\left(  a,b\right)  $ mutually
divide each other (i.e., they satisfy $\gcd\left(  sa,sb\right)  \mid
s\gcd\left(  a,b\right)  $ and $s\gcd\left(  a,b\right)  \mid\gcd\left(
sa,sb\right)  $). Then, Exercise \ref{exe.ent.div.abba} will let us conclude
that $\left\vert \gcd\left(  sa,sb\right)  \right\vert =\left\vert
s\gcd\left(  a,b\right)  \right\vert $. This will then rewrite as $\gcd\left(
sa,sb\right)  =\left\vert s\right\vert \gcd\left(  a,b\right)  $, and we will
be done. (This trick is actually a common strategy for proving equalities
between gcds.)

For the sake of brevity, let us set $g=\gcd\left(  sa,sb\right)  $ and
$h=s\gcd\left(  a,b\right)  $. So our first goal is to prove that $g\mid h$
and $h\mid g$.

\textit{Proof of }$g\mid h$\textit{:} Theorem \ref{thm.ent.gcd.bezout} yields
that there exist integers $x\in\mathbb{Z}$ and $y\in\mathbb{Z}$ such that
$\gcd\left(  a,b\right)  =xa+yb$. Consider these $x$ and $y$.

Proposition \ref{prop.ent.gcd.props1} \textbf{(f)} (applied to $sa$ and $sb$
instead of $a$ and $b$) yields that $\gcd\left(  sa,sb\right)  \mid sa$ and
$\gcd\left(  sa,sb\right)  \mid sb$. From $g=\gcd\left(  sa,sb\right)  \mid
sa$, we obtain $g\mid sa\mid xsa$, thus $xsa\equiv0\operatorname{mod}g$.
Similarly, $ysb\equiv0\operatorname{mod}g$. Adding these two congruences
together, we find $xsa+ysb\equiv0\operatorname{mod}g$. Now,%
\[
h=s\underbrace{\gcd\left(  a,b\right)  }_{=xa+yb}=s\left(  xa+yb\right)
=xsa+ysb\equiv0\operatorname{mod}g.
\]
In other words, $g\mid h$. Thus, we have proven $g\mid h$.

\textit{Proof of }$h\mid g$\textit{:} Proposition \ref{prop.ent.gcd.props1}
\textbf{(f)} yields $\gcd\left(  a,b\right)  \mid a$ and $\gcd\left(
a,b\right)  \mid b$. Also, $s\mid s$. Hence, Proposition \ref{prop.ent.div.2}
\textbf{(c)} (applied to $s,\gcd\left(  a,b\right)  ,s,a$ instead of
$a_{1},a_{2},b_{1},b_{2}$) yields $s\gcd\left(  a,b\right)  \mid sa$.
Similarly, $s\gcd\left(  a,b\right)  \mid sb$. Hence, Lemma
\ref{lem.ent.gcd.uniprop} (applied to $s\gcd\left(  a,b\right)  $, $sa$ and
$sb$ instead of $m$, $a$ and $b$) yields $s\gcd\left(  a,b\right)  \mid
\gcd\left(  sa,sb\right)  $. In view of $g=\gcd\left(  sa,sb\right)  $ and
$h=s\gcd\left(  a,b\right)  $, this rewrites as $h\mid g$. So we have proven
$h\mid g$.

Now, Exercise \ref{exe.ent.div.abba} (applied to $g$ and $h$ instead of $a$
and $b$) yields $\left\vert g\right\vert =\left\vert h\right\vert $.

But recall that a gcd of any finitely many integers is nonnegative (by
Definition \ref{def.ent.gcd.gcd}). Hence, in particular, $\gcd\left(
a,b\right)  $ and $\gcd\left(  sa,sb\right)  $ are nonnegative. From
$g=\gcd\left(  sa,sb\right)  $, we obtain%
\[
\left\vert g\right\vert =\left\vert \gcd\left(  sa,sb\right)  \right\vert
=\gcd\left(  sa,sb\right)
\]
(since $\gcd\left(  sa,sb\right)  $ is nonnegative). Also, from $h=s\gcd
\left(  a,b\right)  $, we obtain%
\begin{align*}
\left\vert h\right\vert  &  =\left\vert s\gcd\left(  a,b\right)  \right\vert
=\left\vert s\right\vert \cdot\underbrace{\left\vert \gcd\left(  a,b\right)
\right\vert }_{\substack{=\gcd\left(  a,b\right)  \\\text{(since }\gcd\left(
a,b\right)  \\\text{is nonnegative)}}}\ \ \ \ \ \ \ \ \ \ \left(  \text{by
(\ref{eq.ent.div.abs(xy)})}\right) \\
&  =\left\vert s\right\vert \gcd\left(  a,b\right)  .
\end{align*}
Hence,
\[
\gcd\left(  sa,sb\right)  =\left\vert g\right\vert =\left\vert h\right\vert
=\left\vert s\right\vert \gcd\left(  a,b\right)  .
\]
This proves Corollary \ref{cor.ent.gcd.sa,sb}.
\end{proof}

\begin{exercise}
\label{exe.ent.gcd.div}Let $a_{1},a_{2},b_{1},b_{2}\in\mathbb{Z}$ satisfy
$a_{1}\mid b_{1}$ and $a_{2}\mid b_{2}$. Prove that%
\[
\gcd\left(  a_{1},a_{2}\right)  \mid\gcd\left(  b_{1},b_{2}\right)  .
\]

\end{exercise}

\begin{exercise}
\label{exe.ent.gcd.abs}Let $a,b\in\mathbb{Z}$.

\textbf{(a)} Prove that $\gcd\left(  a,\left\vert b\right\vert \right)
=\gcd\left(  a,b\right)  $.

\textbf{(b)} Prove that $\gcd\left(  \left\vert a\right\vert ,b\right)
=\gcd\left(  a,b\right)  $.

\textbf{(c)} Prove that $\gcd\left(  \left\vert a\right\vert ,\left\vert
b\right\vert \right)  =\gcd\left(  a,b\right)  $.
\end{exercise}

\subsubsection{gcds of multiple numbers}

\begin{teachingnote}
I am not sure how useful this section is for an algebra class. It probably is
used for the Smith normal form, but before that?
\end{teachingnote}

The following theorem generalizes some of the previous facts to gcds of
multiple integers:

\begin{theorem}
\label{thm.ent.gcd.uniprop-mul}Let $b_{1},b_{2},\ldots,b_{k}$ be integers.

\textbf{(a)} For each $m\in\mathbb{Z}$, we have the following logical
equivalence:%
\[
\left(  m\mid b_{i}\text{ for all }i\in\left\{  1,2,\ldots,k\right\}  \right)
\ \Longleftrightarrow\ \left(  m\mid\gcd\left(  b_{1},b_{2},\ldots
,b_{k}\right)  \right)  .
\]


\textbf{(b)} The common divisors of $b_{1},b_{2},\ldots,b_{k}$ are precisely
the divisors of $\gcd\left(  b_{1},b_{2},\ldots,b_{k}\right)  $.

\textbf{(c)} We have $\operatorname*{Div}\left(  b_{1},b_{2},\ldots
,b_{k}\right)  =\operatorname*{Div}\left(  \gcd\left(  b_{1},b_{2}%
,\ldots,b_{k}\right)  \right)  $.

\textbf{(d)} If $k>0$, then%
\[
\gcd\left(  b_{1},b_{2},\ldots,b_{k}\right)  =\gcd\left(  \gcd\left(
b_{1},b_{2},\ldots,b_{k-1}\right)  ,b_{k}\right)  .
\]

\end{theorem}

\begin{teachingnote}
The following proof generalizes badly to more general rings (even
$\mathbb{Z}\left[  i\right]  $ maybe?), as it uses inequalities.
\end{teachingnote}

\begin{proof}
[Proof of Theorem \ref{thm.ent.gcd.uniprop-mul}.]Forget that we fixed
$b_{1},b_{2},\ldots,b_{k}$. Rather than prove the four parts of Theorem
\ref{thm.ent.gcd.uniprop-mul} separately, we shall prove them together as a package.

We shall proceed by induction on $k$:

\textit{Induction base:} Theorem \ref{thm.ent.gcd.uniprop-mul} holds for $k=0$.

\begin{fineprint}
[\textit{Proof:} This is a straightforward exercise in dealing with empty
sets, $0$-tuples and vacuous truths. For the sake of completeness, here is the
full argument:

Assume that $k=0$. We must prove that Theorem \ref{thm.ent.gcd.uniprop-mul} holds.

Let $b_{1},b_{2},\ldots,b_{k}$ be integers. Of course, these are $0$ integers,
since $k=0$.

We don't have $k>0$ (since $k=0$). Hence, Theorem
\ref{thm.ent.gcd.uniprop-mul} \textbf{(d)} is vacuously true.

All of $b_{1},b_{2},\ldots,b_{k}$ are $0$ (indeed, this is vacuously true).
Thus, $\gcd\left(  b_{1},b_{2},\ldots,b_{k}\right)  =0$ (by Definition
\ref{def.ent.gcd.gcd}).

For each $m\in\mathbb{Z}$, we have the logical equivalence%
\begin{align*}
&  \ \left(  m\mid b_{i}\text{ for all }i\in\left\{  1,2,\ldots,k\right\}
\right) \\
&  \Longleftrightarrow\ \left(  \text{truth}\right)
\ \ \ \ \ \ \ \ \ \ \left(  \text{since there exists no }i\in\left\{
1,2,\ldots,k\right\}  \right) \\
&  \Longleftrightarrow\ \left(  m\mid0\right)  \ \ \ \ \ \ \ \ \ \ \left(
\text{since }m\mid0\text{ is always true}\right) \\
&  \Longleftrightarrow\ \left(  m\mid\gcd\left(  b_{1},b_{2},\ldots
,b_{k}\right)  \right)  \ \ \ \ \ \ \ \ \ \ \left(  \text{since }0=\gcd\left(
b_{1},b_{2},\ldots,b_{k}\right)  \right)  .
\end{align*}
This proves Theorem \ref{thm.ent.gcd.uniprop-mul} \textbf{(a)} (in the case
$k=0$, that is). Parts \textbf{(b)} and \textbf{(c)} of Theorem
\ref{thm.ent.gcd.uniprop-mul} are restatements of Theorem
\ref{thm.ent.gcd.uniprop-mul} \textbf{(a)} and can be derived from it in the
same way as we derived parts \textbf{(b)} and \textbf{(c)} of Theorem
\ref{thm.ent.gcd.uniprop} from Theorem \ref{thm.ent.gcd.uniprop} \textbf{(a)}.

Thus, all four parts of Theorem \ref{thm.ent.gcd.uniprop-mul} are proven for
$k=0$. This completes the induction base.]
\end{fineprint}

\textit{Induction step:} Let $\ell$ be a positive integer. Assume that Theorem
\ref{thm.ent.gcd.uniprop-mul} holds for $k=\ell-1$. We must prove that Theorem
\ref{thm.ent.gcd.uniprop-mul} holds for $k=\ell$.

We have assumed that Theorem \ref{thm.ent.gcd.uniprop-mul} holds for
$k=\ell-1$. In other words, the following statement holds:

\begin{statement}
\textit{Statement 1:} Let $b_{1},b_{2},\ldots,b_{\ell-1}$ be integers.

\textbf{(a)} For each $m\in\mathbb{Z}$, we have the following logical
equivalence:%
\[
\left(  m\mid b_{i}\text{ for all }i\in\left\{  1,2,\ldots,\ell-1\right\}
\right)  \ \Longleftrightarrow\ \left(  m\mid\gcd\left(  b_{1},b_{2}%
,\ldots,b_{\ell-1}\right)  \right)  .
\]


\textbf{(b)} The common divisors of $b_{1},b_{2},\ldots,b_{\ell-1}$ are
precisely the divisors of $\gcd\left(  b_{1},b_{2},\ldots,b_{\ell-1}\right)  $.

\textbf{(c)} We have $\operatorname*{Div}\left(  b_{1},b_{2},\ldots,b_{\ell
-1}\right)  =\operatorname*{Div}\left(  \gcd\left(  b_{1},b_{2},\ldots
,b_{\ell-1}\right)  \right)  $.

\textbf{(d)} If $\ell-1>0$, then%
\[
\gcd\left(  b_{1},b_{2},\ldots,b_{\ell-1}\right)  =\gcd\left(  \gcd\left(
b_{1},b_{2},\ldots,b_{\left(  \ell-1\right)  -1}\right)  ,b_{\ell-1}\right)
.
\]

\end{statement}

Recall that we must prove that Theorem \ref{thm.ent.gcd.uniprop-mul} holds for
$k=\ell$. In other words, we must prove the following statement:

\begin{statement}
\textit{Statement 2:} Let $b_{1},b_{2},\ldots,b_{\ell}$ be integers.

\textbf{(a)} For each $m\in\mathbb{Z}$, we have the following logical
equivalence:%
\[
\left(  m\mid b_{i}\text{ for all }i\in\left\{  1,2,\ldots,\ell\right\}
\right)  \ \Longleftrightarrow\ \left(  m\mid\gcd\left(  b_{1},b_{2}%
,\ldots,b_{\ell}\right)  \right)  .
\]


\textbf{(b)} The common divisors of $b_{1},b_{2},\ldots,b_{\ell}$ are
precisely the divisors of $\gcd\left(  b_{1},b_{2},\ldots,b_{\ell}\right)  $.

\textbf{(c)} We have $\operatorname*{Div}\left(  b_{1},b_{2},\ldots,b_{\ell
}\right)  =\operatorname*{Div}\left(  \gcd\left(  b_{1},b_{2},\ldots,b_{\ell
}\right)  \right)  $.

\textbf{(d)} If $\ell>0$, then%
\[
\gcd\left(  b_{1},b_{2},\ldots,b_{\ell}\right)  =\gcd\left(  \gcd\left(
b_{1},b_{2},\ldots,b_{\ell-1}\right)  ,b_{\ell}\right)  .
\]

\end{statement}

\textit{Proof of Statement 2:} \textbf{(d)} Let us begin with part
\textbf{(d)}. Assume that $\ell>0$ (though we already know that this is true).

Let $g=\gcd\left(  b_{1},b_{2},\ldots,b_{\ell}\right)  $ and $h=\gcd\left(
\gcd\left(  b_{1},b_{2},\ldots,b_{\ell-1}\right)  ,b_{\ell}\right)  $.

If the integers $b_{1},b_{2},\ldots,b_{\ell}$ are all $0$, then Statement 2
\textbf{(d)} holds\footnote{\textit{Proof.} Assume that $b_{1},b_{2}%
,\ldots,b_{\ell}$ are all $0$. Then, $\gcd\left(  b_{1},b_{2},\ldots,b_{\ell
}\right)  =0$ (by Definition \ref{def.ent.gcd.gcd}). Moreover, $b_{1}%
,b_{2},\ldots,b_{\ell-1}$ are all $0$ (since $b_{1},b_{2},\ldots,b_{\ell}$ are
all $0$), and thus $\gcd\left(  b_{1},b_{2},\ldots,b_{\ell-1}\right)  =0$.
Finally, $b_{\ell}=0$ (since $b_{1},b_{2},\ldots,b_{\ell}$ are all $0$).
Comparing $\gcd\left(  b_{1},b_{2},\ldots,b_{\ell}\right)  =0$ with
$\gcd\left(  \underbrace{\gcd\left(  b_{1},b_{2},\ldots,b_{\ell-1}\right)
}_{=0},\underbrace{b_{\ell}}_{=0}\right)  =\gcd\left(  0,0\right)  =0$, we
obtain $\gcd\left(  b_{1},b_{2},\ldots,b_{\ell}\right)  =\gcd\left(
\gcd\left(  b_{1},b_{2},\ldots,b_{\ell-1}\right)  ,b_{\ell}\right)  $. In
other words, Statement 2 \textbf{(d)} holds.}. Hence, for the rest of this
proof, we WLOG assume that the integers $b_{1},b_{2},\ldots,b_{\ell}$ are not
all $0$. Therefore, $\gcd\left(  b_{1},b_{2},\ldots,b_{\ell}\right)  $ is the
largest element of the set $\operatorname*{Div}\left(  b_{1},b_{2}%
,\ldots,b_{\ell}\right)  $ (by Definition \ref{def.ent.gcd.gcd}). In other
words, $g$ is the largest element of the set $\operatorname*{Div}\left(
b_{1},b_{2},\ldots,b_{\ell}\right)  $ (since $g=\gcd\left(  b_{1},b_{2}%
,\ldots,b_{\ell}\right)  $).

Furthermore, the two integers $\gcd\left(  b_{1},b_{2},\ldots,b_{\ell
-1}\right)  $ and $b_{\ell}$ are not all $0$\ \ \ \ \footnote{\textit{Proof.}
Assume the contrary. Thus, both $\gcd\left(  b_{1},b_{2},\ldots,b_{\ell
-1}\right)  $ and $b_{\ell}$ are $0$. Thus, in particular, $b_{\ell}=0$. If
the $\ell-1$ integers $b_{1},b_{2},\ldots,b_{\ell-1}$ were all $0$, then the
$\ell$ integers $b_{1},b_{2},\ldots,b_{\ell}$ would be all $0$ (since
$b_{\ell}=0$), which would contradict the fact that the integers $b_{1}%
,b_{2},\ldots,b_{\ell}$ are not all $0$. Hence, the $\ell-1$ integers
$b_{1},b_{2},\ldots,b_{\ell-1}$ are not all $0$. Thus, $\gcd\left(
b_{1},b_{2},\ldots,b_{\ell-1}\right)  $ is a positive integer (by Definition
\ref{def.ent.gcd.gcd}). Thus, $\gcd\left(  b_{1},b_{2},\ldots,b_{\ell
-1}\right)  >0$, which contradicts the fact that $\gcd\left(  b_{1}%
,b_{2},\ldots,b_{\ell-1}\right)  $ is $0$. This contradiction shows that our
assumption was false, qed.}. Hence, $\gcd\left(  \gcd\left(  b_{1}%
,b_{2},\ldots,b_{\ell-1}\right)  ,b_{\ell}\right)  $ is the largest element of
the set \newline$\operatorname*{Div}\left(  \gcd\left(  b_{1},b_{2}%
,\ldots,b_{\ell-1}\right)  ,b_{\ell}\right)  $ (by Definition
\ref{def.ent.gcd.gcd}). In other words, $h$ is the largest element of the set
$\operatorname*{Div}\left(  \gcd\left(  b_{1},b_{2},\ldots,b_{\ell-1}\right)
,b_{\ell}\right)  $ (since $h=\gcd\left(  \gcd\left(  b_{1},b_{2}%
,\ldots,b_{\ell-1}\right)  ,b_{\ell}\right)  $).

We intend to show that $g=h$. For that, it suffices to prove $g\leq h$ and
$h\leq g$.

\textit{Proof of }$g\leq h$\textit{:} Recall that $g$ is the largest element
of the set $\operatorname*{Div}\left(  b_{1},b_{2},\ldots,b_{\ell}\right)  $.
Therefore, $g\in\operatorname*{Div}\left(  b_{1},b_{2},\ldots,b_{\ell}\right)
$. In other words, $g$ is a common divisor of $b_{1},b_{2},\ldots,b_{\ell}$.
Hence, $g\mid b_{i}$ for each $i\in\left\{  1,2,\ldots,\ell\right\}  $. Thus,
in particular, $g\mid b_{i}$ for each $i\in\left\{  1,2,\ldots,\ell-1\right\}
$. But Statement 1 \textbf{(a)} (applied to $m=g$) shows that we have the
equivalence%
\[
\left(  g\mid b_{i}\text{ for all }i\in\left\{  1,2,\ldots,\ell-1\right\}
\right)  \ \Longleftrightarrow\ \left(  g\mid\gcd\left(  b_{1},b_{2}%
,\ldots,b_{\ell-1}\right)  \right)  .
\]
Hence, we have $g\mid\gcd\left(  b_{1},b_{2},\ldots,b_{\ell-1}\right)  $
(since we know that $g\mid b_{i}$ for all $i\in\left\{  1,2,\ldots
,\ell-1\right\}  $). Combining this with $g\mid b_{\ell}$, we conclude that
$g$ is a common divisor of $\gcd\left(  b_{1},b_{2},\ldots,b_{\ell-1}\right)
$ and $b_{\ell}$. In other words, $g\in\operatorname*{Div}\left(  \gcd\left(
b_{1},b_{2},\ldots,b_{\ell-1}\right)  ,b_{\ell}\right)  $. Therefore, $g\leq
h$ (since $h$ is the largest element of the set $\operatorname*{Div}\left(
\gcd\left(  b_{1},b_{2},\ldots,b_{\ell-1}\right)  ,b_{\ell}\right)  $).

\textit{Proof of }$h\leq g$\textit{:} We have%
\[
h=\gcd\left(  \gcd\left(  b_{1},b_{2},\ldots,b_{\ell-1}\right)  ,b_{\ell
}\right)  \mid\gcd\left(  b_{1},b_{2},\ldots,b_{\ell-1}\right)
\]
(by Proposition \ref{prop.ent.gcd.props1} \textbf{(f)}, applied to
$a=\gcd\left(  b_{1},b_{2},\ldots,b_{\ell-1}\right)  $ and $b=b_{\ell}$).
Also,%
\[
h=\gcd\left(  \gcd\left(  b_{1},b_{2},\ldots,b_{\ell-1}\right)  ,b_{\ell
}\right)  \mid b_{\ell}%
\]
(by Proposition \ref{prop.ent.gcd.props1} \textbf{(f)}, applied to
$a=\gcd\left(  b_{1},b_{2},\ldots,b_{\ell-1}\right)  $ and $b=b_{\ell}$).

But Statement 1 \textbf{(a)} (applied to $m=h$) shows that we have the
equivalence%
\[
\left(  h\mid b_{i}\text{ for all }i\in\left\{  1,2,\ldots,\ell-1\right\}
\right)  \ \Longleftrightarrow\ \left(  h\mid\gcd\left(  b_{1},b_{2}%
,\ldots,b_{\ell-1}\right)  \right)  .
\]
Thus, we have $\left(  h\mid b_{i}\text{ for all }i\in\left\{  1,2,\ldots
,\ell-1\right\}  \right)  $ (since we have $h\mid\gcd\left(  b_{1}%
,b_{2},\ldots,b_{\ell-1}\right)  $).

This divisibility $h\mid b_{i}$ holds not only for all $i\in\left\{
1,2,\ldots,\ell-1\right\}  $, but also for $i=\ell$ (because $h\mid b_{\ell}%
$). Thus, we conclude that $h\mid b_{i}$ for all $i\in\left\{  1,2,\ldots
,\ell\right\}  $. In other words, $h$ is a common divisor of $b_{1}%
,b_{2},\ldots,b_{\ell}$. In other words, $h\in\operatorname*{Div}\left(
b_{1},b_{2},\ldots,b_{\ell}\right)  $. Thus, $h\leq g$ (since $g$ is the
largest element of the set $\operatorname*{Div}\left(  b_{1},b_{2}%
,\ldots,b_{\ell}\right)  $).

Combining $h\leq g$ with $g\leq h$, we obtain $g=h$. In other words,
\[
\gcd\left(  b_{1},b_{2},\ldots,b_{\ell}\right)  =\gcd\left(  \gcd\left(
b_{1},b_{2},\ldots,b_{\ell-1}\right)  ,b_{\ell}\right)
\]
(since $g=\gcd\left(  b_{1},b_{2},\ldots,b_{\ell}\right)  $ and $h=\gcd\left(
\gcd\left(  b_{1},b_{2},\ldots,b_{\ell-1}\right)  ,b_{\ell}\right)  $). Hence,
Statement 2 \textbf{(d)} is proven.

\textbf{(a)} Let $m\in\mathbb{Z}$. Then, we have the equivalence%
\begin{align*}
&  \ \left(  m\mid b_{i}\text{ for all }i\in\left\{  1,2,\ldots,\ell\right\}
\right) \\
&  \Longleftrightarrow\ \left(  \underbrace{\left(  m\mid b_{i}\text{ for all
}i\in\left\{  1,2,\ldots,\ell-1\right\}  \right)  }%
_{\substack{\Longleftrightarrow\ \left(  m\mid\gcd\left(  b_{1},b_{2}%
,\ldots,b_{\ell-1}\right)  \right)  \\\text{(by Statement 1 \textbf{(a)})}%
}}\text{ and }m\mid b_{\ell}\right) \\
&  \Longleftrightarrow\ \left(  m\mid\gcd\left(  b_{1},b_{2},\ldots,b_{\ell
-1}\right)  \text{ and }m\mid b_{\ell}\right) \\
&  \Longleftrightarrow\ \left(  m\mid\underbrace{\gcd\left(  \gcd\left(
b_{1},b_{2},\ldots,b_{\ell-1}\right)  ,b_{\ell}\right)  }_{\substack{=\gcd
\left(  b_{1},b_{2},\ldots,b_{\ell}\right)  \\\text{(by Statement 2
\textbf{(d)}, which we have just proved)}}}\right) \\
&  \ \ \ \ \ \ \ \ \ \ \left(  \text{by Theorem \ref{thm.ent.gcd.uniprop}
\textbf{(a)}, applied to }a=\gcd\left(  b_{1},b_{2},\ldots,b_{\ell-1}\right)
\text{ and }b=b_{\ell}\right) \\
&  \Longleftrightarrow\ \left(  m\mid\gcd\left(  b_{1},b_{2},\ldots,b_{\ell
}\right)  \right)  .
\end{align*}
Thus, Statement 2 \textbf{(a)} follows.

Statement 2 \textbf{(b)} is a restatement of Statement 2 \textbf{(a)} (in the
same way that Theorem \ref{thm.ent.gcd.uniprop} \textbf{(b)} is a restatement
of Theorem \ref{thm.ent.gcd.uniprop} \textbf{(a)}).

Statement 2 \textbf{(c)} is a restatement of Statement 2 \textbf{(b)} (in the
same way that Theorem \ref{thm.ent.gcd.uniprop} \textbf{(c)} is a restatement
of Theorem \ref{thm.ent.gcd.uniprop} \textbf{(b)}).

We are thus done proving Statement 2.

In other words, we have proven that Theorem \ref{thm.ent.gcd.uniprop-mul}
holds for $k=\ell$. This completes the induction step. Thus, Theorem
\ref{thm.ent.gcd.uniprop-mul} is proven by induction.
\end{proof}

Theorem \ref{thm.ent.gcd.uniprop-mul} \textbf{(d)} is the reason why most
properties of gcds of multiple numbers can be derived from corresponding
properties of gcds of two numbers. For example, we can easily prove the
following analogue of Corollary \ref{cor.ent.gcd.sa,sb} for gcds of three numbers:

\begin{exercise}
\label{exe.ent.gcd.sa,sb,sc}Let $s,a,b,c\in\mathbb{Z}$. Prove that
$\gcd\left(  sa,sb,sc\right)  =\left\vert s\right\vert \gcd\left(
a,b,c\right)  $.
\end{exercise}

More generally, Corollary \ref{cor.ent.gcd.sa,sb} can be generalized to any
number of integers:

\begin{exercise}
\label{exe.ent.gcd.sak}Let $s\in\mathbb{Z}$, and let $a_{1},a_{2},\ldots
,a_{k}$ be integers. Prove that $\gcd\left(  sa_{1},sa_{2},\ldots
,sa_{k}\right)  =\left\vert s\right\vert \gcd\left(  a_{1},a_{2},\ldots
,a_{k}\right)  $.
\end{exercise}

Bezout's theorem (Theorem \ref{thm.ent.gcd.bezout}) also holds for any finite
number of integers:

\begin{theorem}
\label{thm.ent.gcd.bezout-mul}Let $b_{1},b_{2},\ldots,b_{k}$ be integers.
Then, there exist integers $x_{1},x_{2},\ldots,x_{k}$ such that%
\[
\gcd\left(  b_{1},b_{2},\ldots,b_{k}\right)  =x_{1}b_{1}+x_{2}b_{2}%
+\cdots+x_{k}b_{k}.
\]

\end{theorem}

Once again, we can restate Theorem \ref{thm.ent.gcd.bezout-mul} by using the
concept of a $\mathbb{Z}$-linear combination. Let us define this concept finally:

\begin{definition}
Let $b_{1},b_{2},\ldots,b_{k}$ be numbers. A $\mathbb{Z}$\textit{-linear
combination} of $b_{1},b_{2},\ldots,b_{k}$ shall mean a number of the form
$x_{1}b_{1}+x_{2}b_{2}+\cdots+x_{k}b_{k}$, where $x_{1},x_{2},\ldots,x_{k}$
are integers.
\end{definition}

Thus, Theorem \ref{thm.ent.gcd.bezout-mul} can be restated as follows:

\begin{theorem}
\label{thm.ent.gcd.bezout-mul'}Let $b_{1},b_{2},\ldots,b_{k}$ be integers.
Then, $\gcd\left(  b_{1},b_{2},\ldots,b_{k}\right)  $ is a $\mathbb{Z}$-linear
combination of $b_{1},b_{2},\ldots,b_{k}$.
\end{theorem}

\begin{proof}
[Proof of Theorem \ref{thm.ent.gcd.bezout-mul'}.]We shall prove this by
induction on $k$:

\textit{Induction base:} Recall that the empty list $\left(  {}\right)  $
satisfies $\gcd\left(  {}\right)  =0$ (by Definition \ref{def.ent.gcd.gcd},
since all entries of the empty list are $0$). But $0$ is a $\mathbb{Z}$-linear
combination of an empty list of numbers, because $0=\left(  \text{empty
sum}\right)  $. Combining these facts, we conclude that $\gcd\left(
{}\right)  $ is a $\mathbb{Z}$-linear combination of an empty list of numbers.
But this is precisely the claim of Theorem \ref{thm.ent.gcd.bezout-mul'} for
$k=0$. Thus, Theorem \ref{thm.ent.gcd.bezout-mul'} holds for $k=0$. This
completes the induction base.

\textit{Induction step:} Let $\ell$ be a positive integer. Assume that Theorem
\ref{thm.ent.gcd.bezout-mul'} holds for $k=\ell-1$. We must prove that Theorem
\ref{thm.ent.gcd.bezout-mul} holds for $k=\ell$.

We have assumed that Theorem \ref{thm.ent.gcd.bezout-mul'} holds for
$k=\ell-1$. In other words, the following statement holds:

\begin{statement}
\textit{Statement 1:} Let $b_{1},b_{2},\ldots,b_{\ell-1}$ be integers. Then,
$\gcd\left(  b_{1},b_{2},\ldots,b_{\ell-1}\right)  $ is a $\mathbb{Z}$-linear
combination of $b_{1},b_{2},\ldots,b_{\ell-1}$.
\end{statement}

Our goal is to prove that Theorem \ref{thm.ent.gcd.bezout-mul'} holds for
$k=\ell$. In other words, we must prove the following statement:

\begin{statement}
\textit{Statement 2:} Let $b_{1},b_{2},\ldots,b_{\ell}$ be integers. Then,
$\gcd\left(  b_{1},b_{2},\ldots,b_{\ell}\right)  $ is a $\mathbb{Z}$-linear
combination of $b_{1},b_{2},\ldots,b_{\ell}$.
\end{statement}

\textit{Proof of Statement 2:} Statement 1 shows that $\gcd\left(  b_{1}%
,b_{2},\ldots,b_{\ell-1}\right)  $ is a $\mathbb{Z}$-linear combination of
$b_{1},b_{2},\ldots,b_{\ell-1}$. In other words, there exist $\ell-1$ integers
$y_{1},y_{2},\ldots,y_{\ell-1}$ such that%
\[
\gcd\left(  b_{1},b_{2},\ldots,b_{\ell-1}\right)  =y_{1}b_{1}+y_{2}%
b_{2}+\cdots+y_{\ell-1}b_{\ell-1}.
\]
Consider these $y_{1},y_{2},\ldots,y_{\ell-1}$.

Furthermore, Theorem \ref{thm.ent.gcd.bezout} (applied to $a=\gcd\left(
b_{1},b_{2},\ldots,b_{\ell-1}\right)  $ and $b=b_{\ell}$) yields that there
exist two integers $x$ and $y$ such that%
\[
\gcd\left(  \gcd\left(  b_{1},b_{2},\ldots,b_{\ell-1}\right)  ,b_{\ell
}\right)  =x\gcd\left(  b_{1},b_{2},\ldots,b_{\ell-1}\right)  +yb_{\ell}.
\]
Consider these $x$ and $y$.

Now, $\ell>0$; thus, Theorem \ref{thm.ent.gcd.uniprop-mul} \textbf{(d)}
(applied to $k=\ell$) yields%
\begin{align*}
\gcd\left(  b_{1},b_{2},\ldots,b_{\ell}\right)   &  =\gcd\left(  \gcd\left(
b_{1},b_{2},\ldots,b_{\ell-1}\right)  ,b_{\ell}\right) \\
&  =x\underbrace{\gcd\left(  b_{1},b_{2},\ldots,b_{\ell-1}\right)  }%
_{=y_{1}b_{1}+y_{2}b_{2}+\cdots+y_{\ell-1}b_{\ell-1}}+yb_{\ell}\\
&  =x\left(  y_{1}b_{1}+y_{2}b_{2}+\cdots+y_{\ell-1}b_{\ell-1}\right)
+yb_{\ell}\\
&  =xy_{1}b_{1}+xy_{2}b_{2}+\cdots+xy_{\ell-1}b_{\ell-1}+yb_{\ell}.
\end{align*}
This is clearly a $\mathbb{Z}$-linear combination of the $b_{1},b_{2}%
,\ldots,b_{\ell}$. Thus, $\gcd\left(  b_{1},b_{2},\ldots,b_{\ell}\right)  $ is
a $\mathbb{Z}$-linear combination of $b_{1},b_{2},\ldots,b_{\ell}$. So
Statement 2 is proven.

In other words, we have proven that Theorem \ref{thm.ent.gcd.bezout-mul'}
holds for $k=\ell$. This completes the induction step. Thus, Theorem
\ref{thm.ent.gcd.bezout-mul'} is proven by induction.
\end{proof}

\begin{proof}
[Proof of Theorem \ref{thm.ent.gcd.bezout-mul}.]We have just proven Theorem
\ref{thm.ent.gcd.bezout-mul'}, which is a restatement of Theorem
\ref{thm.ent.gcd.bezout-mul}. Thus, Theorem \ref{thm.ent.gcd.bezout-mul} is
also proven.
\end{proof}

For future reference, let us restate Theorem \ref{thm.ent.gcd.uniprop-mul}
\textbf{(a)} as follows:

\begin{corollary}
\label{cor.ent.gcd.uniprop-mula}Let $b_{1},b_{2},\ldots,b_{k}$ be integers.
\end{corollary}

\begin{theorem}
For each $m\in\mathbb{Z}$, we have the following logical equivalence:%
\[
\left(  m\mid b_{1}\text{ and }m\mid b_{2}\text{ and }\cdots\text{ and }m\mid
b_{k}\right)  \ \Longleftrightarrow\ \left(  m\mid\gcd\left(  b_{1}%
,b_{2},\ldots,b_{k}\right)  \right)  .
\]

\end{theorem}

\begin{proof}
[Proof of Corollary \ref{cor.ent.gcd.uniprop-mula}.]Let $m\in\mathbb{Z}$.
Then, we have the following chain of equivalences:%
\begin{align*}
&  \ \left(  m\mid b_{1}\text{ and }m\mid b_{2}\text{ and }\cdots\text{ and
}m\mid b_{k}\right) \\
&  \Longleftrightarrow\ \left(  m\mid b_{i}\text{ for all }i\in\left\{
1,2,\ldots,k\right\}  \right) \\
&  \Longleftrightarrow\ \left(  m\mid\gcd\left(  b_{1},b_{2},\ldots
,b_{k}\right)  \right)  \ \ \ \ \ \ \ \ \ \ \left(  \text{by Theorem
\ref{thm.ent.gcd.uniprop-mul} \textbf{(a)}}\right)  .
\end{align*}
This proves Corollary \ref{cor.ent.gcd.uniprop-mula}.
\end{proof}

\begin{theorem}
\label{thm.ent.gcd.split}Let $b_{1},b_{2},\ldots,b_{k}$ be integers, and let
$c_{1},c_{2},\ldots,c_{\ell}$ be integers. Then,%
\begin{align*}
&  \gcd\left(  b_{1},b_{2},\ldots,b_{k},c_{1},c_{2},\ldots,c_{\ell}\right) \\
&  =\gcd\left(  \gcd\left(  b_{1},b_{2},\ldots,b_{k}\right)  ,\gcd\left(
c_{1},c_{2},\ldots,c_{\ell}\right)  \right)  .
\end{align*}

\end{theorem}

Our proof of this theorem will rely on a simple trick, which we state as a lemma:

\begin{lemma}
\label{lem.ent.gcd.yoneda}Let $a$ and $b$ be two integers.

\textbf{(a)} If each $m\in\mathbb{Z}$ satisfies the implication $\left(  m\mid
a\right)  \Longrightarrow\left(  m\mid b\right)  $, then $a\mid b$.

\textbf{(b)} If each $m\in\mathbb{Z}$ satisfies the equivalence $\left(  m\mid
a\right)  \Longleftrightarrow\left(  m\mid b\right)  $, then $\left\vert
a\right\vert =\left\vert b\right\vert $.
\end{lemma}

Lemma \ref{lem.ent.gcd.yoneda} \textbf{(b)} says that the divisors of an
integer $a$ uniquely determine $\left\vert a\right\vert $ (that is, they
uniquely determine $a$ up to sign). Thus, when you want to prove that two
integers have the same absolute values, it suffices to prove that they have
the same divisors. If you know that your two integers are nonnegative, then
you can prove this way that they are equal (since their absolute values are
just themselves). This is exactly how we will prove that the left and right
hand sides in Theorem \ref{thm.ent.gcd.split} are equal.

\begin{proof}
[Proof of Lemma \ref{lem.ent.gcd.yoneda}.]\textbf{(a)} Assume that each
$m\in\mathbb{Z}$ satisfies the implication $\left(  m\mid a\right)
\Longrightarrow\left(  m\mid b\right)  $. Then, applying this to $m=a$, we
obtain the implication $\left(  a\mid a\right)  \Longrightarrow\left(  a\mid
b\right)  $. Since $a\mid a$ holds, we thus obtain $a\mid b$. This proves
Lemma \ref{lem.ent.gcd.yoneda} \textbf{(a)}.

\textbf{(b)} Assume that each $m\in\mathbb{Z}$ satisfies the equivalence
$\left(  m\mid a\right)  \Longleftrightarrow\left(  m\mid b\right)  $. Thus,
each $m\in\mathbb{Z}$ satisfies the implication $\left(  m\mid a\right)
\Longrightarrow\left(  m\mid b\right)  $ (since this implication is part of
the equivalence we just assumed). Thus, Lemma \ref{lem.ent.gcd.yoneda}
\textbf{(a)} yields $a\mid b$.

Recall again that each $m\in\mathbb{Z}$ satisfies the equivalence $\left(
m\mid a\right)  \Longleftrightarrow\left(  m\mid b\right)  $. Thus, each
$m\in\mathbb{Z}$ satisfies the implication $\left(  m\mid b\right)
\Longrightarrow\left(  m\mid a\right)  $ (since this implication is also part
of the equivalence). Hence, Lemma \ref{lem.ent.gcd.yoneda} \textbf{(a)}
(applied to $b$ and $a$ instead of $a$ and $b$) yields $b\mid a$.

Hence, Exercise \ref{exe.ent.div.abba} yields $\left\vert a\right\vert
=\left\vert b\right\vert $. This proves Lemma \ref{lem.ent.gcd.yoneda}.
\end{proof}

Lemma \ref{lem.ent.gcd.yoneda} is a simple case of what is known in category
theory as the \textit{Yoneda lemma}.

\begin{proof}
[Proof of Theorem \ref{thm.ent.gcd.split}.]Let $m\in\mathbb{Z}$. Corollary
\ref{cor.ent.gcd.uniprop-mula} (applied to $k+\ell$ and \newline$\left(
b_{1},b_{2},\ldots,b_{k},c_{1},c_{2},\ldots,c_{\ell}\right)  $ instead of $k$
and $\left(  b_{1},b_{2},\ldots,b_{k}\right)  $) shows that we have the
following equivalence:%
\begin{align*}
&  \ \left(  m\mid b_{1}\text{ and }m\mid b_{2}\text{ and }\cdots\text{ and
}m\mid b_{k}\text{ and }m\mid c_{1}\text{ and }m\mid c_{2}\text{ and }%
\cdots\text{ and }m\mid c_{\ell}\right) \\
&  \Longleftrightarrow\ \left(  m\mid\gcd\left(  b_{1},b_{2},\ldots
,b_{k},c_{1},c_{2},\ldots,c_{\ell}\right)  \right)  .
\end{align*}
Hence, we have the following chain of equivalences:%
\begin{align*}
&  \ \left(  m\mid\gcd\left(  b_{1},b_{2},\ldots,b_{k},c_{1},c_{2}%
,\ldots,c_{\ell}\right)  \right) \\
\Longleftrightarrow\  &  \left(  m\mid b_{1}\text{ and }m\mid b_{2}\text{ and
}\cdots\text{ and }m\mid b_{k}\text{ and }m\mid c_{1}\text{ and }m\mid
c_{2}\text{ and }\cdots\text{ and }m\mid c_{\ell}\right) \\
\Longleftrightarrow\  &  \left(  \underbrace{\left(  m\mid b_{i}\text{ for all
}i\in\left\{  1,2,\ldots,k\right\}  \right)  }_{\substack{\Longleftrightarrow
\ \left(  m\mid\gcd\left(  b_{1},b_{2},\ldots,b_{k}\right)  \right)
\\\text{(by Theorem \ref{thm.ent.gcd.uniprop-mul} \textbf{(a)})}}}\text{ and
}\underbrace{\left(  m\mid c_{i}\text{ for all }i\in\left\{  1,2,\ldots
,\ell\right\}  \right)  }_{\substack{\Longleftrightarrow\ \left(  m\mid
\gcd\left(  c_{1},c_{2},\ldots,c_{\ell}\right)  \right)  \\\text{(by Theorem
\ref{thm.ent.gcd.uniprop-mul} \textbf{(a)},}\\\text{applied to }\ell\text{ and
}\left(  c_{1},c_{2},\ldots,c_{\ell}\right)  \\\text{instead of }k\text{ and
}\left(  b_{1},b_{2},\ldots,b_{k}\right)  \text{)}}}\right) \\
\Longleftrightarrow\  &  \left(  m\mid\gcd\left(  b_{1},b_{2},\ldots
,b_{k}\right)  \text{ and }m\mid\gcd\left(  c_{1},c_{2},\ldots,c_{\ell
}\right)  \right) \\
\Longleftrightarrow\  &  \left(  m\mid\gcd\left(  \gcd\left(  b_{1}%
,b_{2},\ldots,b_{k}\right)  ,\gcd\left(  c_{1},c_{2},\ldots,c_{\ell}\right)
\right)  \right) \\
&  \ \ \ \ \ \ \ \ \ \ \left(
\begin{array}
[c]{c}%
\text{by Theorem \ref{thm.ent.gcd.uniprop} \textbf{(a)},}\\
\text{applied to }a=\gcd\left(  b_{1},b_{2},\ldots,b_{k}\right)  \text{ and
}b=\gcd\left(  c_{1},c_{2},\ldots,c_{\ell}\right)
\end{array}
\right)  .
\end{align*}


Now, forget that we fixed $m$. We thus have shown that each $m\in\mathbb{Z}$
satisfies the equivalence%
\begin{align*}
&  \ \left(  m\mid\gcd\left(  b_{1},b_{2},\ldots,b_{k},c_{1},c_{2}%
,\ldots,c_{\ell}\right)  \right) \\
&  \Longleftrightarrow\ \left(  m\mid\gcd\left(  \gcd\left(  b_{1}%
,b_{2},\ldots,b_{k}\right)  ,\gcd\left(  c_{1},c_{2},\ldots,c_{\ell}\right)
\right)  \right)  .
\end{align*}
Hence, Lemma \ref{lem.ent.gcd.yoneda} \textbf{(b)} (applied to $a=\gcd\left(
b_{1},b_{2},\ldots,b_{k},c_{1},c_{2},\ldots,c_{\ell}\right)  $ and
\newline$b=\gcd\left(  \gcd\left(  b_{1},b_{2},\ldots,b_{k}\right)
,\gcd\left(  c_{1},c_{2},\ldots,c_{\ell}\right)  \right)  $) yields%
\begin{align}
&  \left\vert \gcd\left(  b_{1},b_{2},\ldots,b_{k},c_{1},c_{2},\ldots,c_{\ell
}\right)  \right\vert \nonumber\\
&  =\left\vert \gcd\left(  \gcd\left(  b_{1},b_{2},\ldots,b_{k}\right)
,\gcd\left(  c_{1},c_{2},\ldots,c_{\ell}\right)  \right)  \right\vert .
\label{pf.thm.ent.gcd.split.abs-equal}%
\end{align}


But a gcd of integers is always nonnegative (by Definition
\ref{def.ent.gcd.gcd}); thus, the absolute value of a gcd is always this gcd
itself. Therefore, we can remove the absolute value signs on both sides of
(\ref{pf.thm.ent.gcd.split.abs-equal}). We thus obtain%
\[
\gcd\left(  b_{1},b_{2},\ldots,b_{k},c_{1},c_{2},\ldots,c_{\ell}\right)
=\gcd\left(  \gcd\left(  b_{1},b_{2},\ldots,b_{k}\right)  ,\gcd\left(
c_{1},c_{2},\ldots,c_{\ell}\right)  \right)  .
\]
This proves Theorem \ref{thm.ent.gcd.split}.
\end{proof}

\subsubsection{On converses of Bezout's theorem}

Some words of warning are in order. Theorem \ref{thm.ent.gcd.bezout} says that
if $a$ and $b$ are two integers, then $\gcd\left(  a, b \right)  $ is a
$\mathbb{Z}$-linear combination of $a$ and $b$. Note the indefinite article
``a'' here: There are (usually) many $\mathbb{Z}$-linear combinations of $a$
and $b$, but only one gcd. It is definitely not true that every $\mathbb{Z}%
$-linear combination of $a$ and $b$ must be $\gcd\left(  a, b \right)  $.
However, all these $\mathbb{Z}$-linear combinations are \textbf{multiples} of
the gcd, as the following (simple) proposition says:

\begin{proposition}
\label{prop.ent.gcd.bezout-conv}Let $a$ and $b$ be two integers. Then, any
integers $x$ and $y$ satisfy $\gcd\left(  a, b \right)  \mid xa + yb$.
\end{proposition}

\begin{proof}
[Proof of Proposition \ref{prop.ent.gcd.bezout-conv}.]Let $x$ and $y$ be
integers. Let $g = \gcd\left(  a, b \right)  $. Thus, $g = \gcd\left(  a, b
\right)  \mid a$ (by Proposition \ref{prop.ent.gcd.props1} \textbf{(f)}).
Hence, $g \mid a \mid xa$ (since $xa = ax$). In other words, $xa \equiv0
\mod g$. Similarly, $yb \equiv0 \mod g$. Adding these two congruences
together, we obtain $xa + yb \equiv0 + 0 = 0 \mod g$. In other words, $g \mid
xa + yb$. In other words, $\gcd\left(  a, b \right)  \mid xa + yb$ (since $g =
\gcd\left(  a, b \right)  $). This proves Proposition
\ref{prop.ent.gcd.bezout-conv}.
\end{proof}

A similar proposition holds for $\mathbb{Z}$-linear combinations of any number
of integers $b_{1},b_{2},\ldots,b_{k}$.

\begin{center}
\textbf{2019-02-06 lecture}
\end{center}

\subsection{Coprime integers}

\subsubsection{Definition}

The concept of a gcd leads to one of the most important notions of number theory:

\begin{definition}
\label{def.ent.coprime.coprime}Let $a$ and $b$ be two integers. We say that
$a$ is \textit{coprime} to $b$ if and only if $\gcd\left(  a,b\right)  =1$.
\end{definition}

Instead of \textquotedblleft coprime\textquotedblright, some authors say
\textquotedblleft relatively prime\textquotedblright\ or even
\textquotedblleft prime\textquotedblright\ (but the latter language risks
confusion with a more standard notion of \textquotedblleft
prime\textquotedblright\ that we will see later on.)

\begin{example}
\label{exa.ent.coprime.1}\textbf{(a)} The number $2$ is coprime to $3$, since
$\gcd\left(  2,3\right)  =1$.

\textbf{(b)} The number $6$ is not coprime to $15$, since $\gcd\left(
6,15\right)  =3\neq1$.

\textbf{(c)} Let $a$ be an integer. We claim (as a generalization of part
\textbf{(a)}) that the number $a$ is coprime to $a+1$. To prove this, we note
that%
\begin{align*}
\gcd\left(  a,\underbrace{a}_{=1a}+1\right)   &  =\gcd\left(  a,1a+1\right)
=\gcd\left(  a,1\right) \\
&  \ \ \ \ \ \ \ \ \ \ \left(  \text{by Proposition \ref{prop.ent.gcd.props1}
\textbf{(c)}, applied to }u=1\text{ and }b=1\right) \\
&  \mid1\ \ \ \ \ \ \ \ \ \ \left(  \text{by Proposition
\ref{prop.ent.gcd.props1} \textbf{(e)}, applied to }b=1\right)  ,
\end{align*}
and thus $\gcd\left(  a,a+1\right)  =1$ (by Exercise \ref{exe.ent.div.g|1},
since $\gcd\left(  a,a+1\right)  $ is a nonnegative integer), which means that
$a$ is coprime to $a+1$.

\textbf{(d)} Let $a$ be an integer. When is $a$ coprime to $a+2$? If we try to
compute $\gcd\left(  a,a+2\right)  $, we find%
\begin{align*}
\gcd\left(  a,\underbrace{a}_{=1a}+2\right)   &  =\gcd\left(  a,1a+2\right)
=\gcd\left(  a,2\right) \\
&  \ \ \ \ \ \ \ \ \ \ \left(  \text{by Proposition \ref{prop.ent.gcd.props1}
\textbf{(c)}, applied to }u=1\text{ and }b=2\right)  .
\end{align*}
It remains to find $\gcd\left(  a,2\right)  $. Proposition
\ref{prop.ent.gcd.props1} \textbf{(e)} (applied to $b=2$) yields $\gcd\left(
a,2\right)  \mid a$ and $\gcd\left(  a,2\right)  \mid2$. Since $\gcd\left(
a,2\right)  $ is a nonnegative integer and is a divisor of $2$ (because
$\gcd\left(  a,2\right)  \mid2$), we see that $\gcd\left(  a,2\right)  $ must
be either $1$ or $2$ (since the only nonnegative divisors of $2$ are $1$ and
$2$). If $a$ is even, then $2$ is a common divisor of $a$ and $2$, and thus
must be the greatest common divisor of $a$ and $2$ (because a common divisor
of $a$ and $2$ cannot be greater than $2$); in other words, we have
$\gcd\left(  a,2\right)  =2$ in this case. On the other hand, if $a$ is odd,
then $2$ is not a common divisor of $a$ and $2$ (since $2$ does not divide
$a$), and thus cannot be the greatest common divisor of $a$ and $2$; hence, in
this case, we have $\gcd\left(  a,2\right)  \neq2$ and thus $\gcd\left(
a,2\right)  =1$. Summarizing, we conclude that%
\[
\gcd\left(  a,2\right)  =%
\begin{cases}
2, & \text{if }a\text{ is even};\\
1, & \text{if }a\text{ is odd.}%
\end{cases}
\]
Now, recall that $\gcd\left(  a,a+2\right)  =\gcd\left(  a,2\right)  =%
\begin{cases}
2, & \text{if }a\text{ is even};\\
1, & \text{if }a\text{ is odd.}%
\end{cases}
$ Hence, $a$ is coprime to $a+2$ if and only if $a$ is odd.
\end{example}

Following the book \cite{GKP}, we introduce a slightly quaint notation:

\begin{definition}
\label{def.ent.coprime.perp}Let $a$ and $b$ be two integers. We write
\textquotedblleft$a\perp b$\textquotedblright\ to signify that $a$ is coprime
to $b$.
\end{definition}

Note that the \textquotedblleft$\perp$\textquotedblright\ relation is symmetric:

\begin{proposition}
\label{prop.ent.coprime.perp-symm}Let $a$ and $b$ be two integers. Then,
$a\perp b$ if and only if $b\perp a$.
\end{proposition}

\begin{proof}
[Proof of Proposition \ref{prop.ent.coprime.perp-symm}.]We have the following
chain of equivalences:%
\begin{align*}
\left(  a\perp b\right)  \  &  \Longleftrightarrow\ \left(  a\text{ is coprime
to }b\right)  \ \ \ \ \ \ \ \ \ \ \left(  \text{by the definition of
\textquotedblleft}\perp\text{\textquotedblright}\right) \\
&  \Longleftrightarrow\ \left(  \gcd\left(  a,b\right)  =1\right)
\ \ \ \ \ \ \ \ \ \ \left(  \text{by the definition of \textquotedblleft
coprime\textquotedblright}\right) \\
&  \Longleftrightarrow\ \left(  \gcd\left(  b,a\right)  =1\right)
\ \ \ \ \ \ \ \ \ \ \left(
\begin{array}
[c]{c}%
\text{since Proposition \ref{prop.ent.gcd.props1} \textbf{(b)}}\\
\text{yields }\gcd\left(  a,b\right)  =\gcd\left(  b,a\right)
\end{array}
\right) \\
&  \Longleftrightarrow\ \left(  b\text{ is coprime to }a\right)
\ \ \ \ \ \ \ \ \ \ \left(  \text{by the definition of \textquotedblleft
coprime\textquotedblright}\right) \\
&  \Longleftrightarrow\ \left(  b\perp a\right)  \ \ \ \ \ \ \ \ \ \ \left(
\text{by the definition of \textquotedblleft}\perp\text{\textquotedblright%
}\right)  .
\end{align*}
This proves Proposition \ref{prop.ent.coprime.perp-symm}.
\end{proof}

\begin{definition}
Let $a$ and $b$ be two integers. Proposition \ref{prop.ent.coprime.perp-symm}
shows that $a$ is coprime to $b$ if and only if $b$ is coprime to $a$. Hence,
we shall sometimes use a more symmetric terminology for this situation: We
shall say that \textquotedblleft$a$ and $b$ \textit{are coprime}%
\textquotedblright\ to mean that $a$ is coprime to $b$ (or, equivalently, that
$b$ is coprime to $a$).
\end{definition}

\subsubsection{Properties of coprime integers}

We can now state multiple theorems about coprime numbers. The first one states
that we can \textquotedblleft cancel\textquotedblright\ a factor $b$ from a
divisibility $a\mid bc$ as long as this factor is coprime to $a$:

\begin{theorem}
\label{thm.ent.coprime.cancel}Let $a,b,c\in\mathbb{Z}$ satisfy $a\mid bc$ and
$a\perp b$. Then, $a\mid c$.
\end{theorem}

\begin{proof}
[Proof of Theorem \ref{thm.ent.coprime.cancel}.]We have $a\perp b$; in other
words, $a$ is coprime to $b$ (by Definition \ref{def.ent.coprime.perp}). In
other words, $\gcd\left(  a,b\right)  =1$ (by the definition of
\textquotedblleft coprime\textquotedblright). Now, Theorem
\ref{thm.ent.gcd.cancel} yields $a\mid\underbrace{\gcd\left(  a,b\right)
}_{=1}\cdot c=c$. This proves Theorem \ref{thm.ent.coprime.cancel}.
\end{proof}

I like to think of Theorem \ref{thm.ent.coprime.combine} as a way of removing
\textquotedblleft unsolicited guests\textquotedblright\ from divisibilities.
Indeed, it says that we can remove the factor $b$ from $a\mid bc$ if we know
that $b$ is \textquotedblleft unrelated\textquotedblright\ (i.e., coprime) to
$a$.

The next theorem lets us \textquotedblleft combine\textquotedblright\ two
divisibilities $a\mid c$ and $b\mid c$ to $ab\mid c$ as long as $a$ and $b$
are coprime:

\begin{theorem}
\label{thm.ent.coprime.combine}Let $a,b,c\in\mathbb{Z}$ satisfy $a\mid c$ and
$b\mid c$ and $a\perp b$. Then, $ab\mid c$.
\end{theorem}

\begin{proof}
[Proof of Theorem \ref{thm.ent.coprime.combine}.]We have $a\perp b$; in other
words, $a$ is coprime to $b$ (by Definition \ref{def.ent.coprime.perp}). In
other words, $\gcd\left(  a,b\right)  =1$ (by the definition of
\textquotedblleft coprime\textquotedblright). Now, Theorem
\ref{thm.ent.gcd.combine} yields $ab\mid\underbrace{\gcd\left(  a,b\right)
}_{=1}\cdot c=c$. This proves Theorem \ref{thm.ent.coprime.combine}.
\end{proof}

Theorem \ref{thm.ent.coprime.combine} can be restated as follows: If $a$ and
$b$ are two coprime divisors of an integer $c$, then $ab$ is also a divisor of
$c$. This is often helpful when proving divisibilities where the left hand
side (i.e., the number in front of the \textquotedblleft$\mid$%
\textquotedblright\ sign) can be split into a product of two mutually coprime
factors. Similar reasoning works with several coprime factors (see Exercise
\ref{exe.ent.coprime.combinek} below).

The next theorem (still part of the fallout of Bezout's theorem) is important,
but we will not truly appreciate it until later:

\begin{theorem}
\label{thm.ent.coprime.modinv}Let $a,n\in\mathbb{Z}$.

\textbf{(a)} There exists a $b\in\mathbb{Z}$ such that $ab\equiv\gcd\left(
a,n\right)  \operatorname{mod}n$.

\textbf{(b)} If $a\perp n$, then there exists an $a^{\prime}\in\mathbb{Z}$
such that $aa^{\prime}\equiv1\operatorname{mod}n$.

\textbf{(c)} If there exists an $a^{\prime}\in\mathbb{Z}$ such that
$aa^{\prime}\equiv1\operatorname{mod}n$, then $a\perp n$.
\end{theorem}

If $a,n\in\mathbb{Z}$, then an integer $a^{\prime}\in\mathbb{Z}$ satisfying
$aa^{\prime}\equiv1\operatorname{mod}n$ is called a \textit{modular inverse}
of $a$ modulo $n$. The word \textquotedblleft modular
inverse\textquotedblright\ is chosen in analogy to the usual concept of an
\textquotedblleft inverse\textquotedblright\ (which stands for an integer
$a^{\prime}\in\mathbb{Z}$ satisfying $aa^{\prime}=1$; this exists if and only
if $a$ equals $1$ or $-1$). Theorem \ref{thm.ent.coprime.modinv} \textbf{(b)}
shows that such a modular inverse always exists when $a\perp n$; Theorem
\ref{thm.ent.coprime.modinv} \textbf{(c)} is the converse of this statement
(i.e., it says that if a modular inverse of $a$ modulo $n$ exists, then
$a\perp n$).

\begin{proof}
[Proof of Theorem \ref{thm.ent.coprime.modinv}.]\textbf{(a)} Theorem
\ref{thm.ent.gcd.bezout} (applied to $b=n$) yields that there exist integers
$x\in\mathbb{Z}$ and $y\in\mathbb{Z}$ such that $\gcd\left(  a,n\right)
=xa+yn$. Consider these $x$ and $y$. We have $ax=xa\equiv
xa+yn\operatorname{mod}n$ (since $xa-\left(  xa+yn\right)  =-yn=n\left(
-y\right)  $ is clearly divisible by $n$). Thus, $ax\equiv xa+yn=\gcd\left(
a,n\right)  \operatorname{mod}n$. Thus, there exists a $a^{\prime}%
\in\mathbb{Z}$ such that $aa^{\prime}\equiv\left(  a,n\right)
\operatorname{mod}n$ (namely, $a^{\prime}=x$). This proves Theorem
\ref{thm.ent.coprime.modinv} \textbf{(a)}.

\textbf{(b)} Assume that $a\perp n$. In other words, $a$ is coprime to $n$ (by
Definition \ref{def.ent.coprime.perp}). In other words, $\gcd\left(
a,n\right)  =1$ (by the definition of \textquotedblleft
coprime\textquotedblright). Now, Theorem \ref{thm.ent.coprime.modinv}
\textbf{(a)} yields that there exists a $a^{\prime}\in\mathbb{Z}$ such that
$aa^{\prime}\equiv\gcd\left(  a,n\right)  \operatorname{mod}n$. In view of
$\gcd\left(  a,n\right)  =1$, this rewrites as follows: There exists an
$a^{\prime}\in\mathbb{Z}$ such that $aa^{\prime}\equiv1\operatorname{mod}n$.
This proves Theorem \ref{thm.ent.coprime.modinv} \textbf{(b)}.

\textbf{(c)} Assume that there exists an $a^{\prime}\in\mathbb{Z}$ such that
$aa^{\prime}\equiv1\operatorname{mod}n$. Consider this $a^{\prime}$.

Proposition \ref{prop.ent.gcd.props1} \textbf{(f)} yields $\gcd\left(
a,n\right)  \mid a$ and $\gcd\left(  a,n\right)  \mid n$. Set $g=\gcd\left(
a,n\right)  $. Then, $g$ is a nonnegative integer.

Now, $g=\gcd\left(  a,n\right)  \mid a\mid aa^{\prime}$, so that $aa^{\prime
}\equiv0\operatorname{mod}g$. But also $g=\gcd\left(  a,n\right)  \mid n$.
Hence, from $aa^{\prime}\equiv1\operatorname{mod}n$, we obtain $aa^{\prime
}\equiv1\operatorname{mod}g$ (by Proposition \ref{prop.ent.mod.basics}
\textbf{(e)}, applied to $g$, $aa^{\prime}$ and $1$ instead of $m$, $a$ and
$b$). Hence, $1\equiv aa^{\prime}\equiv0\operatorname{mod}g$. Equivalently,
$g\mid1-0=1$. Hence, $g=1$ (by Exercise \ref{exe.ent.div.g|1}, since $g$ is a
nonnegative integer). Thus, $\gcd\left(  a,n\right)  =g=1$. In other words,
$a$ is coprime to $n$. In other words, $a\perp n$. This proves Theorem
\ref{thm.ent.coprime.modinv} \textbf{(c)}.
\end{proof}

\begin{theorem}
\label{thm.ent.coprime.ab-to-c}Let $a,b,c\in\mathbb{Z}$ such that $a\perp c$
and $b\perp c$. Then, $ab\perp c$.
\end{theorem}

\begin{proof}
[Proof of Theorem \ref{thm.ent.coprime.ab-to-c}.]Theorem
\ref{thm.ent.coprime.modinv} \textbf{(b)} (applied to $n=c$) yields that there
exists an $a^{\prime}\in\mathbb{Z}$ such that $aa^{\prime}\equiv
1\operatorname{mod}c$. Consider this $a^{\prime}$.

Theorem \ref{thm.ent.coprime.modinv} \textbf{(b)} (applied to $b$ and $c$
instead of $a$ and $n$) yields that there exists a $b^{\prime}\in\mathbb{Z}$
such that $bb^{\prime}\equiv1\operatorname{mod}c$. Consider this $b^{\prime}$.

Multiplying the two congruences $aa^{\prime}\equiv1\operatorname{mod}c$ and
$bb^{\prime}\equiv1\operatorname{mod}c$, we obtain $\left(  aa^{\prime
}\right)  \left(  bb^{\prime}\right)  \equiv1\cdot1=1\operatorname{mod}c$.

Now, define the integers $r=ab$ and $s=a^{\prime}b^{\prime}$. Then,
$\underbrace{r}_{=ab}\underbrace{s}_{=a^{\prime}b^{\prime}}=\left(  ab\right)
\left(  a^{\prime}b^{\prime}\right)  =\left(  aa^{\prime}\right)  \left(
bb^{\prime}\right)  \equiv1\operatorname{mod}c$. Hence, there exists an
$r^{\prime}\in\mathbb{Z}$ such that $rr^{\prime}\equiv1\operatorname{mod}c$
(namely, $r^{\prime}=s$). Thus, Theorem \ref{thm.ent.coprime.modinv}
\textbf{(c)} (applied to $r$ and $c$ instead of $a$ and $n$) yields that
$r\perp c$. In view of $r=ab$, this rewrites as $ab\perp c$. This proves
Theorem \ref{thm.ent.coprime.ab-to-c}.
\end{proof}

Let us generalize Theorem \ref{thm.ent.coprime.ab-to-c} to products of several
numbers instead of just the two numbers $a$ and $b$:

\begin{exercise}
\label{exe.ent.coprime.ab-to-ck}Let $c\in\mathbb{Z}$. Let $a_{1},a_{2}%
,\ldots,a_{k}$ be integers such that each $i\in\left\{  1,2,\ldots,k\right\}
$ satisfies $a_{i}\perp c$. Prove that $a_{1}a_{2}\cdots a_{k}\perp c$.
\end{exercise}

We can similarly generalize Theorem \ref{thm.ent.coprime.combine} to show that
the product of several mutually coprime divisors of an integer $c$ must again
be a divisor of $c$:

\begin{exercise}
\label{exe.ent.coprime.combinek}Let $c\in\mathbb{Z}$. Let $b_{1},b_{2}%
,\ldots,b_{k}$ be integers that are mutually coprime (i.e., they satisfy
$b_{i}\perp b_{j}$ for all $i\neq j$). Assume that $b_{i}\mid c$ for each
$i\in\left\{  1,2,\ldots,k\right\}  $. Prove that $b_{1}b_{2}\cdots b_{k}\mid
c$.
\end{exercise}

\begin{exercise}
\label{exe.ent.coprime.powers}Let $a,b\in\mathbb{Z}$ be such that $a\perp b$.
Let $n,m\in\mathbb{N}$. Prove that $a^{n}\perp b^{m}$.
\end{exercise}

The above results have one important application to congruences. Recall that
if $a,b,c$ are integers satisfying $ab=ac$, then we can \textquotedblleft
cancel\textquotedblright\ $a$ from the equality $ab=ac$ to obtain $b=c$ as
long as $a$ is nonzero. Something similar is true for congruences modulo $n$,
but the condition \textquotedblleft$a$ is nonzero\textquotedblright\ has to be
replaced by \textquotedblleft$a$ is coprime to $n$\textquotedblright:

\begin{lemma}
\label{lem.ent.coprime.cancel}Let $a,b,c,n$ be integers such that $a\perp n$
and $ab\equiv ac\operatorname{mod}n$. Then, $b\equiv c\operatorname{mod}n$.
\end{lemma}

Lemma \ref{lem.ent.coprime.cancel} says that we can cancel an integer $a$ from
a congruence $ab\equiv ac\operatorname{mod}n$ as long as $a$ is coprime to
$n$. Let us give two proofs of this lemma, to illustrate the uses of some of
the previous results:

\begin{proof}
[First proof of Lemma \ref{lem.ent.coprime.cancel}.]We have $ab\equiv
ac\operatorname{mod}n$. In other words, $n\mid ab-ac=a\left(  b-c\right)  $.
But Proposition \ref{prop.ent.coprime.perp-symm} (applied to $n$ instead of
$b$) shows that $a\perp n$ if and only if $n\perp a$. Thus, we have $n\perp a$
(since $a\perp n$).

Thus, we know that $n\mid a\left(  b-c\right)  $ and $n\perp a$. Hence,
Theorem \ref{thm.ent.coprime.cancel} (applied to $n$, $a$ and $b-c$ instead of
$a$, $b$ and $c$) yields $n\mid b-c$. In other words, $b\equiv
c\operatorname{mod}n$. This proves Lemma \ref{lem.ent.coprime.cancel}.
\end{proof}

\begin{proof}
[Second proof of Lemma \ref{lem.ent.coprime.cancel}.]Theorem
\ref{thm.ent.coprime.modinv} \textbf{(b)} yields that there exists an
$a^{\prime}\in\mathbb{Z}$ such that $aa^{\prime}\equiv1\operatorname{mod}n$
(since $a\perp n$). Consider this $a^{\prime}$. Now, let us multiply the
(trivial) congruence $a^{\prime}\equiv a^{\prime}\operatorname{mod}n$ with the
congruence $ab\equiv ac\operatorname{mod}n$. We thus find%
\[
a^{\prime}ab\equiv\underbrace{a^{\prime}a}_{\equiv1\operatorname{mod}n}%
c\equiv1c=c\operatorname{mod}n.
\]
Hence,
\[
c\equiv\underbrace{a^{\prime}a}_{\equiv1\operatorname{mod}n}b\equiv
1b=b\operatorname{mod}n.
\]
In other words, $b\equiv c\operatorname{mod}n$. This proves Lemma
\ref{lem.ent.coprime.cancel}.
\end{proof}

For future use, let us restate Exercise \ref{exe.ent.coprime.ab-to-ck} in a
form that uses \textquotedblleft unordered\textquotedblright\ finite products
$\prod_{i\in I}b_{i}$ instead of $a_{1}a_{2}\cdots a_{k}$:

\begin{exercise}
\label{exe.ent.coprime.ab-to-cI}Let $c\in\mathbb{Z}$. Let $I$ be a finite set.
For each $i\in I$, let $b_{i}$ be an integer such that $b_{i}\perp c$. Prove
that $\prod_{i\in I}b_{i}\perp c$.
\end{exercise}

\begin{exercise}
\label{exe.ent.coprime.b==c}Let $a,b,c$ be three integers such that $a\equiv
b\operatorname{mod}c$. Prove that if $a\perp c$, then $b\perp c$.
\end{exercise}

\subsubsection{An application to sums of powers}

Let us show an application of Theorem \ref{thm.ent.coprime.combine}. First, we
shall prove a simple lemma:

\begin{lemma}
\label{lem.ent.xd-yd}Let $d\in\mathbb{N}$. Let $x$ and $y$ be integers.

\textbf{(a)} We have $x-y\mid x^{d}-y^{d}$.

\textbf{(b)} We have $x+y\mid x^{d}+y^{d}$ if $d$ is odd.
\end{lemma}

\begin{proof}
[Proof of Lemma \ref{lem.ent.xd-yd}.]\textbf{(a)} Here are two ways of proving this:

\textit{First proof of Lemma \ref{lem.ent.xd-yd} \textbf{(a)}:} We have
$x\equiv y\operatorname{mod}x-y$ (since $x-y\mid x-y$). Thus, Exercise
\ref{exe.ent.mod.basics.k-power} (applied to $n=x-y$, $a=x$, $b=y$ and $k=d$)
yields $x^{d}\equiv y^{d}\operatorname{mod}x-y$. In other words, $x-y\mid
x^{d}-y^{d}$. This proves Lemma \ref{lem.ent.xd-yd} \textbf{(a)}.

\textit{Second proof of Lemma \ref{lem.ent.xd-yd} \textbf{(a)}:} Recall that%
\begin{equation}
\left(  a-b\right)  \left(  a^{k-1}+a^{k-2}b+a^{k-3}b^{2}+\cdots
+ab^{k-2}+b^{k-1}\right)  =a^{k}-b^{k} \label{pf.lem.ent.xd-yd.1}%
\end{equation}
for every $a,b\in\mathbb{Q}$ and $k\in\mathbb{N}$. (This is a well-known
identity, and it appears (with $k$ renamed as $n$) as the first half of
Exercise 1 on
\href{http://www-users.math.umn.edu/~dgrinber/19s/hw0s.pdf}{homework set
\#0}.) Applying this identity to $a=x$, $b=y$ and $k=d$, we obtain%
\[
\left(  x-y\right)  \left(  x^{d-1}+x^{d-2}y+x^{d-3}y^{2}+\cdots
+xy^{d-2}+y^{d-1}\right)  =x^{d}-y^{d}.
\]
Thus, $x-y\mid x^{d}-y^{d}$ (since $x^{d-1}+x^{d-2}y+x^{d-3}y^{2}%
+\cdots+xy^{d-2}+y^{d-1}$ is an integer). This proves Lemma
\ref{lem.ent.xd-yd} \textbf{(a)}.

\textbf{(b)} Assume that $d$ is odd. Thus, $\left(  -1\right)  ^{d}=-1$. Now,
Lemma \ref{lem.ent.xd-yd} \textbf{(a)} (applied to $-y$ instead of $y$) yields
$x-\left(  -y\right)  \mid x^{d}-\left(  -y\right)  ^{d}$. Since $x-\left(
-y\right)  =x+y$ and $x^{d}-\underbrace{\left(  -y\right)  ^{d}}_{=\left(
-1\right)  ^{d}y^{d}}=x^{d}-\underbrace{\left(  -1\right)  ^{d}}_{=-1}%
y^{d}=x^{d}-\left(  -1\right)  y^{d}=x^{d}+y^{d}$, this rewrites as $x+y\mid
x^{d}+y^{d}$. This proves Lemma \ref{lem.ent.xd-yd} \textbf{(b)}.
\end{proof}

Next, let us recall a basic fact from combinatorics (the \textquotedblleft
Little Gauss\textquotedblright\ sum):

\begin{proposition}
\label{prop.ent.1+2+...+n}Let $n\in\mathbb{N}$. Then,
\[
1+2+\cdots+n=\dfrac{n\left(  n+1\right)  }{2}.
\]

\end{proposition}

\begin{proof}
[Proof of Proposition \ref{prop.ent.1+2+...+n}.]Here is one of several equally
valid arguments:%
\begin{align*}
2\cdot\left(  1+2+\cdots+n\right)   &  =\left(  1+2+\cdots+n\right)
+\underbrace{\left(  1+2+\cdots+n\right)  }_{\substack{=n+\left(  n-1\right)
+\cdots+1\\\text{(here, we have reversed}\\\text{the order of the addends)}%
}}\\
&  =\underbrace{\left(  1+2+\cdots+n\right)  }_{=\sum_{k=1}^{n}k}%
+\underbrace{\left(  n+\left(  n-1\right)  +\cdots+1\right)  }_{=\sum
_{k=1}^{n}\left(  n+1-k\right)  }\\
&  =\sum_{k=1}^{n}k+\sum_{k=1}^{n}\left(  n+1-k\right)  =\sum_{k=1}%
^{n}\underbrace{\left(  k+\left(  n+1-k\right)  \right)  }_{=n+1}\\
&  =\sum_{k=1}^{n}\left(  n+1\right)  =n\left(  n+1\right)  .
\end{align*}
Thus, $1+2+\cdots+n=\dfrac{n\left(  n+1\right)  }{2}$, so that Proposition
\ref{prop.ent.1+2+...+n} is proven.
\end{proof}

Proposition \ref{prop.ent.1+2+...+n} tells us what the sum $1+2+\cdots+n$ of
the first $n$ positive integers is. One might also ask what the sum
$1^{2}+2^{2}+\cdots+n^{2}$ of their squares is, and similarly for higher
powers. While this is tangential to our course, let us collect some formulas
for this:

\begin{proposition}
\label{prop.ent.1d+2d+...+nd-for-5}Let $n\in\mathbb{N}$. Then:

\textbf{(a)} We have $1+2+\cdots+n=\dfrac{1}{2}n\left(  n+1\right)  $.

\textbf{(b)} We have $1^{2}+2^{2}+\cdots+n^{2}=\dfrac{1}{6}n\left(
n+1\right)  \left(  2n+1\right)  $.

\textbf{(c)} We have $1^{3}+2^{3}+\cdots+n^{3}=\dfrac{1}{4}n^{2}\left(
n+1\right)  ^{2}$.

\textbf{(d)} We have $1^{4}+2^{4}+\cdots+n^{4}=\dfrac{1}{30}n\left(
2n+1\right)  \left(  n+1\right)  \left(  3n+3n^{2}-1\right)  $.

\textbf{(e)} We have $1^{5}+2^{5}+\cdots+n^{5}=\dfrac{1}{12}n^{2}\left(
n+1\right)  ^{2}\left(  2n+2n^{2}-1\right)  $.
\end{proposition}

Each part of Proposition \ref{prop.ent.1d+2d+...+nd-for-5} can be
straightforwardly proven by induction on $n$; we don't need ingenious
arguments like the one we gave above for Proposition \ref{prop.ent.1+2+...+n}
(and in fact, such arguments cannot always be found).

\begin{fineprint}
You probably see a pattern in Proposition \ref{prop.ent.1d+2d+...+nd-for-5}:
It appears that for each positive integer $d$, there exists some polynomial
$p_{d}\left(  x\right)  $ of degree $d+1$ with rational coefficients such that
each $n\in\mathbb{N}$ satisfies $1^{d}+2^{d}+\cdots+n^{d}=p_{d}\left(
n\right)  $. This is indeed the case. Indeed, this is proven (e.g.) in
\cite[Proposition 23.2]{Galvin} and in \cite[Theorem 3.7]{lucas}. The
polynomial $p_{d}\left(  x\right)  $ is uniquely determined for each $d$, and
can be explicitly computed via the formula%
\[
p_{d}\left(  x\right)  =\sum_{k=1}^{d}k!%
%TCIMACRO{\QDATOPD{\{}{\}}{d}{k}}%
%BeginExpansion
\genfrac{\{}{\}}{0pt}{0}{d}{k}%
%EndExpansion
\dbinom{x+1}{k+1},
\]
where $\dbinom{x+1}{k+1}=\dfrac{\left(  x+1\right)  x\left(  x-1\right)
\cdots\left(  x-k+1\right)  }{\left(  k+1\right)  !}$ and where $%
%TCIMACRO{\QDATOPD{\{}{\}}{d}{k}}%
%BeginExpansion
\genfrac{\{}{\}}{0pt}{0}{d}{k}%
%EndExpansion
$ is a \textit{Stirling number of the 2nd kind}. Without going into the
details of what Stirling numbers of the 2nd kind are, let me say that $k!%
%TCIMACRO{\QDATOPD{\{}{\}}{d}{k}}%
%BeginExpansion
\genfrac{\{}{\}}{0pt}{0}{d}{k}%
%EndExpansion
$ is the number of surjective maps from $\left\{  1,2,\ldots,d\right\}  $ to
$\left\{  1,2,\ldots,k\right\}  $. For example,%
\begin{align*}
p_{2}\left(  x\right)   &  =\sum_{k=1}^{2}k!%
%TCIMACRO{\QDATOPD{\{}{\}}{2}{k}}%
%BeginExpansion
\genfrac{\{}{\}}{0pt}{0}{2}{k}%
%EndExpansion
\dbinom{x+1}{k+1}=\underbrace{1!%
%TCIMACRO{\QDATOPD{\{}{\}}{2}{1}}%
%BeginExpansion
\genfrac{\{}{\}}{0pt}{0}{2}{1}%
%EndExpansion
}_{=1}\dbinom{x+1}{2}+\underbrace{2!%
%TCIMACRO{\QDATOPD{\{}{\}}{2}{2}}%
%BeginExpansion
\genfrac{\{}{\}}{0pt}{0}{2}{2}%
%EndExpansion
}_{=2}\dbinom{x+1}{3}\\
&  =\dbinom{x+1}{2}+2\dbinom{x+1}{3}=\dfrac{\left(  x+1\right)  x}{2}%
+2\cdot\dfrac{\left(  x+1\right)  x\left(  x-1\right)  }{6}\\
&  =\dfrac{1}{6}x\left(  x+1\right)  \left(  2x+1\right)  ,
\end{align*}
and thus%
\[
1^{2}+2^{2}+\cdots+n^{2}=p_{2}\left(  n\right)  =\dfrac{1}{6}n\left(
n+1\right)  \left(  2n+1\right)  \ \ \ \ \ \ \ \ \ \ \text{for each }%
n\in\mathbb{N}.
\]
This recovers the claim of Proposition \ref{prop.ent.1d+2d+...+nd-for-5}
\textbf{(b)}. The combinatorial proof presented in \cite[Proposition
23.2]{Galvin} is highly recommended reading for anyone interested in this kind
of formulas.

Let us note that the polynomials $p_{d}\left(  x\right)  $ do \textbf{not}
have integer coefficients, but nevertheless all their values $p_{d}\left(
n\right)  $ for $n\in\mathbb{N}$ are integers.
\end{fineprint}

Let us now show the power of Theorem \ref{thm.ent.coprime.combine} on the
following exercise:

\begin{exercise}
\label{exe.ent.coprime.1+2+...+n}Let $n\in\mathbb{N}$. Let $d$ be an odd
positive integer. Prove that%
\[
1+2+\cdots+n\mid1^{d}+2^{d}+\cdots+n^{d}.
\]


[\textbf{Hint:} Use Proposition \ref{prop.ent.1+2+...+n} to reduce the claim
to proving that $n\left(  n+1\right)  \mid2\left(  1^{d}+2^{d}+\cdots
+n^{d}\right)  $. But Theorem \ref{thm.ent.coprime.combine} shows that in
order to prove this, it suffices to prove $n\mid2\left(  1^{d}+2^{d}%
+\cdots+n^{d}\right)  $ and $n+1\mid2\left(  1^{d}+2^{d}+\cdots+n^{d}\right)
$, because $n\perp n+1$.]
\end{exercise}

The following is a random collection of further exercises on gcds.

\begin{exercise}
\label{exe.ent.coprime.bezout-conv} Let $a,b,x,y$ be integers such that
$xa+yb=1$. Prove that $a\perp b$.
\end{exercise}

\begin{exercise}
\label{exe.ent.coprime.gcdgcd1}Let $u,v,x,y\in\mathbb{Z}$. Prove that
$\gcd\left(  u,v\right)  \cdot\gcd\left(  x,y\right)  =\gcd\left(
ux,uy,vx,vy\right)  $.
\end{exercise}

\begin{exercise}
\label{exe.ent.coprime.gcdgcd2}Let $a,b,c\in\mathbb{Z}$.

\textbf{(a)} Prove that $\gcd\left(  a,b\right)  \cdot\gcd\left(  a,c\right)
=\gcd\left(  ag,bc\right)  $, where $g=\gcd\left(  a,b,c\right)  $.

\textbf{(b)} Prove that $\gcd\left(  a,b\right)  \cdot\gcd\left(  a,c\right)
=\gcd\left(  a,bc\right)  $ if $b\perp c$.
\end{exercise}

\begin{exercise}
\label{exe.ent.coprime.a/g}Let $a$ and $b$ be two integers that are not both
zero. Let $g=\gcd\left(  a,b\right)  $. Prove that $\dfrac{a}{g}$ and
$\dfrac{b}{g}$ are integers satisfying $\dfrac{a}{g}\perp\dfrac{b}{g}$.
\end{exercise}

\begin{exercise}
\label{exe.ent.gcd.akbk}Let $a$ and $b$ be two integers. Let $k\in\mathbb{N}$.
Prove that $\gcd\left(  a^{k},b^{k}\right)  =\left(  \gcd\left(  a,b\right)
\right)  ^{k}$.
\end{exercise}

The next exercise is simply claiming the well-known fact that any rational
number can be written as a reduced fraction:

\begin{exercise}
\label{exe.ent.coprime.frac-red}Let $r\in\mathbb{Q}$. Prove that there exist
two \textbf{coprime} integers $a$ and $b$ satisfying $r=a/b$.
\end{exercise}

As an application of some of the preceding results, we can prove that certain
numbers are irrational:

\begin{exercise}
\label{exe.ent.coprime.sqrtu+sqrtv}Prove the following:

\textbf{(a)} If a positive integer $u$ is not a perfect square\footnotemark,
then $\sqrt{u}$ is irrational.

\textbf{(b)} If $u$ and $v$ are two positive integers, then $\sqrt{u}+\sqrt
{v}$ is irrational unless both $u$ and $v$ are perfect squares.
\end{exercise}

\footnotetext{A \textit{perfect square} means the square of an integer.}%
Exercise \ref{exe.ent.coprime.sqrtu+sqrtv} invites a rather natural
generalization: If $u_{1},u_{2},\ldots,u_{k}$ are several positive integers
that are not all perfect squares, then must $\sqrt{u_{1}}+\sqrt{u_{2}}%
+\cdots+\sqrt{u_{k}}$ always be irrational? It turns out that the answer is
\textquotedblleft yes\textquotedblright, but this is not as easy to prove
anymore as the two cases $k=1$ and $k=2$ that we handled in Exercise
\ref{exe.ent.coprime.sqrtu+sqrtv}. Proofs of the general version can be found
in \cite{Boreic08} (actually, a stronger statement is proven there, although
it takes some work to derive ours from it).

\begin{center}
\textbf{2019-02-08 lecture}
\end{center}

\subsection{Lowest common multiples}

\begin{teachingnote}
I don't think this section is actually used anywhere later in this course.
\end{teachingnote}

Common multiples are, in a sense, a \textquotedblleft mirror
version\textquotedblright\ of common divisors. Here is their definition:

\begin{definition}
\label{def.ent.Mul}Let $b_{1},b_{2},\ldots,b_{k}$ be integers. Then, the
\textit{common multiples} of $b_{1},b_{2},\ldots,b_{k}$ are defined to be the
integers $a$ that satisfy%
\[
\left(  b_{i}\mid a\text{ for all }i\in\left\{  1,2,\ldots,k\right\}  \right)
.
\]
(In other words, a \textit{common multiple} of $b_{1},b_{2},\ldots,b_{k}$ is
an integer that is a multiple of each of $b_{1},b_{2},\ldots,b_{k}$.) We let
$\operatorname*{Mul}\left(  b_{1},b_{2},\ldots,b_{k}\right)  $ denote the set
of these common multiples.
\end{definition}

\begin{example}
The common multiples of $4,6$ are $\ldots,-36,-24,-12,0,12,24,36,\ldots$, that
is, all multiples of $12$.

The common multiples of $1,2,3$ are all multiples of $6$.
\end{example}

Note that the common multiples of a single integer $b$ are simply the
multiples of $b$. (Also, the common multiples of an empty list of integers are
all the integers; in other words, $\operatorname*{Mul}\left(  {}\right)
=\mathbb{Z}$.)

Note that the definition of common multiples of $b_{1},b_{2},\ldots,b_{k}$
(Definition \ref{def.ent.Mul}) is the same as the definition of common
divisors of $b_{1},b_{2},\ldots,b_{k}$ except that the divisibility has been
flipped (i.e., it says \textquotedblleft$b_{i}\mid a$\textquotedblright%
\ instead of \textquotedblleft$a\mid b_{i}$\textquotedblright). This is why
common multiples are a \textquotedblleft mirror version\textquotedblright\ of
common divisors. This analogy is not perfect -- in particular, (for example)
two nonzero integers have infinitely many common multiples but only finitely
many common divisors. We shall now introduce lowest common multiples, which
correspond to greatest common divisors in this analogy. However, we have to
prove a simple proposition first:

\begin{proposition}
\label{prop.ent.Mul.exi}Let $b_{1},b_{2},\ldots,b_{k}$ be finitely many
nonzero integers. Then, the set $\operatorname*{Mul}\left(  b_{1},b_{2}%
,\ldots,b_{k}\right)  $ has a smallest positive element.
\end{proposition}

Proposition \ref{prop.ent.Mul.exi} is similar to Proposition
\ref{prop.ent.Div.fin} (and will play a similar role), but note the
differences: It requires \textbf{all} of $b_{1},b_{2},\ldots,b_{k}$ to be
nonzero (unlike Proposition \ref{prop.ent.Div.fin}, which needed only one of
them to be nonzero), and it does not claim finiteness of any set.

\begin{proof}
[Proof of Proposition \ref{prop.ent.Mul.exi}.]We claim that%
\begin{equation}
\left\vert b_{1}b_{2}\cdots b_{k}\right\vert \in\operatorname*{Mul}\left(
b_{1},b_{2},\ldots,b_{k}\right)  . \label{pf.prop.ent.Mul.exi.1}%
\end{equation}


\textit{Proof of (\ref{pf.prop.ent.Mul.exi.1}):} Let $i\in\left\{
1,2,\ldots,k\right\}  $. Then, the product $b_{1}b_{2}\cdots b_{k}$ can be
written as%
\[
b_{1}b_{2}\cdots b_{k}=b_{i}\cdot\left(  b_{1}b_{2}\cdots b_{i-1}%
b_{i+1}b_{i+2}\cdots b_{k}\right)  ,
\]
and thus is divisible by $b_{i}$. In other words, $b_{i}\mid b_{1}b_{2}\cdots
b_{k}$. But Exercise \ref{exe.ent.div.aabs} \textbf{(a)} (applied to
$a=b_{1}b_{2}\cdots b_{k}$) yields $b_{1}b_{2}\cdots b_{k}\mid\left\vert
b_{1}b_{2}\cdots b_{k}\right\vert $. Altogether, $b_{i}\mid b_{1}b_{2}\cdots
b_{k}\mid\left\vert b_{1}b_{2}\cdots b_{k}\right\vert $.

Now forget that we fixed $i$. We thus have proven that $b_{i}\mid\left\vert
b_{1}b_{2}\cdots b_{k}\right\vert $ for all $i\in\left\{  1,2,\ldots
,k\right\}  $. In other words, $\left\vert b_{1}b_{2}\cdots b_{k}\right\vert $
is a common multiple of $b_{1},b_{2},\ldots,b_{k}$ (by the definition of a
\textquotedblleft common multiple\textquotedblright). In other words,
$\left\vert b_{1}b_{2}\cdots b_{k}\right\vert \in\operatorname*{Mul}\left(
b_{1},b_{2},\ldots,b_{k}\right)  $. This proves (\ref{pf.prop.ent.Mul.exi.1}).]

We know that $b_{1},b_{2},\ldots,b_{k}$ are nonzero integers. Hence, their
product $b_{1}b_{2}\cdots b_{k}$ is a nonzero integer as well. Thus, its
absolute value $\left\vert b_{1}b_{2}\cdots b_{k}\right\vert $ is a positive
integer. Hence, $\left\vert b_{1}b_{2}\cdots b_{k}\right\vert $ is a positive
element of $\operatorname*{Mul}\left(  b_{1},b_{2},\ldots,b_{k}\right)  $
(since (\ref{pf.prop.ent.Mul.exi.1}) shows that it is an element of
$\operatorname*{Mul}\left(  b_{1},b_{2},\ldots,b_{k}\right)  $). Thus, the set
$\operatorname*{Mul}\left(  b_{1},b_{2},\ldots,b_{k}\right)  $ has a positive
element. Therefore, this set $\operatorname*{Mul}\left(  b_{1},b_{2}%
,\ldots,b_{k}\right)  $ has a \textbf{smallest} positive element as
well\footnote{Here we are using the following basic fact: If a set of integers
$S$ has a positive element, then it has a \textbf{smallest} positive element
as well. (To prove this fact, you can fix a positive element $s\in S$, which
exists by assumption; then, the set $\left\{  1,2,\ldots,s\right\}  \cap S$ is
finite and nonempty (since it contains $s$), and thus clearly has a smallest
element; now you can easily check that its smallest element must also be the
smallest positive element of $S$.)}. This proves Proposition
\ref{prop.ent.Mul.exi}.
\end{proof}

\begin{definition}
\label{def.ent.lcm.lcm}Let $b_{1},b_{2},\ldots,b_{k}$ be finitely many
integers. The \textit{lowest common multiple} of $b_{1},b_{2},\ldots,b_{k}$ is
defined as follows:

\begin{itemize}
\item If $b_{1},b_{2},\ldots,b_{k}$ are all nonzero, then it is defined as the
smallest positive element of the set $\operatorname*{Mul}\left(  b_{1}%
,b_{2},\ldots,b_{k}\right)  $. This smallest positive element is well-defined
(by Proposition \ref{prop.ent.Mul.exi}), and is a positive integer (obviously).

\item If $b_{1},b_{2},\ldots,b_{k}$ are not all nonzero (i.e., at least one of
$b_{1},b_{2},\ldots,b_{k}$ is zero), then it is defined to be $0$.
\end{itemize}

Thus, in either case, this lowest common multiple is a nonnegative integer. We
denote it by $\operatorname{lcm}\left(  b_{1},b_{2},\ldots,b_{k}\right)  $.
(Some authors also call it $\left[  b_{1},b_{2},\ldots,b_{k}\right]  $.)

We shall also use the word \textquotedblleft\textit{lcm}\textquotedblright\ as
shorthand for \textquotedblleft lowest common multiple\textquotedblright.
\end{definition}

Some authors say \textquotedblleft\textit{least common multiple}%
\textquotedblright\ instead of \textquotedblleft lowest common
multiple\textquotedblright.

We are slightly abusing the word \textquotedblleft lowest common
multiple\textquotedblright, of course; it would be more precise to say
\textquotedblleft lowest \textbf{positive} common multiple\textquotedblright,
and even this would only hold for the case when $b_{1},b_{2},\ldots,b_{k}$ are
all nonzero. Taken literally, a \textquotedblleft lowest common
multiple\textquotedblright\ of $2$ and $3$ would not exist, since $2$ and $3$
have infinitely many negative common multiples.

Note that the lcm of a single number is the absolute value of this number:
i.e., we have $\operatorname{lcm}\left(  a\right)  =\left\vert a\right\vert $
for each $a\in\mathbb{Z}$. (This is easy to prove.) Also, the lcm of an empty
list of numbers is $1$: that is, $\operatorname{lcm}\left(  {}\right)  =1$.

We observe a trivial property of lcms, which (for the sake of brevity) we only
state for two integers $a$ and $b$ despite it holding for any number of
integers (with the same proof):

\begin{proposition}
\label{prop.ent.lcm.divides}Let $a,b\in\mathbb{Z}$.

\textbf{(a)} We have $0\in\operatorname*{Mul}\left(  a,b\right)  $.

\textbf{(b)} We have $\operatorname{lcm}\left(  a,b\right)  \in
\operatorname*{Mul}\left(  a,b\right)  $.

\textbf{(c)} We have $a\mid\operatorname{lcm}\left(  a,b\right)  $ and
$b\mid\operatorname{lcm}\left(  a,b\right)  $.
\end{proposition}

\begin{proof}
[Proof of Proposition \ref{prop.ent.lcm.divides}.]\textbf{(a)} The integer $0$
clearly satisfies $\left(  a\mid0\text{ and }b\mid0\right)  $. In other words,
$0$ is a common multiple of $a$ and $b$ (by the definition of a
\textquotedblleft common multiple\textquotedblright). In other words,
$0\in\operatorname*{Mul}\left(  a,b\right)  $ (by the definition of
$\operatorname*{Mul}\left(  a,b\right)  $). This proves Proposition
\ref{prop.ent.lcm.divides} \textbf{(a)}.

\textbf{(b)} If the two integers $a$ and $b$ are not all nonzero, then
Proposition \ref{prop.ent.lcm.divides} \textbf{(b)}
holds\footnote{\textit{Proof.} Assume that the two integers $a$ and $b$ are
not all nonzero. Hence, Definition \ref{def.ent.lcm.lcm} shows that
$\operatorname{lcm}\left(  a,b\right)  =0\in\operatorname*{Mul}\left(
a,b\right)  $ (by Proposition \ref{prop.ent.lcm.divides} \textbf{(a)}). Thus,
Proposition \ref{prop.ent.lcm.divides} \textbf{(b)} holds.}. Hence, for the
rest of this proof, we WLOG assume that the two integers $a$ and $b$ are all
nonzero. Thus, Definition \ref{def.ent.lcm.lcm} yields that
$\operatorname{lcm}\left(  a,b\right)  $ is the smallest positive element of
the set $\operatorname*{Mul}\left(  a,b\right)  $. Hence, $\operatorname{lcm}%
\left(  a,b\right)  \in\operatorname*{Mul}\left(  a,b\right)  $. This proves
Proposition \ref{prop.ent.lcm.divides} \textbf{(b)}.

\textbf{(c)} Proposition \ref{prop.ent.lcm.divides} \textbf{(b)} yields
$\operatorname{lcm}\left(  a,b\right)  \in\operatorname*{Mul}\left(
a,b\right)  $. In other words, $\operatorname{lcm}\left(  a,b\right)  $ is a
common multiple of $a$ and $b$ (by the definition of $\operatorname*{Mul}%
\left(  a,b\right)  $). In other words, we have $\left(  a\mid
\operatorname{lcm}\left(  a,b\right)  \text{ and }b\mid\operatorname{lcm}%
\left(  a,b\right)  \right)  $ (by the definition of \textquotedblleft common
multiple\textquotedblright). This proves Proposition
\ref{prop.ent.lcm.divides} \textbf{(c)}.
\end{proof}

The following theorem yields a good way of computing lcms of two numbers
(since we already know how to compute gcds via the Euclidean algorithm):

\begin{theorem}
\label{thm.ent.lcm.gcd*lcm}Let $a,b\in\mathbb{Z}$. Then, $\gcd\left(
a,b\right)  \cdot\operatorname{lcm}\left(  a,b\right)  =\left\vert
ab\right\vert $.
\end{theorem}

\begin{proof}
[Proof of Theorem \ref{thm.ent.lcm.gcd*lcm}.]If at least one of the two
numbers $a$ and $b$ is $0$, then Theorem \ref{thm.ent.lcm.gcd*lcm}
holds\footnote{\textit{Proof.} Assume that at least one of the two numbers $a$
and $b$ is $0$. Thus, the product $ab$ is $0$. Hence, $ab=0$, so that
$\left\vert ab\right\vert =0$.
\par
On the other hand, the two numbers $a,b$ are not all nonzero (since at least
one of the two numbers $a$ and $b$ is $0$). Hence, Definition
\ref{def.ent.lcm.lcm} shows that $\operatorname{lcm}\left(  a,b\right)  =0$.
Comparing $\gcd\left(  a,b\right)  \cdot\underbrace{\operatorname{lcm}\left(
a,b\right)  }_{=0}=0$ with $\left\vert ab\right\vert =0$, we obtain
$\gcd\left(  a,b\right)  \cdot\operatorname{lcm}\left(  a,b\right)
=\left\vert ab\right\vert $. In other words, Theorem \ref{thm.ent.lcm.gcd*lcm}
holds.}. Hence, for the rest of this proof, we WLOG assume that none of the
two numbers $a$ and $b$ is $0$. In other words, $a$ and $b$ are nonzero. Thus,
Definition \ref{def.ent.lcm.lcm} yields that $\operatorname{lcm}\left(
a,b\right)  $ is the smallest positive element of the set $\operatorname*{Mul}%
\left(  a,b\right)  $. Also, $\gcd\left(  a,b\right)  $ is a positive integer
(since $a$ and $b$ are nonzero) and thus nonzero. Hence, we can define
$c\in\mathbb{Q}$ by $c=\dfrac{ab}{\gcd\left(  a,b\right)  }$. Consider this
$c$. From $c=\dfrac{ab}{\gcd\left(  a,b\right)  }$, we obtain $ab=\gcd\left(
a,b\right)  \cdot c$.

Let $d=\left\vert c\right\vert $. The number $c=\dfrac{ab}{\gcd\left(
a,b\right)  }$ is nonzero (since $a$ and $b$ are nonzero). Hence, its absolute
value $\left\vert c\right\vert $ is positive. In other words, $d$ is positive
(since $d=\left\vert c\right\vert $). From $ab=\gcd\left(  a,b\right)  \cdot
c$, we obtain%
\begin{align}
\left\vert ab\right\vert  &  =\left\vert \gcd\left(  a,b\right)  \cdot
c\right\vert =\underbrace{\left\vert \gcd\left(  a,b\right)  \right\vert
}_{\substack{=\gcd\left(  a,b\right)  \\\text{(since }\gcd\left(  a,b\right)
\text{ is positive)}}}\cdot\underbrace{\left\vert c\right\vert }%
_{=d}\nonumber\\
&  \ \ \ \ \ \ \ \ \ \ \left(  \text{by (\ref{eq.ent.div.abs(xy)}), applied to
}\gcd\left(  a,b\right)  \text{ and }c\text{ instead of }x\text{ and }y\right)
\nonumber\\
&  =\gcd\left(  a,b\right)  \cdot d. \label{pf.thm.ent.lcm.gcd*lcm.1}%
\end{align}
Solving this for $d$, we find $d=\dfrac{\left\vert ab\right\vert }{\gcd\left(
a,b\right)  }$ (since $\gcd\left(  a,b\right)  $ is nonzero).

We have $\gcd\left(  a,b\right)  \mid b$ (by Proposition
\ref{prop.ent.gcd.props1} \textbf{(f)}). Thus, $\dfrac{b}{\gcd\left(
a,b\right)  }$ is an integer. Now, $c=\dfrac{ab}{\gcd\left(  a,b\right)
}=a\cdot\dfrac{b}{\gcd\left(  a,b\right)  }$ is the product of two integers
(since $a$ and $\dfrac{b}{\gcd\left(  a,b\right)  }$ are integers). Therefore,
$c$ itself is an integer. Thus, $d$ is an integer as well (since $d=\left\vert
c\right\vert $). Moreover, $c=a\cdot\dfrac{b}{\gcd\left(  a,b\right)  }$ shows
that $a\mid c$ (since $\dfrac{b}{\gcd\left(  a,b\right)  }$ is an integer).
But Exercise \ref{exe.ent.div.aabs} \textbf{(a)} (applied to $c$ instead of
$a$) yields $c\mid\left\vert c\right\vert $ (this means \textquotedblleft$c$
divides $\left\vert c\right\vert $\textquotedblright). In other words, $c\mid
d$ (since $d=\left\vert c\right\vert $). Hence, $a\mid c\mid d$.

So we have proven that $a\mid d$. Similarly, $b\mid d$. Thus, we know that
$\left(  a\mid d\text{ and }b\mid d\right)  $. In other words, $d$ is a common
multiple of $a$ and $b$ (by the definition of a \textquotedblleft common
multiple\textquotedblright). In other words, $d\in\operatorname*{Mul}\left(
a,b\right)  $ (by the definition of $\operatorname*{Mul}\left(  a,b\right)
$). Thus, $d$ is a positive element of the set $\operatorname*{Mul}\left(
a,b\right)  $ (since $d\in\operatorname*{Mul}\left(  a,b\right)  $).

We shall now show that $d$ is the smallest positive element of this set.
Indeed, let $x$ be any positive element of $\operatorname*{Mul}\left(
a,b\right)  $. We are going to prove that $x\geq d$.

In fact, $x\in\operatorname*{Mul}\left(  a,b\right)  $. In other words, $x$ is
a common multiple of $a$ and $b$. In other words, we have $\left(  a\mid
x\text{ and }b\mid x\right)  $. Hence, Theorem \ref{thm.ent.gcd.combine}
(applied to $x$ instead of $c$) yields $ab\mid\gcd\left(  a,b\right)  \cdot
x$. Both numbers $\gcd\left(  a,b\right)  $ and $x$ are positive; hence, their
product $\gcd\left(  a,b\right)  \cdot x$ is positive as well, and thus we
have $\gcd\left(  a,b\right)  \cdot x\neq0$. Hence, Proposition
\ref{prop.ent.div.1} \textbf{(b)} (applied to $ab$ and $\gcd\left(
a,b\right)  \cdot x$ instead of $a$ and $b$) yields $\left\vert ab\right\vert
\leq\left\vert \gcd\left(  a,b\right)  \cdot x\right\vert =\gcd\left(
a,b\right)  \cdot x$ (since $\gcd\left(  a,b\right)  \cdot x$ is positive).
Thus,%
\[
\gcd\left(  a,b\right)  \cdot x\geq\left\vert ab\right\vert =\gcd\left(
a,b\right)  \cdot d\ \ \ \ \ \ \ \ \ \ \left(  \text{by
(\ref{pf.thm.ent.lcm.gcd*lcm.1})}\right)  .
\]
We can divide this inequality by $\gcd\left(  a,b\right)  $ (since
$\gcd\left(  a,b\right)  $ is positive), and thus obtain $x\geq d$.

Now, forget that we fixed $x$. We thus have proven that each positive element
$x$ of the set $\operatorname*{Mul}\left(  a,b\right)  $ satisfies $x\geq d$.
Hence, $d$ is the \textbf{smallest} positive element of the set
$\operatorname*{Mul}\left(  a,b\right)  $ (since we already know that $d$ is a
positive element of the set $\operatorname*{Mul}\left(  a,b\right)  $). In
other words, $d$ is $\operatorname{lcm}\left(  a,b\right)  $ (since
$\operatorname{lcm}\left(  a,b\right)  $ is the smallest positive element of
the set $\operatorname*{Mul}\left(  a,b\right)  $). In other words,
$d=\operatorname{lcm}\left(  a,b\right)  $. Hence,
(\ref{pf.thm.ent.lcm.gcd*lcm.1}) becomes $\left\vert ab\right\vert
=\gcd\left(  a,b\right)  \cdot\underbrace{d}_{=\operatorname{lcm}\left(
a,b\right)  }=\gcd\left(  a,b\right)  \cdot\operatorname{lcm}\left(
a,b\right)  $. This proves Theorem \ref{thm.ent.lcm.gcd*lcm}.
\end{proof}

Next, we state an analogue of Theorem \ref{thm.ent.gcd.uniprop} (with all
divisibilities flipped):

\begin{theorem}
\label{thm.ent.lcm.uniprop}Let $a,b\in\mathbb{Z}$. Then:

\textbf{(a)} For each $m\in\mathbb{Z}$, we have the following logical
equivalence:%
\begin{equation}
\left(  a\mid m\ \text{and }b\mid m\right)  \ \Longleftrightarrow\ \left(
\operatorname{lcm}\left(  a,b\right)  \mid m\right)  .
\label{eq.thm.ent.lcm.uniprop.equiv}%
\end{equation}


\textbf{(b)} The common multiples of $a$ and $b$ are precisely the multiples
of $\operatorname{lcm}\left(  a,b\right)  $.

\textbf{(c)} We have $\operatorname*{Mul}\left(  a,b\right)
=\operatorname*{Mul}\left(  \operatorname{lcm}\left(  a,b\right)  \right)  $.
\end{theorem}

Again, the three parts of this theorem are saying the same thing from slightly
different perspectives. Our proof of Theorem \ref{thm.ent.lcm.uniprop} will
rely on the following lemma:

\begin{lemma}
\label{lem.ent.lcm.uniprop}Let $m,a,b\in\mathbb{Z}$ be such that $a\mid m$ and
$b\mid m$. Then, $\operatorname{lcm}\left(  a,b\right)  \mid m$.
\end{lemma}

Lemma \ref{lem.ent.lcm.uniprop} is similar to Lemma \ref{lem.ent.gcd.uniprop},
but its proof is not:

\begin{proof}
[Proof of Lemma \ref{lem.ent.lcm.uniprop}.]If at least one of the two numbers
$a$ and $b$ is $0$, then Lemma \ref{lem.ent.lcm.uniprop}
holds\footnote{\textit{Proof.} Assume that at least one of the two numbers $a$
and $b$ is $0$. In other words, $a=0$ or $b=0$. Let us WLOG assume that $a=0$
(since the proof in the case $b=0$ is analogous). We have $a\mid m$, thus
$0=a\mid m$.
\par
On the other hand, the two numbers $a,b$ are not all nonzero (since at least
one of the two numbers $a$ and $b$ is $0$). Hence, Definition
\ref{def.ent.lcm.lcm} shows that $\operatorname{lcm}\left(  a,b\right)
=0=a\mid m$. In other words, Lemma \ref{lem.ent.lcm.uniprop} holds.}. Hence,
for the rest of this proof, we WLOG assume that none of the two numbers $a$
and $b$ is $0$. In other words, $a$ and $b$ are nonzero. Thus, Definition
\ref{def.ent.lcm.lcm} yields that $\operatorname{lcm}\left(  a,b\right)  $ is
the smallest positive element of the set $\operatorname*{Mul}\left(
a,b\right)  $. Set $n=\operatorname{lcm}\left(  a,b\right)  $. Thus, $n$ is
the smallest positive element of the set $\operatorname*{Mul}\left(
a,b\right)  $ (since $\operatorname{lcm}\left(  a,b\right)  $ is the smallest
positive element of the set $\operatorname*{Mul}\left(  a,b\right)  $).
Therefore, $n$ is a positive integer and belongs to $\operatorname*{Mul}%
\left(  a,b\right)  $.

Now, $n$ is a common multiple of $a$ and $b$ (since $n$ belongs to
$\operatorname*{Mul}\left(  a,b\right)  $). In other words, we have $\left(
a\mid n\text{ and }b\mid n\right)  $.

Our goal is to prove that $\operatorname{lcm}\left(  a,b\right)  \mid m$. In
other words, our goal is to prove that $n\mid m$ (since $n=\operatorname{lcm}%
\left(  a,b\right)  $). Assume the contrary. Thus, we don't have $n\mid m$.
Hence, we don't have $m\%n=0$ (because Corollary \ref{cor.ent.quo-rem.remmod}
\textbf{(b)} (applied to $u=m$) shows that we have $n\mid m$ if and only if
$m\%n=0$). In other words, we have $m\%n\neq0$.

Corollary \ref{cor.ent.quo-rem.remmod} \textbf{(a)} (applied to $u=m$) yields
that $m\%n\in\left\{  0,1,\ldots,n-1\right\}  $ and $m\%n\equiv
m\operatorname{mod}n$. Combining $m\%n\in\left\{  0,1,\ldots,n-1\right\}  $
with $m\%n\neq0$, we obtain $m\%n\in\left\{  0,1,\ldots,n-1\right\}
\setminus\left\{  0\right\}  =\left\{  1,2,\ldots,n-1\right\}  $. Hence,
$m\%n$ is a positive integer and satisfies $m\%n\leq n-1<n$.

From $m\%n\equiv m\operatorname{mod}n$ and $a\mid n$, we obtain $m\%n\equiv
m\operatorname{mod}a$ (by Proposition \ref{prop.ent.mod.basics} \textbf{(e)},
applied to $a$, $m\%n$ and $m$ instead of $m$, $a$ and $b$). But
$m\equiv0\operatorname{mod}a$ (since $a\mid m$). Thus, $m\%n\equiv
m\equiv0\operatorname{mod}a$. In other words, $a\mid m\%n$. Similarly, $b\mid
m\%n$.

So we have proven that $\left(  a\mid m\%n\text{ and }b\mid m\%n\right)  $. In
other words, $m\%n$ is a common multiple of $a$ and $b$. In other words,
$m\%n\in\operatorname*{Mul}\left(  a,b\right)  $. Therefore, $m\%n$ is a
positive element of $\operatorname*{Mul}\left(  a,b\right)  $ (since $m\%n$ is
positive). Thus, $m\%n\geq n$ (since $n$ is the \textbf{smallest} positive
element of $\operatorname*{Mul}\left(  a,b\right)  $). This contradicts the
fact that $m\%n<n$. This contradiction shows that our assumption was false.
Hence, Lemma \ref{lem.ent.lcm.uniprop} is proven.
\end{proof}

\begin{proof}
[Proof of Theorem \ref{thm.ent.lcm.uniprop}.]\textbf{(a)} Let $m\in\mathbb{Z}%
$. In order to prove (\ref{eq.thm.ent.lcm.uniprop.equiv}), we need to prove
the \textquotedblleft$\Longrightarrow$\textquotedblright\ and
\textquotedblleft$\Longleftarrow$\textquotedblright\ directions of the
equivalence (\ref{eq.thm.ent.lcm.uniprop.equiv}). But this is easy: The
\textquotedblleft$\Longrightarrow$\textquotedblright\ direction is just the
statement of Lemma \ref{lem.ent.lcm.uniprop}, whereas the \textquotedblleft%
$\Longleftarrow$\textquotedblright\ direction is trivial (to wit: if
$\operatorname{lcm}\left(  a,b\right)  \mid m$, then%
\begin{align*}
a  &  \mid\operatorname{lcm}\left(  a,b\right)  \ \ \ \ \ \ \ \ \ \ \left(
\text{by Proposition \ref{prop.ent.lcm.divides} \textbf{(c)}}\right) \\
&  \mid m
\end{align*}
and%
\begin{align*}
b  &  \mid\operatorname{lcm}\left(  a,b\right)  \ \ \ \ \ \ \ \ \ \ \left(
\text{by Proposition \ref{prop.ent.lcm.divides} \textbf{(c)}}\right) \\
&  \mid m
\end{align*}
and thus $\left(  a\mid m\ \text{and }b\mid m\right)  $). Hence, the
equivalence (\ref{eq.thm.ent.lcm.uniprop.equiv}) is proven. This proves
Theorem \ref{thm.ent.lcm.uniprop} \textbf{(a)}.

\textbf{(b)} Theorem \ref{thm.ent.lcm.uniprop} \textbf{(b)} can be derived
from Theorem \ref{thm.ent.lcm.uniprop} \textbf{(a)} in the same way as Theorem
\ref{thm.ent.gcd.uniprop} \textbf{(b)} was derived from Theorem
\ref{thm.ent.gcd.uniprop} \textbf{(a)} (after the necessary changes are made
-- such as flipping all divisibility relations and replacing \textquotedblleft
divisor\textquotedblright\ by \textquotedblleft multiple\textquotedblright).

\textbf{(c)} Theorem \ref{thm.ent.lcm.uniprop} \textbf{(c)} can be derived
from Theorem \ref{thm.ent.lcm.uniprop} \textbf{(b)} in the same way as Theorem
\ref{thm.ent.gcd.uniprop} \textbf{(c)} was derived from Theorem
\ref{thm.ent.gcd.uniprop} \textbf{(b)} (after the necessary changes are made
-- such as flipping all divisibility relations and replacing \textquotedblleft
divisor\textquotedblright\ by \textquotedblleft multiple\textquotedblright).
\end{proof}

Our next claim is an analogue of Theorem \ref{thm.ent.gcd.uniprop-mul}:

\begin{theorem}
\label{thm.ent.lcm.uniprop-mul}Let $b_{1},b_{2},\ldots,b_{k}$ be integers.

\textbf{(a)} For each $m\in\mathbb{Z}$, we have the following logical
equivalence:%
\[
\left(  b_{i}\mid m\text{ for all }i\in\left\{  1,2,\ldots,k\right\}  \right)
\ \Longleftrightarrow\ \left(  \operatorname{lcm}\left(  b_{1},b_{2}%
,\ldots,b_{k}\right)  \mid m\right)  .
\]


\textbf{(b)} The common multiples of $b_{1},b_{2},\ldots,b_{k}$ are precisely
the multiples of $\operatorname{lcm}\left(  b_{1},b_{2},\ldots,b_{k}\right)  $.

\textbf{(c)} We have $\operatorname*{Mul}\left(  b_{1},b_{2},\ldots
,b_{k}\right)  =\operatorname*{Mul}\left(  \operatorname{lcm}\left(
b_{1},b_{2},\ldots,b_{k}\right)  \right)  $.

\textbf{(d)} If $k>0$, then%
\[
\operatorname{lcm}\left(  b_{1},b_{2},\ldots,b_{k}\right)  =\operatorname{lcm}%
\left(  \operatorname{lcm}\left(  b_{1},b_{2},\ldots,b_{k-1}\right)
,b_{k}\right)  .
\]

\end{theorem}

\begin{proof}
[Proof of Theorem \ref{thm.ent.lcm.uniprop-mul} (sketched).]It is not hard to
transform our above proof of Theorem \ref{thm.ent.gcd.uniprop-mul} into a
proof of Theorem \ref{thm.ent.lcm.uniprop-mul}. To do so, we need (of course)
to flip the divisibility relations and replace \textquotedblleft
divisor\textquotedblright\ by \textquotedblleft multiple\textquotedblright%
\ and \textquotedblleft$\gcd$\textquotedblright\ by \textquotedblleft%
$\operatorname{lcm}$\textquotedblright. (Some more changes need to be made as
well -- for example, the induction base needs to be handled differently, and
the WLOG assumption that \textquotedblleft the integers $b_{1},b_{2}%
,\ldots,b_{\ell}$ are not all $0$\textquotedblright\ needs to be replaced by a
WLOG assumption that \textquotedblleft the integers $b_{1},b_{2}%
,\ldots,b_{\ell}$ are all nonzero\textquotedblright. Also, \textquotedblleft
largest element\textquotedblright\ needs to be replaced by \textquotedblleft
smallest positive element\textquotedblright. But these are fairly
straightforward changes; the main thrust of the argument remains unchanged.)
\end{proof}

\begin{exercise}
\label{exe.ent.lcm.lcmabc}Let $a,b,c$ be three integers.

\textbf{(a)} Prove that $\gcd\left(  a,b,c\right)  \cdot\operatorname{lcm}%
\left(  bc,ca,ab\right)  =\left\vert abc\right\vert $.

\textbf{(b)} Prove that $\operatorname{lcm}\left(  a,b,c\right)  \cdot
\gcd\left(  bc,ca,ab\right)  =\left\vert abc\right\vert $.
\end{exercise}

\begin{exercise}
\label{exe.ent.lcm.props1}Let $a,b\in\mathbb{Z}$.

\textbf{(a)} Prove that $\operatorname{lcm}\left(  a,b\right)
=\operatorname{lcm}\left(  b,a\right)  $.

\textbf{(b)} Prove that $\operatorname{lcm}\left(  -a,b\right)
=\operatorname{lcm}\left(  a,b\right)  $.

\textbf{(c)} Prove that $\operatorname{lcm}\left(  a,-b\right)
=\operatorname{lcm}\left(  a,b\right)  $.

\textbf{(d)} If $a,b\in\mathbb{Z}$ satisfy $a\mid b$, then $\operatorname{lcm}%
\left(  a,b\right)  =\left\vert b\right\vert $.
\end{exercise}

\subsection{The Chinese remainder theorem (elementary form)}

\begin{theorem}
\label{thm.ent.crt1}Let $m$ and $n$ be two coprime integers. Let
$a,b\in\mathbb{Z}$.

\textbf{(a)} There exists an integer $x\in\mathbb{Z}$ such that%
\[
\left(  x\equiv a\operatorname{mod}m\text{ and }x\equiv b\operatorname{mod}%
n\right)  .
\]


\textbf{(b)} If $x_{1}$ and $x_{2}$ are two such integers $x$, then
$x_{1}\equiv x_{2}\operatorname{mod}mn$.
\end{theorem}

Theorem \ref{thm.ent.crt1} is known as the \textit{Chinese remainder theorem}.
More precisely, there is a sizeable cloud of results that share this name;
Theorem \ref{thm.ent.crt1} is one of the most elementary and basic of these
results. A more general result is Theorem \ref{thm.ent.crt1k} further below.
However, the strongest and most general \textquotedblleft Chinese remainder
theorems\textquotedblright\ rely on concept from abstract algebra such as
rings and ideals; it will take us a while to get to them.

Theorem \ref{thm.ent.crt1} has gotten its name from the fact that
\href{https://en.wikipedia.org/wiki/Chinese_remainder_theorem#History}{a first
glimpse of it appears in \textquotedblleft Master Sun's Mathematical
Manual\textquotedblright\ from the 3rd century AD}; it took centuries until it
become a theorem with proof and precise statement.

The claim of Theorem \ref{thm.ent.crt1} \textbf{(b)} is often restated as
\textquotedblleft This integer $x$ (i.e., the integer $x$ satisfying $\left(
x\equiv a\operatorname{mod}m\text{ and }x\equiv b\operatorname{mod}n\right)
$) is unique modulo $mn$\textquotedblright. The \textquotedblleft modulo
$mn$\textquotedblright\ here signifies that what we are not claiming literal
uniqueness (which would mean that if $x_{1}$ and $x_{2}$ are two such integers
$x$, then $x_{1}=x_{2}$), but merely claiming a weaker form (namely, that if
$x_{1}$ and $x_{2}$ are two such integers $x$, then $x_{1}\equiv
x_{2}\operatorname{mod}mn$).

\begin{example}
Theorem \ref{thm.ent.crt1} \textbf{(a)} (applied to $m=5$, $n=6$ and $a=3$ and
$b=2$) shows that there exists an integer $x\in\mathbb{Z}$ such that%
\[
\left(  x\equiv3\operatorname{mod}5\text{ and }x\equiv2\operatorname{mod}%
6\right)  .
\]
We will soon find such an integer, after we have proved Theorem
\ref{thm.ent.crt1}.
\end{example}

\begin{proof}
[Proof of Theorem \ref{thm.ent.crt1}.]The integers $m$ and $n$ are coprime. In
other words, $m\perp n$, so that $n\perp m$ (by Proposition
\ref{prop.ent.coprime.perp-symm}).

\textbf{(a)} Theorem \ref{thm.ent.coprime.modinv} \textbf{(b)} (applied to $m$
instead of $a$) shows that there exists a $m^{\prime}\in\mathbb{Z}$ such that
$mm^{\prime}\equiv1\operatorname{mod}n$.

Similarly, there exists an $n^{\prime}\in\mathbb{Z}$ such that $nn^{\prime
}\equiv1\operatorname{mod}m$ (since $m$ and $n$ play symmetric roles in
Theorem \ref{thm.ent.crt1}).

Now, set $x_{0}=nn^{\prime}a+mm^{\prime}b$. Then,%
\[
x_{0}=\underbrace{nn^{\prime}}_{\equiv1\operatorname{mod}m}%
a+\underbrace{mm^{\prime}b}_{\equiv0\operatorname{mod}m}\equiv
1a+0=a\operatorname{mod}m
\]
(here, we have used the Principle of substitutivity for congruences, which we
described in Section \ref{sect.ent.subst-mod}) and similarly $x_{0}\equiv
b\operatorname{mod}n$. Thus, there exists an integer $x\in\mathbb{Z}$ such
that $\left(  x\equiv a\operatorname{mod}m\text{ and }x\equiv
b\operatorname{mod}n\right)  $ (namely, $x=x_{0}$). This proves Theorem
\ref{thm.ent.crt1} \textbf{(a)}.

\textbf{(b)} Let $x_{1}$ and $x_{2}$ be two such integers $x$. We want to
prove that $x_{1}\equiv x_{2}\operatorname{mod}mn$.

We know that $x_{1}$ is an integer $x$ such that $\left(  x\equiv
a\operatorname{mod}m\text{ and }x\equiv b\operatorname{mod}n\right)  $. Thus,
$x_{1}\equiv a\operatorname{mod}m$ and $x_{1}\equiv b\operatorname{mod}n$.

In particular, $x_{1}\equiv a\operatorname{mod}m$, and similarly $x_{2}\equiv
a\operatorname{mod}m$. Thus, $x_{1}\equiv a\equiv x_{2}\operatorname{mod}m$,
so that $m\mid x_{1}-x_{2}$. Similarly, $n\mid x_{1}-x_{2}$. Since $m\perp n$,
we thus obtain $mn\mid x_{1}-x_{2}$ (by Theorem \ref{thm.ent.coprime.combine},
applied to $m$, $n$ and $x_{1}-x_{2}$ instead of $a$, $b$ and $c$). In other
words, $x_{1}\equiv x_{2}\operatorname{mod}mn$. This proves Theorem
\ref{thm.ent.crt1}.
\end{proof}

\begin{noncompile}
Theorem \ref{thm.ent.crt1} is (the simplest form of) the \textit{Chinese
Remainder Theorem} (Sunzi, 3rd century AD).
\end{noncompile}

\begin{example}
Assume that we want to find an $x\in\mathbb{Z}$ such that%
\[
\left(  x\equiv3\operatorname{mod}5\text{ and }x\equiv2\operatorname{mod}%
6\right)  .
\]
To compute such an $x$, let us follow the proof of Theorem \ref{thm.ent.crt1}
\textbf{(a)} above.

We need a modular inverse $5^{\prime}$ of $5$ modulo $6$. Such an inverse is
$5$, since $5\cdot5\equiv1\operatorname{mod}6$. (In this particular case,
finding this modular inverse was easy, because all we had to do is to test the
$6$ numbers $0,1,2,3,4,5$; it is clear that a modular inverse of $a$ modulo
$m$, if it exists, can be found within the set $\left\{  0,1,\ldots
,m-1\right\}  $. In general, there is
\href{https://en.wikipedia.org/wiki/Modular_multiplicative_inverse#Computation}{a
quick way to find a modular inverse of an integer $a$ modulo an integer $m$
using the \textquotedblleft Extended Euclidean algorithm\textquotedblright}.)

We need a modular inverse $6^{\prime}$ of $6$ modulo $5$. Such an inverse is
$1$, since $6\cdot1\equiv1\operatorname{mod}5$.

Now, the proof of Theorem \ref{thm.ent.crt1} \textbf{(a)} tells us that
$x_{0}=6\cdot6^{\prime}\cdot3+5\cdot5^{\prime}\cdot2$ is an integer
$x\in\mathbb{Z}$ such that $\left(  x\equiv3\operatorname{mod}5\text{ and
}x\equiv2\operatorname{mod}6\right)  $. This $x_{0}$ is%
\[
6\cdot6^{\prime}\cdot3+5\cdot5^{\prime}\cdot2=6\cdot1\cdot3+5\cdot5\cdot2=68.
\]
So we have found an $x\in\mathbb{Z}$ such that $\left(  x\equiv
3\operatorname{mod}5\text{ and }x\equiv2\operatorname{mod}6\right)  $, namely
$x=68$. (We can easily check this: $68\equiv3\operatorname{mod}5$ since
$68-3=5\cdot13$; and $68\equiv2\operatorname{mod}6$ since $68-2=6\cdot11$.)
\end{example}

There is also a version of Theorem \ref{thm.ent.crt1} for multiple integers:

\begin{theorem}
\label{thm.ent.crt1k}Let $m_{1},m_{2},\ldots,m_{k}$ be $k$ mutually coprime
integers. Let $a_{1},a_{2},\ldots,a_{k}\in\mathbb{Z}$.

\textbf{(a)} There exists an integer $x$ such that
\begin{equation}
\left(  x\equiv a_{i}\operatorname{mod}m_{i}\text{ for all }i\in\left\{
1,2,\ldots,k\right\}  \right)  . \label{eq.thm.ent.crt1k.1}%
\end{equation}


\textbf{(b)} If $x_{1}$ and $x_{2}$ are two such integers $x$, then
$x_{1}\equiv x_{2}\operatorname{mod}m_{1}m_{2}\cdots m_{k}$.
\end{theorem}

Again, Theorem \ref{thm.ent.crt1k} \textbf{(b)} is often stated in the form
\textquotedblleft This integer $x$ is unique modulo $m_{1}m_{2}\cdots m_{k}%
$\textquotedblright.

Clearly, Theorem \ref{thm.ent.crt1} is the particular case of Theorem
\ref{thm.ent.crt1k} obtained for $k=2$.

\begin{proof}
[Proof of Theorem \ref{thm.ent.crt1k}.]Forget that we fixed $k$ and
$m_{1},m_{2},\ldots,m_{k}$ and $a_{1},a_{2},\ldots,a_{k}$.

\textbf{(a)} We shall prove Theorem \ref{thm.ent.crt1k} \textbf{(a)} by
induction on $k$:

\textit{Induction base:} Let us check that Theorem \ref{thm.ent.crt1k}
\textbf{(a)} holds for $k=0$. Indeed, if $k=0$, then Theorem
\ref{thm.ent.crt1k} \textbf{(a)} states the following:

\begin{statement}
\textit{Claim 0:} Let $m_{1},m_{2},\ldots,m_{0}$ be $0$ mutually coprime
integers. Let $a_{1},a_{2},\ldots,a_{0}\in\mathbb{Z}$. There exists an integer
$x$ such that
\begin{equation}
\left(  x\equiv a_{i}\operatorname{mod}m_{i}\text{ for all }i\in\left\{
1,2,\ldots,0\right\}  \right)  . \label{pf.thm.ent.crt1k.a.c0.claim}%
\end{equation}

\end{statement}

But Claim 0 is true, because (\ref{pf.thm.ent.crt1k.a.c0.claim}) is vacuously
true\footnote{since there exists no $i\in\left\{  1,2,\ldots,0\right\}  $} for
\textbf{any} integer $x$ (so we can take, for example, $x=0$). In other words,
Theorem \ref{thm.ent.crt1k} \textbf{(a)} holds for $k=0$; thus, the induction
base is complete.

Needless to say, Claim 0 is not an interesting statement, but it is a
perfectly valid induction base! (But you are free to check the case $k=1$ by
hand -- its proof is almost as easy as that for $k=0$.)

\textit{Induction step:} Let $\ell$ be a positive integer. Assume that Theorem
\ref{thm.ent.crt1k} \textbf{(a)} holds for $k=\ell-1$. We must now prove that
Theorem \ref{thm.ent.crt1k} \textbf{(a)} holds for $k=\ell$.

We have assumed that Theorem \ref{thm.ent.crt1k} \textbf{(a)} holds for
$k=\ell-1$. In other words, the following claim holds:

\begin{statement}
\textit{Claim 1:} Let $m_{1},m_{2},\ldots,m_{\ell-1}$ be $\ell-1$ mutually
coprime integers. Let $a_{1},a_{2},\ldots,a_{\ell-1}\in\mathbb{Z}$. There
exists an integer $x$ such that
\begin{equation}
\left(  x\equiv a_{i}\operatorname{mod}m_{i}\text{ for all }i\in\left\{
1,2,\ldots,\ell-1\right\}  \right)  . \label{pf.thm.ent.crt1k.a.c1.claim}%
\end{equation}

\end{statement}

We must prove that Theorem \ref{thm.ent.crt1k} \textbf{(a)} holds for $k=\ell
$. In other words, we must prove the following claim:

\begin{statement}
\textit{Claim 2:} Let $m_{1},m_{2},\ldots,m_{\ell}$ be $\ell$ mutually coprime
integers. Let $a_{1},a_{2},\ldots,a_{\ell}\in\mathbb{Z}$. There exists an
integer $x$ such that
\begin{equation}
\left(  x\equiv a_{i}\operatorname{mod}m_{i}\text{ for all }i\in\left\{
1,2,\ldots,\ell\right\}  \right)  . \label{pf.thm.ent.crt1k.a.c2.claim}%
\end{equation}

\end{statement}

[\textit{Proof of Claim 2:} The main idea of this proof is to combine Claim 1
(applied to $m_{1},m_{2},\ldots,m_{\ell-1}$) with Theorem \ref{thm.ent.crt1}
(applied to the coprime integers $m_{1}m_{2}\cdots m_{\ell-1}$ and $m_{\ell}%
$). In details:

The $\ell$ integers $m_{1},m_{2},\ldots,m_{\ell}$ are mutually coprime. Thus,
the $\ell-1$ integers $m_{1},m_{2},\ldots,m_{\ell-1}$ are mutually coprime.
Hence, Claim 1 shows that there exists an integer $x$ such that
\[
\left(  x\equiv a_{i}\operatorname{mod}m_{i}\text{ for all }i\in\left\{
1,2,\ldots,\ell-1\right\}  \right)  .
\]
Consider this $x$, and denote it by $u$. Thus, $u$ is an integer such that%
\begin{equation}
\left(  u\equiv a_{i}\operatorname{mod}m_{i}\text{ for all }i\in\left\{
1,2,\ldots,\ell-1\right\}  \right)  . \label{pf.thm.ent.crt1k.a.c2.pf.u}%
\end{equation}


Define an integer $m=m_{1}m_{2}\cdots m_{\ell-1}$.

The integers $m$ and $m_{\ell}$ are coprime\footnote{\textit{Proof.} Recall
that the $\ell$ integers $m_{1},m_{2},\ldots,m_{\ell}$ are mutually coprime.
In other words, $m_{i}\perp m_{j}$ for any $i,j\in\left\{  1,2,\ldots
,\ell\right\}  $ satisfying $i\neq j$. Applying this to $j=\ell$, we conclude
that $m_{i}\perp m_{\ell}$ for any $i\in\left\{  1,2,\ldots,\ell\right\}  $
satisfying $i\neq\ell$. In other words, $m_{i}\perp m_{\ell}$ for any
$i\in\left\{  1,2,\ldots,\ell-1\right\}  $ (since the numbers $i\in\left\{
1,2,\ldots,\ell\right\}  $ satisfying $i\neq\ell$ are precisely the numbers
$i\in\left\{  1,2,\ldots,\ell-1\right\}  $). In other words, each
$i\in\left\{  1,2,\ldots,\ell-1\right\}  $ satisfies $m_{i}\perp m_{\ell}$.
Hence, Exercise \ref{exe.ent.coprime.ab-to-ck} (applied to $c=m_{\ell}$,
$k=\ell-1$ and $a_{i}=m_{i}$) yields that $m_{1}m_{2}\cdots m_{\ell-1}\perp
m_{\ell}$. This rewrites as $m\perp m_{\ell}$ (since $m=m_{1}m_{2}\cdots
m_{\ell-1}$). In other words, the integers $m$ and $m_{\ell}$ are coprime.}.
Hence, Theorem \ref{thm.ent.crt1} \textbf{(a)} (applied to $n=m_{\ell}$, $a=u$
and $b=a_{\ell}$) yields that there exists an integer $x\in\mathbb{Z}$ such
that%
\[
\left(  x\equiv u\operatorname{mod}m\text{ and }x\equiv a_{\ell}%
\operatorname{mod}m_{\ell}\right)  .
\]
Consider this $x$, and denote it by $v$. Thus, $v$ is an integer such that%
\[
\left(  v\equiv u\operatorname{mod}m\text{ and }v\equiv a_{\ell}%
\operatorname{mod}m_{\ell}\right)  .
\]


Now, let $i\in\left\{  1,2,\ldots,\ell-1\right\}  $. Then,
\[
m=m_{1}m_{2}\cdots m_{\ell-1}=m_{i}\cdot\left(  m_{1}m_{2}\cdots
m_{i-1}m_{i+1}m_{i+2}\cdots m_{\ell-1}\right)  ;
\]
thus, $m_{i}\mid m$ (since $m_{1}m_{2}\cdots m_{i-1}m_{i+1}m_{i+2}\cdots
m_{\ell-1}$ is an integer). But as we just have shown, we have $v\equiv
u\operatorname{mod}m$. Hence, Proposition \ref{prop.ent.mod.basics}
\textbf{(e)} (applied to $v$, $u$, $m$ and $m_{i}$ instead of $a$, $b$, $n$
and $m$) yields $v\equiv u\operatorname{mod}m_{i}$ (since $m_{i}\mid m$).
Hence,
\[
v\equiv u\equiv a_{i}\operatorname{mod}m_{i}\ \ \ \ \ \ \ \ \ \ \left(
\text{by (\ref{pf.thm.ent.crt1k.a.c2.pf.u})}\right)  .
\]


Now, forget that we fixed $i$. We thus have proven the congruence $v\equiv
a_{i}\operatorname{mod}m_{i}$ for each $i\in\left\{  1,2,\ldots,\ell
-1\right\}  $. But this congruence also holds for $i=\ell$ (since $v\equiv
a_{\ell}\operatorname{mod}m_{\ell}$). Hence, this congruence holds for all
$i\in\left\{  1,2,\ldots,\ell\right\}  $. In other words, we have%
\[
v\equiv a_{i}\operatorname{mod}m_{i}\text{ for all }i\in\left\{
1,2,\ldots,\ell\right\}  \text{.}%
\]
Thus, there exists an integer $x$ such that
\[
\left(  x\equiv a_{i}\operatorname{mod}m_{i}\text{ for all }i\in\left\{
1,2,\ldots,\ell\right\}  \right)
\]
(namely, $x=v$). This proves Claim 2.]

We have now proven Claim 2. In other words, Theorem \ref{thm.ent.crt1k}
\textbf{(a)} is true for $k=\ell$. Thus, the induction step is complete, so we
have proven Theorem \ref{thm.ent.crt1k} \textbf{(a)} by induction.

\textbf{(b)} Let $k$ and $m_{1},m_{2},\ldots,m_{k}$ and $a_{1},a_{2}%
,\ldots,a_{k}$ be as in Theorem \ref{thm.ent.crt1k}. Let $x_{1}$ and $x_{2}$
be two integers $x$ such that (\ref{eq.thm.ent.crt1k.1}). We must prove that
$x_{1}\equiv x_{2}\operatorname{mod}m_{1}m_{2}\cdots m_{k}$.

We know that $x_{1}$ is an integer $x$ such that (\ref{eq.thm.ent.crt1k.1}).
In other words, $x_{1}$ is an integer and has the property that%
\begin{equation}
\left(  x_{1}\equiv a_{i}\operatorname{mod}m_{i}\text{ for all }i\in\left\{
1,2,\ldots,k\right\}  \right)  . \label{pf.thm.ent.crt1k.b.x1}%
\end{equation}
Now, let $i\in\left\{  1,2,\ldots,k\right\}  $. Then,
(\ref{pf.thm.ent.crt1k.b.x1}) yields $x_{1}\equiv a_{i}\operatorname{mod}%
m_{i}$. Similarly, $x_{2}\equiv a_{i}\operatorname{mod}m_{i}$. Hence,
$x_{1}\equiv a_{i}\equiv x_{2}\operatorname{mod}m_{i}$. In other words,
$m_{i}\mid x_{1}-x_{2}$.

Now, forget that we fixed $i$. We thus have shown that $m_{i}\mid x_{1}-x_{2}$
for each $i\in\left\{  1,2,\ldots,k\right\}  $. Hence, Exercise
\ref{exe.ent.coprime.combinek} (applied to $c=x_{1}-x_{2}$ and $b_{i}=m_{i}$)
shows that $m_{1}m_{2}\cdots m_{k}\mid x_{1}-x_{2}$ (since $m_{1},m_{2}%
,\ldots,m_{k}$ are mutually coprime). In other words, $x_{1}\equiv
x_{2}\operatorname{mod}m_{1}m_{2}\cdots m_{k}$. This proves Theorem
\ref{thm.ent.crt1k} \textbf{(b)}.
\end{proof}

\subsection{Primes}

\subsubsection{Definition and the Sieve of Eratosthenes}

\begin{definition}
Let $p$ be an integer greater than $1$. We say that $p$ is \textit{prime} if
the only positive divisors of $p$ are $1$ and $p$. A prime integer is often
just called \textit{a prime}.
\end{definition}

Note that we required $p$ to be greater than $1$ here. Thus, $1$ does not
count as prime even though its only positive divisor is $1$ itself.

\begin{example}
\label{exa.ent.primes.1}\textbf{(a)} The only positive divisors of $7$ are $1$
and $7$. Thus, $7$ is a prime.

\textbf{(b)} The positive divisors of $14$ are $1$, $2$, $7$ and $14$. These
are more than just $1$ and $14$. Thus, $14$ is not a prime.

\textbf{(c)} None of the numbers $4,6,8,10,12,14,16,\ldots$ (that is, the
multiples of $2$ that are larger than $2$) is a prime. Indeed, if $p$ is any
of the numbers, then $p$ has a positive divisor other than $1$ and $p$
(namely, $2$), and therefore does not meet the definition of \textquotedblleft
prime\textquotedblright.

\textbf{(d)} None of the numbers $6,9,12,15,18,\ldots$ (that is, the multiples
of $3$ that are larger than $3$) is a prime. Indeed, if $p$ is any of the
numbers, then $p$ has a positive divisor other than $1$ and $p$ (namely, $3$),
and therefore does not meet the definition of \textquotedblleft
prime\textquotedblright.
\end{example}

Parts \textbf{(c)} and \textbf{(d)} of Example \ref{exa.ent.primes.1} suggest
a method for finding all primes up to a given integer:

\begin{example}
Let us say we want to find all primes that are $\leq30$.

\textit{Step 1:} All such primes must lie in $\left\{  2,3,\ldots,30\right\}
$ (since a prime is always an integer greater than $1$); thus, let us first
write down all elements of $\left\{  2,3,\ldots,30\right\}  $:%
\[%
\begin{array}
[c]{cccccccccc}
& 2 & 3 & 4 & 5 & 6 & 7 & 8 & 9 & 10\\
11 & 12 & 13 & 14 & 15 & 16 & 17 & 18 & 19 & 20\\
21 & 22 & 23 & 24 & 25 & 26 & 27 & 28 & 29 & 30
\end{array}
.
\]
(We are using a table just in order to fit these elements on a page.)

We now plan to remove non-prime numbers from this table until only primes are left.

\textit{Step 2:} First, let us remove all multiples of $2$ that are larger
than $2$ from our table, because none of them is a prime (see Example
\ref{exa.ent.primes.1} \textbf{(c)}). We thus are left with%
\[%
\begin{array}
[c]{cccccccccc}
& 2 & 3 &  & 5 &  & 7 &  & 9 & \\
11 &  & 13 &  & 15 &  & 17 &  & 19 & \\
21 &  & 23 &  & 25 &  & 27 &  & 29 &
\end{array}
.
\]


\textit{Step 3:} Next, let us remove all multiples of $3$ that are larger than
$3$ from our table, because none of them is a prime (see Example
\ref{exa.ent.primes.1} \textbf{(d)}). We thus are left with%
\[%
\begin{array}
[c]{cccccccccc}
& 2 & 3 &  & 5 &  & 7 &  &  & \\
11 &  & 13 &  &  &  & 17 &  & 19 & \\
&  & 23 &  & 25 &  &  &  & 29 &
\end{array}
.
\]
(Note that some of these multiples have already been removed in Step 2.)

\textit{Step 4:} Next, let us remove all multiples of $4$ that are larger than
$4$ from our table, because none of them is a prime (for similar reasons). It
turns out that this does not change the table at all, because all such
multiples have already been removed in Step 2. This is not a coincidence:
Since $4$ itself has been removed, we know that $4$ was a multiple of some
number $d<4$ (in this case, $d=2$) whose multiples have been removed;
therefore, all multiples of $4$ are also multiples of $d$ and thus have been
removed along with $4$.

\textit{Step 5:} Next, let us remove all multiples of $5$ that are larger than
$5$ from our table, because none of them is a prime (for similar reasons). We
thus are left with%
\[%
\begin{array}
[c]{cccccccccc}
& 2 & 3 &  & 5 &  & 7 &  &  & \\
11 &  & 13 &  &  &  & 17 &  & 19 & \\
&  & 23 &  &  &  &  &  & 29 &
\end{array}
.
\]


\textit{Step 6:} Next, let us remove all multiples of $6$ that are larger than
$6$ from our table, because none of them is a prime. Just as Step 4, this does
not change the table, since all such multiples have already been removed in
Step 2.

\textit{Step 7:} Next, let us remove all multiples of $7$ that are larger than
$7$ from our table, because none of them is a prime. Again, this does not
change the table, since all such multiples have already been removed.

Proceed likewise until Step 30, at which point the table has become%
\[%
\begin{array}
[c]{cccccccccc}
& 2 & 3 &  & 5 &  & 7 &  &  & \\
11 &  & 13 &  &  &  & 17 &  & 19 & \\
&  & 23 &  &  &  &  &  & 29 &
\end{array}
.
\]
(You are reading it right: None of the steps from Step 6 to Step 30 causes any
changes to the table, since all multiples that these steps attempt to remove
have already been removed beforehand.)

The resulting table has the following property: If $p$ is an element of this
table, then $p$ cannot be a multiple of any $d\in\left\{  2,3,\ldots
,p-1\right\}  $ (because if it was such a multiple, then it would have been
removed from the table in Step $d$ or earlier). In other words, if $p$ is an
element of this table, then $p$ cannot have any divisor $d\in\left\{
2,3,\ldots,p-1\right\}  $. In other words, if $p$ is an element of this table,
then the only positive divisors of $p$ are $1$ and $p$. In other words, if $p$
is an element of this table, then $p$ is prime. Conversely, any prime $\leq30$
is in our table, since the only numbers we have removed from the table were
guaranteed to be non-prime. Thus, the table now contains all the primes
$\leq30$ and only them. So we conclude that the primes $\leq30$ are
$2,3,5,7,11,13,17,19,23,29$.

This method of finding primes is known as the \textbf{sieve of Eratosthenes}.
We could have made it more efficient using the following two tricks:

\begin{itemize}
\item If a number $d\in\left\{  2,3,\ldots,30\right\}  $ has been removed from
the table before Step $d$, then we know immediately that Step $d$ will not
change the table (because all multiples of $d$ have already been removed
before this step). Thus, we do not need to make this step.

\item If $d\in\left\{  2,3,\ldots,30\right\}  $ satisfies $d^{2}>30$, then
Step $d$ will not change the table (because if $m\in\left\{  2,3,\ldots
,30\right\}  $ is a multiple of $d$ that is larger than $d$, then $m$ is also
a multiple of the integer $m/d$ as well (since $d\mid m$ and thus
$m/d\in\mathbb{Z}$ and of course $m/d\mid m$), and therefore $m$ has already
been removed in Step $m/d$ (which has already happened before Step $d$
(because $d^{2}>30\geq m$ and therefore $d>m/d$)). Thus, we only need to take
the Steps $d$ with $d^{2}\leq30$.
\end{itemize}

Together, these tricks tell us that the only steps we need to take are the
Steps 2, 3 and 5.
\end{example}

\begin{center}
\textbf{2019-02-11 lecture}
\end{center}

\subsubsection{Basic properties of primes}

\begin{proposition}
\label{prop.ent.primes.each-i-coprime}Let $p$ be a prime. Then, each
$i\in\left\{  1,2,\ldots,p-1\right\}  $ is coprime to $p$.
\end{proposition}

\begin{proof}
[Proof of Proposition \ref{prop.ent.primes.each-i-coprime}.]Let $i\in\left\{
1,2,\ldots,p-1\right\}  $. We must prove that $i$ is coprime to $p$.

From $i\in\left\{  1,2,\ldots,p-1\right\}  $, we obtain $1\leq i\leq p-1$ and
thus $i\geq1>0$, so that $i\neq0$. Hence, $i$ and $p$ are not all zero. Also,
$\left\vert i\right\vert =i$ (since $i>0$).

Also, $\gcd\left(  i,p\right)  $ is a positive integer (since $i$ and $p$ are
not all zero). Thus, $\left\vert \gcd\left(  i,p\right)  \right\vert
=\gcd\left(  i,p\right)  $.

Proposition \ref{prop.ent.gcd.props1} \textbf{(f)} (applied to $a=i$ and
$b=p$) shows that $\gcd\left(  i,p\right)  \mid i$ and $\gcd\left(
i,p\right)  \mid p$. From $\gcd\left(  i,p\right)  \mid i$ and $i\neq0$, we
obtain $\left\vert \gcd\left(  i,p\right)  \right\vert \leq\left\vert
i\right\vert $ (by Exercise \ref{prop.ent.div.1} \textbf{(b)}, applied to
$a=\gcd\left(  i,p\right)  $ and $b=i$). In view of $\left\vert \gcd\left(
i,p\right)  \right\vert =\gcd\left(  i,p\right)  $ and $\left\vert
i\right\vert =i$, this rewrites as $\gcd\left(  i,p\right)  \leq i$. Hence,
$\gcd\left(  i,p\right)  \leq i\leq p-1<p$ and therefore $\gcd\left(
i,p\right)  \neq p$.

We know that $p$ is prime. In other words, the only positive divisors of $p$
are $1$ and $p$ (by the definition of \textquotedblleft
prime\textquotedblright).

The integer $\gcd\left(  i,p\right)  $ is a positive divisor of $p$ (since
$\gcd\left(  i,p\right)  $ is positive and satisfies $\gcd\left(  i,p\right)
\mid p$), and thus must be either $1$ or $p$ (since the only positive divisors
of $p$ are $1$ and $p$). Since we know that $\gcd\left(  i,p\right)  \neq p$,
we thus conclude that $\gcd\left(  i,p\right)  =1$. In other words, $i$ is
coprime to $p$ (by the definition of \textquotedblleft
coprime\textquotedblright). This proves Proposition
\ref{prop.ent.primes.each-i-coprime}.
\end{proof}

Note that this proposition characterizes primes: If $p>1$ is an integer such
that each $i\in\left\{  1,2,\ldots,p-1\right\}  $ is coprime to $p$, then $p$
is prime. (The proof of this is left as an easy exercise.)

\begin{proposition}
\label{prop.ent.primes.div-or-coprime}Let $p$ be a prime. Let $a\in\mathbb{Z}%
$. Then, either $p\mid a$ or $p\perp a$.
\end{proposition}

\begin{proof}
[Proof of Proposition \ref{prop.ent.primes.div-or-coprime}.]Assume the
contrary. Thus, neither $p\mid a$ nor $p\perp a$.

We know that $p$ is prime. In other words, $p$ is an integer greater than $1$
such that the only positive divisors of $p$ are $1$ and $p$ (by the definition
of \textquotedblleft prime\textquotedblright).

In particular, $p$ is greater than $1$. Hence, $p>1>0$, so that $p\neq0$.
Hence, $a$ and $p$ are not all zero. Thus, $\gcd\left(  a,p\right)  $ is a
positive integer.

Proposition \ref{prop.ent.gcd.props1} \textbf{(f)} (applied to $b=p$) shows
that $\gcd\left(  a,p\right)  \mid a$ and $\gcd\left(  a,p\right)  \mid p$. If
we had $\gcd\left(  a,p\right)  =p$, then we would obtain $p=\gcd\left(
a,p\right)  \mid a$, which would contradict the fact that we do not have
$p\mid a$. Hence, we cannot have $\gcd\left(  a,p\right)  =p$. In other words,
we have $\gcd\left(  a,p\right)  \neq p$.

The integer $\gcd\left(  a,p\right)  $ is a positive divisor of $p$ (since
$\gcd\left(  a,p\right)  $ is positive and satisfies $\gcd\left(  a,p\right)
\mid p$), and thus must be either $1$ or $p$ (since the only positive divisors
of $p$ are $1$ and $p$). Since we know that $\gcd\left(  a,p\right)  \neq p$,
we thus conclude that $\gcd\left(  a,p\right)  =1$. But Proposition
\ref{prop.ent.gcd.props1} \textbf{(b)} (applied to $b=p$) yields $\gcd\left(
a,p\right)  =\gcd\left(  p,a\right)  $. Thus, $\gcd\left(  p,a\right)
=\gcd\left(  a,p\right)  =1$. In other words, $p$ is coprime to $a$ (by the
definition of \textquotedblleft coprime\textquotedblright). In other words,
$p\perp a$. This contradicts the fact that we don't have $p\perp a$.

This contradiction shows that our assumption was false. Hence, Proposition
\ref{prop.ent.primes.div-or-coprime} is proven.
\end{proof}

We note that a converse of Proposition \ref{prop.ent.primes.div-or-coprime}
holds as well: If $p>1$ is an integer such that each $a\in\mathbb{Z}$
satisfies either $p\mid a$ or $p\perp a$, then $p$ is a prime. This is easy to
prove and left to the reader.

\begin{theorem}
\label{thm.ent.primes.pab}Let $p$ be a prime. Let $a,b\in\mathbb{Z}$ such that
$p\mid ab$. Then, $p\mid a$ or $p\mid b$.
\end{theorem}

\begin{proof}
[Proof of Theorem \ref{thm.ent.primes.pab}.]Assume the contrary. Thus, neither
$p\mid a$ nor $p\mid b$.

Proposition \ref{prop.ent.primes.div-or-coprime} yields that either $p\mid a$
or $p\perp a$. Hence, $p\perp a$ (since $p\mid a$ does not hold). But $p\mid
ab$. Hence, Theorem \ref{thm.ent.coprime.cancel} (applied to $p$, $a$ and $b$
instead of $a$, $b$ and $c$) yields $p\mid b$. This contradicts the fact that
we don't have $p\mid b$.

This contradiction shows that our assumption was false. Hence, Theorem
\ref{thm.ent.primes.pab} is proven.
\end{proof}

Again, Theorem \ref{thm.ent.primes.pab} has a converse:

\begin{exercise}
\label{exe.ent.primes.pab-conv}Let $p>1$ be an integer. Assume that for every
$a,b\in\mathbb{Z}$ satisfying $p\mid ab$, we must have $p\mid a$ or $p\mid b$.
Prove that $p$ is prime.
\end{exercise}

There is also a version of Theorem \ref{thm.ent.primes.pab} for products of
multiple integers:

\begin{proposition}
\label{prop.ent.primes.pabk}Let $p$ be a prime. Let $a_{1},a_{2},\ldots,a_{k}$
be integers such that $p\mid a_{1}a_{2}\cdots a_{k}$. Then, $p\mid a_{i}$ for
some $i\in\left\{  1,2,\ldots,k\right\}  $.
\end{proposition}

We could prove Proposition \ref{prop.ent.primes.pabk} by induction on $k$. But
here is a more direct argument:

\begin{fineprint}
\begin{proof}
[Proof of Proposition \ref{prop.ent.primes.pabk}.]Assume the contrary. Thus,
there exists no $i\in\left\{  1,2,\ldots,k\right\}  $ such that $p\mid a_{i}$.
In other words, for each $i\in\left\{  1,2,\ldots,k\right\}  $, we have%
\begin{equation}
\left(  \text{not }p\mid a_{i}\right)  . \label{pf.prop.ent.primes.pabk.1}%
\end{equation}


Now, let $i\in\left\{  1,2,\ldots,k\right\}  $. Then, we don't have $p\mid
a_{i}$ (by (\ref{pf.prop.ent.primes.pabk.1})). But Proposition
\ref{prop.ent.primes.div-or-coprime} (applied to $a=a_{i}$) shows that either
$p\mid a_{i}$ or $p\perp a_{i}$. Hence, we have $p\perp a_{i}$ (since we don't
have $p\mid a_{i}$). In other words, $a_{i}\perp p$ (by Proposition
\ref{prop.ent.coprime.perp-symm}).

Now, forget that we fixed $i$. We thus have proven that each $i\in\left\{
1,2,\ldots,k\right\}  $ satisfies $a_{i}\perp p$. Hence, Exercise
\ref{exe.ent.coprime.ab-to-ck} (applied to $c=p$) yields $a_{1}a_{2}\cdots
a_{k}\perp p$. In other words, $a_{1}a_{2}\cdots a_{k}$ is coprime to $p$. In
other words, $\gcd\left(  a_{1}a_{2}\cdots a_{k},p\right)  =1$. Hence,
Proposition \ref{prop.ent.gcd.props1} \textbf{(b)} yields $\gcd\left(
p,a_{1}a_{2}\cdots a_{k}\right)  =\gcd\left(  a_{1}a_{2}\cdots a_{k},p\right)
=1$.

But $p$ is prime; thus, $p>1$. Hence, $p$ is positive. Recall that $p\mid
a_{1}a_{2}\cdots a_{k}$; thus, Proposition \ref{prop.ent.gcd.props1}
\textbf{(i)} (applied to $a=p$ and $b=a_{1}a_{2}\cdots a_{k}$) yields
$\gcd\left(  p,a_{1}a_{2}\cdots a_{k}\right)  =\left\vert p\right\vert =p$
(since $p$ is positive). Comparing this with $\gcd\left(  p,a_{1}a_{2}\cdots
a_{k}\right)  =1$, we obtain $p=1$. This contradicts $p>1$. This contradiction
shows that our assumption was wrong. This proves Proposition
\ref{prop.ent.primes.pabk}.
\end{proof}
\end{fineprint}

\begin{exercise}
\label{exe.ent.primes.coprime-to-pk}Let $p$ be a prime. Let $k$ be a positive
integer. Let $a\in\mathbb{Z}$. Prove that $a\perp p^{k}$ holds if and only if
$p\nmid a$.
\end{exercise}

\subsubsection{Prime factorization I}

The next simple proposition says that every integer $n>1$ is divisible by at
least one prime:

\begin{proposition}
\label{prop.ent.primes.ex-pri-div}Let $n>1$ be an integer. Then, there exists
at least one prime $p$ such that $p\mid n$.
\end{proposition}

\begin{proof}
[Proof of Proposition \ref{prop.ent.primes.ex-pri-div}.]Clearly, $n$ is a
divisor of $n$ such that $n>1$. Thus, there exists a divisor $q$ of $n$ such
that $q>1$ (namely, $q=n$). Let $d$ be the \textbf{smallest} such
divisor\footnote{This exists, because the set of possible candidates is
nonempty (by the previous sentence) and finite.}. Thus, $d$ is a divisor of
$n$ and satisfies $d>1$. The integer $d$ is positive (since $d>1>0$) and
satisfies $d\mid n$ (since $d$ is a divisor of $n$).

We claim that $d$ is a prime.

\begin{fineprint}
[\textit{Proof:} Let $e$ be any positive divisor of $d$. Assume (for the sake
of contradiction) that $e\notin\left\{  1,d\right\}  $. Thus, $e\neq1$ and
$e\neq d$. Now, $e$ is a divisor of $d$; thus, $e\mid d\mid n$. In other
words, $e$ is a divisor of $n$. Also, $e>1$ (because $e$ is positive and
$e\neq1$). Hence, $e$ is a divisor $q$ of $n$ such that $q>1$.

But $d$ was defined as the \textbf{smallest} divisor $q$ of $n$ such that
$q>1$. Hence, any such divisor is $\geq d$. In other words, any divisor $q$ of
$n$ such that $q>1$ must satisfy $q\geq d$. Applying this to $q=e$, we
conclude that $e\geq d$ (since $e$ is a divisor $q$ of $n$ such that $q>1$).
Combined with $e\neq d$, this yields $e>d$.

But $e\mid d$ and $d\neq0$ (since $d>1>0$). Hence, $\left\vert e\right\vert
\leq\left\vert d\right\vert $ (by Exercise \ref{prop.ent.div.1} \textbf{(b)},
applied to $a=e$ and $b=d$). Since $e$ is positive, we have $\left\vert
e\right\vert =e$, so that $e=\left\vert e\right\vert \leq\left\vert
d\right\vert =d$ (since $d$ is positive). This contradicts $e>d$. This
contradiction shows that our assumption (that $e\notin\left\{  1,d\right\}  $)
was false. Thus, we have proven that $e\in\left\{  1,d\right\}  $. In other
worde, $e$ is either $1$ or $d$.

Now, forget that we fixed $e$. We thus have proven that if $e$ is any positive
divisor of $d$, then $e\in\left\{  1,d\right\}  $. In other words, any
positive divisor of $d$ is either $1$ or $d$. Thus, the only positive divisors
of $d$ are $1$ and $d$ (since $1$ and $d$ clearly \textbf{are} positive
divisors of $d$). In other words, $d$ is prime (by the definition of
\textquotedblleft prime\textquotedblright).]
\end{fineprint}

So we know that $d\mid n$, and that $d$ is prime. Hence, there exists at least
one prime $p$ such that $p\mid n$ (namely, $p=d$). This proves Proposition
\ref{prop.ent.primes.ex-pri-div}.
\end{proof}

\begin{definition}
Let $n$ be an integer. A \textit{prime factor} of $n$ means a prime $p$ such
that $p\mid n$. Some say \textquotedblleft prime divisor\textquotedblright%
\ instead of \textquotedblleft prime factor\textquotedblright.
\end{definition}

Thus, Proposition \ref{prop.ent.primes.ex-pri-div} says that each integer
$n>1$ has at least one prime divisor.

\begin{proposition}
\label{prop.ent.primes.fac-ex}Let $n$ be a positive integer. Then, $n$ can be
written as a product of finitely many primes.
\end{proposition}

\begin{example}
\label{exa.ent.primes.fac-ex}\textbf{(a)} The integer $60$ can be written as a
product of four primes: namely, $60=2\cdot2\cdot3\cdot5$.

\textbf{(b)} The integer $1$ is the product of $0$ many primes (because a
product of $0$ many primes is the empty product, which is defined to be $1$).
\end{example}

\begin{proof}
[Proof of Proposition \ref{prop.ent.primes.fac-ex}.]We shall prove Proposition
\ref{prop.ent.primes.fac-ex} by strong induction on $n$. Thus, we fix a
positive integer $N$, and we assume (as the induction hypothesis) that
Proposition \ref{prop.ent.primes.fac-ex} holds whenever $n<N$. We must now
prove that Proposition \ref{prop.ent.primes.fac-ex} holds for $n=N$. In other
words, we must prove that $N$ can be written as a product of finitely many primes.

If $N=1$, then this is obvious (because $1$ is a product of $0$ many
primes\footnote{See Example \ref{exa.ent.primes.fac-ex} \textbf{(b)}.}). Thus,
for the rest of this proof, we WLOG assume that $N\neq1$. Hence, $N>1$ (since
$N$ is a positive integer). Therefore, Proposition
\ref{prop.ent.primes.ex-pri-div} (applied to $n=N$) shows that there exists at
least one prime $p$ such that $p\mid N$. Consider this $p$.

We have $p\mid N$. In other words, there exists an integer $c$ such that
$N=pc$. Consider this $c$. We have $p>1$ (since $p$ is prime); thus, $p$ is
positive. Hence, $p\neq0$. Thus, solving the equality $N=pc$ for $c$, we find
$c=N/\underbrace{p}_{>1}<N/1$ (since $N$ is positive), so that $c<N/1=N$. But
our induction hypothesis says that Proposition \ref{prop.ent.primes.fac-ex}
holds whenever $n<N$. Hence, we can apply Proposition
\ref{prop.ent.primes.fac-ex} to $n=c$ (since $c<N$). We thus conclude that $c$
can be written as a product of finitely many primes. In other words, there
exist primes $q_{1},q_{2},\ldots,q_{k}$ such that $c=q_{1}q_{2}\cdots q_{k}$.
Consider these $q_{1},q_{2},\ldots,q_{k}$.

But%
\[
N=p\underbrace{c}_{=q_{1}q_{2}\cdots q_{k}}=pq_{1}q_{2}\cdots q_{k}.
\]
Hence, $N$ can be written as a product of finitely many primes (namely, of the
primes $p,q_{1},q_{2},\ldots,q_{k}$). In other words, Proposition
\ref{prop.ent.primes.fac-ex} holds for $n=N$. This completes the induction
step. Hence, Proposition \ref{prop.ent.primes.fac-ex} is proven by strong induction.
\end{proof}

Proposition \ref{prop.ent.primes.fac-ex} shows that every positive integer $n$
can be represented as a product of finitely many primes. Such a representation
-- or, more precisely, the list of the primes it contains -- will be called
the \textit{prime factorization} of $n$. Rigorously speaking, this means that
we make the following definition:

\begin{definition}
Let $n$ be a positive integer. A \textit{prime factorization} of $n$ means a
tuple $\left(  p_{1},p_{2},\ldots,p_{k}\right)  $ of primes such that
$n=p_{1}p_{2}\cdots p_{k}$.
\end{definition}

Keep in mind that \textquotedblleft tuple\textquotedblright\ always means
\textquotedblleft ordered tuple\textquotedblright\ unless we say otherwise.

\begin{example}
\textbf{(a)} The prime factorizations of $12$ are%
\[
\left(  2,2,3\right)  ,\ \ \ \ \ \ \ \ \ \ \left(  2,3,2\right)
,\ \ \ \ \ \ \ \ \ \ \left(  3,2,2\right)  .
\]
Indeed, these three $3$-tuples are prime factorizations of $12$ because
$12=2\cdot2\cdot3=2\cdot3\cdot2=3\cdot2\cdot2$. It is not hard to check that
they are the only prime factorizations of $12$.

\textbf{(b)} If $p$ is a prime, then the only prime factorization of $p$ is
the $1$-tuple $\left(  p\right)  $.

\textbf{(c)} If $p$ is a prime and $i\in\mathbb{N}$, then the only prime
factorization of $p^{i}$ is the $i$-tuple $\left(  \underbrace{p,p,\ldots
,p}_{i\text{ times}}\right)  $. This is not quite obvious at this point
(though it is not hard to derive from Proposition \ref{prop.ent.primes.pabk}).

\textbf{(d)} The only prime factorization of $1$ is the $0$-tuple $\left(
{}\right)  $.
\end{example}

This example suggests that all prime factorizations of a given positive
integer $n$ are equal to each other up to the order of their entries (i.e.,
are permutations of each other). This is indeed true, and we are going to
prove this soon (in Theorem \ref{thm.ent.primes.fac-uni} below).

\subsubsection{Permutations}

First of all: what is a \textquotedblleft permutation\textquotedblright, and
what exactly does \textquotedblleft equal to each other up to the order of
their entries\textquotedblright\ mean?

Informally speaking, a permutation of a tuple\footnote{Recall: a prime
factorization is a tuple.} $\left(  a_{1},a_{2},\ldots,a_{k}\right)  $ is a
tuple obtained from $\left(  a_{1},a_{2},\ldots,a_{k}\right)  $ by rearranging
its entries (without inserting new entries, or removing or duplicating
existing entries). To be rigorous, we need to encode this rearrangement via a
bijective map $\sigma:\left\{  1,2,\ldots,k\right\}  \rightarrow\left\{
1,2,\ldots,k\right\}  $ which will tell us which entry of our original tuple
will go to which position in the rearranged tuple. Such bijective maps, too,
are called permutations -- but permutations of sets, not of tuples. So let us
first define permutations of a set, and then use this to define permutations
of a tuple:

\begin{definition}
\label{def.comb.tuples.perm-set}Let $A$ be a set. A \textit{permutation} of
$A$ means a bijective map $A\rightarrow A$.
\end{definition}

\begin{example}
\textbf{(a)} The map $\left\{  1,2,3,4\right\}  \rightarrow\left\{
1,2,3,4\right\}  $ that sends $1,2,3,4$ to $3,1,4,2$ (respectively) is a
permutation of $\left\{  1,2,3,4\right\}  $.

\textbf{(b)} The map $\left\{  1,2,3\right\}  \rightarrow\left\{
1,2,3\right\}  $ that sends $1,2,3$ to $2,3,1$ (respectively) is a permutation
of $\left\{  1,2,3\right\}  $.

\textbf{(c)} For each set $A$, the identity map $\operatorname*{id}%
:A\rightarrow A$ is a permutation of $A$.
\end{example}

Thus, we have defined permutations of a set. We shall later study such
permutations in more detail, at least for finite sets $A$.

Now we can define permutations of a tuple:

\begin{definition}
\label{def.comb.tuples.perm-tup}Let $\left(  p_{1},p_{2},\ldots,p_{k}\right)
$ be a $k$-tuple. A \textit{permutation} of $\left(  p_{1},p_{2},\ldots
,p_{k}\right)  $ means a $k$-tuple of the form $\left(  p_{\sigma\left(
1\right)  },p_{\sigma\left(  2\right)  },\ldots,p_{\sigma\left(  k\right)
}\right)  $ where $\sigma$ is a permutation of the set $\left\{
1,2,\ldots,k\right\}  $. A \textit{permutation} of $\left(  p_{1},p_{2}%
,\ldots,p_{k}\right)  $ is also known as a \textit{rearrangement} of $\left(
p_{1},p_{2},\ldots,p_{k}\right)  $.
\end{definition}

\begin{example}
\textbf{(a)} The $4$-tuple $\left(  1,3,1,2\right)  $ is a permutation of the
$4$-tuple $\left(  3,2,1,1\right)  $. In fact, if we denote the $4$-tuple
$\left(  3,2,1,1\right)  $ by $\left(  p_{1},p_{2},p_{3},p_{4}\right)  $, then
there exists a permutation $\sigma$ of the set $\left\{  1,2,3,4\right\}  $
such that $\left(  1,3,1,2\right)  =\left(  p_{\sigma\left(  1\right)
},p_{\sigma\left(  2\right)  },p_{\sigma\left(  3\right)  },p_{\sigma\left(
4\right)  }\right)  $. (Actually, there exist two such permutations $\sigma$:
One of them sends $1,2,3,4$ to $3,1,4,2$, while the other sends $1,2,3,4$ to
$4,1,3,2$.)

\textbf{(b)} Any $k$-tuple is a permutation of itself. Indeed, if $\left(
p_{1},p_{2},\ldots,p_{k}\right)  $ is any $k$-tuple, then $\left(  p_{1}%
,p_{2},\ldots,p_{k}\right)  =\left(  p_{\sigma\left(  1\right)  }%
,p_{\sigma\left(  2\right)  },\ldots,p_{\sigma\left(  k\right)  }\right)  $ if
we let $\sigma$ be the identity map $\operatorname*{id}:\left\{
1,2,\ldots,k\right\}  \rightarrow\left\{  1,2,\ldots,k\right\}  $.
\end{example}

The following fact is easy and fundamental:

\begin{proposition}
\label{prop.comb.tuples.perm.symm}Let $\left(  p_{1},p_{2},\ldots
,p_{k}\right)  $ be a $k$-tuple. If $\left(  q_{1},q_{2},\ldots,q_{k}\right)
$ is a permutation of $\left(  p_{1},p_{2},\ldots,p_{k}\right)  $, then
$\left(  p_{1},p_{2},\ldots,p_{k}\right)  $ is a permutation of $\left(
q_{1},q_{2},\ldots,q_{k}\right)  $.
\end{proposition}

\begin{proof}
[Proof of Proposition \ref{prop.comb.tuples.perm.symm}.]If you don't insist on
formalization, this is obvious: Any rearrangement of the entries of a
$k$-tuple can be undone by another rearrangement (which places the entries
back in their old positions). Thus, $\left(  p_{1},p_{2},\ldots,p_{k}\right)
$ can be obtained from $\left(  q_{1},q_{2},\ldots,q_{k}\right)  $ by
rearranging the entries.

\begin{fineprint}
Here is a formal proof:

Assume that $\left(  q_{1},q_{2},\ldots,q_{k}\right)  $ is a permutation of
$\left(  p_{1},p_{2},\ldots,p_{k}\right)  $. In other words, the $k$-tuple
$\left(  q_{1},q_{2},\ldots,q_{k}\right)  $ has the form $\left(
p_{\sigma\left(  1\right)  },p_{\sigma\left(  2\right)  },\ldots
,p_{\sigma\left(  k\right)  }\right)  $ for some permutation $\sigma$ of the
set $\left\{  1,2,\ldots,k\right\}  $ (by Definition
\ref{def.comb.tuples.perm-tup}). Consider this $\sigma$, and denote it by
$\tau$. Thus, $\tau$ is a permutation of the set $\left\{  1,2,\ldots
,k\right\}  $ and has the property that $\left(  q_{1},q_{2},\ldots
,q_{k}\right)  =\left(  p_{\tau\left(  1\right)  },p_{\tau\left(  2\right)
},\ldots,p_{\tau\left(  k\right)  }\right)  $.

Now, $\tau$ is a permutation of the set $\left\{  1,2,\ldots,k\right\}  $. In
other words, $\tau$ is a bijective map $\left\{  1,2,\ldots,k\right\}
\rightarrow\left\{  1,2,\ldots,k\right\}  $ (by Definition
\ref{def.comb.tuples.perm-set}). So the map $\tau$ is bijective, hence
invertible. Thus, its inverse $\tau^{-1}$ is well-defined and is also
invertible\footnote{And its inverse is $\left(  \tau^{-1}\right)  ^{-1}=\tau
$.}, hence bijective. So we know that $\tau^{-1}$ is a bijective map $\left\{
1,2,\ldots,k\right\}  \rightarrow\left\{  1,2,\ldots,k\right\}  $. In other
words, $\tau^{-1}$ is a permutation of the set $\left\{  1,2,\ldots,k\right\}
$ (by Definition \ref{def.comb.tuples.perm-set}).

We have $\left(  q_{1},q_{2},\ldots,q_{k}\right)  =\left(  p_{\tau\left(
1\right)  },p_{\tau\left(  2\right)  },\ldots,p_{\tau\left(  k\right)
}\right)  $. In other words,
\begin{equation}
q_{i}=p_{\tau\left(  i\right)  }\ \ \ \ \ \ \ \ \ \ \text{for each }%
i\in\left\{  1,2,\ldots,k\right\}  . \label{pf.prop.comb.tuples.perm.symm.1}%
\end{equation}
Hence, for each $j\in\left\{  1,2,\ldots,k\right\}  $, we have%
\begin{align*}
q_{\tau^{-1}\left(  j\right)  }  &  =p_{\tau\left(  \tau^{-1}\left(  j\right)
\right)  }\ \ \ \ \ \ \ \ \ \ \left(  \text{by
(\ref{pf.prop.comb.tuples.perm.symm.1}), applied to }i=\tau^{-1}\left(
j\right)  \right) \\
&  =p_{j}\ \ \ \ \ \ \ \ \ \ \left(  \text{since }\tau\left(  \tau^{-1}\left(
j\right)  \right)  =j\right)  .
\end{align*}
In other words, $\left(  q_{\tau^{-1}\left(  1\right)  },q_{\tau^{-1}\left(
2\right)  },\ldots,q_{\tau^{-1}\left(  k\right)  }\right)  =\left(
p_{1},p_{2},\ldots,p_{k}\right)  $. Hence, the $k$-tuple $\left(  p_{1}%
,p_{2},\ldots,p_{k}\right)  $ has the form $\left(  q_{\sigma\left(  1\right)
},q_{\sigma\left(  2\right)  },\ldots,q_{\sigma\left(  k\right)  }\right)  $
for some permutation $\sigma$ of the set $\left\{  1,2,\ldots,k\right\}  $
(namely, $\sigma=\tau^{-1}$). In other words, the $k$-tuple $\left(
p_{1},p_{2},\ldots,p_{k}\right)  $ is a permutation of the $k$-tuple $\left(
q_{1},q_{2},\ldots,q_{k}\right)  $ (by Definition
\ref{def.comb.tuples.perm-tup}). This proves Proposition
\ref{prop.comb.tuples.perm.symm}.
\end{fineprint}
\end{proof}

Now, we can say what we mean when we say that two tuples differ only in the
order of their entries:

\begin{definition}
We say that two tuples \textit{differ only in the order of their entries} if
they are permutations of each other.
\end{definition}

The next lemma that we shall use is a basic fact from elementary combinatorics:

\begin{lemma}
\label{lem.comb.tuples.mult=perm}Let $P$ be a set. Let $\left(  a_{1}%
,a_{2},\ldots,a_{k}\right)  $ and $\left(  b_{1},b_{2},\ldots,b_{\ell}\right)
$ be two tuples of elements of $P$. Assume that for each $p\in P$, we have%
\begin{align}
&  \left(  \text{the number of times }p\text{ appears in }\left(  a_{1}%
,a_{2},\ldots,a_{k}\right)  \right) \nonumber\\
&  =\left(  \text{the number of times }p\text{ appears in }\left(  b_{1}%
,b_{2},\ldots,b_{\ell}\right)  \right)  .
\label{eq.lem.comb.tuples.mult=perm.ass}%
\end{align}
Then, the two tuples $\left(  a_{1},a_{2},\ldots,a_{k}\right)  $ and $\left(
b_{1},b_{2},\ldots,b_{\ell}\right)  $ differ only in the order of their
entries (i.e., are permutations of each other). (In other words, we have
$k=\ell$, and there exists a permutation$\ \sigma$ of the set $\left\{
1,2,\ldots,\ell\right\}  $ such that $\left(  a_{1},a_{2},\ldots,a_{k}\right)
=\left(  b_{\sigma\left(  1\right)  },b_{\sigma\left(  2\right)  }%
,\ldots,b_{\sigma\left(  \ell\right)  }\right)  $.)
\end{lemma}

Lemma \ref{lem.comb.tuples.mult=perm} is an intuitively obvious fact: It says
that if two tuples (of any objects -- e.g., numbers) have the property that
any object occurs as often in the first tuple as it does in the second tuple,
then the two tuples differ only in the order of their entries. From the formal
point of view, though, it is a statement that needs proof. Let us merely
sketch how such a proof can be obtained, without going into the details:

\begin{fineprint}
\begin{proof}
[Proof of Lemma \ref{lem.comb.tuples.mult=perm} (sketched).]We can WLOG assume
that the set $P$ is finite (since otherwise, we can replace $P$ by the finite
subset $\left\{  a_{1},a_{2},\ldots,a_{k},b_{1},b_{2},\ldots,b_{\ell}\right\}
$, without breaking the assumption that $\left(  a_{1},a_{2},\ldots
,a_{k}\right)  $ and $\left(  b_{1},b_{2},\ldots,b_{\ell}\right)  $ are two
tuples of elements of $P$). Assume this (at least if you don't want to use the
Axiom of Choice\footnote{I don't.}).

For each $p\in P$, define two sets%
\begin{align*}
A_{p}  &  =\left\{  i\in\left\{  1,2,\ldots,k\right\}  \ \mid\ a_{i}%
=p\right\}  ;\\
B_{p}  &  =\left\{  j\in\left\{  1,2,\ldots,\ell\right\}  \ \mid
\ b_{j}=p\right\}  .
\end{align*}
The equation (\ref{eq.lem.comb.tuples.mult=perm.ass}) then says that
$\left\vert A_{p}\right\vert =\left\vert B_{p}\right\vert $ for each $p\in P$.
Hence, for each $p\in P$, there exists a bijection $\phi_{p}:A_{p}\rightarrow
B_{p}$ (because if two sets have the same size, then there exists a bijection
between them). Pick such a bijection $\phi_{p}$ for each $p\in P$. (This does
not require the Axiom of Choice, since $P$ is finite.)

Now, define a map $\sigma:\left\{  1,2,\ldots,k\right\}  \rightarrow\left\{
1,2,\ldots,\ell\right\}  $ as follows: For each $i\in\left\{  1,2,\ldots
,k\right\}  $, set $\sigma\left(  i\right)  =\phi_{p}\left(  i\right)  $,
where $p=a_{i}$. Thus, for each $p\in P$, the map $\sigma$ sends each $i\in
A_{p}$ to an element of $B_{p}$ (because if $i\in A_{p}$, then $a_{i}=p$, and
thus the definition of $\sigma$ yields $\sigma\left(  i\right)  =\phi
_{p}\left(  i\right)  \in B_{p}$.)

It is not hard to see that this map $\sigma$ is a bijection. (Its inverse map
sends each $j\in\left\{  1,2,\ldots,\ell\right\}  $ to $\phi_{p}^{-1}\left(
j\right)  $, where $p=b_{j}$.) Thus, we have found a bijection from $\left\{
1,2,\ldots,k\right\}  $ to $\left\{  1,2,\ldots,\ell\right\}  $. This shows
that the sets $\left\{  1,2,\ldots,k\right\}  $ and $\left\{  1,2,\ldots
,\ell\right\}  $ have the same size; in other words, $k=\ell$. Thus, the
bijection $\sigma$ is actually a bijection from $\left\{  1,2,\ldots
,\ell\right\}  $ to $\left\{  1,2,\ldots,\ell\right\}  $. In other words,
$\sigma$ is a permutation of the set $\left\{  1,2,\ldots,\ell\right\}  $.

Finally, it is easy to see that $\left(  a_{1},a_{2},\ldots,a_{k}\right)
=\left(  b_{\sigma\left(  1\right)  },b_{\sigma\left(  2\right)  }%
,\ldots,b_{\sigma\left(  \ell\right)  }\right)  $. (Indeed, let $i\in\left\{
1,2,\ldots,k\right\}  $, and set $p=a_{i}$; then, the definition of $\sigma$
yields $\sigma\left(  i\right)  =\phi_{p}\left(  i\right)  \in B_{p}$ and
therefore $b_{\sigma\left(  i\right)  }=a_{i}$. Since this holds for each $i$,
we thus conclude that $\left(  b_{\sigma\left(  1\right)  },b_{\sigma\left(
2\right)  },\ldots,b_{\sigma\left(  k\right)  }\right)  =\left(  a_{1}%
,a_{2},\ldots,a_{k}\right)  $. Thus, $\left(  a_{1},a_{2},\ldots,a_{k}\right)
=\left(  b_{\sigma\left(  1\right)  },b_{\sigma\left(  2\right)  }%
,\ldots,b_{\sigma\left(  k\right)  }\right)  =\left(  b_{\sigma\left(
1\right)  },b_{\sigma\left(  2\right)  },\ldots,b_{\sigma\left(  \ell\right)
}\right)  $ (since $k=\ell$).) Thus, we have found a permutation $\sigma$ of
the set $\left\{  1,2,\ldots,\ell\right\}  $ such that $\left(  a_{1}%
,a_{2},\ldots,a_{k}\right)  =\left(  b_{\sigma\left(  1\right)  }%
,b_{\sigma\left(  2\right)  },\ldots,b_{\sigma\left(  \ell\right)  }\right)
$. In other words, the two tuples $\left(  a_{1},a_{2},\ldots,a_{k}\right)  $
and $\left(  b_{1},b_{2},\ldots,b_{\ell}\right)  $ are permutations of each
other. This proves Lemma \ref{lem.comb.tuples.mult=perm}.
\end{proof}
\end{fineprint}

Lemma \ref{lem.comb.tuples.mult=perm} has a converse that is much simpler:

\begin{lemma}
\label{lem.comb.tuples.mult=perm.conv}Let $P$ be a set. Let $\left(
a_{1},a_{2},\ldots,a_{k}\right)  $ and $\left(  b_{1},b_{2},\ldots,b_{\ell
}\right)  $ be two tuples of elements of $P$. Assume that these two tuples
$\left(  a_{1},a_{2},\ldots,a_{k}\right)  $ and $\left(  b_{1},b_{2}%
,\ldots,b_{\ell}\right)  $ differ only in the order of their entries (i.e.,
are permutations of each other). Then, for each $p\in P$, we have%
\begin{align*}
&  \left(  \text{the number of times }p\text{ appears in }\left(  a_{1}%
,a_{2},\ldots,a_{k}\right)  \right) \\
&  =\left(  \text{the number of times }p\text{ appears in }\left(  b_{1}%
,b_{2},\ldots,b_{\ell}\right)  \right)  .
\end{align*}

\end{lemma}

We leave the proof of this lemma to the reader.

\subsubsection{$p$-valuations}

Now, let us come back to number theory. We first claim that a nonzero integer
$n$ can only be divisible by finitely many powers of a given prime $p$. More precisely:

\begin{lemma}
\label{lem.ent.prime.vp-wd}Let $p$ be a prime. Let $n$ be a nonzero integer.
Then, there exists a largest $m\in\mathbb{N}$ such that $p^{m}\mid n$.
\end{lemma}

\begin{proof}
[Proof of Lemma \ref{lem.ent.prime.vp-wd}.]We know that $p$ is a prime. Thus,
$p$ is an integer and $p>1$ (by the definition of a \textquotedblleft
prime\textquotedblright). This is all we shall need from our assumption that
$p$ is prime.

Let $W$ be the set of all $m\in\mathbb{N}$ satisfying $p^{m}\mid n$. Then, $W$
is a set of integers. Moreover, $0$ is an $m\in\mathbb{N}$ satisfying
$p^{m}\mid n$ (since $p^{0}=1\mid n$); in other words, $0\in W$ (by the
definition of $W$). Hence, the set $W$ is nonempty.

Let $u=\left\vert n\right\vert $. Thus, $u\in\mathbb{N}$.

It is easy to see that $p^{k}>k$ for each $k\in\mathbb{N}$%
\ \ \ \ \footnote{\textit{Proof.} This can easily be proven by induction on
$k$; but here is a more artful proof:
\par
Let $k\in\mathbb{N}$. We have $p\geq2$ (since $p$ is an integer and satisfies
$p>1$). Thus, $p-1\geq1$.
\par
Recall the identity (\ref{pf.lem.ent.xd-yd.1}), which holds for every
$a,b\in\mathbb{Q}$. Let us apply this identity to $a=p$ and $b=1$. We thus
obtain%
\[
\left(  p-1\right)  \left(  p^{k-1}+p^{k-2}\cdot1+p^{k-3}\cdot1^{2}%
+\cdots+p\cdot1^{k-2}+1^{k-1}\right)  =p^{k}-\underbrace{1^{k}}_{=1}=p^{k}-1.
\]
Thus,%
\begin{align*}
p^{k}-1  &  =\left(  p-1\right)  \underbrace{\left(  p^{k-1}+p^{k-2}%
\cdot1+p^{k-3}\cdot1^{2}+\cdots+p\cdot1^{k-2}+1^{k-1}\right)  }_{=\sum
_{i=0}^{k-1}p^{i}1^{k-i}}\\
&  =\underbrace{\left(  p-1\right)  }_{\geq1}\sum_{i=0}^{k-1}p^{i}1^{k-i}%
\geq1\sum_{i=0}^{k-1}p^{i}1^{k-i}\ \ \ \ \ \ \ \ \ \ \left(  \text{since }%
\sum_{i=0}^{k-1}p^{i}1^{k-i}\text{ is clearly }\geq0\right) \\
&  =\sum_{i=0}^{k-1}\underbrace{p^{i}1^{k-i}}_{\substack{=p^{i}\geq
1^{i}\\\text{(since }p\geq1\text{)}}}=\sum_{i=0}^{k-1}\underbrace{1^{i}}%
_{=1}=\sum_{i=0}^{k-1}1=k.
\end{align*}
Hence, $p^{k}\geq k+1>k$, qed.}. Thus, each $g\in W$ satisfies $g\in\left\{
0,1,\ldots,u-1\right\}  $\ \ \ \ \footnote{\textit{Proof.} Let $g\in W$. Thus,
$g$ is an $m\in\mathbb{N}$ satisfying $p^{m}\mid n$ (by the definition of
$W$). In other words, $g\in\mathbb{N}$ and $p^{g}\mid n$. Also, $n\neq0$
(since $n$ is nonzero). Hence, Proposition \ref{prop.ent.div.1} \textbf{(b)}
(applied to $a=p^{g}$ and $b=n$) yields $\left\vert p^{g}\right\vert
\leq\left\vert n\right\vert =u$. But $p$ is positive (since $p>1>0$); thus,
$p^{g}$ is positive. Hence, $\left\vert p^{g}\right\vert =p^{g}$. Thus,
$p^{g}=\left\vert p^{g}\right\vert \leq u$. But recall that $p^{k}>k$ for each
$k\in\mathbb{N}$. Applying this to $k=g$, we find $p^{g}>g$. Hence,
$g<p^{g}\leq u$, so that $g\in\left\{  0,1,\ldots,u-1\right\}  $ (since
$g\in\mathbb{N}$). Qed.}. In other words, $W\subseteq\left\{  0,1,\ldots
,u-1\right\}  $. Hence, the set $W$ is finite (since the set $\left\{
0,1,\ldots,u-1\right\}  $ is finite). Thus, $W$ is a finite nonempty set of
integers. Therefore, the set $W$ has a largest element. In view of how $W$ was
defined, this can be restated as follows: There exists a largest
$m\in\mathbb{N}$ such that $p^{m}\mid n$. This proves Lemma
\ref{lem.ent.prime.vp-wd}.
\end{proof}

\begin{definition}
\label{def.ent.prime.vp}Let $p$ be a prime.

\textbf{(a)} Let $n$ be a nonzero integer. Then, $v_{p}\left(  n\right)  $
shall denote the largest $m\in\mathbb{N}$ such that $p^{m}\mid n$. This is
well-defined (by Lemma \ref{lem.ent.prime.vp-wd}). This nonnegative integer
$v_{p}\left(  n\right)  $ will be called the $p$\textit{-valuation} (or the
$p$\textit{-adic valuation}) of $n$.

\textbf{(b)} We extend this definition of $v_{p}\left(  n\right)  $ to the
case of $n=0$ as follows: Set $v_{p}\left(  0\right)  =\infty$, where $\infty$
is a new symbol. This symbol $\infty$ is supposed to model \textquotedblleft
positive infinity\textquotedblright; in particular, we take it to satisfy the
following rules:

\begin{itemize}
\item We have $k+\infty=\infty+k=\infty$ for all integers $k$.

\item We have $\infty+\infty=\infty$.

\item Each integer $k$ satisfies $k<\infty$ and $\infty>k$ (and thus
$k\leq\infty$ and $\infty\geq k$).

\item No integer $k$ satisfies $k\geq\infty$ or $\infty\leq k$ (or $k>\infty$
or $\infty<k$).

\item If $S$ is a nonempty set of integers, then $\min\left(  S\cup\left\{
\infty\right\}  \right)  =\min S$ (provided that $\min S$ exists).

\item If $S$ is any set of integers, then $\max\left(  S\cup\left\{
\infty\right\}  \right)  =\infty$.
\end{itemize}

(Note, however, that $\infty$ is not supposed to be a \textquotedblleft first
class citizen\textquotedblright\ of the number system. In particular,
$\infty-\infty$ is not defined. More generally, $k-\infty$ is never defined,
whatever $k$ is. Indeed, any definition of $k-\infty$ would break some of the
familiar rules of arithmetic. The only operations that we shall subject
$\infty$ to are addition, minimum and maximum.)
\end{definition}

Note that the rules for the symbol $\infty$ yield that%
\[
k+\infty=\infty+k=\max\left\{  k,\infty\right\}  =\infty
\]
and%
\[
\min\left\{  k,\infty\right\}  =k
\]
for each $k\in\mathbb{Z}\cup\left\{  \infty\right\}  $. It is not hard to see
that basic properties of inequalities (such as \textquotedblleft if $a\leq b$
and $b\leq c$, then $a\leq c$\textquotedblright) and of addition (such as
\textquotedblleft$\left(  a+b\right)  +c=a+\left(  b+c\right)  $%
\textquotedblright) and of the interplay between inequalities and addition
(such as \textquotedblleft if $a\leq b$, then $a+c\leq b+c$\textquotedblright)
are still valid in $\mathbb{Z}\cup\left\{  \infty\right\}  $ (that is, they
still hold if we plug $\infty$ for one or more of the variables). However, of
course, we cannot \textquotedblleft cancel\textquotedblright\ $\infty$ from
equalities (i.e., we cannot cancel $\infty$ from $a+\infty=b+\infty$ to obtain
$a=b$) or inequalities.

\begin{example}
\label{exa.ent.prime.vp}\textbf{(a)} We have $v_{5}\left(  50\right)  =2$.
Indeed, $2$ is the largest $m\in\mathbb{N}$ such that $5^{m}\mid50$ (because
$5^{2}=25\mid50$ but $5^{3}=125\nmid50$).

\textbf{(b)} We have $v_{5}\left(  51\right)  =0$. Indeed, $0$ is the largest
$m\in\mathbb{N}$ such that $5^{m}\mid51$ (because $5^{0}=1\mid51$ but
$5^{1}=5\nmid51$).

\textbf{(c)} We have $v_{5}\left(  55\right)  =1$. Indeed, $1$ is the largest
$m\in\mathbb{N}$ such that $5^{m}\mid55$ (because $5^{1}=5\mid55$ but
$5^{2}=25\nmid55$).

\textbf{(d)} We have $v_{5}\left(  0\right)  =\infty$ (by Definition
\ref{def.ent.prime.vp} \textbf{(b)}).
\end{example}

Definition \ref{def.ent.prime.vp} \textbf{(a)} can be restated in the
following more intuitive way: Given a prime $p$ and a nonzero integer $n$, we
let $v_{p}\left(  n\right)  $ be the number of times we can divide $n$ by $p$
without leaving $\mathbb{Z}$. Definition \ref{def.ent.prime.vp} \textbf{(b)}
is consistent with this picture, because we can clearly divide $0$ by $p$
infinitely often without leaving $\mathbb{Z}$. From this point of view, the
following lemma should be obvious:

\begin{lemma}
\label{lem.ent.prime.vp-def}Let $p$ be a prime. Let $i\in\mathbb{N}$. Let
$n\in\mathbb{Z}$. Then, $p^{i}\mid n$ if and only if $v_{p}\left(  n\right)
\geq i$.
\end{lemma}

\begin{proof}
[Proof of Lemma \ref{lem.ent.prime.vp-def}.]First, let us notice that
$p^{i}\mid0$. Also, Definition \ref{def.ent.prime.vp} \textbf{(b)} yields
$v_{p}\left(  0\right)  =\infty\geq i$ (according to our rules for the symbol
$\infty$). Hence, both statements $\left(  p^{i}\mid0\right)  $ and $\left(
v_{p}\left(  0\right)  \geq i\right)  $ hold. Thus, $p^{i}\mid0$ if and only
if $v_{p}\left(  0\right)  \geq i$. In other words, Lemma
\ref{lem.ent.prime.vp-def} holds if $n=0$. Thus, for the rest of this proof,
we WLOG assume that $n\neq0$. Hence, $n$ is nonzero. Thus, $v_{p}\left(
n\right)  $ is the largest $m\in\mathbb{N}$ such that $p^{m}\mid n$ (by
Definition \ref{def.ent.prime.vp} \textbf{(a)}). Hence, $v_{p}\left(
n\right)  $ itself is an $m\in\mathbb{N}$ such that $p^{m}\mid n$. In other
words, $v_{p}\left(  n\right)  \in\mathbb{N}$ and $p^{v_{p}\left(  n\right)
}\mid n$.

We must prove that $p^{i}\mid n$ if and only if $v_{p}\left(  n\right)  \geq
i$. Let us prove the \textquotedblleft$\Longrightarrow$\textquotedblright\ and
\textquotedblleft$\Longleftarrow$\textquotedblright\ directions of this
\textquotedblleft if and only if\textquotedblright\ statement separately:

$\Longrightarrow:$ Assume that $p^{i}\mid n$. We must prove that $v_{p}\left(
n\right)  \geq i$.

The integer $i$ is an $m\in\mathbb{N}$ such that $p^{m}\mid n$ (since
$p^{i}\mid n$). But $v_{p}\left(  n\right)  $ is the \textbf{largest} such $m$
(by Definition \ref{def.ent.prime.vp} \textbf{(a)}). Hence, $v_{p}\left(
n\right)  \geq i$. This proves the \textquotedblleft$\Longrightarrow
$\textquotedblright\ direction of Lemma \ref{lem.ent.prime.vp-def}.

$\Longleftarrow:$ Assume that $v_{p}\left(  n\right)  \geq i$. We must prove
that $p^{i}\mid n$.

We have $v_{p}\left(  n\right)  \geq i$, thus $i\leq v_{p}\left(  n\right)  $.
Hence, Exercise \ref{exe.ent.div.powers} (applied to $p$, $i$ and
$v_{p}\left(  n\right)  $ instead of $n$, $a$ and $b$) yields $p^{i}\mid
p^{v_{p}\left(  n\right)  }$. Thus, $p^{i}\mid p^{v_{p}\left(  n\right)  }\mid
n$.

Hence, we have proven $p^{i}\mid n$. This proves the \textquotedblleft%
$\Longleftarrow$\textquotedblright\ direction of Lemma
\ref{lem.ent.prime.vp-def}.
\end{proof}

\begin{corollary}
\label{cor.ent.prime.vp-0}Let $p$ be a prime. Let $n\in\mathbb{Z}$. Then,
$v_{p}\left(  n\right)  =0$ if and only if $p\nmid n$.
\end{corollary}

\begin{proof}
[Proof of Corollary \ref{cor.ent.prime.vp-0}.]$\Longrightarrow:$ Assume that
$v_{p}\left(  n\right)  =0$. We must prove that $p\nmid n$.

We don't have $v_{p}\left(  n\right)  \geq1$ (since $v_{p}\left(  n\right)
=0<1$). But Lemma \ref{lem.ent.prime.vp-def} (applied to $i=1$) shows that
$p^{1}\mid n$ if and only if $v_{p}\left(  n\right)  \geq1$. Hence, we don't
have $p^{1}\mid n$ (since we don't have $v_{p}\left(  n\right)  \geq1$). In
other words, we have $p^{1}\nmid n$. In other words, $p\nmid n$ (since
$p=p^{1}$). This proves the \textquotedblleft$\Longrightarrow$%
\textquotedblright\ direction of Corollary \ref{cor.ent.prime.vp-0}.

$\Longleftarrow:$ Assume that $p\nmid n$. We must prove that $v_{p}\left(
n\right)  =0$.

We don't have $p\mid n$ (since $p\nmid n$). In other words, we don't have
$p^{1}\mid n$ (since $p^{1}=p$). But Lemma \ref{lem.ent.prime.vp-def} (applied
to $i=1$) shows that $p^{1}\mid n$ if and only if $v_{p}\left(  n\right)
\geq1$. Hence, we don't have $v_{p}\left(  n\right)  \geq1$ (since we don't
have $p^{1}\mid n$). In other words, $v_{p}\left(  n\right)  <1$.

If we had $n=0$, then we would have $p\mid0=n$, which would contradict $p\nmid
n$. Hence, we don't have $n=0$. Thus, $p$ is nonzero. Hence, Definition
\ref{def.ent.prime.vp} \textbf{(a)} shows that $v_{p}\left(  n\right)
\in\mathbb{N}$. In light of this, we can conclude $v_{p}\left(  n\right)  =0$
from $v_{p}\left(  n\right)  <1$. This proves the \textquotedblleft%
$\Longleftarrow$\textquotedblright\ direction of Corollary
\ref{cor.ent.prime.vp-0}.
\end{proof}

Here is another property of $p$-valuations that is useful in their study:

\begin{lemma}
\label{lem.ent.prime.vp-copr}Let $p$ be a prime. Let $n\in\mathbb{Z}$ be
nonzero. Then:

\textbf{(a)} There exists a nonzero integer $u$ such that $u\perp p$ and
$n=up^{v_{p}\left(  n\right)  }$.

\textbf{(b)} If $i\in\mathbb{N}$ and $w\in\mathbb{Z}$ are such that $w\perp p$
and $n=wp^{i}$, then $v_{p}\left(  n\right)  =i$.
\end{lemma}

Before we prove this formally, let us show the idea behind this lemma. Recall
that, given a prime $p$ and a nonzero integer $n$, the number $v_{p}\left(
n\right)  $ counts how often we can divide $n$ by $p$ without leaving
$\mathbb{Z}$. What happens after we have divided $n$ by $p$ this many times?
We get a number $u$ that is still an integer, but is no longer divisible by
$p$, and thus must be coprime to $p$ (by Proposition
\ref{prop.ent.primes.div-or-coprime}). This is what Lemma
\ref{lem.ent.prime.vp-copr} \textbf{(a)} says. Lemma
\ref{lem.ent.prime.vp-copr} \textbf{(b)} is a converse statement: It says that
if we divide $n$ by $p$ some number of times (say, $i$ times) and obtain an
integer coprime to $p$, then $i$ must be $v_{p}\left(  n\right)  $.

\begin{proof}
[Proof of Lemma \ref{lem.ent.prime.vp-copr}.]Definition \ref{def.ent.prime.vp}
\textbf{(a)} shows that $v_{p}\left(  n\right)  $ is the largest
$m\in\mathbb{N}$ such that $p^{m}\mid n$. Hence, $v_{p}\left(  n\right)  $
itself is an $m\in\mathbb{N}$ such that $p^{m}\mid n$. In other words,
$v_{p}\left(  n\right)  \in\mathbb{N}$ and $p^{v_{p}\left(  n\right)  }\mid n$.

Thus, in particular, $p^{v_{p}\left(  n\right)  }\mid n$. In other words,
there exists an integer $c$ such that $n=p^{v_{p}\left(  n\right)  }c$.
Consider this $c$. We have $n=p^{v_{p}\left(  n\right)  }c=cp^{v_{p}\left(
n\right)  }$.

Assume (for the sake of contradiction) that $p\mid c$. Thus, there exists an
integer $d$ such that $c=pd$. Consider this $d$. Now,%
\[
n=p^{v_{p}\left(  n\right)  }\underbrace{c}_{=pd}=\underbrace{p^{v_{p}\left(
n\right)  }p}_{=p^{v_{p}\left(  n\right)  +1}}d=p^{v_{p}\left(  n\right)
+1}d.
\]
Hence, $p^{v_{p}\left(  n\right)  +1}\mid n$ (since $d$ is an integer). In
other words, $v_{p}\left(  n\right)  +1$ is an $m\in\mathbb{N}$ such that
$p^{m}\mid n$. But we know that $v_{p}\left(  n\right)  $ is the
\textbf{largest} such $m$ (by Definition \ref{def.ent.prime.vp} \textbf{(a)}).
Hence, we conclude that $v_{p}\left(  n\right)  \geq v_{p}\left(  n\right)
+1$. But this is clearly absurd. This contradiction shows that our assumption
(that $p\mid c$) was wrong. Hence, we do not have $p\mid c$.

But Proposition \ref{prop.ent.primes.div-or-coprime} (applied to $a=c$) shows
that either $p\mid c$ or $p\perp c$. Hence, $p\perp c$ (since we do not have
$p\mid c$). In other words, $c\perp p$ (because of Proposition
\ref{prop.ent.coprime.perp-symm}).

If we had $c=0$, then we would have $n=p^{v_{p}\left(  n\right)
}\underbrace{c}_{=0}=0$, which would contradict the fact that $n$ is nonzero.
Hence, we cannot have $c=0$. Thus, $c$ is nonzero.

Now, we know that $c$ is a nonzero integer satisfying $c\perp p$ and
$n=cp^{v_{p}\left(  n\right)  }$. Hence, there exists a nonzero integer $u$
such that $u\perp p$ and $n=up^{v_{p}\left(  n\right)  }$ (namely, $u=c$).
This proves Lemma \ref{lem.ent.prime.vp-copr} \textbf{(a)}.

\textbf{(b)} Let $i\in\mathbb{N}$ and $w\in\mathbb{Z}$ be such that $w\perp p$
and $n=wp^{i}$. We must prove that $v_{p}\left(  n\right)  =i$.

From $w\perp p$, we obtain $p\perp w$ (by Proposition
\ref{prop.ent.coprime.perp-symm}). In other words, $\gcd\left(  p,w\right)
=1$.

We have $n=wp^{i}=p^{i}w$ and thus $p^{i}\mid n$ (since $w$ is an integer).
But Lemma \ref{lem.ent.prime.vp-def} yields that $p^{i}\mid n$ if and only if
$v_{p}\left(  n\right)  \geq i$. Hence, we have $v_{p}\left(  n\right)  \geq
i$ (since we have $p^{i}\mid n$).

Now, we shall prove that $v_{p}\left(  n\right)  \leq i$. Indeed, assume the
contrary. Thus, $v_{p}\left(  n\right)  >i$, so that $v_{p}\left(  n\right)
\geq i+1$ (since $v_{p}\left(  n\right)  $ and $i$ are integers). But Lemma
\ref{lem.ent.prime.vp-def} (applied to $i+1$ instead of $i$) shows that
$p^{i+1}\mid n$ if and only if $v_{p}\left(  n\right)  \geq i+1$. Thus, we
have $p^{i+1}\mid n$ (since we have $v_{p}\left(  n\right)  \geq i+1$). In
other words, $pp^{i}\mid wp^{i}$ (since $p^{i+1}=pp^{i}$ and $n=wp^{i}$). But
$p$ is a prime; thus, $p>1>0$ and therefore $p\neq0$. Hence, $p^{i}\neq0$.
Thus, Exercise \ref{exe.ent.div.acbc} (applied to $p$, $w$ and $p^{i}$ instead
of $a$, $b$ and $c$) shows that $p\mid w$ holds if and only if $pp^{i}\mid
wp^{i}$. Hence, $p\mid w$ holds (since $pp^{i}\mid wp^{i}$ holds). Thus,
Proposition \ref{prop.ent.gcd.props1} \textbf{(i)} (applied to $p$ and $w$
instead of $a$ and $b$) yields $\gcd\left(  p,w\right)  =\left\vert
p\right\vert =p$ (since $p>0$). Comparing this with $\gcd\left(  p,w\right)
=1$, we find $p=1$. This contradicts $p>1$.

This contradiction shows that our assumption was false. Hence, $v_{p}\left(
n\right)  \leq i$ is proven. Combining this with $v_{p}\left(  n\right)  \geq
i$, we obtain $v_{p}\left(  n\right)  =i$. This proves Lemma
\ref{lem.ent.prime.vp-copr} \textbf{(b)}.
\end{proof}

The next property of $p$-adic valuations is crucial, as it reveals how they
can be computed and bounded:

\begin{theorem}
\label{thm.ent.prime.vp-ring}Let $p$ be a prime.

\textbf{(a)} We have $v_{p}\left(  ab\right)  =v_{p}\left(  a\right)
+v_{p}\left(  b\right)  $ for any two integers $a$ and $b$.

\textbf{(b)} We have $v_{p}\left(  a+b\right)  \geq\min\left\{  v_{p}\left(
a\right)  ,v_{p}\left(  b\right)  \right\}  $ for any two integers $a$ and $b$.

\textbf{(c)} We have $v_{p}\left(  1\right)  =0$.

\textbf{(d)} We have $v_{p}\left(  q\right)  =%
\begin{cases}
1, & \text{if }q=p;\\
0, & \text{if }q\neq p
\end{cases}
$ for any prime $q$.
\end{theorem}

Note that Theorem \ref{thm.ent.prime.vp-ring} \textbf{(a)} gives a formula for
$v_{p}\left(  ab\right)  $ in terms of $v_{p}\left(  a\right)  $ and
$v_{p}\left(  b\right)  $, but there is no such formula for $v_{p}\left(
a+b\right)  $ (since $v_{p}\left(  a\right)  $ and $v_{p}\left(  b\right)  $
do not uniquely determine $v_{p}\left(  a+b\right)  $). Thus, Theorem
\ref{thm.ent.prime.vp-ring} \textbf{(b)} only gives a bound.

\begin{proof}
[Proof of Theorem \ref{thm.ent.prime.vp-ring}.]\textbf{(a)} Let $a$ and $b$ be
two integers. We must prove that $v_{p}\left(  ab\right)  =v_{p}\left(
a\right)  +v_{p}\left(  b\right)  $.

If $a=0$, then this is true\footnote{\textit{Proof.} Assume that $a=0$. Then,
$\underbrace{a}_{=0}b=0$ and thus $v_{p}\left(  ab\right)  =v_{p}\left(
0\right)  =\infty$ (by Definition \ref{def.ent.prime.vp} \textbf{(b)}). Also,
from $a=0$, we obtain $v_{p}\left(  a\right)  =v_{p}\left(  0\right)  =\infty
$. Hence, $\underbrace{v_{p}\left(  a\right)  }_{=\infty}+v_{p}\left(
b\right)  =\infty+v_{p}\left(  b\right)  =\infty$ (since $\infty+k=\infty$ for
each $k\in\mathbb{Z}\cup\left\{  \infty\right\}  $). Comparing this with
$v_{p}\left(  ab\right)  =\infty$, we obtain $v_{p}\left(  ab\right)
=v_{p}\left(  a\right)  +v_{p}\left(  b\right)  $. This is exactly what we
wanted to prove.}. Thus, for the rest of the proof of Theorem
\ref{thm.ent.prime.vp-ring} \textbf{(a)}, we WLOG assume that $a\neq0$. For
similar reasons, we WLOG assume that $b\neq0$.

The integer $a$ is nonzero (since $a\neq0$). Thus, Lemma
\ref{lem.ent.prime.vp-copr} \textbf{(b)} (applied to $n=a$) shows that there
exists a nonzero integer $u$ such that $u\perp p$ and $a=up^{v_{p}\left(
a\right)  }$. Consider this $u$, and denote it by $x$. Thus, $x$ is a nonzero
integer such that $x\perp p$ and $a=xp^{v_{p}\left(  a\right)  }$.

The integer $b$ is nonzero (since $b\neq0$). Thus, Lemma
\ref{lem.ent.prime.vp-copr} \textbf{(a)} (applied to $n=b$) shows that there
exists a nonzero integer $u$ such that $u\perp p$ and $b=up^{v_{p}\left(
b\right)  }$. Consider this $u$, and denote it by $y$. Thus, $y$ is a nonzero
integer such that $y\perp p$ and $b=yp^{v_{p}\left(  b\right)  }$.

We have $x\perp p$ and $y\perp p$. Thus, Theorem \ref{thm.ent.coprime.ab-to-c}
(applied to $x$, $y$ and $p$ instead of $a$, $b$ and $c$) shows that $xy\perp
p$.

The integer $ab$ is nonzero (since $a\neq0$ and $b\neq0$).

Furthermore, multiplying the equalities $a=xp^{v_{p}\left(  a\right)  }$ and
$b=yp^{v_{p}\left(  b\right)  }$, we obtain%
\[
ab=\left(  xp^{v_{p}\left(  a\right)  }\right)  \left(  yp^{v_{p}\left(
b\right)  }\right)  =\left(  xy\right)  \underbrace{\left(  p^{v_{p}\left(
a\right)  }p^{v_{p}\left(  b\right)  }\right)  }_{=p^{v_{p}\left(  a\right)
+v_{p}\left(  b\right)  }}=\left(  xy\right)  p^{v_{p}\left(  a\right)
+v_{p}\left(  b\right)  }.
\]
Thus, Lemma \ref{lem.ent.prime.vp-copr} \textbf{(b)} (applied to $n=ab$,
$i=v_{p}\left(  a\right)  +v_{p}\left(  b\right)  $ and $w=xy$) shows that
$v_{p}\left(  ab\right)  =v_{p}\left(  a\right)  +v_{p}\left(  b\right)  $
(since $v_{p}\left(  a\right)  +v_{p}\left(  b\right)  \in\mathbb{N}$ and
$xy\in\mathbb{Z}$ and $xy\perp p$). This proves Theorem
\ref{thm.ent.prime.vp-ring} \textbf{(a)}.

\textbf{(b)} Let $a$ and $b$ be two integers. We must prove that $v_{p}\left(
a+b\right)  \geq\min\left\{  v_{p}\left(  a\right)  ,v_{p}\left(  b\right)
\right\}  $.

If $a=0$, then this is true\footnote{\textit{Proof.} Assume that $a=0$. Then,
$v_{p}\left(  \underbrace{a}_{=0}+b\right)  =v_{p}\left(  b\right)  \geq
\min\left\{  v_{p}\left(  a\right)  ,v_{p}\left(  b\right)  \right\}  $ (since
any element of a set is $\geq$ to the minimum of this set). This is exactly
what we wanted to prove.}. Thus, for the rest of the proof of Theorem
\ref{thm.ent.prime.vp-ring} \textbf{(b)}, we WLOG assume that $a\neq0$. For
similar reasons, we WLOG assume that $b\neq0$.

The integer $a$ is nonzero (since $a\neq0$). Thus, $v_{p}\left(  a\right)
\in\mathbb{N}$ (by Definition \ref{def.ent.prime.vp} \textbf{(a)}). Similarly,
$v_{p}\left(  b\right)  \in\mathbb{N}$.

Let $m=\min\left\{  v_{p}\left(  a\right)  ,v_{p}\left(  b\right)  \right\}
$. Thus, $m\in\mathbb{N}$ (since $v_{p}\left(  a\right)  \in\mathbb{N}$ and
$v_{p}\left(  b\right)  \in\mathbb{N}$).

We have $m=\min\left\{  v_{p}\left(  a\right)  ,v_{p}\left(  b\right)
\right\}  \leq v_{p}\left(  a\right)  $; in other words, $v_{p}\left(
a\right)  \geq m$. But Lemma \ref{lem.ent.prime.vp-def} (applied to $n=a$ and
$i=m$) shows that $p^{m}\mid a$ if and only if $v_{p}\left(  a\right)  \geq
m$. Hence, we have $p^{m}\mid a$ (since $v_{p}\left(  a\right)  \geq m$). In
other words, $a\equiv0\operatorname{mod}p^{m}$. Similarly, $b\equiv
0\operatorname{mod}p^{m}$. Adding these two congruences together, we obtain
$a+b\equiv0+0=0\operatorname{mod}p^{m}$. In other words, $p^{m}\mid a+b$.

But Lemma \ref{lem.ent.prime.vp-def} (applied to $n=a+b$ and $i=m$) shows that
$p^{m}\mid a+b$ if and only if $v_{p}\left(  a+b\right)  \geq m$. Hence, we
have $v_{p}\left(  a+b\right)  \geq m$ (since $p^{m}\mid a+b$). Thus,
$v_{p}\left(  a+b\right)  \geq m=\min\left\{  v_{p}\left(  a\right)
,v_{p}\left(  b\right)  \right\}  $. This proves Theorem
\ref{thm.ent.prime.vp-ring} \textbf{(b)}.

\textbf{(c)} We have $1\mid p$. Thus, Proposition \ref{prop.ent.gcd.props1}
\textbf{(i)} (applied to $1$ and $p$ instead of $a$ and $b$) yields
$\gcd\left(  1,p\right)  =\left\vert 1\right\vert =1$. In other words, $1\perp
p$. Also, $1=1\cdot p^{0}$. Thus, Lemma \ref{lem.ent.prime.vp-copr}
\textbf{(b)} (applied to $n=1$, $i=0$ and $w=1$) yields $v_{p}\left(
1\right)  =0$. This proves Theorem \ref{thm.ent.prime.vp-ring} \textbf{(c)}.

\textbf{(d)} Let $q$ be a prime. We must prove that $v_{p}\left(  q\right)  =%
\begin{cases}
1, & \text{if }q=p;\\
0, & \text{if }q\neq p
\end{cases}
$.

We are in one of the following two cases:

\textit{Case 1:} We have $q=p$.

\textit{Case 2:} We have $q\neq p$.

Let us first consider Case 1. In this case, we have $q=p$. But $1\perp p$ (as
we just saw when proving Theorem \ref{thm.ent.prime.vp-ring} \textbf{(c)}).
Also, $p=1\cdot p^{1}$. Thus, Lemma \ref{lem.ent.prime.vp-copr} \textbf{(b)}
(applied to $n=p$, $i=1$ and $w=1$) yields $v_{p}\left(  p\right)  =1$. From
$q=p$, we obtain $v_{p}\left(  q\right)  =v_{p}\left(  p\right)  =1$.
Comparing this with
\[%
\begin{cases}
1, & \text{if }q=p;\\
0, & \text{if }q\neq p
\end{cases}
=1\ \ \ \ \ \ \ \ \ \ \left(  \text{since }q=p\right)  ,
\]
we obtain $v_{p}\left(  q\right)  =%
\begin{cases}
1, & \text{if }q=p;\\
0, & \text{if }q\neq p
\end{cases}
$. Hence, Theorem \ref{thm.ent.prime.vp-ring} \textbf{(d)} is proven in Case 1.

Let us now consider Case 2. In this case, we have $q\neq p$. Hence, $q\nmid
p$\ \ \ \ \footnote{\textit{Proof.} Assume the contrary. Thus, $q\mid p$. In
other words, $q$ is a divisor of $p$.
\par
But $p$ is a prime. According to the definition of a prime, this means that
$p>1$ and that the only positive divisors of $p$ are $1$ and $p$.
\par
Also, $q$ is a prime; thus, $q>1$ (by the definition of a prime); hence,
$q>1>0$. Thus, $q$ is a positive divisor of $p$. Hence, $q$ must be either $1$
or $p$ (since the only positive divisors of $p$ are $1$ and $p$). Since $q$
cannot be $1$ (because $q>1$), we thus conclude that $q$ must be $p$. In other
words, $q=p$. This contradicts $q\neq p$. This contradiction shows that our
assumption was false, qed.}.

But Proposition \ref{prop.ent.primes.div-or-coprime} (applied to $q$ and $p$
instead of $p$ and $a$) shows that either $q\mid p$ or $q\perp p$. Since
$q\mid p$ cannot hold (because we have $q\nmid p$), we thus conclude that
$q\perp p$. Also, $q=q\cdot p^{0}$ (since $p^{0}=1$). Thus, Lemma
\ref{lem.ent.prime.vp-copr} \textbf{(b)} (applied to $n=q$, $i=0$ and $w=q$)
yields $v_{p}\left(  q\right)  =0$. Comparing this with
\[%
\begin{cases}
1, & \text{if }q=p;\\
0, & \text{if }q\neq p
\end{cases}
=0\ \ \ \ \ \ \ \ \ \ \left(  \text{since }q\neq p\right)  ,
\]
we obtain $v_{p}\left(  q\right)  =%
\begin{cases}
1, & \text{if }q=p;\\
0, & \text{if }q\neq p
\end{cases}
$. Hence, Theorem \ref{thm.ent.prime.vp-ring} \textbf{(d)} is proven in Case 2.

We have now proven Theorem \ref{thm.ent.prime.vp-ring} \textbf{(d)} in each of
the two Cases 1 and 2. Thus, Theorem \ref{thm.ent.prime.vp-ring} \textbf{(d)}
is always proven.
\end{proof}

\begin{corollary}
\label{cor.ent.prime.vp-ringk}Let $p$ be a prime. Let $a_{1},a_{2}%
,\ldots,a_{k}$ be $k$ integers. Then, $v_{p}\left(  a_{1}a_{2}\cdots
a_{k}\right)  =v_{p}\left(  a_{1}\right)  +v_{p}\left(  a_{2}\right)
+\cdots+v_{p}\left(  a_{k}\right)  $.
\end{corollary}

\begin{proof}
[Proof of Corollary \ref{cor.ent.prime.vp-ringk}.]This follows
straightforwardly by induction on $k$, using Theorem
\ref{thm.ent.prime.vp-ring} \textbf{(a)} (as well as Theorem
\ref{thm.ent.prime.vp-ring} \textbf{(c)} for the induction base). We leave the
details to the reader, who has seen this sort of proof several times already.
\end{proof}

\begin{exercise}
\label{exe.ent.prime.vp-abs}Let $p$ be a prime. Let $n\in\mathbb{Z}$. Then,
$v_{p}\left(  \left\vert n\right\vert \right)  =v_{p}\left(  n\right)  $.
\end{exercise}

\subsubsection{Prime factorization II}

\begin{proposition}
\label{prop.ent.prime.mult-in-pf}Let $n$ be a positive integer. Let $\left(
a_{1},a_{2},\ldots,a_{k}\right)  $ be a prime factorization of $n$. Let $p$ be
a prime. Then,%
\begin{align*}
&  \left(  \text{the number of times }p\text{ appears in the tuple }\left(
a_{1},a_{2},\ldots,a_{k}\right)  \right) \\
&  =\left(  \text{the number of }i\in\left\{  1,2,\ldots,k\right\}  \text{
such that }a_{i}=p\right) \\
&  =v_{p}\left(  n\right)  .
\end{align*}

\end{proposition}

\begin{proof}
[Proof of Proposition \ref{prop.ent.prime.mult-in-pf}.]We have assumed that
$\left(  a_{1},a_{2},\ldots,a_{k}\right)  $ is a prime factorization of $n$.
Thus, $a_{1},a_{2},\ldots,a_{k}$ are primes satisfying $n=a_{1}a_{2}\cdots
a_{k}$. Hence, for each $i\in\left\{  1,2,\ldots,k\right\}  $, the integer
$a_{i}$ is prime and thus satisfies%
\begin{equation}
v_{p}\left(  a_{i}\right)  =%
\begin{cases}
1, & \text{if }a_{i}=p;\\
0, & \text{if }a_{i}\neq p
\end{cases}
\label{pf.prop.ent.prime.mult-in-pf.1}%
\end{equation}
(by Theorem \ref{thm.ent.prime.vp-ring} \textbf{(d)}, applied to $q=a_{i}$).

From $n=a_{1}a_{2}\cdots a_{k}$, we obtain%
\begin{align*}
v_{p}\left(  n\right)   &  =v_{p}\left(  a_{1}a_{2}\cdots a_{k}\right) \\
&  =v_{p}\left(  a_{1}\right)  +v_{p}\left(  a_{2}\right)  +\cdots
+v_{p}\left(  a_{k}\right)  \ \ \ \ \ \ \ \ \ \ \left(  \text{by Corollary
\ref{cor.ent.prime.vp-ringk}}\right) \\
&  =\underbrace{\sum_{i=1}^{k}}_{=\sum_{i\in\left\{  1,2,\ldots,k\right\}  }%
}\underbrace{v_{p}\left(  a_{i}\right)  }_{\substack{=%
\begin{cases}
1, & \text{if }a_{i}=p;\\
0, & \text{if }a_{i}\neq p
\end{cases}
\\\text{(by (\ref{pf.prop.ent.prime.mult-in-pf.1}))}}}=\sum_{i\in\left\{
1,2,\ldots,k\right\}  }%
\begin{cases}
1, & \text{if }a_{i}=p;\\
0, & \text{if }a_{i}\neq p
\end{cases}
\\
&  =\sum_{\substack{i\in\left\{  1,2,\ldots,k\right\}  ;\\a_{i}=p}%
}\underbrace{%
\begin{cases}
1, & \text{if }a_{i}=p;\\
0, & \text{if }a_{i}\neq p
\end{cases}
}_{\substack{=1\\\text{(since }a_{i}=p\text{)}}}+\sum_{\substack{i\in\left\{
1,2,\ldots,k\right\}  ;\\a_{i}\neq p}}\underbrace{%
\begin{cases}
1, & \text{if }a_{i}=p;\\
0, & \text{if }a_{i}\neq p
\end{cases}
}_{\substack{=0\\\text{(since }a_{i}\neq p\text{)}}}\\
&  \ \ \ \ \ \ \ \ \ \ \left(
\begin{array}
[c]{c}%
\text{since each }i\in\left\{  1,2,\ldots,k\right\}  \text{ satisfies either
}a_{i}=p\text{ or }a_{i}\neq p\\
\text{(but not both)}%
\end{array}
\right) \\
&  =\sum_{\substack{i\in\left\{  1,2,\ldots,k\right\}  ;\\a_{i}=p}%
}1+\underbrace{\sum_{\substack{i\in\left\{  1,2,\ldots,k\right\}  ;\\a_{i}\neq
p}}0}_{=0}=\sum_{\substack{i\in\left\{  1,2,\ldots,k\right\}  ;\\a_{i}=p}}1\\
&  =\left(  \text{the number of }i\in\left\{  1,2,\ldots,k\right\}  \text{
such that }a_{i}=p\right)  \cdot1\\
&  =\left(  \text{the number of }i\in\left\{  1,2,\ldots,k\right\}  \text{
such that }a_{i}=p\right) \\
&  =\left(  \text{the number of times }p\text{ appears in }\left(  a_{1}%
,a_{2},\ldots,a_{k}\right)  \right)  .
\end{align*}
This proves Proposition \ref{prop.ent.prime.mult-in-pf}.
\end{proof}

We are finally ready to prove the so-called \textit{Fundamental Theorem of
Arithmetic}:

\begin{theorem}
\label{thm.ent.primes.fac-uni}Let $n$ be a positive integer.

\textbf{(a)} There exists a prime factorization of $n$.

\textbf{(b)} Any two such factorizations differ only in the order of their
entries (i.e., are permutations of each other).
\end{theorem}

\begin{proof}
[Proof of Theorem \ref{thm.ent.primes.fac-uni}.]\textbf{(a)} Proposition
\ref{prop.ent.primes.fac-ex} shows that $n$ can be written as a product of
finitely many primes. In other words, there exist finitely many primes
$p_{1},p_{2},\ldots,p_{k}$ such that $n=p_{1}p_{2}\cdots p_{k}$. Consider
these primes. Thus, $\left(  p_{1},p_{2},\ldots,p_{k}\right)  $ is a prime
factorization of $n$ (by the definition of \textquotedblleft prime
factorization\textquotedblright). Hence, there exists a prime factorization of
$n$. This proves Theorem \ref{thm.ent.primes.fac-uni} \textbf{(a)}.

\textbf{(b)} Let $\left(  a_{1},a_{2},\ldots,a_{k}\right)  $ and $\left(
b_{1},b_{2},\ldots,b_{\ell}\right)  $ be two prime factorizations of $n$. We
must prove that $\left(  a_{1},a_{2},\ldots,a_{k}\right)  $ and $\left(
b_{1},b_{2},\ldots,b_{\ell}\right)  $ differ only in the order of their
entries (i.e., are permutations of each other).

Let $P$ be the set of all primes. Note that $\left(  a_{1},a_{2},\ldots
,a_{k}\right)  $ and $\left(  b_{1},b_{2},\ldots,b_{\ell}\right)  $ are prime
factorizations of $n$. Hence, $\left(  a_{1},a_{2},\ldots,a_{k}\right)  $ and
$\left(  b_{1},b_{2},\ldots,b_{\ell}\right)  $ are tuples of primes, i.e.,
tuples of elements of $P$.

Let $p\in P$. Thus, $p$ is a prime (by the definition of $P$). Hence,
Proposition \ref{prop.ent.prime.mult-in-pf} shows that%
\begin{align*}
&  \left(  \text{the number of times }p\text{ appears in the tuple }\left(
a_{1},a_{2},\ldots,a_{k}\right)  \right) \\
&  =\left(  \text{the number of }i\in\left\{  1,2,\ldots,k\right\}  \text{
such that }a_{i}=p\right) \\
&  =v_{p}\left(  n\right)  .
\end{align*}
Similarly,%
\begin{align*}
&  \left(  \text{the number of times }p\text{ appears in the tuple }\left(
b_{1},b_{2},\ldots,b_{\ell}\right)  \right) \\
&  =\left(  \text{the number of }i\in\left\{  1,2,\ldots,\ell\right\}  \text{
such that }b_{i}=p\right) \\
&  =v_{p}\left(  n\right)  .
\end{align*}
Comparing these two equalities, we conclude that
\begin{align}
&  \left(  \text{the number of times }p\text{ appears in }\left(  a_{1}%
,a_{2},\ldots,a_{k}\right)  \right) \nonumber\\
&  =\left(  \text{the number of times }p\text{ appears in }\left(  b_{1}%
,b_{2},\ldots,b_{\ell}\right)  \right)  .
\label{pf.thm.ent.primes.fac-uni.b.1}%
\end{align}


Now, forget that we fixed $p$. We thus have proven
(\ref{pf.thm.ent.primes.fac-uni.b.1}) for each $p\in P$. Hence, Lemma
\ref{lem.comb.tuples.mult=perm} shows that the tuples $\left(  a_{1}%
,a_{2},\ldots,a_{k}\right)  $ and $\left(  b_{1},b_{2},\ldots,b_{\ell}\right)
$ differ only in the order of their entries (i.e., are permutations of each
other). This completes our proof of Theorem \ref{thm.ent.primes.fac-uni}
\textbf{(b)}.
\end{proof}

\subsubsection{The canonical factorization}

You have seen finite products such as\footnote{Here and in the following, $n!$
denotes the product $1\cdot2\cdot\cdots\cdot n$ whenever $n\in\mathbb{N}$.
Thus, in particular,
\begin{align*}
0!  &  =\left(  \text{empty product}\right)
=1,\ \ \ \ \ \ \ \ \ \ 1!=1,\ \ \ \ \ \ \ \ \ \ 2!=1\cdot2=2,\\
3!  &  =1\cdot2\cdot3=6,\ \ \ \ \ \ \ \ \ \ 4!=1\cdot2\cdot3\cdot
4=24,\ \ \ \ \ \ \ \ \ \ 5!=1\cdot2\cdot3\cdot4\cdot5=120.
\end{align*}
}
\begin{align*}
\prod_{i\in\left\{  1,2,3,4,5\right\}  }i  &  =1\cdot2\cdot3\cdot
4\cdot5=5!=120\ \ \ \ \ \ \ \ \ \ \text{and}\\
\prod_{i\in\left\{  3,5,7\right\}  }\left(  i^{2}+1\right)   &  =\left(
3^{2}+1\right)  \cdot\left(  5^{2}+1\right)  \cdot\left(  7^{2}+1\right)
=13000.
\end{align*}
Sometimes, infinite products (i.e., products ranging over infinite sets) also
make sense. Many examples of well-defined infinite products arise from
analysis and have to do with convergence. Here, we are doing algebra and thus
shall only consider a very elementary, non-analytic meaning of convergence.
Namely, we will consider infinite products that have only finitely many
factors different from $1$. For example, the product $2\cdot7\cdot
4\cdot\underbrace{1\cdot1\cdot1\cdot1\cdot\cdots}_{\text{infinitely many
}1\text{'s}}$ is of such form. It is easy to give a meaning to such products:
Just throw away all the $1$'s (since multiplying by $1$ does not change a
number) and take the product of the remaining (finitely many) numbers. So, for
example, our product $2\cdot7\cdot4\cdot\underbrace{1\cdot1\cdot1\cdot
1\cdot\cdots}_{\text{infinitely many }1\text{'s}}$ should evaluate to
$2\cdot7\cdot4=56$.

This is indeed a meaningful and useful definition. For example, the set of all
prime numbers is infinite (by Theorem \ref{thm.ent.primes.infin} below), but
nevertheless, for each nonzero integer $n$, the product $\prod_{p\text{
prime}}p^{v_{p}\left(  n\right)  }$ (where the \textquotedblleft%
$\prod_{p\text{ prime}}$\textquotedblright\ symbol means a product ranging
over all primes $p$) is well-defined due to having only finitely many factors
different from $1$:

\begin{lemma}
\label{lem.ent.primes.vpn=0}Let $n$ be a nonzero integer.

\textbf{(a)} We have $v_{p}\left(  n\right)  =0$ for every prime $p>\left\vert
n\right\vert $. (Note that \textquotedblleft for every prime $p>\left\vert
n\right\vert $\textquotedblright\ is shorthand for \textquotedblleft for every
prime $p$ satisfying $p>\left\vert n\right\vert $\textquotedblright.)

\textbf{(b)} The product $\prod_{p\text{ prime}}p^{v_{p}\left(  n\right)  }$
has only finitely many factors different from $1$. (Here and in the following,
the \textquotedblleft$\prod_{p\text{ prime}}$\textquotedblright\ symbol means
a product ranging over all primes $p$.)
\end{lemma}

\begin{proof}
[Proof of Lemma \ref{lem.ent.primes.vpn=0}.]\textbf{(a)} Let $p$ be a prime
such that $p>\left\vert n\right\vert $. We must prove that $v_{p}\left(
n\right)  =0$.

We have $p>1$ (since $p$ is prime); thus, $p>1>0$ and therefore $\left\vert
p\right\vert =p>\left\vert n\right\vert $.

We have $n\neq0$ (since $n$ is nonzero). Thus, if we had $p\mid n$, then we
would have $\left\vert p\right\vert \leq\left\vert n\right\vert $ (by
Proposition \ref{prop.ent.div.1} \textbf{(b)}, applied to $a=p$ and $b=n$),
which would contradict $\left\vert p\right\vert >\left\vert n\right\vert $.
Thus, we cannot have $p\mid n$. In other words, we have $p\nmid n$.

But Corollary \ref{cor.ent.prime.vp-0} yields that $v_{p}\left(  n\right)  =0$
if and only if $p\nmid n$. Hence, $v_{p}\left(  n\right)  =0$ (since $p\nmid
n$). This proves Lemma \ref{lem.ent.primes.vpn=0} \textbf{(a)}.

\textbf{(b)} For every prime $p>\left\vert n\right\vert $, we have
$v_{p}\left(  n\right)  =0$ (by Lemma \ref{lem.ent.primes.vpn=0} \textbf{(a)})
and thus $p^{v_{p}\left(  n\right)  }=p^{0}=1$. Thus, all but finitely many
primes $p$ satisfy $p^{v_{p}\left(  n\right)  }=1$ (since all but finitely
many primes $p$ satisfy $p>\left\vert n\right\vert $). Therefore, all but
finitely many factors of the product $\prod_{p\text{ prime}}p^{v_{p}\left(
n\right)  }$ are $1$. In other words, the product $\prod_{p\text{ prime}%
}p^{v_{p}\left(  n\right)  }$ has only finitely many factors different from
$1$. This proves Lemma \ref{lem.ent.primes.vpn=0} \textbf{(b)}.
\end{proof}

\begin{corollary}
\label{cor.ent.primes.can-fac}Let $n$ be a positive integer. Then,%
\[
n=\prod_{p\text{ prime}}p^{v_{p}\left(  n\right)  }.
\]


Here, the infinite product $\prod_{p\text{ prime}}p^{v_{p}\left(  n\right)  }$
is well-defined (according to Lemma \ref{lem.ent.primes.vpn=0} \textbf{(b)}).
\end{corollary}

This expression $n=\prod_{p\text{ prime}}p^{v_{p}\left(  n\right)  }$ is
called the \textit{canonical factorization} of $n$.

\begin{proof}
[Proof of Corollary \ref{cor.ent.primes.can-fac}.]Theorem
\ref{thm.ent.primes.fac-uni} \textbf{(a)} shows that there exists a prime
factorization of $n$. Consider such a factorization, and denote it by $\left(
a_{1},a_{2},\ldots,a_{k}\right)  $. Thus, $\left(  a_{1},a_{2},\ldots
,a_{k}\right)  $ is a prime factorization of $n$; in other words, $a_{1}%
,a_{2},\ldots,a_{k}$ are primes satisfying $n=a_{1}a_{2}\cdots a_{k}$. For
each prime $p$, we have%
\begin{equation}
\left(  \text{the number of }i\in\left\{  1,2,\ldots,k\right\}  \text{ such
that }a_{i}=p\right)  =v_{p}\left(  n\right)
\label{pf.cor.ent.primes.can-fac.1}%
\end{equation}
(by Proposition \ref{prop.ent.prime.mult-in-pf}). Now,%
\begin{align*}
n  &  =a_{1}a_{2}\cdots a_{k}=\prod_{i\in\left\{  1,2,\ldots,k\right\}  }%
a_{i}\\
&  =\prod_{p\text{ prime}}\prod_{\substack{i\in\left\{  1,2,\ldots,k\right\}
;\\a_{i}=p}}\underbrace{a_{i}}_{=p}\\
&  \ \ \ \ \ \ \ \ \ \ \left(
\begin{array}
[c]{c}%
\text{here, we have split our product into smaller}\\
\text{products, according to the value of }a_{i}\text{;}\\
\text{this is allowed, since each }a_{i}\text{ is a prime}%
\end{array}
\right) \\
&  =\prod_{p\text{ prime}}\underbrace{\prod_{\substack{i\in\left\{
1,2,\ldots,k\right\}  ;\\a_{i}=p}}p}_{=p^{\left(  \text{the number of }%
i\in\left\{  1,2,\ldots,k\right\}  \text{ such that }a_{i}=p\right)  }}\\
&  =\prod_{p\text{ prime}}\underbrace{p^{\left(  \text{the number of }%
i\in\left\{  1,2,\ldots,k\right\}  \text{ such that }a_{i}=p\right)  }%
}_{\substack{=p^{v_{p}\left(  n\right)  }\\\text{(by
(\ref{pf.cor.ent.primes.can-fac.1}))}}}\\
&  =\prod_{p\text{ prime}}p^{v_{p}\left(  n\right)  }.
\end{align*}
This proves Corollary \ref{cor.ent.primes.can-fac}.
\end{proof}

\begin{corollary}
\label{cor.ent.primes.can-facZ}Let $n$ be a nonzero integer. Then,%
\[
\left\vert n\right\vert =\prod_{p\text{ prime}}p^{v_{p}\left(  n\right)  }.
\]


Here, the infinite product $\prod_{p\text{ prime}}p^{v_{p}\left(  n\right)  }$
is well-defined (according to Lemma \ref{lem.ent.primes.vpn=0} \textbf{(b)}).
\end{corollary}

\begin{proof}
[Proof of Corollary \ref{cor.ent.primes.can-facZ}.]The integer $\left\vert
n\right\vert $ is positive (since $n$ is nonzero). Hence, Corollary
\ref{cor.ent.primes.can-fac} (applied to $\left\vert n\right\vert $ instead of
$n$) yields%
\[
\left\vert n\right\vert =\prod_{p\text{ prime}}\underbrace{p^{v_{p}\left(
\left\vert n\right\vert \right)  }}_{\substack{=p^{v_{p}\left(  n\right)
}\\\text{(since Exercise \ref{exe.ent.prime.vp-abs}}\\\text{yields }%
v_{p}\left(  \left\vert n\right\vert \right)  =v_{p}\left(  n\right)
\text{)}}}=\prod_{p\text{ prime}}p^{v_{p}\left(  n\right)  }.
\]
This proves Corollary \ref{cor.ent.primes.can-facZ}.
\end{proof}

We can furthermore use $p$-adic valuations to check divisibility of integers:

\begin{proposition}
\label{prop.ent.primes.n|m}Let $n$ and $m$ be integers. Then, $n\mid m$ if and
only if each prime $p$ satisfies $v_{p}\left(  n\right)  \leq v_{p}\left(
m\right)  $.
\end{proposition}

\begin{proof}
[Proof of Proposition \ref{prop.ent.primes.n|m}.]If $m=0$, then Proposition
\ref{prop.ent.primes.n|m} is true\footnote{\textit{Proof.} Assume that $m=0$.
Thus, each prime $p$ satisfies $v_{p}\left(  \underbrace{m}_{=0}\right)
=v_{p}\left(  0\right)  =\infty$ (by Definition \ref{def.ent.prime.vp}
\textbf{(b)}) and thus $v_{p}\left(  m\right)  =\infty\geq v_{p}\left(
n\right)  $, so that $v_{p}\left(  n\right)  \leq v_{p}\left(  m\right)  $.
Also, $n\mid0=m$. Thus, the statements \textquotedblleft$n\mid m$%
\textquotedblright\ and \textquotedblleft each prime $p$ satisfies
$v_{p}\left(  n\right)  \leq v_{p}\left(  m\right)  $\textquotedblright\ are
both true. Hence, $n\mid m$ if and only if each prime $p$ satisfies
$v_{p}\left(  n\right)  \leq v_{p}\left(  m\right)  $. In other words,
Proposition \ref{prop.ent.primes.n|m} is true. Qed.}. Hence, for the rest of
this proof, we WLOG assume that $m\neq0$. Therefore, $m$ is nonzero. Hence,
$v_{p}\left(  m\right)  \in\mathbb{N}$ (by Definition \ref{def.ent.prime.vp}
\textbf{(a)}), so that $v_{p}\left(  m\right)  <\infty$.

If $n=0$, then Proposition \ref{prop.ent.primes.n|m} is
true\footnote{\textit{Proof.} Assume that $n=0$. Thus, each prime $p$
satisfies $v_{p}\left(  \underbrace{n}_{=0}\right)  =v_{p}\left(  0\right)
=\infty$ (by Definition \ref{def.ent.prime.vp} \textbf{(b)}) and thus
$v_{p}\left(  m\right)  <\infty=v_{p}\left(  n\right)  $. Applying this to
$p=2$, we obtain $v_{2}\left(  m\right)  <v_{2}\left(  n\right)  $ (since $2$
is a prime). Hence, we don't have $v_{2}\left(  n\right)  \leq v_{2}\left(
m\right)  $. Thus, the statement \textquotedblleft each prime $p$ satisfies
$v_{p}\left(  n\right)  \leq v_{p}\left(  m\right)  $\textquotedblright\ is
false (since $p=2$ is a counterexample).
\par
If we had $n\mid m$, then there would be an integer $c$ such that $m=nc$. This
would then lead to $m=\underbrace{n}_{=0}c=0$, which would contradict $m\neq
0$. Hence, we cannot have $n\mid m$. Thus, the statements \textquotedblleft%
$n\mid m$\textquotedblright\ and \textquotedblleft each prime $p$ satisfies
$v_{p}\left(  n\right)  \leq v_{p}\left(  m\right)  $\textquotedblright\ are
both false. Hence, $n\mid m$ if and only if each prime $p$ satisfies
$v_{p}\left(  n\right)  \leq v_{p}\left(  m\right)  $. In other words,
Proposition \ref{prop.ent.primes.n|m} is true. Qed.}. Hence, for the rest of
this proof, we WLOG assume that $n\neq0$. Therefore, $n$ is nonzero.

The statement of Proposition \ref{prop.ent.primes.n|m} does not change if we
replace $n$ and $m$ by $\left\vert n\right\vert $ and $\left\vert m\right\vert
$, respectively\footnote{Indeed, the statement \textquotedblleft$n\mid
m$\textquotedblright\ does not change (since Proposition \ref{prop.ent.div.1}
\textbf{(a)} yields that we have $n\mid m$ if and only if $\left\vert
n\right\vert \mid\left\vert m\right\vert $), and the statement
\textquotedblleft each prime $p$ satisfies $v_{p}\left(  n\right)  \leq
v_{p}\left(  m\right)  $\textquotedblright\ does not change either (because
Exercise \ref{exe.ent.prime.vp-abs} shows that $v_{p}\left(  \left\vert
n\right\vert \right)  =v_{p}\left(  n\right)  $ and $v_{p}\left(  \left\vert
m\right\vert \right)  =v_{p}\left(  m\right)  $).}. Hence, we can WLOG assume
that $n$ and $m$ are nonnegative. Assume this. Then, $n\geq0$, so that $n>0$
(since $n$ is nonzero). Hence, $n$ is a positive integer. Thus, Corollary
\ref{cor.ent.primes.can-fac} yields%
\begin{equation}
n=\prod_{p\text{ prime}}p^{v_{p}\left(  n\right)  }.
\label{pf.prop.ent.primes.n|m.n=}%
\end{equation}
Similarly,%
\begin{equation}
m=\prod_{p\text{ prime}}p^{v_{p}\left(  m\right)  }.
\label{pf.prop.ent.primes.n|m.m=}%
\end{equation}


Our goal is to prove that $n\mid m$ if and only if each prime $p$ satisfies
$v_{p}\left(  n\right)  \leq v_{p}\left(  m\right)  $. We shall now prove the
\textquotedblleft$\Longleftarrow$\textquotedblright\ and \textquotedblleft%
$\Longrightarrow$\textquotedblright\ directions of this \textquotedblleft if
and only if\textquotedblright\ statement separately.

$\Longleftarrow:$ Assume that each prime $p$ satisfies $v_{p}\left(  n\right)
\leq v_{p}\left(  m\right)  $. We must prove that $n\mid m$.

The product $\prod_{p\text{ prime}}p^{v_{p}\left(  m\right)  -v_{p}\left(
n\right)  }$ is well-defined\footnote{\textit{Proof. }Let $p$ be a prime such
that $p>\left\vert m\right\vert $. Then, $v_{p}\left(  m\right)  =0$ (by Lemma
\ref{lem.ent.primes.vpn=0} \textbf{(a)}, applied to $m$ instead of $n$), so
that $v_{p}\left(  m\right)  -\underbrace{v_{p}\left(  n\right)  }_{\geq0}\leq
v_{p}\left(  m\right)  =0$. On the other hand, $v_{p}\left(  n\right)  \leq
v_{p}\left(  m\right)  $ (since we assumed that each prime $p$ satisfies
$v_{p}\left(  n\right)  \leq v_{p}\left(  m\right)  $); thus, $v_{p}\left(
m\right)  -v_{p}\left(  n\right)  \geq0$. Combining this with $v_{p}\left(
m\right)  -v_{p}\left(  n\right)  \leq0$, we obtain $v_{p}\left(  m\right)
-v_{p}\left(  n\right)  =0$. Hence, $p^{v_{p}\left(  m\right)  -v_{p}\left(
n\right)  }=p^{0}=1$.
\par
Now, forget that we fixed $p$. We thus have proven that every prime
$p>\left\vert m\right\vert $ satisfies $p^{v_{p}\left(  m\right)
-v_{p}\left(  n\right)  }=1$. Hence, all but finitely many primes $p$ satisfy
$p^{v_{p}\left(  m\right)  -v_{p}\left(  n\right)  }=1$ (since all but
finitely many primes $p$ satisfy $p>\left\vert m\right\vert $). In other
words, the product $\prod_{p\text{ prime}}p^{v_{p}\left(  m\right)
-v_{p}\left(  n\right)  }$ has only finitely many factors different from $1$.
Hence, this product is well-defined.}.

We have assumed that each prime $p$ satisfies $v_{p}\left(  n\right)  \leq
v_{p}\left(  m\right)  $. In other words, each prime $p$ satisfies
$v_{p}\left(  m\right)  -v_{p}\left(  n\right)  \geq0$ and therefore
$p^{v_{p}\left(  m\right)  -v_{p}\left(  n\right)  }\in\mathbb{Z}$. Hence, the
product $\prod_{p\text{ prime}}p^{v_{p}\left(  m\right)  -v_{p}\left(
n\right)  }$ is a product of integers, and thus itself an integer. Let us
denote this product by $c$. Thus,%
\begin{equation}
c=\prod_{p\text{ prime}}p^{v_{p}\left(  m\right)  -v_{p}\left(  n\right)  }.
\label{pf.prop.ent.primes.n|m.c=}%
\end{equation}
Thus, $c$ is an integer (since we have just shown that $\prod_{p\text{ prime}%
}p^{v_{p}\left(  m\right)  -v_{p}\left(  n\right)  }$ is an integer).
Multiplying the equalities (\ref{pf.prop.ent.primes.n|m.n=}) and
(\ref{pf.prop.ent.primes.n|m.c=}), we obtain%
\begin{align*}
nc  &  =\left(  \prod_{p\text{ prime}}p^{v_{p}\left(  n\right)  }\right)
\left(  \prod_{p\text{ prime}}p^{v_{p}\left(  m\right)  -v_{p}\left(
n\right)  }\right)  =\prod_{p\text{ prime}}\underbrace{\left(  p^{v_{p}\left(
n\right)  }p^{v_{p}\left(  m\right)  -v_{p}\left(  n\right)  }\right)
}_{\substack{=p^{v_{p}\left(  n\right)  +\left(  v_{p}\left(  m\right)
-v_{p}\left(  n\right)  \right)  }=p^{v_{p}\left(  m\right)  }\\\text{(since
}v_{p}\left(  n\right)  +\left(  v_{p}\left(  m\right)  -v_{p}\left(
n\right)  \right)  =v_{p}\left(  m\right)  \text{)}}}\\
&  =\prod_{p\text{ prime}}p^{v_{p}\left(  m\right)  }%
=m\ \ \ \ \ \ \ \ \ \ \left(  \text{by (\ref{pf.prop.ent.primes.n|m.m=}%
)}\right)  .
\end{align*}
In other words, $m=nc$. Hence, $n\mid m$. This completes the proof of the
\textquotedblleft$\Longleftarrow$\textquotedblright\ direction of Proposition
\ref{prop.ent.primes.n|m}.

$\Longrightarrow:$ Assume that $n\mid m$. We must prove that each prime $p$
satisfies $v_{p}\left(  n\right)  \leq v_{p}\left(  m\right)  $.

So let $p$ be a prime. Recall that $n\mid m$. In other words, there exists
some integer $b$ such that $m=nb$. Consider this $b$. Now,%
\begin{align*}
v_{p}\left(  \underbrace{m}_{=nb}\right)   &  =v_{p}\left(  nb\right)
=v_{p}\left(  n\right)  +\underbrace{v_{p}\left(  b\right)  }_{\geq
0}\ \ \ \ \ \ \ \ \ \ \left(  \text{by Theorem \ref{thm.ent.prime.vp-ring}
\textbf{(a)}, applied to }a=n\right) \\
&  \geq v_{p}\left(  n\right)  ,
\end{align*}
so that $v_{p}\left(  n\right)  \leq v_{p}\left(  m\right)  $. Now, forget
that we fixed $p$. We thus have proven that each prime $p$ satisfies
$v_{p}\left(  n\right)  \leq v_{p}\left(  m\right)  $. This completes the
proof of the \textquotedblleft$\Longrightarrow$\textquotedblright\ direction
of Proposition \ref{prop.ent.primes.n|m}.
\end{proof}

Let us extract one of the steps of our above proof into a separate lemma,
since we shall use the same reasoning later on:

\begin{lemma}
\label{lem.ent.primes.prod|prod}For each prime $p$, let $a_{p}$ and $b_{p}$ be
nonnegative integers such that
\begin{equation}
a_{p}\leq b_{p}. \label{eq.lem.ent.primes.prod|prod.apbp}%
\end{equation}
Assume that all but finitely many primes $p$ satisfy $b_{p}=0$. Then, the
products $\prod_{p\text{ prime}}p^{a_{p}}$ and $\prod_{p\text{ prime}}%
p^{b_{p}}$ are both well-defined and satisfy $\prod_{p\text{ prime}}p^{a_{p}%
}\mid\prod_{p\text{ prime}}p^{b_{p}}$.
\end{lemma}

\begin{proof}
[Proof of Lemma \ref{lem.ent.primes.prod|prod}.]This is going to be really
boring: The well-definedness part is all about bookkeeping finiteness
information, whereas the $\prod_{p\text{ prime}}p^{a_{p}}\mid\prod_{p\text{
prime}}p^{b_{p}}$ claim is proven just as we proved the \textquotedblleft%
$\Longleftarrow$\textquotedblright\ direction of Proposition
\ref{prop.ent.primes.n|m}. For the sake of completeness, let us nevertheless
give the complete proof:

\begin{fineprint}
All but finitely many primes $p$ satisfy $b_{p}=0$. In other words, there
exists some finite set $S$ of primes such that every prime $p\notin S$
satisfies
\begin{equation}
b_{p}=0. \label{pf.lem.ent.primes.prod|prod.1}%
\end{equation}
Consider this $S$. Clearly, all but finitely many primes $p$ satisfy $p\notin
S$ (since $S$ is finite).

Now, every prime $p\notin S$ satisfies
\begin{equation}
a_{p}=0 \label{pf.lem.ent.primes.prod|prod.2}%
\end{equation}
\ \footnote{\textit{Proof.} Let $p\notin S$ be a prime. Then,
(\ref{eq.lem.ent.primes.prod|prod.apbp}) yields $a_{p}\leq b_{p}=0$ (by
(\ref{pf.lem.ent.primes.prod|prod.1})). Thus, $a_{p}=0$ (since $a_{p}$ is a
nonnegative integer), qed.}. Hence, all but finitely many primes $p$ satisfy
$a_{p}=0$ (since all but finitely many primes $p$ satisfy $p\notin S$). Thus,
all but finitely many primes $p$ satisfy $p^{a_{p}}=p^{0}=1$. In other words,
only finitely many primes $p$ satisfy $p^{a_{p}}\neq1$. In other words, only
finitely many factors of the product $\prod_{p\text{ prime}}p^{a_{p}}$ are
different from $1$. Hence, this product $\prod_{p\text{ prime}}p^{a_{p}}$ is well-defined.

Also, all but finitely many primes $p$ satisfy $b_{p}=0$. Therefore, all but
finitely many primes $p$ satisfy $p^{b_{p}}=p^{0}=1$. In other words, only
finitely many primes $p$ satisfy $p^{b_{p}}\neq1$. In other words, only
finitely many factors of the product $\prod_{p\text{ prime}}p^{b_{p}}$ are
different from $1$. Hence, this product $\prod_{p\text{ prime}}p^{b_{p}}$ is well-defined.

The product $\prod_{p\text{ prime}}p^{b_{p}-a_{p}}$ is
well-defined\footnote{\textit{Proof. }Every prime $p\notin S$ satisfies
$\underbrace{b_{p}}_{\substack{=0\\\text{(by
(\ref{pf.lem.ent.primes.prod|prod.1}))}}}-\underbrace{a_{p}}%
_{\substack{=0\\\text{(by (\ref{pf.lem.ent.primes.prod|prod.2}))}}}=0-0=0$ and
therefore $p^{b_{p}-a_{p}}=p^{0}=1$. Thus, all but finitely many primes $p$
satisfy $p^{b_{p}-a_{p}}=1$ (since all but finitely many primes $p$ satisfy
$p\notin S$). In other words, only finitely many primes $p$ satisfy
$p^{b_{p}-a_{p}}\neq1$. In other words, only finitely many factors of the
product $\prod_{p\text{ prime}}p^{b_{p}-a_{p}}$ are different from $1$. Hence,
this product $\prod_{p\text{ prime}}p^{b_{p}-a_{p}}$ is well-defined.}. Denote
this product by $c$.

For each prime $p$, we have $b_{p}-a_{p}\geq0$ (by
(\ref{eq.lem.ent.primes.prod|prod.apbp})) and thus $b_{p}-a_{p}\in\mathbb{N}$.
Hence, for each prime $p$, the number $p^{b_{p}-a_{p}}$ is an integer.
Therefore, $\prod_{p\text{ prime}}p^{b_{p}-a_{p}}$ is a product of integers,
and thus itself an integer. In other words, $c$ is an integer (since
$c=\prod_{p\text{ prime}}p^{b_{p}-a_{p}}$).

But from $c=\prod_{p\text{ prime}}p^{b_{p}-a_{p}}$, we obtain%
\[
\left(  \prod_{p\text{ prime}}p^{a_{p}}\right)  c=\left(  \prod_{p\text{
prime}}p^{a_{p}}\right)  \left(  \prod_{p\text{ prime}}p^{b_{p}-a_{p}}\right)
=\prod_{p\text{ prime}}\underbrace{\left(  p^{a_{p}}p^{b_{p}-a_{p}}\right)
}_{=p^{a_{p}+\left(  b_{p}-a_{p}\right)  }=p^{b_{p}}}=\prod_{p\text{ prime}%
}p^{b_{p}}.
\]
Thus, $\prod_{p\text{ prime}}p^{a_{p}}\mid\prod_{p\text{ prime}}p^{b_{p}}$
(since $c$ is an integer). This completes the proof of Lemma
\ref{lem.ent.primes.prod|prod}.
\end{fineprint}
\end{proof}

\begin{corollary}
\label{cor.ent.primes.vp-of-can}For each prime $p$, let $b_{p}$ be a
nonnegative integer. Assume that all but finitely many primes $p$ satisfy
$b_{p}=0$. Let $n=\prod_{p\text{ prime}}p^{b_{p}}$. Then,%
\[
v_{q}\left(  n\right)  =b_{q}\ \ \ \ \ \ \ \ \ \ \text{for each prime }q.
\]

\end{corollary}

\begin{proof}
[Proof of Corollary \ref{cor.ent.primes.vp-of-can}.]The product $\prod
_{p\text{ prime}}p^{b_{p}}$ is well-defined. (This can be shown just as in the
proof of Lemma \ref{lem.ent.primes.prod|prod}.) Now, choose a list $\left(
a_{1},a_{2},\ldots,a_{k}\right)  $ of primes that contains each prime $p$
exactly $b_{p}$ times. (Such a list clearly exists: For example, we can pick%
\[
\left(  \underbrace{2,2,\ldots,2}_{b_{2}\text{ times}},\underbrace{3,3,\ldots
,3}_{b_{3}\text{ times}},\underbrace{5,5,\ldots,5}_{b_{5}\text{ times}}%
,\ldots\right)  .
\]
This is indeed a finite list, since all but finitely many primes $p$ satisfy
$b_{p}=0$.)

Now, the list $\left(  a_{1},a_{2},\ldots,a_{k}\right)  $ contains each prime
$p$ exactly $b_{p}$ times (and no other entries). Hence, the product
$a_{1}a_{2}\cdots a_{k}$ of the entries of this list contains each prime $p$
exactly $b_{p}$ times as a factor (and no other factors). Thus, this product
equals $\prod_{p\text{ prime}}p^{b_{p}}$. In other words, $a_{1}a_{2}\cdots
a_{k}=\prod_{p\text{ prime}}p^{b_{p}}$. Hence,%
\[
n=\prod_{p\text{ prime}}p^{b_{p}}=a_{1}a_{2}\cdots a_{k}.
\]
Thus, $\left(  a_{1},a_{2},\ldots,a_{k}\right)  $ is a prime factorization of
$n$ (since $\left(  a_{1},a_{2},\ldots,a_{k}\right)  $ is a tuple of primes).

Let $q$ be a prime. Proposition \ref{prop.ent.prime.mult-in-pf} (applied to
$p=q$) yields%
\begin{align*}
&  \left(  \text{the number of times }q\text{ appears in the tuple }\left(
a_{1},a_{2},\ldots,a_{k}\right)  \right) \\
&  =\left(  \text{the number of }i\in\left\{  1,2,\ldots,k\right\}  \text{
such that }a_{i}=q\right) \\
&  =v_{q}\left(  n\right)  .
\end{align*}
Thus,%
\[
v_{q}\left(  n\right)  =\left(  \text{the number of times }q\text{ appears in
the tuple }\left(  a_{1},a_{2},\ldots,a_{k}\right)  \right)  =b_{q}%
\]
(since the list $\left(  a_{1},a_{2},\ldots,a_{k}\right)  $ contains each
prime $p$ exactly $b_{p}$ times, and thus contains the prime $q$ exactly
$b_{q}$ times). This proves Corollary \ref{cor.ent.primes.vp-of-can}.
\end{proof}

The next exercise says that a nonnegative integer $n$ is uniquely determined
by the family $\left(  v_{p}\left(  n\right)  \right)  _{p\text{ prime}}$ of
its $p$-valuations for all primes $p$:

\begin{exercise}
\label{exe.ent.primes.vp=vp}Let $n$ and $m$ be two nonnegative integers.
Assume that
\begin{equation}
v_{p}\left(  n\right)  =v_{p}\left(  m\right)  \ \ \ \ \ \ \ \ \ \ \text{for
every prime }p. \label{eq.exe.ent.primes.vp=vp.ass}%
\end{equation}
Prove that $n=m$.
\end{exercise}

\begin{center}
\textbf{2019-02-13 lecture}
\end{center}

Canonical factorizations can also be used to describe gcds and lcms:

\begin{proposition}
\label{prop.ent.primes.gcd}Let $n$ and $m$ be two nonzero integers. Then,%
\begin{equation}
\gcd\left(  n,m\right)  =\prod_{p\text{ prime}}p^{\min\left\{  v_{p}\left(
n\right)  ,v_{p}\left(  m\right)  \right\}  }
\label{eq.prop.ent.primes.gcd.gcd}%
\end{equation}
and%
\begin{equation}
\operatorname{lcm}\left(  n,m\right)  =\prod_{p\text{ prime}}p^{\max\left\{
v_{p}\left(  n\right)  ,v_{p}\left(  m\right)  \right\}  }.
\label{eq.prop.ent.primes.gcd.lcm}%
\end{equation}

\end{proposition}

\begin{proof}
[Proof of Proposition \ref{prop.ent.primes.gcd}.]If $p$ is any prime, then
$v_{p}\left(  n\right)  $ and $v_{p}\left(  m\right)  $ are nonnegative
integers (since $n$ and $m$ are nonzero), and thus so are $\min\left\{
v_{p}\left(  n\right)  ,v_{p}\left(  m\right)  \right\}  $ and $\max\left\{
v_{p}\left(  n\right)  ,v_{p}\left(  m\right)  \right\}  $.

It is easy to see that the infinite products $\prod_{p\text{ prime}}%
p^{\min\left\{  v_{p}\left(  n\right)  ,v_{p}\left(  m\right)  \right\}  }$
and \newline$\prod_{p\text{ prime}}p^{\max\left\{  v_{p}\left(  n\right)
,v_{p}\left(  m\right)  \right\}  }$ are well-defined\footnote{\textit{Proof.}
Let $p$ be a prime such that $p>\max\left\{  \left\vert m\right\vert
,\left\vert n\right\vert \right\}  $. Thus, $p>\max\left\{  \left\vert
m\right\vert ,\left\vert n\right\vert \right\}  \geq\left\vert m\right\vert $
and therefore $v_{p}\left(  m\right)  =0$ (by Lemma \ref{lem.ent.primes.vpn=0}
\textbf{(a)}, applied to $m$ instead of $n$). Similarly, $v_{p}\left(
n\right)  =0$. Hence, $\max\left\{  \underbrace{v_{p}\left(  n\right)  }%
_{=0},\underbrace{v_{p}\left(  m\right)  }_{=0}\right\}  =\max\left\{
0,0\right\}  =0$ and therefore $p^{\max\left\{  v_{p}\left(  n\right)
,v_{p}\left(  m\right)  \right\}  }=p^{0}=1$.
\par
Now, forget that we fixed $p$. We thus have proven that every prime
$p>\max\left\{  \left\vert m\right\vert ,\left\vert n\right\vert \right\}  $
satisfies $p^{\max\left\{  v_{p}\left(  n\right)  ,v_{p}\left(  m\right)
\right\}  }=1$. Hence, all but finitely many primes $p$ satisfy $p^{\max
\left\{  v_{p}\left(  n\right)  ,v_{p}\left(  m\right)  \right\}  }=1$ (since
all but finitely many primes $p$ satisfy $p>\max\left\{  \left\vert
m\right\vert ,\left\vert n\right\vert \right\}  $). In other words, the
product $\prod_{p\text{ prime}}p^{\max\left\{  v_{p}\left(  n\right)
,v_{p}\left(  m\right)  \right\}  }$ has only finitely many factors different
from $1$. Hence, this product is well-defined. Similarly, we can show that the
product $\prod_{p\text{ prime}}p^{\min\left\{  v_{p}\left(  n\right)
,v_{p}\left(  m\right)  \right\}  }$ is well-defined.}.

Define two nonnegative integers%
\begin{equation}
g=\prod\limits_{p\text{ prime}}p^{\min\left\{  v_{p}\left(  n\right)
,v_{p}\left(  m\right)  \right\}  }\ \ \ \ \ \ \ \ \ \ \text{and}%
\ \ \ \ \ \ \ \ \ \ h=\gcd\left(  n,m\right)  .
\label{pf.prop.ent.primes.gcd.g=h=}%
\end{equation}


Note that $h=\gcd\left(  n,m\right)  $ is a positive integer (since $n$ and
$m$ are nonzero) and thus nonzero. Thus, $v_{p}\left(  h\right)  $ is a
nonnegative integer for each prime $p$.

Corollary \ref{cor.ent.primes.can-facZ} yields $\left\vert n\right\vert
=\prod\limits_{p\text{ prime}}p^{v_{p}\left(  n\right)  }$. But each prime $p$
satisfies \newline$\min\left\{  v_{p}\left(  n\right)  ,v_{p}\left(  m\right)
\right\}  \leq v_{p}\left(  n\right)  $ (since the minimum of a set is $\leq$
to any element of the set). Hence, Lemma \ref{lem.ent.primes.prod|prod}
(applied to $a_{p}=\min\left\{  v_{p}\left(  n\right)  ,v_{p}\left(  m\right)
\right\}  $ and $b_{p}=v_{p}\left(  n\right)  $) yields $\prod\limits_{p\text{
prime}}p^{\min\left\{  v_{p}\left(  n\right)  ,v_{p}\left(  m\right)
\right\}  }\mid\prod\limits_{p\text{ prime}}p^{v_{p}\left(  n\right)  }$. This
rewrites as $g\mid\left\vert n\right\vert $ (since $g=\prod\limits_{p\text{
prime}}p^{\min\left\{  v_{p}\left(  n\right)  ,v_{p}\left(  m\right)
\right\}  }$ and $\left\vert n\right\vert =\prod\limits_{p\text{ prime}%
}p^{v_{p}\left(  n\right)  }$). Hence, $g\mid\left\vert n\right\vert \mid n$
(by Exercise \ref{exe.ent.div.aabs} \textbf{(b)}). Similarly, $g\mid m$. Thus,
$\left(  g\mid n\text{ and }g\mid m\right)  $. Hence, Lemma
\ref{lem.ent.gcd.uniprop} (applied to $g$, $n$ and $m$ instead of $m$, $a$ and
$b$) yields $g\mid\gcd\left(  n,m\right)  =h$.

On the other hand, Proposition \ref{prop.ent.primes.n|m} (applied to $h$ and
$n$ instead of $n$ and $m$) shows that $h\mid n$ if and only if each prime $p$
satisfies $v_{p}\left(  h\right)  \leq v_{p}\left(  n\right)  $. Thus, each
prime $p$ satisfies $v_{p}\left(  h\right)  \leq v_{p}\left(  n\right)  $.

Now, fix any prime $p$. Then, $v_{p}\left(  h\right)  \leq v_{p}\left(
n\right)  $ (as we have just seen) and $v_{p}\left(  h\right)  \leq
v_{p}\left(  m\right)  $ (similarly). Combining these two inequalities, we
obtain%
\[
v_{p}\left(  h\right)  \leq\min\left\{  v_{p}\left(  n\right)  ,v_{p}\left(
m\right)  \right\}
\]
(since $\min\left\{  v_{p}\left(  n\right)  ,v_{p}\left(  m\right)  \right\}
$ must be one of the two numbers $v_{p}\left(  n\right)  $ and $v_{p}\left(
m\right)  $, but we have just seen that $v_{p}\left(  h\right)  $ is $\leq$ to
each of these two numbers).

Now, forget that we fixed $p$. We thus have show that each prime $p$ satisfies
$v_{p}\left(  h\right)  \leq\min\left\{  v_{p}\left(  n\right)  ,v_{p}\left(
m\right)  \right\}  $. Hence, Lemma \ref{lem.ent.primes.prod|prod} (applied to
$a_{p}=v_{p}\left(  h\right)  $ and $b_{p}=\min\left\{  v_{p}\left(  n\right)
,v_{p}\left(  m\right)  \right\}  $) yields $\prod\limits_{p\text{ prime}%
}p^{v_{p}\left(  h\right)  }\mid\prod\limits_{p\text{ prime}}p^{\min\left\{
v_{p}\left(  n\right)  ,v_{p}\left(  m\right)  \right\}  }$. But $h$ is
positive; hence, Corollary \ref{cor.ent.primes.can-fac} (applied to $h$
instead of $n$) yields%
\[
h=\prod\limits_{p\text{ prime}}p^{v_{p}\left(  h\right)  }\mid\prod
\limits_{p\text{ prime}}p^{\min\left\{  v_{p}\left(  n\right)  ,v_{p}\left(
m\right)  \right\}  }=g.
\]


Thus, we know that $g\mid h$ and $h\mid g$. Hence, Exercise
\ref{exe.ent.div.abba} (applied to $a=g$ and $b=h$) yields $\left\vert
g\right\vert =\left\vert h\right\vert $. But $g$ is nonnegative; thus,
$\left\vert g\right\vert =g$. Hence, $g=\left\vert g\right\vert =\left\vert
h\right\vert =h$ (since $h$ is positive). In view of
(\ref{pf.prop.ent.primes.gcd.g=h=}), this rewrites as $\prod\limits_{p\text{
prime}}p^{\min\left\{  v_{p}\left(  n\right)  ,v_{p}\left(  m\right)
\right\}  }=\gcd\left(  n,m\right)  $. This proves
(\ref{eq.prop.ent.primes.gcd.gcd}).

The proof of (\ref{eq.prop.ent.primes.gcd.lcm}) is entirely analogous to the
proof of (\ref{eq.prop.ent.primes.gcd.gcd}) we just gave: We merely need to
flip all divisibilities and inequalities and replace \textquotedblleft$\min
$\textquotedblright\ by \textquotedblleft$\max$\textquotedblright\ everywhere,
and use Lemma \ref{lem.ent.lcm.uniprop} instead of Lemma
\ref{lem.ent.gcd.uniprop}
\end{proof}

\begin{example}
For this example, set $n=3^{2}\cdot5\cdot7^{8}$ and $m=2\cdot3^{3}\cdot7^{2}$.
Let us compute $\gcd\left(  n,m\right)  $ and $\operatorname{lcm}\left(
n,m\right)  $ using Proposition \ref{prop.ent.primes.gcd}.

From $n=3^{2}\cdot5\cdot7^{8}$, we obtain (using Corollary
\ref{cor.ent.primes.vp-of-can}) that%
\begin{align*}
v_{3}\left(  n\right)   &  =2,\ \ \ \ \ \ \ \ \ \ v_{5}\left(  n\right)
=1,\ \ \ \ \ \ \ \ \ \ v_{7}\left(  n\right)
=8,\ \ \ \ \ \ \ \ \ \ \text{and}\\
v_{p}\left(  n\right)   &  =0\text{ for each prime }p\notin\left\{
3,5,7\right\}  .
\end{align*}
Similarly, from $m=2\cdot3^{3}\cdot7^{2}$, we obtain%
\begin{align*}
v_{2}\left(  m\right)   &  =1,\ \ \ \ \ \ \ \ \ \ v_{3}\left(  m\right)
=3,\ \ \ \ \ \ \ \ \ \ v_{7}\left(  m\right)
=2,\ \ \ \ \ \ \ \ \ \ \text{and}\\
v_{p}\left(  n\right)   &  =0\text{ for each prime }p\notin\left\{
2,3,7\right\}  .
\end{align*}
Now, (\ref{eq.prop.ent.primes.gcd.gcd}) yields%
\begin{align*}
&  \gcd\left(  n,m\right) \\
&  =\prod_{p\text{ prime}}p^{\min\left\{  v_{p}\left(  n\right)  ,v_{p}\left(
m\right)  \right\}  }\\
&  =\underbrace{2^{\min\left\{  v_{2}\left(  n\right)  ,v_{2}\left(  m\right)
\right\}  }}_{=2^{\min\left\{  0,1\right\}  }=2^{0}}\cdot\underbrace{3^{\min
\left\{  v_{3}\left(  n\right)  ,v_{3}\left(  m\right)  \right\}  }}%
_{=3^{\min\left\{  2,3\right\}  }=3^{2}}\cdot\underbrace{5^{\min\left\{
v_{5}\left(  n\right)  ,v_{5}\left(  m\right)  \right\}  }}_{=5^{\min\left\{
1,0\right\}  }=5^{0}}\\
&  \ \ \ \ \ \ \ \ \ \ \cdot\underbrace{7^{\min\left\{  v_{7}\left(  n\right)
,v_{7}\left(  m\right)  \right\}  }}_{=7^{\min\left\{  8,2\right\}  }=7^{2}%
}\cdot\prod_{\substack{p\text{ prime;}\\p\notin\left\{  2,3,5,7\right\}
}}\underbrace{p^{\min\left\{  v_{p}\left(  n\right)  ,v_{p}\left(  m\right)
\right\}  }}_{\substack{=1\\\text{(since }v_{p}\left(  n\right)  =0\text{ and
}v_{p}\left(  m\right)  =0\\\text{and thus }\min\left\{  v_{p}\left(
n\right)  ,v_{p}\left(  m\right)  \right\}  =\min\left\{  0,0\right\}
=0\text{)}}}\\
&  =2^{0}\cdot3^{2}\cdot5^{0}\cdot7^{2}=3^{2}\cdot7^{2}.
\end{align*}
Likewise, (\ref{eq.prop.ent.primes.gcd.lcm}) yields%
\begin{align*}
&  \operatorname{lcm}\left(  n,m\right) \\
&  =\prod_{p\text{ prime}}p^{\max\left\{  v_{p}\left(  n\right)  ,v_{p}\left(
m\right)  \right\}  }\\
&  =\underbrace{2^{\max\left\{  v_{2}\left(  n\right)  ,v_{2}\left(  m\right)
\right\}  }}_{=2^{\max\left\{  0,1\right\}  }=2^{1}}\cdot\underbrace{3^{\max
\left\{  v_{3}\left(  n\right)  ,v_{3}\left(  m\right)  \right\}  }}%
_{=3^{\max\left\{  2,3\right\}  }=3^{3}}\cdot\underbrace{5^{\max\left\{
v_{5}\left(  n\right)  ,v_{5}\left(  m\right)  \right\}  }}_{=5^{\max\left\{
1,0\right\}  }=5^{1}}\\
&  \ \ \ \ \ \ \ \ \ \ \cdot\underbrace{7^{\max\left\{  v_{7}\left(  n\right)
,v_{7}\left(  m\right)  \right\}  }}_{=7^{\max\left\{  8,2\right\}  }=7^{8}%
}\cdot\prod_{\substack{p\text{ prime;}\\p\notin\left\{  2,3,5,7\right\}
}}\underbrace{p^{\max\left\{  v_{p}\left(  n\right)  ,v_{p}\left(  m\right)
\right\}  }}_{\substack{=1\\\text{(since }v_{p}\left(  n\right)  =0\text{ and
}v_{p}\left(  m\right)  =0\\\text{and thus }\max\left\{  v_{p}\left(
n\right)  ,v_{p}\left(  m\right)  \right\}  =\max\left\{  0,0\right\}
=0\text{)}}}\\
&  =2^{1}\cdot3^{3}\cdot5^{1}\cdot7^{8}.
\end{align*}

\end{example}

Proposition \ref{prop.ent.primes.gcd} can be generalized to the case of $k$
integers $b_{1},b_{2},\ldots,b_{k}$ instead of two integers $n,m$:

\begin{proposition}
\label{prop.ent.primes.gcd-k}Let $b_{1},b_{2},\ldots,b_{k}$ be finitely many
nonzero integers, with $k>0$. Then,%
\begin{equation}
\gcd\left(  b_{1},b_{2},\ldots,b_{k}\right)  =\prod_{p\text{ prime}}%
p^{\min\left\{  v_{p}\left(  b_{1}\right)  ,v_{p}\left(  b_{2}\right)
,\ldots,v_{p}\left(  b_{k}\right)  \right\}  }
\label{eq.prop.ent.primes.gcd-k.gcd}%
\end{equation}
an%
\begin{equation}
\operatorname{lcm}\left(  b_{1},b_{2},\ldots,b_{k}\right)  =\prod_{p\text{
prime}}p^{\max\left\{  v_{p}\left(  b_{1}\right)  ,v_{p}\left(  b_{2}\right)
,\ldots,v_{p}\left(  b_{k}\right)  \right\}  }.
\label{eq.prop.ent.primes.gcd-k.lcm}%
\end{equation}

\end{proposition}

\begin{proof}
[Proof of Proposition \ref{prop.ent.primes.gcd-k}.]The proof of Proposition
\ref{prop.ent.primes.gcd-k} is analogous to the proof of Proposition
\ref{prop.ent.primes.gcd}, with two minor exceptions:

\begin{itemize}
\item Instead of applying Lemma \ref{lem.ent.gcd.uniprop} (in the proof of
(\ref{eq.prop.ent.primes.gcd-k.gcd})), we now have to apply the analogous
claim for $k$ integers\footnote{Namely: Let $m\in\mathbb{Z}$ and let
$b_{1},b_{2},\ldots,b_{k}$ be integers such that $\left(  m\mid b_{i}\text{
for all }i\in\left\{  1,2,\ldots,k\right\}  \right)  $. Then, $m\mid
\gcd\left(  b_{1},b_{2},\ldots,b_{k}\right)  $.}. The latter claim follows
from Theorem \ref{thm.ent.gcd.uniprop-mul} \textbf{(a)}.

\item Instead of applying Lemma \ref{lem.ent.lcm.uniprop} (in the proof of
(\ref{eq.prop.ent.primes.gcd-k.lcm})), we now have to apply the analogous
claim for $k$ integers\footnote{Namely: Let $m\in\mathbb{Z}$ and let
$b_{1},b_{2},\ldots,b_{k}$ be integers such that $\left(  b_{i}\mid m\text{
for all }i\in\left\{  1,2,\ldots,k\right\}  \right)  $. Then,
$\operatorname{lcm}\left(  b_{1},b_{2},\ldots,b_{k}\right)  \mid m$.}. The
latter claim follows from Theorem \ref{thm.ent.lcm.uniprop-mul} \textbf{(a)}.
Alternatively, instead of applying this claim, we can argue as follows:
Setting $g=\prod_{p\text{ prime}}p^{\max\left\{  v_{p}\left(  b_{1}\right)
,v_{p}\left(  b_{2}\right)  ,\ldots,v_{p}\left(  b_{k}\right)  \right\}  }$
and $h=\operatorname{lcm}\left(  b_{1},b_{2},\ldots,b_{k}\right)  $, we see
that $\left(  b_{i}\mid g\text{ for all }i\in\left\{  1,2,\ldots,k\right\}
\right)  $ (by an argument analogous to the one we used to show $\left(  g\mid
n\text{ and }g\mid m\right)  $ in the original proof of
(\ref{eq.prop.ent.primes.gcd.gcd})). Thus, $g$ is a common multiple of
$b_{1},b_{2},\ldots,b_{k}$. In other words, $g\in\operatorname*{Mul}\left(
b_{1},b_{2},\ldots,b_{k}\right)  $. Hence, $g$ is a positive element of
$\operatorname*{Mul}\left(  b_{1},b_{2},\ldots,b_{k}\right)  $ (since $g$ is
positive). Hence, $g\geq\operatorname{lcm}\left(  b_{1},b_{2},\ldots
,b_{k}\right)  $ (since $\operatorname{lcm}\left(  b_{1},b_{2},\ldots
,b_{k}\right)  $ is the \textbf{smallest} positive element of
$\operatorname*{Mul}\left(  b_{1},b_{2},\ldots,b_{k}\right)  $). In other
words, $g\geq h$ (since $h=\operatorname{lcm}\left(  b_{1},b_{2},\ldots
,b_{k}\right)  $). On the other hand, we prove $g\mid h$ (similarly to how we
proved $h\mid g$ in the original proof of (\ref{eq.prop.ent.primes.gcd.gcd})).
Thus, Proposition \ref{prop.ent.div.1} \textbf{(b)} (applied to $g$ and $h$
instead of $a$ and $b$) yields $\left\vert g\right\vert \leq\left\vert
h\right\vert $ (since $h\neq0$). Since $g$ is positive, we have $\left\vert
g\right\vert =g$ and thus $g=\left\vert g\right\vert \leq\left\vert
h\right\vert =h$ (since $h$ is positive). Combining this with $g\geq h$, we
obtain $g=h$. As before, this completes the proof of
(\ref{eq.prop.ent.primes.gcd-k.lcm}).
\end{itemize}
\end{proof}

We can use Propositions \ref{prop.ent.primes.gcd} and
\ref{prop.ent.primes.gcd-k} to reprove certain facts about lcms and gcds. For
example, let us prove Theorem \ref{thm.ent.lcm.gcd*lcm} and solve Exercise
\ref{exe.ent.lcm.lcmabc}:

\begin{fineprint}
\begin{proof}
[Second proof of Theorem \ref{thm.ent.lcm.gcd*lcm} (sketched).]WLOG assume
that $a$ and $b$ are nonzero (since otherwise, the claim of Theorem
\ref{thm.ent.lcm.gcd*lcm} easily reduces to $0=0$). Then, $ab$ is nonzero as
well. Hence, Corollary \ref{cor.ent.primes.can-facZ} (applied to $n=ab$)
yields%
\[
\left\vert ab\right\vert =\prod_{p\text{ prime}}p^{v_{p}\left(  ab\right)  }.
\]
Now, Proposition \ref{prop.ent.primes.gcd} yields%
\begin{align*}
\gcd\left(  a,b\right)   &  =\prod_{p\text{ prime}}p^{\min\left\{
v_{p}\left(  a\right)  ,v_{p}\left(  b\right)  \right\}  }%
\ \ \ \ \ \ \ \ \ \ \text{and}\\
\operatorname{lcm}\left(  a,b\right)   &  =\prod_{p\text{ prime}}%
p^{\max\left\{  v_{p}\left(  a\right)  ,v_{p}\left(  b\right)  \right\}  }.
\end{align*}
Multiplying these two equalities, we get%
\begin{align*}
\gcd\left(  a,b\right)  \cdot\operatorname{lcm}\left(  a,b\right)   &
=\left(  \prod_{p\text{ prime}}p^{\min\left\{  v_{p}\left(  a\right)
,v_{p}\left(  b\right)  \right\}  }\right)  \cdot\left(  \prod_{p\text{
prime}}p^{\max\left\{  v_{p}\left(  a\right)  ,v_{p}\left(  b\right)
\right\}  }\right) \\
&  =\prod_{p\text{ prime}}\underbrace{\left(  p^{\min\left\{  v_{p}\left(
a\right)  ,v_{p}\left(  b\right)  \right\}  }p^{\max\left\{  v_{p}\left(
a\right)  ,v_{p}\left(  b\right)  \right\}  }\right)  }_{\substack{=p^{\min
\left\{  v_{p}\left(  a\right)  ,v_{p}\left(  b\right)  \right\}
+\max\left\{  v_{p}\left(  a\right)  ,v_{p}\left(  b\right)  \right\}
}\\=p^{v_{p}\left(  a\right)  +v_{p}\left(  b\right)  }\\\text{(since }%
\min\left\{  u,v\right\}  +\max\left\{  u,v\right\}  =u+v\text{ for any reals
}u,v\text{)}}}\\
&  =\prod_{p\text{ prime}}\underbrace{p^{v_{p}\left(  a\right)  +v_{p}\left(
b\right)  }}_{\substack{=p^{v_{p}\left(  ab\right)  }\\\text{(since }%
v_{p}\left(  a\right)  +v_{p}\left(  b\right)  =v_{p}\left(  ab\right)
\\\text{(by Theorem \ref{thm.ent.prime.vp-ring} \textbf{(a)}))}}%
}=\prod_{p\text{ prime}}p^{v_{p}\left(  ab\right)  }=\left\vert ab\right\vert
.
\end{align*}
Hence, Theorem \ref{thm.ent.lcm.gcd*lcm} is proven again.

See Section \ref{sect.sols.exe.ent.lcm.lcmabc.2} for a second solution to
Exercise \ref{exe.ent.lcm.lcmabc} using Propositions \ref{prop.ent.primes.gcd}
and \ref{prop.ent.primes.gcd-k} (and a slightly more general result that can
be proven in the same way).
\end{proof}
\end{fineprint}

\begin{exercise}
\label{exe.ent.primes.gcd.1}Let $n$ and $m$ be two integers. Let $p$ be a prime.

\textbf{(a)} Prove that $v_{p}\left(  \gcd\left(  n,m\right)  \right)
=\min\left\{  v_{p}\left(  n\right)  ,v_{p}\left(  m\right)  \right\}  $.

\textbf{(b)} Prove that $v_{p}\left(  \operatorname{lcm}\left(  n,m\right)
\right)  =\max\left\{  v_{p}\left(  n\right)  ,v_{p}\left(  m\right)
\right\}  $.
\end{exercise}

\subsubsection{Coprimality through prime factors}

\begin{proposition}
\label{prop.ent.coprime.via-primes}Let $n$ and $m$ be two integers. Then,
$n\perp m$ if and only if there exists no prime $p$ that divides both $n$ and
$m$.
\end{proposition}

\begin{proof}
[Proof of Proposition \ref{prop.ent.coprime.via-primes}.]$\Longrightarrow:$
Assume that $n\perp m$. We must prove that there exists no prime $p$ that
divides both $n$ and $m$.

Let $p$ be a prime that divides both $n$ and $m$. Thus, $p\mid n$ and $p\mid
m$. Hence, $p\mid\gcd\left(  n,m\right)  $ (by Lemma \ref{lem.ent.gcd.uniprop}%
, applied to $p$, $n$ and $m$ instead of $m$, $a$ and $b$). But $\gcd\left(
n,m\right)  =1$ (since $n\perp m$). Hence, $p\mid\gcd\left(  n,m\right)  =1$.
Hence, Proposition \ref{prop.ent.div.1} \textbf{(b)} (applied to $a=p$ and
$b=1$) yields $\left\vert p\right\vert \leq\left\vert 1\right\vert =1$.

But $p$ is a prime; thus, $p>1>0$, so that $\left\vert p\right\vert =p$ and
thus $p=\left\vert p\right\vert \leq1$. This contradicts $p>1$.

Now, forget that we fixed $p$. We thus have obtained a contradiction for each
prime $p$ that divides both $n$ and $m$. Hence, there exists no prime $p$ that
divides both $n$ and $m$. This proves the \textquotedblleft$\Longrightarrow
$\textquotedblright\ direction of Proposition
\ref{prop.ent.coprime.via-primes}.

$\Longleftarrow:$ Assume that there exists no prime $p$ that divides both $n$
and $m$. We must prove that $n\perp m$.

Assume the contrary. Thus, we don't have $n\perp m$. In other words, we don't
have $\gcd\left(  n,m\right)  =1$. In other words, $\gcd\left(  n,m\right)
\neq1$. Hence, there exists at least one prime $p$ such that $p\mid\gcd\left(
n,m\right)  $\ \ \ \ \footnote{\textit{Proof.} This is obvious if $\gcd\left(
n,m\right)  =0$ (because in that case, we can take $p=2$, or any other prime).
Thus, for the rest of this proof, we WLOG assume that $\gcd\left(  n,m\right)
\neq0$. Thus, $\gcd\left(  n,m\right)  >1$ (since $\gcd\left(  n,m\right)  $
is a nonnegative integer satisfying $\gcd\left(  n,m\right)  \neq0$ and
$\gcd\left(  n,m\right)  \neq1$). Hence, Proposition
\ref{prop.ent.primes.ex-pri-div} (applied to $\gcd\left(  n,m\right)  $
instead of $n$) yields that there exists at least one prime $p$ such that
$p\mid\gcd\left(  n,m\right)  $. Qed.}. Consider this $p$.

We have $p\mid\gcd\left(  n,m\right)  \mid n$ and $p\mid\gcd\left(
n,m\right)  \mid m$. Thus, the prime $p$ divides both $n$ and $m$. This
contradicts the assumption that there exists no prime $p$ that divides both
$n$ and $m$.

This contradiction shows that our assumption was false. Hence, $n\perp m$ is
proven. This proves the \textquotedblleft$\Longleftarrow$\textquotedblright%
\ direction of Proposition \ref{prop.ent.coprime.via-primes}.
\end{proof}

\begin{corollary}
\label{cor.ent.coprime.orthogonal}Let $n$ and $m$ be two nonzero integers. Then:

\textbf{(a)} The infinite sum $\sum_{p\text{ prime}}v_{p}\left(  n\right)
v_{p}\left(  m\right)  $ is well-defined (i.e., all but finitely many primes
$p$ satisfy $v_{p}\left(  n\right)  v_{p}\left(  m\right)  =0$).

\textbf{(b)} We have $n\perp m$ if and only if
\[
\sum_{p\text{ prime}}v_{p}\left(  n\right)  v_{p}\left(  m\right)  =0.
\]

\end{corollary}

\begin{proof}
[Proof of Corollary \ref{cor.ent.coprime.orthogonal} (sketched).]\textbf{(a)}
For every prime $p>\left\vert n\right\vert $, we have $v_{p}\left(  n\right)
=0$ (by Lemma \ref{lem.ent.primes.vpn=0} \textbf{(a)}) and thus
$\underbrace{v_{p}\left(  n\right)  }_{=0}v_{p}\left(  m\right)  =0$. Now,
Corollary \ref{cor.ent.coprime.orthogonal} \textbf{(a)} follows easily.

\textbf{(b)} A sum of nonnegative reals is $0$ if and only if each of its
addends is $0$. Thus, the sum $\sum_{p\text{ prime}}v_{p}\left(  n\right)
v_{p}\left(  m\right)  $ is $0$ if and only if we have $\left(  v_{p}\left(
n\right)  v_{p}\left(  m\right)  =0\text{ for all primes }p\right)  $ (because
all the addends $v_{p}\left(  n\right)  v_{p}\left(  m\right)  $ of our sum
are nonnegative reals). Hence, we have the following chain of equivalences:%
\begin{align*}
&  \left(  \sum_{p\text{ prime}}v_{p}\left(  n\right)  v_{p}\left(  m\right)
=0\right) \\
&  \Longleftrightarrow\ \left(  v_{p}\left(  n\right)  v_{p}\left(  m\right)
=0\text{ for all primes }p\right) \\
&  \Longleftrightarrow\ \left(  \left(  v_{p}\left(  n\right)  =0\text{ or
}v_{p}\left(  m\right)  =0\right)  \text{ for all primes }p\right) \\
&  \Longleftrightarrow\ \left(  \left(  p\nmid n\text{ or }p\nmid m\right)
\text{ for all primes }p\right) \\
&  \ \ \ \ \ \ \ \ \ \ \left(
\begin{array}
[c]{c}%
\text{since Corollary \ref{cor.ent.prime.vp-0} yields the}\\
\text{equivalences }\left(  v_{p}\left(  n\right)  =0\right)
\Longleftrightarrow\left(  p\nmid n\right)  \text{ and }\left(  v_{p}\left(
m\right)  =0\right)  \Longleftrightarrow\left(  p\nmid m\right) \\
\text{for each prime }p
\end{array}
\right) \\
&  \Longleftrightarrow\ \left(  \text{there exists no prime }p\text{ such that
}\left(  p\mid n\text{ and }p\mid m\right)  \right) \\
&  \Longleftrightarrow\ \left(  \text{there exists no prime }p\text{ that
divides both }n\text{ and }m\right) \\
&  \Longleftrightarrow\ \left(  n\perp m\right)  \ \ \ \ \ \ \ \ \ \ \left(
\text{by Proposition \ref{prop.ent.coprime.via-primes}}\right)  .
\end{align*}
This proves Corollary \ref{cor.ent.coprime.orthogonal} \textbf{(b)}.
\end{proof}

Corollary \ref{cor.ent.coprime.orthogonal} \textbf{(b)} is the reason for the
notation \textquotedblleft$\perp$\textquotedblright\ that we are using for
coprimality. In fact, when $n$ is a positive integer, we can regard the
$p$-valuations $v_{p}\left(  n\right)  $ as the \textquotedblleft
coordinates\textquotedblright\ of $n$ in an (infinite-dimensional) Cartesian
coordinate system. Then, the sum $\sum_{p\text{ prime}}v_{p}\left(  n\right)
v_{p}\left(  m\right)  $ in Corollary \ref{cor.ent.coprime.orthogonal} is
something like a \textquotedblleft%
\href{https://en.wikipedia.org/wiki/Dot_product}{dot product}%
\textquotedblright\ between $n$ and $m$. Thus, Corollary
\ref{cor.ent.coprime.orthogonal} \textbf{(b)} shows that two integers $n$ and
$m$ are coprime if and only if their \textquotedblleft dot
product\textquotedblright\ is $0$. But for vectors in a Euclidean space, the
dot product is $0$ if and only if the vectors are orthogonal. Thus, coprime
integers are like orthogonal vectors. Of course, this analogy should be taken
with a grain of salt; in particular, our \textquotedblleft dot
product\textquotedblright\ is far from being bilinear\footnote{Or, rather, it
is bilinear \textbf{with respect to multiplication}: If we denote
$\sum_{p\text{ prime}}v_{p}\left(  n\right)  v_{p}\left(  m\right)  $ by
$\left\langle n,m\right\rangle $, then we have%
\[
\left\langle n_{1}n_{2},m\right\rangle =\left\langle n_{1},m\right\rangle
+\left\langle n_{2},m\right\rangle \ \ \ \ \ \ \ \ \ \ \text{and}%
\ \ \ \ \ \ \ \ \ \ \left\langle n,m_{1}m_{2}\right\rangle =\left\langle
n,m_{1}\right\rangle +\left\langle n,m_{2}\right\rangle
\]
for arbitrary integers $n_{1},n_{2},m,n,m_{1},m_{2}$.}.

\subsubsection{There are infinitely many primes}

\begin{theorem}
\label{thm.ent.primes.infin}There are infinitely many primes.
\end{theorem}

\begin{proof}
[Proof of Theorem \ref{thm.ent.primes.infin}.]The following proof is a
classic, appearing in Euclid's \textit{Elements}:

Let $\left(  p_{1},p_{2},\ldots,p_{k}\right)  $ be any finite list of primes.
We shall find a new prime distinct from each of $p_{1},p_{2},\ldots,p_{k}$.

Indeed, $p_{1},p_{2},\ldots,p_{k}$ are primes, and thus are integers $>1$ (by
the definition of a \textquotedblleft prime\textquotedblright). Hence, they
are positive integers; thus, their product $p_{1}p_{2}\cdots p_{k}$ is a
positive integer as well. Thus, $p_{1}p_{2}\cdots p_{k}>0$.

Now, let $n=p_{1}p_{2}\cdots p_{k}+1$. Then, $n=\underbrace{p_{1}p_{2}\cdots
p_{k}}_{>0}+1>1$. Hence, Proposition \ref{prop.ent.primes.ex-pri-div} shows
that there exists at least one prime $p$ such that $p\mid n$. Consider this
$p$.

We claim that $p$ is distinct from each of $p_{1},p_{2},\ldots,p_{k}$.

[\textit{Proof:} Assume the contrary. Thus, $p=p_{i}$ for some $i\in\left\{
1,2,\ldots,k\right\}  $. Consider this $i$.

We have $p_{1}p_{2}\cdots p_{k}=p_{i}\cdot\left(  p_{1}p_{2}\cdots
p_{i-1}p_{i+1}p_{i+2}\cdots p_{k}\right)  $. Thus, $p_{i}\mid p_{1}p_{2}\cdots
p_{k}$ (since $p_{1}p_{2}\cdots p_{i-1}p_{i+1}p_{i+2}\cdots p_{k}$ is an
integer). Hence, $p=p_{i}\mid p_{1}p_{2}\cdots p_{k}$. In other words,
$p_{1}p_{2}\cdots p_{k}\equiv0\operatorname{mod}p$. Now,%
\[
n=\underbrace{p_{1}p_{2}\cdots p_{k}}_{\equiv0\operatorname{mod}p}%
+1\equiv0+1=1\operatorname{mod}p.
\]
Hence, $1\equiv n\operatorname{mod}p$. But $p\mid n$ and thus $n\equiv
0\operatorname{mod}p$. Hence, $1\equiv n\equiv0\operatorname{mod}p$; in other
words, $p\mid1-0=1$. Thus, Proposition \ref{prop.ent.div.1} \textbf{(b)}
(applied to $a=p$ and $b=1$) yields $\left\vert p\right\vert \leq\left\vert
1\right\vert =1$. But $p$ is a prime; thus, $p>1>0$, so that $\left\vert
p\right\vert =p>1$. This contradicts $\left\vert p\right\vert \leq1$. This
contradiction shows that our assumption was wrong, qed.]

Thus, we have proven that $p$ is distinct from each of $p_{1},p_{2}%
,\ldots,p_{k}$. Hence, there exists a prime distinct from each of $p_{1}%
,p_{2},\ldots,p_{k}$ (namely, $p$).

Now, forget that we fixed $p_{1},p_{2},\ldots,p_{k}$. We thus have proven that
if $\left(  p_{1},p_{2},\ldots,p_{k}\right)  $ is any finite list of primes,
then there exists a prime distinct from each of $p_{1},p_{2},\ldots,p_{k}$. In
other words, given any finite list of primes, there exists at least one prime
that is not in this list. In other words, no finite list of primes can cover
all the primes. In other words, there are infinitely many primes. This proves
Theorem \ref{thm.ent.primes.infin}.
\end{proof}

Note that our proof of Theorem \ref{thm.ent.primes.infin} is constructive: It
gives an algorithm to construct arbitrarily many distinct primes. This
algorithm is not very efficient, since $p_{1}p_{2}\cdots p_{k}+1$ can be very
large even if $p_{1},p_{2},\ldots,p_{k}$ are fairly small. In practice, the
sieve of Eratosthenes is much better for generating primes.
\href{https://en.wikipedia.org/wiki/Generating_primes}{Much faster algorithms
are known}.

\begin{exercise}
\label{exe.ent.primes.aa-1}Let $p$ be a prime. Let $a\in\mathbb{Z}$ be such
that $a^{2}\equiv1\operatorname{mod}p$. Prove that $a\equiv1\operatorname{mod}%
p$ or $a\equiv-1\operatorname{mod}p$.
\end{exercise}

\subsection{Euler's totient function ($\phi$-function)}

\subsubsection{Definition and some formulas}

Recall that $\mathbb{P}$ stands for the set of all positive integers.

\begin{definition}
\label{def.ent.phi.phi}We define a function $\phi:\mathbb{P}\rightarrow
\mathbb{N}$ as follows: For each $n\in\mathbb{P}$, we let $\phi\left(
n\right)  $ be the number of all $i\in\left\{  1,2,\ldots,n\right\}  $ that
are coprime to $n$. In other words,%
\begin{equation}
\phi\left(  n\right)  =\left\vert \left\{  i\in\left\{  1,2,\ldots,n\right\}
\ \mid\ i\perp n\right\}  \right\vert . \label{eq.def.ent.phi.phi.1}%
\end{equation}


This function $\phi$ is called \textit{Euler's totient function} or just
$\phi$\textit{-function}.
\end{definition}

\begin{example}
\textbf{(a)} We have $\phi\left(  12\right)  =4$, since the number of all
$i\in\left\{  1,2,\ldots,12\right\}  $ that are coprime to $12$ is $4$
(indeed, these $i$ are $1$, $5$, $7$ and $11$).

\textbf{(b)} We have $\phi\left(  13\right)  =12$, since the number of all
$i\in\left\{  1,2,\ldots,13\right\}  $ that are coprime to $13$ is $12$
(indeed, these $i$ are $1,2,\ldots,12$).

\textbf{(c)} We have $\phi\left(  14\right)  =6$, since the number of all
$i\in\left\{  1,2,\ldots,14\right\}  $ that are coprime to $14$ is $6$
(indeed, these $i$ are $1,3,5,9,11,13$).

\textbf{(d)} We have $\phi\left(  1\right)  =1$, since the number of all
$i\in\left\{  1,2,\ldots,1\right\}  $ that are coprime to $1$ is $1$ (indeed,
the only such $i$ is $1$).
\end{example}

The $\phi$-function $\phi$ is denoted by $\varphi$ by some authors.

\begin{proposition}
\label{prop.ent.phi.p}Let $p$ be a prime. Then, $\phi\left(  p\right)  =p-1$.
\end{proposition}

\begin{proof}
[Proof of Proposition \ref{prop.ent.phi.p}.]Here is the idea: The definition
of $\phi$ shows that $\phi\left(  p\right)  $ is the number of all
$i\in\left\{  1,2,\ldots,p\right\}  $ that are coprime to $p$. But we know
exactly what these $i$ are: They are just the first $p-1$ positive integers
$1,2,\ldots,p-1$. (In fact, Proposition \ref{prop.ent.primes.each-i-coprime}
shows that each of the integers $1,2,\ldots,p-1$ is coprime to $p$, whereas
$\gcd\left(  p,p\right)  =p>1$ shows that $p$ is \textbf{not} coprime to $p$.)
Thus, $\phi\left(  p\right)  $ is the number of these $p-1$ integers; in other
words, $\phi\left(  p\right)  =p-1$.

\begin{fineprint}
For one last time, here is the proof in detail:

We have $p>1$ (since $p$ is a prime), thus $p\neq1$. Also, $p\mid p$; hence,
Proposition \ref{prop.ent.gcd.props1} \textbf{(i)} (applied to $a=p$ and
$b=p$) yields $\gcd\left(  p,p\right)  =\left\vert p\right\vert =p$ (since
$p>1>0$). Thus, $\gcd\left(  p,p\right)  =p\neq1$; in other words, we don't
have $p\perp p$.

Now, we claim that%
\begin{equation}
\left\{  i\in\left\{  1,2,\ldots,p\right\}  \ \mid\ i\perp p\right\}
\subseteq\left\{  1,2,\ldots,p-1\right\}  . \label{pf.prop.ent.phi.p.1}%
\end{equation}


[\textit{Proof of (\ref{pf.prop.ent.phi.p.1}):} Let $i\in\left\{
1,2,\ldots,p\right\}  $ be such that $i\perp p$. If we had $i=p$, then we
would have $p\perp p$ (since $i\perp p$ but $i=p$), which would contradict the
fact that we don't have $p\perp p$. Thus, we cannot have $i=p$. Hence, we have
$i\neq p$. Combining this with $i\in\left\{  1,2,\ldots,p\right\}  $, we
obtain $i\in\left\{  1,2,\ldots,p\right\}  \setminus\left\{  p\right\}
=\left\{  1,2,\ldots,p-1\right\}  $.

Now, forget that we fixed $i$. We thus have proven that every $i\in\left\{
1,2,\ldots,p\right\}  $ satisfying $i\perp p$ must belong to $\left\{
1,2,\ldots,p-1\right\}  $. In other words, $\left\{  i\in\left\{
1,2,\ldots,p\right\}  \ \mid\ i\perp p\right\}  \subseteq\left\{
1,2,\ldots,p-1\right\}  $. This proves (\ref{pf.prop.ent.phi.p.1}).]

Conversely, we have%
\begin{equation}
\left\{  1,2,\ldots,p-1\right\}  \subseteq\left\{  i\in\left\{  1,2,\ldots
,p\right\}  \ \mid\ i\perp p\right\}  . \label{pf.prop.ent.phi.p.2}%
\end{equation}


[\textit{Proof of (\ref{pf.prop.ent.phi.p.2}):} Let $j\in\left\{
1,2,\ldots,p-1\right\}  $. Thus, $j$ is coprime to $p$ (by Proposition
\ref{prop.ent.primes.each-i-coprime}, applied to $i=j$). In other words,
$j\perp p$. Also, $j\in\left\{  1,2,\ldots,p-1\right\}  \subseteq\left\{
1,2,\ldots,p\right\}  $. Hence, $j$ is an $i\in\left\{  1,2,\ldots,p\right\}
$ satisfying $i\perp p$. In other words, $j\in\left\{  i\in\left\{
1,2,\ldots,p\right\}  \ \mid\ i\perp p\right\}  $.

Now, forget that we fixed $j$. We thus have shown that $j\in\left\{
i\in\left\{  1,2,\ldots,p\right\}  \ \mid\ i\perp p\right\}  $ for each
$j\in\left\{  1,2,\ldots,p-1\right\}  $. In other words, $\left\{
1,2,\ldots,p-1\right\}  \subseteq\left\{  i\in\left\{  1,2,\ldots,p\right\}
\ \mid\ i\perp p\right\}  $. This proves (\ref{pf.prop.ent.phi.p.2}).]

Combining (\ref{pf.prop.ent.phi.p.1}) with (\ref{pf.prop.ent.phi.p.2}), we
obtain%
\[
\left\{  i\in\left\{  1,2,\ldots,p\right\}  \ \mid\ i\perp p\right\}
=\left\{  1,2,\ldots,p-1\right\}  .
\]
Now, (\ref{eq.def.ent.phi.phi.1}) (applied to $n=p$) yields%
\[
\phi\left(  p\right)  =\left\vert \underbrace{\left\{  i\in\left\{
1,2,\ldots,p\right\}  \ \mid\ i\perp p\right\}  }_{=\left\{  1,2,\ldots
,p-1\right\}  }\right\vert =\left\vert \left\{  1,2,\ldots,p-1\right\}
\right\vert =p-1.
\]
This proves Proposition \ref{prop.ent.phi.p}.
\end{fineprint}
\end{proof}

Proposition \ref{prop.ent.phi.p} can be generalized as follows:

\begin{exercise}
\label{exe.ent.phi.pk}Let $p$ be a prime. Let $k$ be a positive integer. Prove
that $\phi\left(  p^{k}\right)  =\left(  p-1\right)  p^{k-1}$.
\end{exercise}

\begin{theorem}
\label{thm.ent.phi.mult}Let $m$ and $n$ be two coprime integers. Then,
$\phi\left(  mn\right)  =\phi\left(  m\right)  \cdot\phi\left(  n\right)  $.
\end{theorem}

We will prove Theorem \ref{thm.ent.phi.mult} later.

\begin{theorem}
\label{thm.ent.phi.explicit}Let $n$ be a positive integer. Then,%
\[
\phi\left(  n\right)  =\prod_{\substack{p\text{ prime;}\\p\mid n}}\left(
\left(  p-1\right)  p^{v_{p}\left(  n\right)  -1}\right)  =n\cdot
\prod_{\substack{p\text{ prime;}\\p\mid n}}\left(  1-\dfrac{1}{p}\right)  .
\]

\end{theorem}

We shall leave Theorem \ref{thm.ent.phi.explicit} unproven at this point: its
simplest proof relies on some abstract algebraic concepts (rings and their
direct products) that will be introduced later.

\subsubsection{The totient sum theorem}

\begin{theorem}
\label{thm.ent.phi.sum-div}Let $n$ be a positive integer. Then,%
\[
\sum_{d\mid n}\phi\left(  d\right)  =n.
\]
Here and in the following, the symbol \textquotedblleft$\sum_{d\mid n}%
$\textquotedblright\ stands for \textquotedblleft sum over all
\textbf{positive} divisors $d$ of $n$\textquotedblright.
\end{theorem}

For example, for $n=12$, Theorem \ref{thm.ent.phi.sum-div} states that%
\[
\phi\left(  1\right)  +\phi\left(  2\right)  +\phi\left(  3\right)
+\phi\left(  4\right)  +\phi\left(  6\right)  +\phi\left(  12\right)  =12.
\]


Before we prove Theorem \ref{thm.ent.phi.sum-div}, let us motivate an argument
via a classical puzzle:

\begin{exercise}
\label{exe.ent.phi.ghosts}You have a corridor with $1000$ lamps, which are
initially all off. Each lamp has a lightswitch controlling its state.

Every night, a ghost glides through the corridor (always in the same
direction) and flips some of the switches:

On the $1$st night, the ghost flips every switch.

On the $2$nd night, the ghost flips switches $2,4,6,8,10,\ldots$.

On the $3$rd night, the ghost flips switches $3,6,9,12,15,\ldots$.

etc.

(That is: For each $k\in\left\{  1,2,\ldots,1000\right\}  $, the ghost spends
the $k$-th night flipping switches $k,2k,3k,\ldots$.)

Which lamps will be on after $1000$ nights?
\end{exercise}

In more rigorous terms, Exercise \ref{exe.ent.phi.ghosts} is simply asking
which of the numbers $1,2,\ldots,1000$ have an odd number of positive
divisors. (Indeed, the situation after $1000$ nights looks as follows: For
each $n\in\left\{  1,2,\ldots,1000\right\}  $, the $n$-th switch has been
flipped exactly once for each positive divisor of $n$; thus, the $n$-th lamp
is on if and only if $n$ has an odd number of positive divisors.)

Experiments reveal that among the first $10$ positive integers, only three
have an odd number of positive divisors: namely, $1$, $4$ and $9$. (For
example, $9$ has the $3$ positive divisors $1$, $3$ and $9$.) This suggests
the following:

\begin{proposition}
\label{prop.ent.phi.ghosts}A positive integer $n$ has an odd number of
positive divisors if and only if $n$ is a perfect square.
\end{proposition}

\begin{proof}
[Proof of Proposition \ref{prop.ent.phi.ghosts}.]Fix a positive integer $n$.
If $d$ is a positive divisor of $n$, then $n/d$ is a positive divisor of $n$
as well\footnote{\textit{Proof.} Let $d$ be a positive divisor of $n$. Thus,
$d$ is a positive integer satisfying $d\mid n$. But Proposition
\ref{prop.ent.div.1} \textbf{(c)} (applied to $a=d$ and $b=n$) yields that
$d\mid n$ if and only if $\dfrac{n}{d}\in\mathbb{Z}$ (since $d\neq0$). Hence,
$\dfrac{n}{d}\in\mathbb{Z}$ (since $d\mid n$). In other words, $n/d\in
\mathbb{Z}$. Moreover, $n/d$ is positive (since $n$ and $d$ are positive).
\par
So $n/d$ is a positive integer (since $n/d\in\mathbb{Z}$) and is a divisor of
$n$ (since $n=\left(  n/d\right)  \cdot d$). Hence, $n/d$ is a positive
divisor of $n$. Qed.}. This allows us to define a map%
\begin{align*}
F:\left\{  \text{positive divisors of }n\right\}   &  \rightarrow\left\{
\text{positive divisors of }n\right\}  ,\\
d  &  \mapsto n/d.
\end{align*}
This map $F$ has the property that $F\circ F=\operatorname*{id}$, because each
$d\in\left\{  \text{positive divisors of }n\right\}  $ satisfies%
\begin{align*}
\left(  F\circ F\right)  \left(  d\right)   &  =F\left(  \underbrace{F\left(
d\right)  }_{\substack{=n/d\\\text{(by the definition of }F\text{)}}}\right)
=F\left(  n/d\right) \\
&  =n/\left(  n/d\right)  \ \ \ \ \ \ \ \ \ \ \left(  \text{by the definition
of }F\right) \\
&  =d=\operatorname*{id}\left(  d\right)  .
\end{align*}
Hence, the map $F$ is inverse to itself. Thus, the map $F$ is invertible,
i.e., is a bijection.

For the rest of this proof, the word \textquotedblleft
divisor\textquotedblright\ shall mean \textquotedblleft positive divisor of
$n$\textquotedblright. Thus, $F$ is a map from $\left\{  \text{divisors}%
\right\}  $ to $\left\{  \text{divisors}\right\}  $.

The rough idea from here on is the following:\footnote{We shall give a more
rigorous proof shortly.} The map $F$ \textquotedblleft pairs
up\textquotedblright\ each divisor $d$ with the divisor $F\left(  d\right)
=n/d$. Thus, the divisors are \textquotedblleft grouped into
pairs\textquotedblright, except for those that satisfy $d=n/d$ (because these
would have to be paired up with themselves). When $n$ is not a perfect square,
there are no such \textquotedblleft exceptional\textquotedblright\ divisors,
since $d=n/d$ means $n=d^{2}$. When $n$ is a perfect square, there is exactly
one such \textquotedblleft exceptional\textquotedblright\ divisor, namely
$\sqrt{n}$. So the number of divisors is even if $n$ is not a perfect square,
and odd otherwise (because clearly, all the pairs have no effect on the parity
of the total number of divisors, and thus can be forgotten). In other words,
$n$ has an odd number of positive divisors if and only if $n$ is a perfect square.

\begin{fineprint}
There are several ways to make this argument rigorous; here is the easiest
(though perhaps the least instructive one): A divisor $d$ shall be called

\begin{itemize}
\item \textit{small} if $d<n/d$;

\item \textit{medium} if $d=n/d$;

\item \textit{large} if $d>n/d$.
\end{itemize}

It is easy to see that if $d$ is a small divisor, then $F\left(  d\right)  $
is a large divisor\footnote{\textit{Proof.} Let $d$ be a small divisor. Thus,
$d<n/d$. Hence, $n/d>d=n/\left(  n/d\right)  $. In view of $F\left(  d\right)
=n/d$, this rewrites as $F\left(  d\right)  >n/\left(  F\left(  d\right)
\right)  $. In other words, $F\left(  d\right)  $ is a large divisor (by the
definition of \textquotedblleft large divisor\textquotedblright). Qed.}.
Hence, the map%
\begin{align*}
F^{+}:\left\{  \text{small divisors}\right\}   &  \rightarrow\left\{
\text{large divisors}\right\}  ,\\
d  &  \mapsto F\left(  d\right)
\end{align*}
is well-defined. Similarly, the map%
\begin{align*}
F^{-}:\left\{  \text{large divisors}\right\}   &  \rightarrow\left\{
\text{small divisors}\right\}  ,\\
d  &  \mapsto F\left(  d\right)
\end{align*}
is well-defined. These two maps $F^{+}$ and $F^{-}$ are both restrictions of
the map $F$, and thus are mutually inverse (since the map $F$ is inverse to
itself). Hence, the map $F^{+}$ is invertible, i.e., is a bijection. Thus, we
have found a bijection from $\left\{  \text{small divisors}\right\}  $ to
$\left\{  \text{large divisors}\right\}  $ (namely, $F^{+}$). Therefore,%
\begin{equation}
\left\vert \left\{  \text{small divisors}\right\}  \right\vert =\left\vert
\left\{  \text{large divisors}\right\}  \right\vert .
\label{pf.prop.ent.phi.ghosts.s=l}%
\end{equation}


On the other hand, let us take a look at medium divisors. If $d$ is a medium
divisor, then $d=n/d$ (by the definition of \textquotedblleft
medium\textquotedblright), so that $d^{2}=n$ and thus $n$ must be a perfect
square. Thus, if $n$ is \textbf{not} a perfect square, then there are no
medium divisors. In other words, if $n$ is \textbf{not} a perfect square, then%
\begin{equation}
\left\vert \left\{  \text{medium divisors}\right\}  \right\vert =0.
\label{pf.prop.ent.phi.ghosts.m0}%
\end{equation}


But if $n$ \textbf{is} a perfect square, then $n$ has exactly one medium
divisor\footnote{\textit{Proof.} Assume that $n$ is a perfect square. Thus,
$n=w^{2}$ for some $w\in\mathbb{Z}$. Consider this $w$. Clearly, $w\neq0$
(since $ww=w^{2}=n\neq0$), so that $\left\vert w\right\vert >0$.
\par
Let $u=\left\vert w\right\vert $. Thus, $u\in\mathbb{Z}$ (since $w\in
\mathbb{Z}$). Hence, $u$ is a positive integer (since $u=\left\vert
w\right\vert >0$). Moreover, from $u=\left\vert w\right\vert $, we obtain
$u^{2}=\left\vert w\right\vert ^{2}=w^{2}=n$. Hence, $u=n/u$.
\par
This positive integer $u$ satisfies $uu=u^{2}=n$ and thus $u\mid n$. Hence,
$u$ is a positive divisor of $n$ (that is, a divisor, as we call it). This
divisor $u$ is medium, since it satisfies $u=n/u$.
\par
Moreover, if $d$ is any medium divisor, then $d=n/d$ (by the definition of
\textquotedblleft medium\textquotedblright), thus $d^{2}=n=u^{2}$, thus
$\sqrt{d^{2}}=\sqrt{u^{2}}=\left\vert u\right\vert =u$ (since $u$ is
positive), thus $u=\sqrt{d^{2}}=\left\vert d\right\vert =d$ (since $d$ is
positive) and therefore $d=u$. In other words, any medium divisor must equal
$u$. This shows that $u$ is the \textbf{only} medium divisor (since we already
know that $u$ is a medium divisor). Hence, $n$ has exactly one medium
divisor.}. In other words, if $n$ \textbf{is} a perfect square, then%
\begin{equation}
\left\vert \left\{  \text{medium divisors}\right\}  \right\vert =1.
\label{pf.prop.ent.phi.ghosts.m1}%
\end{equation}


But each divisor is either small or medium or large, and there are no overlaps
between these three classes (i.e., a divisor cannot be small and medium at the
same time, or small and large, or medium and large). Thus, in order to count
the number of all divisors, we can add the number of small divisors, the
number of medium divisors and the number of large divisors. In other words:%
\begin{align*}
\left\vert \left\{  \text{divisors}\right\}  \right\vert  &
=\underbrace{\left\vert \left\{  \text{small divisors}\right\}  \right\vert
}_{\substack{=\left\vert \left\{  \text{large divisors}\right\}  \right\vert
\\\text{(by (\ref{pf.prop.ent.phi.ghosts.s=l}))}}}+\left\vert \left\{
\text{medium divisors}\right\}  \right\vert +\left\vert \left\{  \text{large
divisors}\right\}  \right\vert \\
&  =\left\vert \left\{  \text{large divisors}\right\}  \right\vert +\left\vert
\left\{  \text{medium divisors}\right\}  \right\vert +\left\vert \left\{
\text{large divisors}\right\}  \right\vert \\
&  =\underbrace{2\cdot\left\vert \left\{  \text{large divisors}\right\}
\right\vert }_{\equiv0\operatorname{mod}2}+\left\vert \left\{  \text{medium
divisors}\right\}  \right\vert \\
&  \equiv\left\vert \left\{  \text{medium divisors}\right\}  \right\vert
\operatorname{mod}2.
\end{align*}


Hence, if $n$ is \textbf{not} a perfect square, then%
\[
\left\vert \left\{  \text{divisors}\right\}  \right\vert \equiv\left\vert
\left\{  \text{medium divisors}\right\}  \right\vert =0\operatorname{mod}2
\]
(by (\ref{pf.prop.ent.phi.ghosts.m0})). In other words, if $n$ is \textbf{not}
a perfect square, then the number of divisors is even.

On the other hand, if $n$ \textbf{is} a perfect square, then%
\[
\left\vert \left\{  \text{divisors}\right\}  \right\vert \equiv\left\vert
\left\{  \text{medium divisors}\right\}  \right\vert =1\operatorname{mod}2
\]
(by (\ref{pf.prop.ent.phi.ghosts.m1})). In other words, if $n$ \textbf{is} a
perfect square, then the number of divisors is odd.

Combining the results of the previous two paragraphs, we conclude that the
number of divisors is odd if $n$ is a perfect square, and is even otherwise.
In other words, $n$ has an odd number of positive divisors if and only if $n$
is a perfect square. This proves Proposition \ref{prop.ent.phi.ghosts}.
\end{fineprint}
\end{proof}

Having proven Proposition \ref{prop.ent.phi.ghosts}, we now can answer
Exercise \ref{exe.ent.phi.ghosts}: The $31$ lamps $1^{2},2^{2},\ldots,31^{2}$
(and no others) will be on after the $1000$ nights. (Indeed, these $31$ lamps
correspond to the $31$ perfect squares in the set $\left\{  1,2,\ldots
,1000\right\}  $.)

The bijection $F$ from the proof of Proposition \ref{prop.ent.phi.ghosts} will
serve us well in our proof of Theorem \ref{thm.ent.phi.sum-div}. Beside that,
we need the following lemma:

\begin{lemma}
\label{lem.ent.phi.sum-div.n/d}Let $n$ be a positive integer. Let $d$ be a
positive divisor of $n$. Then,%
\[
\left(  \text{the number of }i\in\left\{  1,2,\ldots,n\right\}  \text{ such
that }\gcd\left(  i,n\right)  =d\right)  =\phi\left(  n/d\right)  .
\]

\end{lemma}

\begin{proof}
[Proof of Lemma \ref{lem.ent.phi.sum-div.n/d}.]We have $d\mid n$ (since $d$ is
a divisor of $n$) and $d\neq0$ (since $d$ is positive). Thus, Proposition
\ref{prop.ent.div.1} \textbf{(c)} (applied to $d$ and $n$ instead of $a$ and
$b$) yields that $d\mid n$ if and only if $\dfrac{n}{d}\in\mathbb{Z}$. Thus,
$\dfrac{n}{d}\in\mathbb{Z}$ (since $d\mid n$). In other words, $n/d\in
\mathbb{Z}$. Thus, $n/d$ is an integer. This integer $n/d$ is positive (since
$n$ and $d$ are positive). Hence, $\phi\left(  n/d\right)  $ is well-defined.

Define two sets $I$ and $J$ by%
\begin{equation}
I=\left\{  i\in\left\{  1,2,\ldots,n\right\}  \ \mid\ \gcd\left(  i,n\right)
=d\right\}  \label{pf.lem.ent.phi.sum-div.n/d.I=}%
\end{equation}
and%
\begin{equation}
J=\left\{  i\in\left\{  1,2,\ldots,n/d\right\}  \ \mid\ i\perp n/d\right\}  .
\label{pf.lem.ent.phi.sum-div.n/d.J=}%
\end{equation}
But (\ref{eq.def.ent.phi.phi.1}) (applied to $n/d$ instead of $n$) yields%
\begin{equation}
\phi\left(  n/d\right)  =\left\vert \left\{  i\in\left\{  1,2,\ldots
,n/d\right\}  \ \mid\ i\perp n/d\right\}  \right\vert =\left\vert J\right\vert
\label{pf.lem.ent.phi.sum-div.n/d.2}%
\end{equation}
(since $\left\{  i\in\left\{  1,2,\ldots,n/d\right\}  \ \mid\ i\perp
n/d\right\}  =J$).

We shall next construct a bijection from $I$ to $J$ (which will show that
$\left\vert I\right\vert =\left\vert J\right\vert $).

For each $a\in I$, we have $a/d\in J$\ \ \ \ \footnote{\textit{Proof.} Let
$a\in I$. Thus, $a\in I=\left\{  i\in\left\{  1,2,\ldots,n\right\}
\ \mid\ \gcd\left(  i,n\right)  =d\right\}  $. In other words, $a$ is an
element of $\left\{  1,2,\ldots,n\right\}  $ satisfying $\gcd\left(
a,n\right)  =d$.
\par
Thus, $d=\gcd\left(  a,n\right)  \mid a$. But Proposition \ref{prop.ent.div.1}
\textbf{(c)} (applied to $d$ and $a$ instead of $a$ and $b$) yields that
$d\mid a$ if and only if $\dfrac{a}{d}\in\mathbb{Z}$. Thus, $\dfrac{a}{d}%
\in\mathbb{Z}$ (since $d\mid a$). In other words, $a/d\in\mathbb{Z}$. Also,
$a\in\left\{  1,2,\ldots,n\right\}  $, so that $0<a\leq n$. We can divide this
chain of inequalities by $d$ (since $d$ is positive), and thus obtain
$0<a/d\leq n/d$. Hence, $a/d\in\left\{  1,2,\ldots,n/d\right\}  $ (since
$a/d\in\mathbb{Z}$). Furthermore, Corollary \ref{cor.ent.gcd.sa,sb} (applied
to $d$, $a/d$ and $n/d$ instead of $s$, $a$ and $b$) yields%
\[
\gcd\left(  d\left(  a/d\right)  ,d\left(  n/d\right)  \right)
=\underbrace{\left\vert d\right\vert }_{\substack{=d\\\text{(since }d\text{ is
positive)}}}\gcd\left(  a/d,n/d\right)  =d\gcd\left(  a/d,n/d\right)  .
\]
Solving this for $\gcd\left(  a/d,n/d\right)  $, we obtain%
\[
\gcd\left(  a/d,n/d\right)  =\dfrac{1}{d}\gcd\left(  \underbrace{d\left(
a/d\right)  }_{=a},\underbrace{d\left(  n/d\right)  }_{=n}\right)  =\dfrac
{1}{d}\underbrace{\gcd\left(  a,n\right)  }_{=d}=\dfrac{1}{d}d=1.
\]
In other words, $a/d\perp n/d$.
\par
So we know that $a/d$ is an element of $\left\{  1,2,\ldots,n/d\right\}  $
satisfying $a/d\perp n/d$. In other words, $a/d\in\left\{  i\in\left\{
1,2,\ldots,n/d\right\}  \ \mid\ i\perp n/d\right\}  =J$. Qed.}. Hence, we can
define a map%
\begin{align*}
f:I  &  \rightarrow J,\\
a  &  \mapsto a/d.
\end{align*}


For each $b\in J$, we have $bd\in I$\ \ \ \ \footnote{\textit{Proof.} Let
$b\in J$. Thus, $b\in J=\left\{  i\in\left\{  1,2,\ldots,n/d\right\}
\ \mid\ i\perp n/d\right\}  $. In other words, $b$ is an element of $\left\{
1,2,\ldots,n/d\right\}  $ satisfying $b\perp n/d$.
\par
From $b\in\left\{  1,2,\ldots,n/d\right\}  \subseteq\mathbb{Z}$ and
$d\in\mathbb{Z}$, we obtain $bd\in\mathbb{Z}$. From $b\in\left\{
1,2,\ldots,n/d\right\}  $, we obtain $0<b\leq n/d$. We can multiply this chain
of inequalities by $d$ (since $d$ is positive), and thus obtain $0<bd\leq n$.
Thus, $bd\in\left\{  1,2,\ldots,n\right\}  $ (since $bd\in\mathbb{Z}$).
Corollary \ref{cor.ent.gcd.sa,sb} (applied to $d$, $b$ and $n/d$ instead of
$s$, $a$ and $b$) yields%
\[
\gcd\left(  db,d\left(  n/d\right)  \right)  =\underbrace{\left\vert
d\right\vert }_{\substack{=d\\\text{(since }d\text{ is positive)}%
}}\underbrace{\gcd\left(  b,n/d\right)  }_{\substack{=1\\\text{(since }b\perp
n/d\text{)}}}=d.
\]
Thus, $d=\gcd\left(  \underbrace{db}_{=bd},\underbrace{d\left(  n/d\right)
}_{=n}\right)  =\gcd\left(  bd,n\right)  $, so that $\gcd\left(  bd,n\right)
=d$.
\par
So we know that $bd$ is an element of $\left\{  1,2,\ldots,n\right\}  $
satisfying $\gcd\left(  bd,n\right)  =d$. In other words, $bd\in\left\{
i\in\left\{  1,2,\ldots,n\right\}  \ \mid\ \gcd\left(  i,n\right)  =d\right\}
=I$, qed.}. Thus, we can define a map%
\begin{align*}
g:J  &  \rightarrow I,\\
b  &  \mapsto bd.
\end{align*}


The two maps $f$ and $g$ are mutually inverse (since the map $f$ divides its
input by $d$, while the map $g$ multiplies its input by $d$). Hence, $f$ is
invertible, i.e., is a bijection. Thus, there exists a bijection from $I$ to
$J$ (namely, $f$). Hence, $\left\vert I\right\vert =\left\vert J\right\vert
=\phi\left(  n/d\right)  $ (by (\ref{pf.lem.ent.phi.sum-div.n/d.2})). Thus,%
\begin{align*}
\phi\left(  n/d\right)   &  =\left\vert I\right\vert =\left\vert \left\{
i\in\left\{  1,2,\ldots,n\right\}  \ \mid\ \gcd\left(  i,n\right)  =d\right\}
\right\vert \ \ \ \ \ \ \ \ \ \ \left(  \text{by
(\ref{pf.lem.ent.phi.sum-div.n/d.I=})}\right) \\
&  =\left(  \text{the number of }i\in\left\{  1,2,\ldots,n\right\}  \text{
such that }\gcd\left(  i,n\right)  =d\right)  .
\end{align*}
This proves Lemma \ref{lem.ent.phi.sum-div.n/d}.
\end{proof}

\begin{proof}
[Proof of Theorem \ref{thm.ent.phi.sum-div}.]Consider the map $F$ we defined
in the proof of Proposition \ref{prop.ent.phi.ghosts}. This map $F$ is a
bijection (as we have seen back in that proof). In other words, the map%
\begin{align*}
\left\{  \text{positive divisors of }n\right\}   &  \rightarrow\left\{
\text{positive divisors of }n\right\}  ,\\
d  &  \mapsto n/d
\end{align*}
is a bijection (since this is precisely the map $F$). Thus, we can substitute
$n/d$ for $d$ in the sum $\sum_{d\mid n}\phi\left(  d\right)  $ (and, more
generally, in any sum that ranges over all positive divisors $d$ of $n$). We
thus obtain%
\begin{equation}
\sum_{d\mid n}\phi\left(  d\right)  =\sum_{d\mid n}\phi\left(  n/d\right)  .
\label{pf.thm.ent.phi.sum-div.subst}%
\end{equation}


But%
\begin{align*}
n  &  =\left\vert \left\{  1,2,\ldots,n\right\}  \right\vert =\left(
\text{the number of }i\in\left\{  1,2,\ldots,n\right\}  \right) \\
&  =\sum_{d\mid n}\underbrace{\left(  \text{the number of }i\in\left\{
1,2,\ldots,n\right\}  \text{ such that }\gcd\left(  i,n\right)  =d\right)
}_{\substack{=\phi\left(  n/d\right)  \\\text{(by Lemma
\ref{lem.ent.phi.sum-div.n/d})}}}\\
&  \ \ \ \ \ \ \ \ \ \ \left(  \text{because if }i\in\left\{  1,2,\ldots
,n\right\}  \text{, then }\gcd\left(  i,n\right)  \text{ is a positive divisor
of }n\right) \\
&  =\sum_{d\mid n}\phi\left(  n/d\right)  =\sum_{d\mid n}\phi\left(  d\right)
\ \ \ \ \ \ \ \ \ \ \left(  \text{by (\ref{pf.thm.ent.phi.sum-div.subst}%
)}\right)  .
\end{align*}
This proves Theorem \ref{thm.ent.phi.sum-div}.
\end{proof}

\begin{exercise}
\label{exe.ent.phi.even}Let $n\in\mathbb{N}$ satisfy $n>2$. Prove that
$\phi\left(  n\right)  $ is even.
\end{exercise}

\begin{center}
\textbf{2019-02-15 lecture}
\end{center}

\subsection{Fermat, Euler, Wilson}

\subsubsection{Fermat and Euler: statements}

The following theorem is known as \textit{Fermat's Little Theorem} (often
abbreviated as \textquotedblleft FLT\textquotedblright):

\begin{theorem}
\label{thm.ent.fermat}Let $p$ be a prime. Let $a\in\mathbb{Z}$.

\textbf{(a)} If $p\nmid a$, then $a^{p-1}\equiv1\operatorname{mod}p$.

\textbf{(b)} We always have $a^{p}\equiv a\operatorname{mod}p$.
\end{theorem}

The word \textquotedblleft little\textquotedblright\ in the name of Theorem
\ref{thm.ent.fermat} is meant to distinguish the theorem from
\textquotedblleft%
\href{https://en.wikipedia.org/wiki/Fermat's_Last_Theorem}{Fermat's Last
Theorem}\textquotedblright, a much more difficult result only proven in the
1990s. (Unfortunately, the latter result is also abbreviated as
\textquotedblleft FLT\textquotedblright.)

We will prove Theorem \ref{thm.ent.fermat} soon, by showing a more general
result (Theorem \ref{thm.ent.euler}). But before we do so, let us convince
ourselves that the parts \textbf{(a)} and \textbf{(b)} of Theorem
\ref{thm.ent.fermat} are equivalent:

\begin{remark}
Theorem \ref{thm.ent.fermat} \textbf{(b)} follows from Theorem
\ref{thm.ent.fermat} \textbf{(a)}, because (using the notations of Theorem
\ref{thm.ent.fermat}):

\begin{itemize}
\item If $p\nmid a$, then Theorem \ref{thm.ent.fermat} \textbf{(a)} yields
$a^{p-1}\equiv1\operatorname{mod}p$, thus $a^{p}=a\underbrace{a^{p-1}}%
_{\equiv1\operatorname{mod}p}\equiv a1=a\operatorname{mod}p$.

\item If $p\mid a$, then both $a^{p}$ and $a$ are $\equiv0\operatorname{mod}p$
(because $p\mid a$ entails $a\equiv0\operatorname{mod}p$ and thus $a^{p}%
\equiv0^{p}=0\operatorname{mod}p$ (since $p>0$)), and therefore $a^{p}%
\equiv0\equiv a\operatorname{mod}p$.
\end{itemize}

Conversely, Theorem \ref{thm.ent.fermat} \textbf{(a)} follows from Theorem
\ref{thm.ent.fermat} \textbf{(b)} by the following argument: Let $p$ and $a$
be as in Theorem \ref{thm.ent.fermat}. Assume that $p\nmid a$. Then, $p\perp
a$ (by Proposition \ref{prop.ent.primes.div-or-coprime}), so that $a\perp p$.
Thus, we can \textquotedblleft cancel\textquotedblright\ $a$ from any
congruence modulo $p$ (by Lemma \ref{lem.ent.coprime.cancel}). Doing this to
the congruence $a^{p}\equiv a\operatorname{mod}p$ (which follows from Theorem
\ref{thm.ent.fermat} \textbf{(b)}), we obtain $a^{p-1}\equiv
1\operatorname{mod}p$.
\end{remark}

The next result is known as \textit{Euler's theorem}:

\begin{theorem}
\label{thm.ent.euler}Let $n$ be a positive integer. Let $a\in\mathbb{Z}$ be
coprime to $n$.

Then, $a^{\phi\left(  n\right)  }\equiv1\operatorname{mod}n$.
\end{theorem}

Theorem \ref{thm.ent.euler} yields Theorem \ref{thm.ent.fermat} \textbf{(a)},
since $\phi\left(  p\right)  =p-1$ when $p$ is prime\footnote{See below for
details of this argument.}. Since we also know that Theorem
\ref{thm.ent.fermat} \textbf{(b)} follows from Theorem \ref{thm.ent.fermat}
\textbf{(a)}, we see that a proof of Theorem \ref{thm.ent.euler} will
immediately yield the whole Theorem \ref{thm.ent.fermat}. Before we give said
proof, let us show an example of how Theorem \ref{thm.ent.euler} can be used:

\begin{exercise}
\label{exe.ent.euler345}What is the last digit of $3^{4^{5}}$?

\textit{Notational remark:} An expression of the form \textquotedblleft%
$a^{b^{c}}$\textquotedblright\ always means $a^{\left(  b^{c}\right)  }$, not
$\left(  a^{b}\right)  ^{c}$. (Actually, there is no need for an extra
notation for $\left(  a^{b}\right)  ^{c}$, because $\left(  a^{b}\right)
^{c}=a^{bc}$.)
\end{exercise}

\begin{proof}
[Solution to Exercise \ref{exe.ent.euler345} (sketched).]The last digit of a
positive integer $n$ is $n\%10$ (that is, the remainder of $n$ upon division
by $10$). So we need to work modulo $10$.

Since $3$ is coprime to $10$, we can apply Theorem \ref{thm.ent.euler} to
$n=10$ and $a=3$. We thus get $3^{\phi\left(  10\right)  }\equiv
1\operatorname{mod}10$. Since $\phi\left(  10\right)  =4$, this rewrites as
$3^{4}\equiv1\operatorname{mod}10$. Now, $4^{5}=4\cdot4^{4}$, so that%
\[
3^{4^{5}}=3^{4\cdot4^{4}}=\left(  \underbrace{3^{4}}_{\equiv
1\operatorname{mod}10}\right)  ^{4^{4}}\equiv1^{4^{4}}=1\operatorname{mod}10.
\]
So the last digit of $3^{4^{5}}$ is $1$.
\end{proof}

Theorem \ref{thm.ent.euler} is also the reason why certain rational numbers
(such as $\dfrac{2}{7}=0.\overline{285714}$\ \ \ \ \footnote{The bar
($\overline{}$) over the \textquotedblleft$285714$\textquotedblright\ means
that we are repeating $285714$ over and over. So $0.\overline{285714}%
=0.285714285714285714\ldots$.}) have purely periodic decimal expansions, while
others (such as $\dfrac{1}{12}=0.08\overline{3}=0.0833333\ldots$ or $\dfrac
{1}{2}=0.5\overline{0}=0.50000\ldots$) have their periods start only after
some initial nonrepeating block. We refer \cite[\S 4]{Conrad-Euler} to the
details of this.\footnote{In brief, the rule is as follows: Any fraction
$\dfrac{a}{b}$ with $a,b\in\mathbb{Z}$ (and $b\neq0$) has such a decimal
representation with a period. (A \textit{period} means a part that gets
repeated over and over.) A fraction $\dfrac{a}{b}$ is called \textit{purely
periodic} if its period (in decimal notation) begins straight after the
decimal point. So $\dfrac{2}{7}$ is purely periodic but $\dfrac{1}{12}$ and
$\dfrac{1}{2}$ are not. Now, the answer is that a fraction $\dfrac{a}{b}$
(with $a\perp b$) is purely periodic if and only if $b\perp10$ (in other
words, $2\nmid b$ and $5\nmid b$). This can be proven using Theorem
\ref{thm.ent.euler}.}

\subsubsection{Proving Euler and Fermat}

Our proof of Theorem \ref{thm.ent.euler} will rely on the following lemma:

\begin{lemma}
\label{lem.ent.euler.phi0}Let $n$ be a positive integer. Then,%
\[
\phi\left(  n\right)  =\left\vert \left\{  i\in\left\{  0,1,\ldots
,n-1\right\}  \ \mid\ i\perp n\right\}  \right\vert .
\]

\end{lemma}

\begin{proof}
[First proof of Lemma \ref{lem.ent.euler.phi0} (sketched).]If $n=1$, then this
lemma can easily be proven by hand. Thus, WLOG assume that $n\neq1$. Hence,
$n>1$ (since $n$ is a positive integer). Thus, neither $0$ nor $n$ is coprime
to $n$ (since $\gcd\left(  0,n\right)  =n>1$ and $\gcd\left(  n,n\right)
=n>1$). Hence,%
\[
\left\{  i\in\left\{  0,1,\ldots,n-1\right\}  \ \mid\ i\perp n\right\}
=\left\{  i\in\left\{  1,2,\ldots,n\right\}  \ \mid\ i\perp n\right\}
\]
(because these sets could only differ in the elements $0$ and $n$, but none of
these two elements belongs to any of these two sets\footnote{since neither $0$
nor $n$ is coprime to $n$}), and therefore%
\[
\left\vert \left\{  i\in\left\{  0,1,\ldots,n-1\right\}  \ \mid\ i\perp
n\right\}  \right\vert =\left\vert \left\{  i\in\left\{  1,2,\ldots,n\right\}
\ \mid\ i\perp n\right\}  \right\vert =\phi\left(  n\right)
\]
(by \eqref{eq.def.ent.phi.phi.1}). This proves Lemma \ref{lem.ent.euler.phi0}.
\end{proof}

\begin{proof}
[Second proof of Lemma \ref{lem.ent.euler.phi0}.]We have $n \mid n$ and thus
$n \equiv0 \mod n$. Hence, Proposition \ref{prop.ent.gcd.props1} \textbf{(d)}
(applied to $a = n$, $b = n$ and $c = 0$) yields that $\gcd\left(  n, n
\right)  = \gcd\left(  n, 0 \right)  = \gcd\left(  0, n \right)  $ (by
Proposition \ref{prop.ent.gcd.props1} \textbf{(b)}). Hence, $\gcd\left(  0, n
\right)  = 1$ holds if and only if $\gcd\left(  n, n \right)  = 1$. In other
words, the number $0$ is coprime to $n$ if and only if $n$ is coprime to $n$.
Hence, if we remove $n$ from the set $\left\{  1,2,\ldots,n\right\}  $ and add
$0$ instead (so that our set becomes $\left\{  0, 1, \ldots, n-1 \right\}  $),
then the number of elements coprime to $n$ in that set does not change. In
other words,
\begin{align*}
&  \left(  \text{the number of all } i\in\left\{  0,1,\ldots,n-1\right\}
\text{ that are coprime to } n \right) \\
&  = \left(  \text{the number of all } i\in\left\{  1,2,\ldots,n\right\}
\text{ that are coprime to } n \right) \\
&  = \left\vert \left\{  i\in\left\{  1,2,\ldots,n\right\}  \ \mid\ i\perp
n\right\}  \right\vert =\phi\left(  n\right)  \ \ \ \ \ \ \ \ \ \ \left(
\text{by \eqref{eq.def.ent.phi.phi.1}} \right)  .
\end{align*}
In other words,
\begin{align*}
\phi\left(  n \right)   &  = \left(  \text{the number of all } i\in\left\{
0,1,\ldots,n-1\right\}  \text{ that are coprime to } n \right) \\
&  = \left\vert \left\{  i\in\left\{  0,1,\ldots,n-1\right\}  \ \mid\ i\perp
n\right\}  \right\vert .
\end{align*}
This proves Lemma \ref{lem.ent.euler.phi0} again.
\end{proof}

\begin{noncompile}
We will also need a fact about modular inverses, which we state as an
exercise. Namely, recall that Theorem \ref{thm.ent.coprime.modinv}
\textbf{(b)} guarantees the existence of a modular inverse for an integer $a$
modulo an integer $n$ as soon as $a$ and $n$ are coprime. We can slightly
improve this to guarantee a modular inverse that belongs to $\left\{  0, 1,
\ldots, n-1 \right\}  $ as long as $n$ is a positive integer:

\begin{exercise}
\label{exe.ent.coprime.modinv-in-set}Let $a$ be an integer, and $n$ be a
positive integer such that $a \perp n$. Then, there exists an $a^{\prime}%
\in\left\{  0,1,\ldots,n-1 \right\}  $ such that $aa^{\prime}\equiv
1\operatorname{mod}n$.
\end{exercise}

\begin{fineprint}
\begin{proof}
[Solution to Exercise \ref{exe.ent.coprime.modinv-in-set}.]Theorem
\ref{thm.ent.coprime.modinv} \textbf{(b)} shows that there exists an
$a^{\prime}\in\mathbb{Z}$ such that $aa^{\prime}\equiv1\operatorname{mod}n$.
Consider this $a^{\prime}$, and denote it by $u$. Thus, $u$ is an element of
$\mathbb{Z}$ and satisfies $au \equiv1 \mod n$. Corollary
\ref{cor.ent.quo-rem.remmod} \textbf{(a)} yields that $u\%n\in\left\{
0,1,\ldots,n-1\right\}  $ and $u\%n\equiv u\operatorname{mod}n$. Multiplying
the congruences $a \equiv a \mod n$ and $u \% n \equiv u \mod n$ together, we
find $a \left(  u\%n \right)  \equiv au \equiv1 \mod n$. Hence, there exists
an $a^{\prime}\in\left\{  0,1,\ldots,n-1 \right\}  $ such that $aa^{\prime
}\equiv1\operatorname{mod}n$ (namely, $a^{\prime} = u \% n$). This solves
Exercise \ref{exe.ent.coprime.modinv-in-set}.
\end{proof}
\end{fineprint}
\end{noncompile}

\begin{proof}
[Proof of Theorem \ref{thm.ent.euler}.]Let
\[
C=\left\{  i\in\left\{  0,1,\ldots,n-1\right\}  \ \mid\ i\perp n\right\}  .
\]
Then, Lemma \ref{lem.ent.euler.phi0} says that $\phi\left(  n\right)
=\left\vert C\right\vert $.

Now, set
\begin{equation}
z=\prod_{i\in C}i. \label{pf.thm.ent.euler.z=}%
\end{equation}
Exercise \ref{exe.ent.coprime.ab-to-cI} (applied to $I=C$, $c=n$ and $b_{i}%
=i$) yields $\prod_{i\in C}i\perp n$ (since each $i\in C$ satisfies $i\perp
n$). In other words, $z\perp n$ (since $z=\prod_{i\in C}i$).

We have $\left(  ai\right)  \%n\in C$ for each $i\in C$.

[\textit{Proof:} Let $i\in C$. Corollary \ref{cor.ent.quo-rem.remmod}
\textbf{(a)} (applied to $u=ai$) yields that $\left(  ai\right)
\%n\in\left\{  0,1,\ldots,n-1\right\}  $ and $\left(  ai\right)  \%n\equiv
ai\operatorname{mod}n$. Thus, $ai\equiv\left(  ai\right)
\%n\operatorname{mod}n$.

From $a\perp n$ and $i\perp n$, we obtain $ai\perp n$ (by Theorem
\ref{thm.ent.coprime.ab-to-c}, applied to $i$ and $n$ instead of $b$ and $c$).
Hence, Exercise \ref{exe.ent.coprime.b==c} (applied to $ai$, $\left(
ai\right)  \%n$ and $n$ instead of $a$, $b$ and $c$) yields $\left(
ai\right)  \%n\perp n$ (since $ai\equiv\left(  ai\right)
\%n\operatorname{mod}n$). Combining this with $\left(  ai\right)
\%n\in\left\{  0,1,\ldots,n-1\right\}  $, we obtain $\left(  ai\right)  \%n\in
C$ (by the definition of $C$), qed.]

Thus, we can define a map%
\begin{align*}
f:C  &  \rightarrow C,\\
i  &  \mapsto\left(  ai\right)  \%n.
\end{align*}


The map $f$ is injective.

[\textit{Proof:} Let $i$ and $j$ be two elements of $C$ such that $f\left(
i\right)  =f\left(  j\right)  $. We must prove that $i=j$.

We have $f\left(  i\right)  =f\left(  j\right)  $. In view of $f\left(
i\right)  =\left(  ai\right)  \%n$ (by the definition of $f$) and $f\left(
j\right)  =\left(  aj\right)  \%n$, this rewrites as $\left(  ai\right)
\%n=\left(  aj\right)  \%n$. But Exercise \ref{exe.ent.quo-rem.mod=rem}
(applied to $u=ai$ and $v=aj$) shows that $ai\equiv aj\operatorname{mod}n$ if
and only if $\left(  ai\right)  \%n=\left(  aj\right)  \%n$. Hence, we have
$ai\equiv aj\operatorname{mod}n$ (since $\left(  ai\right)  \%n=\left(
aj\right)  \%n$). By Lemma \ref{lem.ent.coprime.cancel}, we can
\textquotedblleft cancel\textquotedblright\ $a$ from this congruence (since
$a\perp n$), and obtain $i\equiv j\operatorname{mod}n$. But both $i$ and $j$
belong to $C$ and thus belong to $\left\{  0,1,\ldots,n-1\right\}  $ (by the
definition of $C$). Hence, from $i\equiv j\operatorname{mod}n$, we can easily
obtain that $i=j$\ \ \ \ \footnote{\textit{Proof.} Corollary
\ref{cor.ent.quo-rem.remmod} \textbf{(c)} (applied to $u=j$ and $c=i$) yields
$i=j\%n$ (since $i\equiv j\operatorname{mod}n$ and $i\in\left\{
0,1,\ldots,n-1\right\}  $). But Corollary \ref{cor.ent.quo-rem.remmod}
\textbf{(c)} (applied to $u=j$ and $c=j$) yields $j=j\%n$ (since $j\equiv
j\operatorname{mod}n$ and $j\in\left\{  0,1,\ldots,n-1\right\}  $). Hence,
$i=j\%n=j$.}.

Now, forget that we fixed $i$ and $j$. We thus have proven that if $i$ and $j$
and two elements of $C$ such that $f\left(  i\right)  =f\left(  j\right)  $,
then $i=j$. In other words, $f$ is injective.]

The map $f$ is surjective.

[\textit{Proof:} Let $i\in C$. We shall prove that $i\in f\left(  C\right)  $.

Indeed, $i\in C$. By the definition of $C$, this means that $i\in\left\{
0,1,\ldots,n-1\right\}  $ and $i\perp n$.

But Proposition \ref{thm.ent.coprime.modinv} \textbf{(b)} shows that there
exists an $a^{\prime}\in\mathbb{Z}$ such that $aa^{\prime}\equiv
1\operatorname{mod}n$ (since $a\perp n$). Consider this $a^{\prime}$, and
denote it by $u$. Thus, $u$ is an element of $\mathbb{Z}$ and satisfies
$au\equiv1\mod n$. From $ua=au\equiv1\mod n$, we conclude that there exists an
$u^{\prime}\in\mathbb{Z}$ such that $uu^{\prime}\equiv1\mod n$ (namely,
$u^{\prime}=a$). Hence, Theorem \ref{thm.ent.coprime.modinv} \textbf{(c)}
(applied to $u$ and $u^{\prime}$ instead of $a$ and $a^{\prime}$) shows that
$u\perp n$.

Now, Corollary \ref{cor.ent.quo-rem.remmod} \textbf{(a)} (applied to $ui$
instead of $u$) shows that $\left(  ui\right)  \%n\in\left\{  0,1,\ldots
,n-1\right\}  $ and $\left(  ui\right)  \%n\equiv ui\operatorname{mod}n$. Set
$j=\left(  ui\right)  \%n$. Thus, $j=\left(  ui\right)  \%n\in\left\{
0,1,\ldots,n-1\right\}  $ and $j=\left(  ui\right)  \%n\equiv
ui\operatorname{mod}n$. Multiplying the congruences $a\equiv
a\operatorname{mod}n$ and $j\equiv ui\operatorname{mod}n$, we obtain%
\[
aj\equiv\underbrace{au}_{\equiv1\operatorname{mod}n}i\equiv
1i=i\operatorname{mod}n.
\]
In other words, $i\equiv aj\operatorname{mod}n$. Therefore, Corollary
\ref{cor.ent.quo-rem.remmod} \textbf{(c)} (applied to $aj$ and $i$ instead of
$u$ and $c$) yields $i=\left(  aj\right)  \%n$ (since $i\in\left\{
0,1,\ldots,n-1\right\}  $).

Combining $u\perp n$ with $i\perp n$, we obtain $ui\perp n$ (by Theorem
\ref{thm.ent.coprime.ab-to-c}, applied to $u$, $i$ and $n$ instead of $a$, $b$
and $c$). Also, $ui\equiv j\operatorname{mod}n$ (since $j\equiv
ui\operatorname{mod}n$). Hence, Exercise \ref{exe.ent.coprime.b==c} (applied
to $ui$, $j$ and $n$ instead of $a$, $b$ and $c$) yields $j\perp n$. From
$j\in\left\{  0,1,\ldots,n-1\right\}  $ and $j\perp n$, we obtain $j\in C$ (by
the definition of $C$). Thus, $f\left(  j\right)  $ is well-defined. The
definition of $f$ yields $f\left(  j\right)  =\left(  aj\right)  \%n=i$ (since
$i=\left(  aj\right)  \%n$). Hence, $i=f\left(  \underbrace{j}_{\in C}\right)
\in f\left(  C\right)  $.

Now, forget that we fixed $i$. We thus have proven that $i\in f\left(
C\right)  $ for each $i\in C$. In other words, $C\subseteq f\left(  C\right)
$. In other words, the map $f$ is surjective.]

Now we know that the map $f$ is injective and surjective. Hence, this map $f$
is bijective. In other words, $f$ is a bijection from $C$ to $C$. Thus, we can
substitute $f\left(  s\right)  $ for $i$ in the product $\prod\limits_{i\in
C}i$. So we obtain%
\begin{equation}
\prod_{i\in C}i=\prod_{s\in C}f\left(  s\right)  .
\label{pf.thm.ent.euler.finale.1}%
\end{equation}
But for each $s\in C$, we have%
\begin{align*}
f\left(  s\right)   &  =\left(  as\right)  \%n\ \ \ \ \ \ \ \ \ \ \left(
\text{by the definition of }f\right) \\
&  \equiv as\operatorname{mod}n\ \ \ \ \ \ \ \ \ \ \left(  \text{by Corollary
\ref{cor.ent.quo-rem.remmod} \textbf{(a)}, applied to }u=as\right)  .
\end{align*}
Hence, (\ref{eq.exe.ent.mod.k-sum.b}) (applied to $S=C$, $a_{s}=f\left(
s\right)  $ and $b_{s}=as$) yields%
\[
\prod_{s\in C}f\left(  s\right)  \equiv\prod_{s\in C}\left(  as\right)
=a^{\left\vert C\right\vert }\underbrace{\prod_{s\in C}s}_{\substack{=\prod
_{i\in C}i=z\\\text{(by (\ref{pf.thm.ent.euler.z=}))}}}=a^{\left\vert
C\right\vert }z=a^{\phi\left(  n\right)  }z\operatorname{mod}n
\]
(since $\left\vert C\right\vert =\phi\left(  n\right)  $). Now,
(\ref{pf.thm.ent.euler.z=}) becomes%
\begin{align*}
z  &  =\prod_{i\in C}i=\prod_{s\in C}f\left(  s\right)
\ \ \ \ \ \ \ \ \ \ \left(  \text{by (\ref{pf.thm.ent.euler.finale.1})}\right)
\\
&  \equiv a^{\phi\left(  n\right)  }z=za^{\phi\left(  n\right)  }%
\operatorname{mod}n.
\end{align*}
Thus, $z\cdot1=z\equiv za^{\phi\left(  n\right)  }\operatorname{mod}n$. Lemma
\ref{lem.ent.coprime.cancel} lets us \textquotedblleft
cancel\textquotedblright\ $z$ from this congruence (since $z\perp n$). We thus
obtain $1\equiv a^{\phi\left(  n\right)  }\operatorname{mod}n$. This proves
Theorem \ref{thm.ent.euler}.
\end{proof}

\begin{proof}
[Proof of Theorem \ref{thm.ent.fermat}.]As we have explained above, Theorem
\ref{thm.ent.fermat} follows from Theorem \ref{thm.ent.euler}.

\begin{fineprint}
Here is the argument in more detail:

\textbf{(a)} Assume that $p\nmid a$. Proposition \ref{prop.ent.phi.p} yields
$\phi\left(  p\right)  =p-1$. But Proposition
\ref{prop.ent.primes.div-or-coprime} yields that either $p\mid a$ or $p\perp
a$. Hence, $p\perp a$ (since $p\nmid a$). In other words, $a\perp p$. In other
words, $a$ is coprime to $p$. Hence, Theorem \ref{thm.ent.euler} (applied to
$n=p$) yields $a^{\phi\left(  p\right)  }\equiv1\operatorname{mod}p$. This
rewrites as $a^{p-1}\equiv1\operatorname{mod}p$ (since $\phi\left(  p\right)
=p-1$). This proves Theorem \ref{thm.ent.fermat} \textbf{(a)}.

\textbf{(b)} We are in one of the following two cases:

\textit{Case 1:} We have $p\nmid a$.

\textit{Case 2:} We have $p\mid a$.

Let us first consider Case 1. In this case, we have $p\nmid a$. Hence, Theorem
\ref{thm.ent.fermat} \textbf{(a)} yields $a^{p-1}\equiv1\operatorname{mod}p$.
Multiplying this congruence with the congruence $a\equiv a\operatorname{mod}%
p$, we obtain $a^{p-1}a\equiv1a=a\operatorname{mod}p$. In view of
$a^{p-1}a=a^{p}$, this rewrites as $a^{p}\equiv a\operatorname{mod}p$. Hence,
Theorem \ref{thm.ent.fermat} \textbf{(b)} is proven in Case 1.

Let us now consider Case 2. In this case, we have $p\mid a$. In other words,
$a\equiv0\operatorname{mod}p$. Taking this congruence to the $p$-th power, we
obtain $a^{p}\equiv0^{p}=0\operatorname{mod}p$ (since $p>0$). Thus,
$a^{p}\equiv0\equiv a\operatorname{mod}p$ (since $a\equiv0\operatorname{mod}%
p$). Hence, Theorem \ref{thm.ent.fermat} \textbf{(b)} is proven in Case 2.

We have now proven Theorem \ref{thm.ent.fermat} \textbf{(b)} in both Cases 1
and 2. Hence, Theorem \ref{thm.ent.fermat} \textbf{(b)} always holds.
\end{fineprint}
\end{proof}

\subsubsection{The Pigeonhole Principles}

In our above proof of Theorem \ref{thm.ent.euler}, we have proven that the map
$f:C\rightarrow C$ (that we constructed) is injective and surjective. It turns
out that this was, to some extent, wasteful: It would have been enough to
prove one of the two properties only (i.e., injectivity \textbf{or}
surjectivity). The reason for this are the following two basic facts about
finite sets:

\begin{theorem}
[Pigeonhole Principle for Injections]\label{thm.pigeon.inj}Let $A$ and $B$ be
two finite sets such that $\left\vert A\right\vert \geq\left\vert B\right\vert
$. Let $f:A\rightarrow B$ be an injective map. Then, $f$ is bijective.
\end{theorem}

\begin{theorem}
[Pigeonhole Principle for Surjections]\label{thm.pigeon.surj}Let $A$ and $B$
be two finite sets such that $\left\vert A\right\vert \leq\left\vert
B\right\vert $. Let $f:A\rightarrow B$ be an surjective map. Then, $f$ is bijective.
\end{theorem}

Theorem \ref{thm.pigeon.inj} is called the \textit{Pigeonhole Principle for
Injections}, due to the following interpretation: If $a$ pigeons sit in $b$
pigeonholes with $a\geq b$ (that is, there are at least as many pigeons as
there are pigeonholes), and if no two pigeons are sharing the same hole, then
every hole must have at least one pigeon in it. (This corresponds to the
statement of Theorem \ref{thm.pigeon.inj} if you let $A$ be the set of
pigeons, $B$ be the set of holes, and $f$ be the map that sends each pigeon to
the hole it is sitting in. The injectivity of $f$ is then precisely the
statement that no two pigeons are sharing the same hole.)

Likewise, Theorem \ref{thm.pigeon.surj} is called the \textit{Pigeonhole
Principle for Surjections}, due to the following interpretation: If $a$
pigeons sit in $b$ pigeonholes with $a\leq b$ (that is, there are at most as
many pigeons as there are pigeonholes), and if each hole contains at least one
pigeon, then no two pigeons are sharing the same hole.

Theorem \ref{thm.pigeon.inj} and Theorem \ref{thm.pigeon.surj} are both basic
facts of set theory; how to prove them depends on how you define the size of a
finite set in the first place. See \cite[solution to Exercise 1.1]{detnotes}
for one way of proving them (more precisely, Theorem \ref{thm.pigeon.inj} is
the \textquotedblleft$\Longrightarrow$\textquotedblright\ direction of
\cite[Lemma 1.5]{detnotes}, while Theorem \ref{thm.pigeon.surj} is the
\textquotedblleft$\Longrightarrow$\textquotedblright\ direction of \cite[Lemma
1.4]{detnotes}).

Now, Theorem \ref{thm.pigeon.inj} can be used to simplify our above proof of
Theorem \ref{thm.ent.euler}. Indeed, in the latter proof, once we have shown
that $f$ is injective, we can immediately apply Theorem \ref{thm.pigeon.inj}
(to $A=C$ and $B=C$) in order to conclude that $f$ is bijective (since $C$ is
a finite set and satisfies $\left\vert C\right\vert \geq\left\vert
C\right\vert $). The proof of surjectivity of $f$ is thus unnecessary.
Alternatively, we could have omitted the proof of injectivity of $f$, and
instead used the surjectivity of $f$ to apply Theorem \ref{thm.pigeon.surj}
(to $A=C$ and $B=C$) in order to conclude that $f$ is bijective (since $C$ is
a finite set and satisfies $\left\vert C\right\vert \leq\left\vert
C\right\vert $). Either way, we would have obtained a shorter proof.

\subsubsection{Wilson}

The next theorem is known as \textit{Wilson's theorem}:

\begin{theorem}
\label{thm.ent.wilson}Let $p$ be a prime. Then, $\left(  p-1\right)
!\equiv-1\operatorname{mod}p$.
\end{theorem}

We shall prove Theorem \ref{thm.ent.wilson} using modular inverses modulo $p$.
The main idea is that we can \textquotedblleft pair up\textquotedblright\ each
factor in the product $\left(  p-1\right)  !=1\cdot2\cdot\cdots\cdot\left(
p-1\right)  $ with its modular inverse modulo $p$, where of course we take the
unique modular inverse that belongs to the set $\left\{  1,2,\ldots
,p-1\right\}  $. This relies on the following lemma:

\begin{lemma}
\label{lem.ent.wilson.modi}Let $p$ be a prime. Set $A=\left\{  1,2,\ldots
,p-1\right\}  $.

\textbf{(a)} If $a_{1}$ and $a_{2}$ are two elements of $A$ satisfying
$a_{1}\equiv a_{2}\operatorname{mod}p$, then $a_{1}=a_{2}$.

\textbf{(b)} For each $a\in A$, there exists a unique $a^{\prime}\in A$
satisfying $aa^{\prime}\equiv1\operatorname{mod}p$.

\textbf{(c)} Define a map $J:A\rightarrow A$ as follows: For each $a\in A$, we
let $J\left(  a\right)  $ denote the unique $a^{\prime}\in A$ satisfying
$aa^{\prime}\equiv1\operatorname{mod}p$. (This unique $a^{\prime}$ indeed
exists, by Lemma \ref{lem.ent.wilson.modi} \textbf{(b)}.)

Then, this map $J$ is a bijection satisfying $J\circ J=\operatorname*{id}$.
\end{lemma}

\begin{proof}
[Proof of Lemma \ref{lem.ent.wilson.modi}.]\textbf{(a)} Let $a_{1}$ and
$a_{2}$ be two elements of $A$ satisfying $a_{1}\equiv a_{2}\operatorname{mod}%
p$. We must prove that $a_{1}=a_{2}$.

We have $a_{1}\equiv a_{2}\operatorname{mod}p$. Hence, Corollary
\ref{cor.ent.quo-rem.remmod} \textbf{(c)} (applied to $p$, $a_{2}$ and $a_{1}$
instead of $n$, $u$ and $c$) yields $a_{1}=a_{2}\%p$ (since $a_{1}\in
A=\left\{  1,2,\ldots,p-1\right\}  \subseteq\left\{  0,1,\ldots,p-1\right\}
$). Also, $a_{2}\equiv a_{2}\operatorname{mod}p$. Thus, Corollary
\ref{cor.ent.quo-rem.remmod} \textbf{(c)} (applied to $p$, $a_{2}$ and $a_{2}$
instead of $n$, $u$ and $c$) yields $a_{2}=a_{2}\%p$ (since $a_{2}\in
A=\left\{  1,2,\ldots,p-1\right\}  \subseteq\left\{  0,1,\ldots,p-1\right\}
$). Comparing this with $a_{1}=a_{2}\%p$, we obtain $a_{1}=a_{2}$. This proves
Lemma \ref{lem.ent.wilson.modi} \textbf{(a)}.

\textbf{(b)} Let $a\in A$. Thus, $a\in A=\left\{  1,2,\ldots,p-1\right\}  $.
Hence, Proposition \ref{prop.ent.primes.each-i-coprime} (applied to $i=a$)
shows that $a$ is coprime to $p$. In other words, $a\perp p$. Hence, Theorem
\ref{thm.ent.coprime.modinv} \textbf{(a)} shows that there exists a
$b\in\mathbb{Z}$ such that $ab\equiv\gcd\left(  a,p\right)  \operatorname{mod}%
p$. Consider this $b$.

We have $ab\equiv\gcd\left(  a,p\right)  =1\operatorname{mod}p$ (since $a\perp
p$). Let $c=b\%p$. Corollary \ref{cor.ent.quo-rem.remmod} \textbf{(a)}
(applied to $n=p$ and $u=b$) yields $b\%p\in\left\{  0,1,\ldots,p-1\right\}  $
and $b\%p\equiv b\operatorname{mod}p$. Now, $c=b\%p\in\left\{  0,1,\ldots
,p-1\right\}  $ and $a\underbrace{c}_{=b\%p\equiv b\operatorname{mod}p}\equiv
ab\equiv1\operatorname{mod}p$.

Assume (for the sake of contradiction) that $c=0$. Thus, $a\underbrace{c}%
_{=0}=0$ and thus $0=ac\equiv1\operatorname{mod}p$. Hence, $1\equiv
0\operatorname{mod}p$. In other words, $p\mid1-0=1$. Hence, Exercise
\ref{exe.ent.div.g|1} (applied to $g=p$) yields $p=1$. But $p>1$ (since $p$ is
prime). This contradicts $p=1$. This contradiction shows that our assumption
(that $c=0$) is false.

Hence, $c\neq0$. Combining this with $c\in\left\{  0,1,\ldots,p-1\right\}  $,
we obtain $c\in\left\{  0,1,\ldots,p-1\right\}  \setminus\left\{  0\right\}
=\left\{  1,2,\ldots,p-1\right\}  =A$. Recall that $ac\equiv
1\operatorname{mod}p$.

Thus, there exists \textbf{at least one} $a^{\prime}\in A$ satisfying
$aa^{\prime}\equiv1\operatorname{mod}p$ (namely, $a^{\prime}=c$). It remains
to prove that there is only one such $a^{\prime}$.

Indeed, let $a_{1}^{\prime}$ and $a_{2}^{\prime}$ be two elements $a^{\prime
}\in A$ satisfying $aa^{\prime}\equiv1\operatorname{mod}p$. We shall prove
that $a_{1}^{\prime}=a_{2}^{\prime}$.

We know that $a_{1}^{\prime}$ is an element $a^{\prime}\in A$ satisfying
$aa^{\prime}\equiv1\operatorname{mod}p$. In other words, $a_{1}^{\prime}$ is
an element of $A$ and satisfies $aa_{1}^{\prime}\equiv1\operatorname{mod}p$.
Similarly, $a_{2}^{\prime}$ is an element of $A$ and satisfies $aa_{2}%
^{\prime}\equiv1\operatorname{mod}p$. Hence, $1\equiv aa_{2}^{\prime
}\operatorname{mod}p$, so that $aa_{1}^{\prime}\equiv1\equiv aa_{2}^{\prime
}\operatorname{mod}p$. Thus, Lemma \ref{lem.ent.coprime.cancel} (applied to
$a_{1}^{\prime}$, $a_{2}^{\prime}$ and $p$ instead of $b$, $c$ and $n$) yields
$a_{1}^{\prime}\equiv a_{2}^{\prime}\operatorname{mod}p$ (since $a\perp p$).
Hence, Lemma \ref{lem.ent.wilson.modi} \textbf{(a)} (applied to $a_{1}%
=a_{1}^{\prime}$ and $a_{2}=a_{2}^{\prime}$) yields $a_{1}^{\prime}%
=a_{2}^{\prime}$.

Now, forget that we fixed $a_{1}^{\prime}$ and $a_{2}^{\prime}$. We thus have
shown that if $a_{1}^{\prime}$ and $a_{2}^{\prime}$ are two elements
$a^{\prime}\in A$ satisfying $aa^{\prime}\equiv1\operatorname{mod}p$, then
$a_{1}^{\prime}=a_{2}^{\prime}$. In other words, there exists \textbf{at most
one} $a^{\prime}\in A$ satisfying $aa^{\prime}\equiv1\operatorname{mod}p$.
Thus, there exists \textbf{a unique} such $a^{\prime}$ (because we have
already shown that there exists \textbf{at least one} such $a^{\prime}$). In
other words, there exists a unique $a^{\prime}\in A$ satisfying $aa^{\prime
}\equiv1\operatorname{mod}p$. This proves Lemma \ref{lem.ent.wilson.modi}
\textbf{(b)}.

\textbf{(c)} Let $a\in A$. Then, $J\left(  a\right)  $ is the unique
$a^{\prime}\in A$ satisfying $aa^{\prime}\equiv1\operatorname{mod}p$ (by the
definition of $J$). Hence, $J\left(  a\right)  $ is an $a^{\prime}\in A$
satisfying $aa^{\prime}\equiv1\operatorname{mod}p$. In other words, $J\left(
a\right)  $ is an element of $A$ and satisfies%
\begin{equation}
aJ\left(  a\right)  \equiv1\operatorname{mod}p.
\label{pf.lem.ent.wilson.modi.b.aJa}%
\end{equation}


Now, forget that we fixed $a$. We thus have proven
(\ref{pf.lem.ent.wilson.modi.b.aJa}) for each $a\in A$.

Now, let $a\in A$ be arbitrary. Then, $J\left(  a\right)  \in A$ (since $J$ is
a map from $A$ to $A$). Thus, (\ref{pf.lem.ent.wilson.modi.b.aJa}) (applied to
$J\left(  a\right)  $ instead of $a$) yields $J\left(  a\right)  J\left(
J\left(  a\right)  \right)  \equiv1\operatorname{mod}p$. Also, from $J\left(
a\right)  \in A$, we obtain $J\left(  J\left(  a\right)  \right)  \in A$
(since $J$ is a map from $A$ to $A$). On the other hand,%
\begin{align*}
J\left(  a\right)  a  &  =aJ\left(  a\right)  \equiv
1\ \ \ \ \ \ \ \ \ \ \left(  \text{by (\ref{pf.lem.ent.wilson.modi.b.aJa}%
)}\right) \\
&  \equiv J\left(  a\right)  J\left(  J\left(  a\right)  \right)
\operatorname{mod}p\ \ \ \ \ \ \ \ \ \ \left(  \text{since }J\left(  a\right)
J\left(  J\left(  a\right)  \right)  \equiv1\operatorname{mod}p\right)  .
\end{align*}
But $J\left(  a\right)  \in A=\left\{  1,2,\ldots,p-1\right\}  $. Hence,
Proposition \ref{prop.ent.primes.each-i-coprime} (applied to $i=J\left(
a\right)  $) shows that $J\left(  a\right)  $ is coprime to $p$. In other
words, $J\left(  a\right)  \perp p$. Hence, Lemma \ref{lem.ent.coprime.cancel}
(applied to $J\left(  a\right)  $, $a$, $J\left(  J\left(  a\right)  \right)
$ and $p$ instead of $a$, $b$, $c$ and $n$) yields $a\equiv J\left(  J\left(
a\right)  \right)  \operatorname{mod}p$ (since $J\left(  a\right)  a\equiv
J\left(  a\right)  J\left(  J\left(  a\right)  \right)  \operatorname{mod}p$).
Thus, $J\left(  J\left(  a\right)  \right)  \equiv a\operatorname{mod}p$.
Therefore, Lemma \ref{lem.ent.wilson.modi} \textbf{(a)} (applied to
$a_{1}=J\left(  J\left(  a\right)  \right)  $ and $a_{2}=a$) yields $J\left(
J\left(  a\right)  \right)  =a$. Thus, $\left(  J\circ J\right)  \left(
a\right)  =J\left(  J\left(  a\right)  \right)  =a=\operatorname*{id}\left(
a\right)  $.

Now, forget that we fixed $a$. We thus have proven that $\left(  J\circ
J\right)  \left(  a\right)  =\operatorname*{id}\left(  a\right)  $ for each
$a\in A$. In other words, $J\circ J=\operatorname*{id}$. Hence, the maps $J$
and $J$ are mutually inverse. Thus, the map $J$ is invertible, i.e., is a
bijection. Thus, Lemma \ref{lem.ent.wilson.modi} \textbf{(c)} is proven.
\end{proof}

\begin{remark}
Let $S$ be a set. An \textit{involution} on $S$ means a map $f:S\rightarrow S$
satisfying $f\circ f=\operatorname*{id}$. Thus, Lemma
\ref{lem.ent.wilson.modi} \textbf{(c)} says that the map $J:A\rightarrow A$
defined in this lemma is an involution on $A$.
\end{remark}

We are now ready to prove Theorem \ref{thm.ent.wilson}:

\begin{proof}
[First proof of Theorem \ref{thm.ent.wilson}.]We have $\left(  2-1\right)
!=1!=1\equiv-1\operatorname{mod}2$ (since $1-\left(  -1\right)  =2$ is
divisible by $2$). In other words, Theorem \ref{thm.ent.wilson} holds when
$p=2$. Hence, for the rest of this proof, we WLOG assume that we don't have
$p=2$. Hence, $p\neq2$. Thus, $1 \neq p-1$.

But $p$ is a prime; thus, $p>1$, so that $p\geq2$ (since $p$ is an integer).
Combining this with $p\neq2$, we obtain $p>2$, so that $p\geq3$ (since $p$ is
an integer).

Define the set $A$ and the map $J:A\rightarrow A$ as in Lemma
\ref{lem.ent.wilson.modi}. Hence, Lemma \ref{lem.ent.wilson.modi} \textbf{(c)}
shows that this map $J$ is a bijection satisfying $J\circ J=\operatorname*{id}%
$. The equality $J \circ J = \operatorname{id}$ shows that the map $J$ is
inverse to itself. For each $a\in A$, we have
\begin{equation}
aJ\left(  a\right)  \equiv1\operatorname{mod}p. \label{pf.thm.ent.wilson.aJa}%
\end{equation}
(This congruence is proven in the same way as it was proven in our above proof
of Lemma \ref{lem.ent.wilson.modi} \textbf{(c)}.)

Now, the rest of our proof shall follow the following plan (using the same
\textquotedblleft pairing\textquotedblright\ idea that we have seen in our
proof of Proposition \ref{prop.ent.phi.ghosts} and in the solution to Exercise
\ref{exe.ent.phi.even}): We will use the map $J$ to establish a pairing
between the factors of the product $1\cdot2\cdot\cdots\cdot\left(  p-1\right)
$ (pairing up each factor $a$ with the factor $J\left(  a\right)  $), which
will pair up almost all of them -- more precisely, all of them except for the
very first and very last factors (since these two factors would have to pair
up with themselves)\footnote{The reason \textbf{why} it is precisely these two
factors that will not be paired up is not completely trivial. It follows from
Exercise \ref{exe.ent.primes.aa-1}.}. For example, if $p=11$, then we have the
following table of values of $J$:%
\[%
\begin{tabular}
[c]{|c||c|c|c|c|c|c|c|c|c|c||}\hline
$a$ & $1$ & $2$ & $3$ & $4$ & $5$ & $6$ & $7$ & $8$ & $9$ & $10$\\\hline
$J\left(  a\right)  $ & $1$ & $6$ & $4$ & $3$ & $9$ & $2$ & $8$ & $7$ & $5$ &
$10$\\\hline
\end{tabular}
\]
(since, for example, $2$ is the unique $a^{\prime}\in A$ satisfying $2\cdot
a^{\prime}\equiv1\operatorname{mod}11$), and thus we pair up the factors of
the product $1\cdot2\cdot\cdots\cdot\left(  p-1\right)  $ as follows:%
\begin{align*}
1\cdot2\cdot\cdots\cdot\left(  p-1\right)   &  =1\cdot2\cdot3\cdot4\cdot
5\cdot6\cdot7\cdot8\cdot9\cdot10\\
&  =1\cdot\left(  2\cdot6\right)  \cdot\left(  3\cdot4\right)  \cdot\left(
5\cdot9\right)  \cdot\left(  7\cdot8\right)  \cdot10.
\end{align*}
By the definition of the map $J$, each pair has the form $\left(  a,J\left(
a\right)  \right)  $ for some $a\in A$, and thus the product of any two
different factors paired up with each other is $\equiv1\operatorname{mod}p$
(by (\ref{pf.thm.ent.wilson.aJa})). For example, if $p=11$, then we have%
\begin{align*}
1\cdot2\cdot\cdots\cdot\left(  p-1\right)   &  =1\cdot\underbrace{\left(
2\cdot6\right)  }_{\equiv1\operatorname{mod}11}\cdot\underbrace{\left(
3\cdot4\right)  }_{\equiv1\operatorname{mod}11}\cdot\underbrace{\left(
5\cdot9\right)  }_{\equiv1\operatorname{mod}11}\cdot\underbrace{\left(
7\cdot8\right)  }_{\equiv1\operatorname{mod}11}\cdot10\\
&  \equiv1\cdot10\operatorname{mod}11.
\end{align*}
Thus, any two different factors paired up with each other \textquotedblleft
neutralize\textquotedblright\ each other when being multiplied (as long as we
are computing modulo $p$). Hence, the product of all the $p-1$ factors will
reduce (when working modulo $p$) to the product of the two factors that have
not been paired up, which will be $1\cdot\left(  p-1\right)  =p-1\equiv
-1\operatorname{mod}p$.

\begin{fineprint}
Here are the details of this argument:

An element $a$ of $A$ will be called

\begin{itemize}
\item \textit{small} if $a<J\left(  a\right)  $;

\item \textit{medium} if $a=J\left(  a\right)  $;

\item \textit{large} if $a>J\left(  a\right)  $.
\end{itemize}

Now, we claim that the medium elements of $A$ are precisely $1$ and $p-1$.

[\textit{Proof:} We have $1 \leq p-1$ (since $p \geq2$). Thus, $1 \in\left\{
1,2,\ldots,p-1\right\}  = A$ and $p-1 \in\left\{  1,2,\ldots,p-1\right\}  =
A$. The element $1$ of $A$ is medium\footnote{\textit{Proof.} We have $1\in
A$. Hence, $J\left(  1\right)  \in A$ (since $J$ is a map from $A$ to $A$).
Furthermore, (\ref{pf.thm.ent.wilson.aJa}) (applied to $a=1$) yields
$1J\left(  1\right)  \equiv1\operatorname{mod}p$. Thus, $1\equiv1J\left(
1\right)  =J\left(  1\right)  \operatorname{mod}p$. Thus, Lemma
\ref{lem.ent.wilson.modi} \textbf{(a)} (applied to $a_{1}=1$ and
$a_{2}=J\left(  1\right)  $) yields $1=J\left(  1\right)  $. In other words,
the element $1$ of $A$ is medium.}. The element $p-1$ of $A$ is
medium\footnote{\textit{Proof.} We have $p-1 \in A$. Hence, $J\left(
p-1\right)  \in A$ (since $J$ is a map from $A$ to $A$). Furthermore,
(\ref{pf.thm.ent.wilson.aJa}) (applied to $a=p-1$) yields $\left(  p-1\right)
J\left(  p-1\right)  \equiv1\operatorname{mod}p$. Multiplying this congruence
with the obvious congruence $p-1\equiv p-1\operatorname{mod}p$, we obtain%
\[
\left(  p-1\right)  \left(  p-1\right)  J\left(  p-1\right)  \equiv\left(
p-1\right)  1=p-1\operatorname{mod}p.
\]
Hence,%
\begin{align*}
p-1  &  \equiv\left(  p-1\right)  \left(  p-1\right)  J\left(  p-1\right)
=\left(  \underbrace{p-1}_{\equiv-1\operatorname{mod}p}\right)  ^{2}J\left(
p-1\right)  \equiv\underbrace{\left(  -1\right)  ^{2}}_{=1}J\left(  p-1\right)
\\
&  =J\left(  p-1\right)  \operatorname{mod}p.
\end{align*}
Thus, Lemma \ref{lem.ent.wilson.modi} \textbf{(a)} (applied to $a_{1}=p-1$ and
$a_{2}=J\left(  p-1\right)  $) yields $p-1=J\left(  p-1\right)  $. In other
words, the element $p-1$ of $A$ is medium.}. Hence, the two numbers $1$ and
$p-1$ are medium elements of $A$. It remains to prove that these two numbers
are the only medium elements of $A$.

Indeed, let $a$ be a medium element of $A$. We shall show that $a=1$ or
$a=p-1$.

Indeed, assume the contrary. Thus, neither $a=1$ nor $a=p-1$ holds.

If we had $a \equiv1 \mod p$, then Lemma \ref{lem.ent.wilson.modi}
\textbf{(a)} (applied to $a_{1}=a$ and $a_{2}=1$) would yield $a = 1$, which
would contradict the fact that $a=1$ does not hold. Thus, we do not have $a
\equiv1 \mod p$.

If we had $a \equiv p-1 \mod p$, then Lemma \ref{lem.ent.wilson.modi}
\textbf{(a)} (applied to $a_{1}=a$ and $a_{2}=p-1$) would yield $a = p-1$,
which would contradict the fact that $a=p-1$ does not hold. Thus, we do not
have $a \equiv p-1 \mod p$.

We have assumed that $a$ is medium. In other words, $a = J\left(  a\right)  $.
But (\ref{pf.thm.ent.wilson.aJa}) yields $aJ\left(  a \right)  \equiv1
\mod p$. Thus, $a^{2} = a \underbrace{a}_{= J\left(  a \right)  } = aJ\left(
a \right)  \equiv1 \mod p$. Hence, Exercise \ref{exe.ent.primes.aa-1} shows
that $a\equiv1\operatorname{mod}p$ or $a\equiv-1\operatorname{mod}p$. Hence,
we must have $a \equiv-1 \mod p$ (since we do not have $a \equiv1 \mod p$).
Thus, $a \equiv-1 \equiv p-1 \mod p$ (since $p-1 \equiv-1 \mod p$). This
contradicts the fact that we do not have $a \equiv p-1 \mod p$.

This contradiction shows that our assumption was false. Hence, $a = 1$ or $a =
p-1$.

Now, forget that we fixed $a$. We thus have proven that every medium element
$a$ of $A$ satisfies $a=1$ or $a=p-1$. In other words, ever medium element of
$A$ is either $1$ and $p-1$. Since we know that $1$ and $p-1$ actually are
medium elements of $A$, we thus conclude that the medium elements of $A$ are
precisely $1$ and $p-1$.]

So we have shown that the medium elements of $A$ are precisely $1$ and $p-1$.
Since these two elements are actually distinct (because $p-1\neq1$), we thus
obtain%
\begin{equation}
\prod_{\substack{a\in A;\\a\text{ is medium}}}a=1\cdot\left(  p-1\right)
=p-1\equiv-1\operatorname{mod}p. \label{pf.thm.ent.wilson.prodmed}%
\end{equation}


It is easy to see that if $a$ is a small element of $A$, then $J\left(
a\right)  $ is a large element of $A$\ \ \ \ \footnote{\textit{Proof.} Let $a$
be a small element of $A$. Thus, $a<J\left(  a\right)  $. Note that $J\left(
a\right)  \in A$ (since $J$ is a map from $A$ to $A$). But $J\circ
J=\operatorname{id}$, so that $\left(  J\circ J\right)  \left(  a\right)
=\operatorname{id}{a}=a<J\left(  a\right)  $. In view of $\left(  J\circ
J\right)  \left(  a\right)  =J\left(  J\left(  a\right)  \right)  $, this
rewrites as $J\left(  J\left(  a\right)  \right)  <J\left(  a\right)  $. In
other words, the element $J\left(  a\right)  $ of $A$ is large (by the
definition of \textquotedblleft large\textquotedblright). Qed.}. Hence, the
map%
\begin{align*}
J^{+}:\left\{  \text{small elements of }A\right\}   &  \rightarrow\left\{
\text{large elements of }A\right\}  ,\\
a  &  \mapsto J\left(  a\right)
\end{align*}
is well-defined. Similarly, the map%
\begin{align*}
J^{-}:\left\{  \text{large elements of }A\right\}   &  \rightarrow\left\{
\text{small elements of }A\right\}  ,\\
a  &  \mapsto J\left(  a\right)
\end{align*}
is well-defined. These two maps $J^{+}$ and $J^{-}$ are both restrictions of
the map $J$, and thus are mutually inverse (since the map $J$ is inverse to
itself). Hence, the map $J^{+}$ is invertible, i.e., is a bijection. In other
words, the map%
\begin{align*}
\left\{  \text{small elements of }A\right\}   &  \rightarrow\left\{
\text{large elements of }A\right\}  ,\\
a  &  \mapsto J\left(  a\right)
\end{align*}
is a bijection (since this map is just the map $J^{+}$). Thus, we can
substitute $J\left(  b\right)  $ for $a$ in the product $\prod_{\substack{a\in
A;\\a\text{ is large}}}a$. We thus obtain%
\begin{equation}
\prod_{\substack{a\in A;\\a\text{ is large}}}a=\prod_{\substack{b\in
A;\\b\text{ is small}}}J\left(  b\right)  =\prod_{\substack{a\in A;\\a\text{
is small}}}J\left(  a\right)  \label{pf.thm.ent.wilson.prodlar}%
\end{equation}
(here, we have renamed the index $b$ as $a$ in the product). Now, the
definition of $\left(  p-1\right)  !$ yields%
\begin{align}
\left(  p-1\right)  !  &  =1\cdot2\cdot\cdots\cdot\left(  p-1\right)
=\prod_{a\in A}a\nonumber\\
&  =\left(  \prod_{\substack{a\in A;\\a\text{ is small}}}a\right)
\cdot\underbrace{\left(  \prod_{\substack{a\in A;\\a\text{ is medium}%
}}a\right)  }_{\substack{\equiv-1\operatorname{mod}p\\\text{(by
(\ref{pf.thm.ent.wilson.prodmed}))}}}\cdot\underbrace{\left(  \prod
_{\substack{a\in A;\\a\text{ is large}}}a\right)  }_{\substack{=\prod
_{\substack{a\in A;\\a\text{ is small}}}J\left(  a\right)  \\\text{(by
(\ref{pf.thm.ent.wilson.prodlar}))}}}\nonumber\\
&  \ \ \ \ \ \ \ \ \ \ \left(
\begin{array}
[c]{c}%
\text{since each }a\in A\text{ is either small or medium or large (but
never}\\
\text{has more than one of these three attributes simultaneously)}%
\end{array}
\right) \nonumber\\
&  \equiv\left(  \prod_{\substack{a\in A;\\a\text{ is small}}}a\right)
\cdot\left(  -1\right)  \cdot\left(  \prod_{\substack{a\in A;\\a\text{ is
small}}}J\left(  a\right)  \right)  =-\underbrace{\left(  \prod
_{\substack{a\in A;\\a\text{ is small}}}a\right)  \cdot\left(  \prod
_{\substack{a\in A;\\a\text{ is small}}}J\left(  a\right)  \right)  }%
_{=\prod_{\substack{a\in A;\\a\text{ is small}}}\left(  aJ\left(  a\right)
\right)  }\nonumber\\
&  =-\prod_{\substack{a\in A;\\a\text{ is small}}}\left(  aJ\left(  a\right)
\right)  \operatorname{mod}p. \label{pf.thm.ent.wilson.6}%
\end{align}


But it is clear that $\prod_{\substack{a\in A;\\a\text{ is small}%
}}\underbrace{\left(  aJ\left(  a\right)  \right)  }_{\substack{\equiv
1\operatorname{mod}p\\\text{(by (\ref{pf.thm.ent.wilson.aJa}))}}%
}\equiv1\operatorname{mod}p$\ \ \ \ \footnote{\textit{Proof.} Here is this
argument in more detail:
\par
Every $a\in\left\{  \text{small elements of }A\right\}  $ satisfies $aJ\left(
a\right)  \equiv1\operatorname{mod}p$ (by (\ref{pf.thm.ent.wilson.aJa})).
Renaming the index $a$ as $s$ in this statement, we obtain the following:
Every $s\in\left\{  \text{small elements of }A\right\}  $ satisfies $sJ\left(
s\right)  \equiv1\operatorname{mod}p$. Hence, (\ref{eq.exe.ent.mod.k-sum.b})
(applied to $n=p$, $S=\left\{  \text{small elements of }A\right\}  $,
$a_{s}=sJ\left(  s\right)  $ and $b_{s}=1$) yields
\[
\prod_{s\in\left\{  \text{small elements of }A\right\}  }\left(  sJ\left(
s\right)  \right)  \equiv\prod_{s\in\left\{  \text{small elements of
}A\right\}  }1=1\operatorname{mod}p.
\]
In view of%
\begin{align*}
\prod_{s\in\left\{  \text{small elements of }A\right\}  }\left(  sJ\left(
s\right)  \right)   &  =\prod_{a\in\left\{  \text{small elements of
}A\right\}  }\left(  aJ\left(  a\right)  \right)  \ \ \ \ \ \ \ \ \ \ \left(
\begin{array}
[c]{c}%
\text{here, we have renamed the}\\
\text{index }s\text{ as }i\text{ in the product}%
\end{array}
\right) \\
&  =\prod_{\substack{a\in A;\\a\text{ is small}}}\left(  aJ\left(  a\right)
\right)  ,
\end{align*}
this rewrites as $\prod_{\substack{a\in A;\\a\text{ is small}}}\left(
aJ\left(  a\right)  \right)  \equiv1\operatorname{mod}p$.}. Hence,
(\ref{pf.thm.ent.wilson.6}) rewrites as%
\[
\left(  p-1\right)  !\equiv-\underbrace{\prod_{\substack{a\in A;\\a\text{ is
small}}}\left(  aJ\left(  a\right)  \right)  }_{\equiv1\operatorname{mod}%
p}\equiv-1\operatorname{mod}p.
\]
This proves Theorem \ref{thm.ent.wilson}.
\end{fineprint}
\end{proof}

Later, in Section \ref{sect.equiv.modinv}, we shall give a different version
of this proof.

Theorem \ref{thm.ent.wilson} has a converse:

\begin{exercise}
\label{exe.ent.wilson.converse}If an integer $p>1$ satisfies $\left(
p-1\right)  !\equiv-1\operatorname{mod}p$, then prove that $p$ is a prime.
\end{exercise}

(This is actually easier to prove than Theorem \ref{thm.ent.wilson} itself.)

\begin{exercise}
\label{exe.ent.wilson.gauss}Let $p$ be a prime. Prove that
\[
\left(  p-1\right)  !\equiv p-1\operatorname{mod}1+2+\cdots+\left(
p-1\right)  .
\]

\end{exercise}

\begin{center}
\textbf{2019-02-18 lecture}
\end{center}

\subsection{Binomial coefficients}

\subsubsection{Definitions and basics}

Next, we shall introduce and briefly study binomial coefficients. While
binomial coefficients belong more to (enumerative) combinatorics than to
algebra, they are used significantly in algebra, so we have to derive some of
their properties.

Here is the definition of binomial coefficients (at least the one I am going
to follow in these notes):

\begin{definition}
\label{def.binom.binom}Let $n\in\mathbb{Q}$ and $k\in\mathbb{N}$. Then, we
define the \textit{binomial coefficient} $\dbinom{n}{k}$ as follows:

\textbf{(a)} If $k\in\mathbb{N}$, then we set
\[
\dbinom{n}{k}=\dfrac{n\left(  n-1\right)  \left(  n-2\right)  \cdots\left(
n-k+1\right)  }{k!}=\dfrac{\prod_{i=0}^{k-1}\left(  n-i\right)  }{k!}.
\]


\textbf{(b)} If $k\notin\mathbb{N}$, then we set $\dbinom{n}{k}=0$.
\end{definition}

This definition is exactly the definition of $\dbinom{n}{k}$ that we used in
\href{http://www-users.math.umn.edu/~dgrinber/19s/hw0s.pdf}{homework set \#0}.
It is also almost exactly the definition given in \cite[(5.1)]{GKP} (except
that we are allowing $k$ to be non-integer, while the authors of \cite{GKP} do
not). Definition \ref{def.binom.binom} \textbf{(a)} is also identical with the
definition of binomial coefficients in \cite{detnotes}. Our choice to require
$n\in\mathbb{Q}$ is more or less arbitrary -- we could have as well made the
same definition for $n\in\mathbb{R}$ or $n\in\mathbb{C}$ (but I am not aware
of this generality being of much use).

Generally, when you read literature on binomial coefficients, be aware that
some authors use somewhat different definitions of $\dbinom{n}{k}$. All known
definitions give the same results when $n$ and $k$ are nonnegative integers,
but in the other cases there may be discrepancies.

Here are some examples of binomial coefficients:

\begin{example}
\textbf{(a)} Definition \ref{def.binom.binom} \textbf{(a)} yields $\dbinom
{n}{2}=\dfrac{n\left(  n-1\right)  }{2!}=\dfrac{n\left(  n-1\right)  }{2}$ for
all $n\in\mathbb{Q}$. Thus, for example,%
\[
\dbinom{5}{2}=\dfrac{5\cdot4}{2}=10.
\]


\textbf{(b)} Definition \ref{def.binom.binom} \textbf{(a)} yields $\dbinom
{n}{3}=\dfrac{n\left(  n-1\right)  \left(  n-2\right)  }{3!}=\dfrac{n\left(
n-1\right)  \left(  n-2\right)  }{6}$ for all $n\in\mathbb{Q}$. Thus, for
example,%
\begin{align*}
\dbinom{5}{3}  &  =\dfrac{5\cdot4\cdot3}{6}=\dfrac{60}{6}=10;\\
\dbinom{1}{3}  &  =\dfrac{1\cdot0\cdot\left(  -1\right)  }{6}=\dfrac{0}%
{6}=0;\\
\dbinom{-2}{3}  &  =\dfrac{\left(  -2\right)  \cdot\left(  -3\right)
\cdot\left(  -4\right)  }{6}=\dfrac{-24}{6}=-4;\\
\dbinom{1/2}{3}  &  =\dfrac{\left(  1/2\right)  \cdot\left(  -1/2\right)
\cdot\left(  -3/2\right)  }{6}=\dfrac{3/8}{6}=\dfrac{1}{16}.
\end{align*}


\textbf{(c)} Definition \ref{def.binom.binom} \textbf{(a)} yields $\dbinom
{n}{1}=\dfrac{n}{1!}=\dfrac{n}{1}=n$ for all $n\in\mathbb{Q}$.

\textbf{(d)} Definition \ref{def.binom.binom} \textbf{(b)} yields $\dbinom
{4}{1/2}=0$ (since $1/2\notin\mathbb{N}$).
\end{example}

The binomial coefficients $\dbinom{n}{k}$ for $n\in\mathbb{N}$ and
$k\in\left\{  0,1,\ldots,n\right\}  $ are particularly important. They are
usually tabulated in a triangle-shaped table known as
\textit{\href{https://en.wikipedia.org/wiki/Pascal's_triangle}{\textit{Pascal's
triangle}}}, which starts as follows:%
\[%
\begin{array}
[c]{ccccccccccccc}%
\phantom{15} & \phantom{15} & \phantom{15} & \phantom{15} & \phantom{15} &
\phantom{15} & 1 & \phantom{15} & \phantom{15} & \phantom{15} & \phantom{15} &
\phantom{15} & \phantom{15}\\
&  &  &  &  & 1 &  & 1 &  &  &  &  & \\
&  &  &  & 1 &  & 2 &  & 1 &  &  &  & \\
&  &  & 1 &  & 3 &  & 3 &  & 1 &  &  & \\
&  & 1 &  & 4 &  & 6 &  & 4 &  & 1 &  & \\
& 1 &  & 5 &  & 10 &  & 10 &  & 5 &  & 1 & \\
1 &  & 6 &  & 15 &  & 20 &  & 15 &  & 6 &  & 1
\end{array}
\ .
\]
In this table, the binomial coefficient $\dbinom{n}{k}$ appears as the $k$-th
entry (from the left) of the $n$-th row (but we count the rows from $0$; that
is, the topmost row, consisting just of a single \textquotedblleft%
$1$\textquotedblright, is actually the $0$-th row). We advise the reader to
peruse \href{https://en.wikipedia.org/wiki/Pascal's_triangle}{the Wikipedia
article} for the history and the multiple illustrious properties of Pascal's triangle.

The expression $\dbinom{n}{k}$ is pronounced as \textquotedblleft$n$ choose
$k$\textquotedblright. The reason for the word \textquotedblleft
choose\textquotedblright\ will become clearer once we have seen Theorem
\ref{thm.binom.comb-int} further below.

Some of these properties are so fundamental that we are going to list them
right now:

\begin{theorem}
\label{thm.binom.n!k!}Let $n\in\mathbb{N}$ and $k\in\mathbb{N}$ be such that
$n\geq k$. Then,%
\[
\dbinom{n}{k}=\dfrac{n!}{k!\left(  n-k\right)  !}.
\]

\end{theorem}

\begin{proof}
[Proof of Theorem \ref{thm.binom.n!k!}.]This was Exercise 3 \textbf{(a)} on
\href{http://www-users.math.umn.edu/~dgrinber/19s/hw0s.pdf}{homework set \#0}.
\end{proof}

Several authors use the formula $\dbinom{n}{k}=\dfrac{n!}{k!\left(
n-k\right)  !}$ as a definition of the binomial coefficients. However, this
definition has the massive disadvantage of being less general than Definition
\ref{def.binom.binom} (since it only covers the case when $n,k\in\mathbb{N}$
and $n\geq k$). To us, this formula is not a definition, but a result that can
be proven.

\begin{theorem}
\label{thm.binom.k>n0}Let $n\in\mathbb{N}$ and $k\in\mathbb{Q}$ be such that
$k>n$. Then,
\[
\dbinom{n}{k}=0.
\]

\end{theorem}

\begin{proof}
[Proof of Theorem \ref{thm.binom.k>n0}.]This was Exercise 3 \textbf{(b)} on
\href{http://www-users.math.umn.edu/~dgrinber/19s/hw0s.pdf}{homework set \#0}.
\end{proof}

\begin{theorem}
\label{thm.binom.n0}Let $n\in\mathbb{Q}$. Then,%
\[
\dbinom{n}{0}=1.
\]

\end{theorem}

\begin{proof}
[Proof of Theorem \ref{thm.binom.n0}.]Definition \ref{def.binom.binom}
\textbf{(a)} (applied to $k=0$) yields%
\[
\dbinom{n}{0}=\dfrac{\prod_{i=0}^{0-1}\left(  n-i\right)  }{0!}=\dfrac{1}{1}%
\]
(since $\prod_{i=0}^{0-1}\left(  n-i\right)  =\left(  \text{empty
product}\right)  =1$ and $0!=1$). Thus, $\dbinom{n}{0}=\dfrac{1}{1}=1$. This
proves Theorem \ref{thm.binom.n0}.
\end{proof}

\begin{theorem}
\label{thm.binom.symmetry}Let $n\in\mathbb{N}$ and $k\in\mathbb{Q}$. Then,%
\[
\dbinom{n}{k}=\dbinom{n}{n-k}.
\]

\end{theorem}

Theorem \ref{thm.binom.symmetry} is known as the \textit{symmetry of binomial
coefficients}. Note that it fails if $n\notin\mathbb{N}$; thus, be careful
when applying it!

\begin{proof}
[Proof of Theorem \ref{thm.binom.symmetry}.]This was Exercise 3 \textbf{(c)}
on \href{http://www-users.math.umn.edu/~dgrinber/19s/hw0s.pdf}{homework set
\#0}.
\end{proof}

\begin{theorem}
\label{thm.binom.upneg-n}Let $n\in\mathbb{Q}$ and $k\in\mathbb{Q}$. Then,%
\[
\dbinom{-n}{k}=\left(  -1\right)  ^{k}\dbinom{k+n-1}{k}.
\]

\end{theorem}

Theorem \ref{thm.binom.upneg-n} is one of the versions of the \textit{upper
negation formula}.

\begin{proof}
[Proof of Theorem \ref{thm.binom.upneg-n}.]This was Exercise 3 \textbf{(d)} on
\href{http://www-users.math.umn.edu/~dgrinber/19s/hw0s.pdf}{homework set \#0}.
\end{proof}

\begin{theorem}
\label{thm.binom.rec}Any $n\in\mathbb{Q}$ and $k\in\mathbb{Q}$ satisfy
\[
\dbinom{n}{k}=\dbinom{n-1}{k}+\dbinom{n-1}{k-1}.
\]

\end{theorem}

Theorem \ref{thm.binom.rec} is known as the \textit{recurrence of the binomial
coefficients}, and is the reason why each entry of
\href{https://en.wikipedia.org/wiki/Pascal%27s_triangle}{Pascal's triangle} is
the sum of the two entries above it\footnote{Of course, this does not apply to
the \textquotedblleft$1$\textquotedblright\ at the apex of Pascal's triangle
(unless we extend the triangle further to the top by a $\left(  -1\right)
$-st row).}.

\begin{proof}
[Proof of Theorem \ref{thm.binom.rec}.]This was Exercise 3 \textbf{(e)} on
\href{http://www-users.math.umn.edu/~dgrinber/19s/hw0s.pdf}{homework set \#0}.
\end{proof}

\begin{theorem}
\label{thm.binom.abs}Any $n\in\mathbb{Q}$ and $k\in\mathbb{Q}$ satisfy
\[
k\dbinom{n}{k}=n\dbinom{n-1}{k-1}.
\]

\end{theorem}

\begin{proof}
[Proof of Theorem \ref{thm.binom.abs}.]This was Exercise 3 \textbf{(f)} on
\href{http://www-users.math.umn.edu/~dgrinber/19s/hw0s.pdf}{homework set \#0}.
\end{proof}

\subsubsection{Combinatorial interpretation}

The next property of binomial coefficients is one of the major motivations for
their definitions:

\begin{theorem}
\label{thm.binom.comb-int}Let $n\in\mathbb{N}$ and $k\in\mathbb{Q}$. Let $N$
be an $n$-element set. Then, $\dbinom{n}{k}$ is the number of $k$-element
subsets of $N$.
\end{theorem}

We shall refer to Theorem \ref{thm.binom.comb-int} as the
\textit{Combinatorial interpretation of binomial coefficients}. Theorem
\ref{thm.binom.comb-int} can be restated as \textquotedblleft$\dbinom{n}{k}$
is the number of ways to choose $k$ elements (with no repetitions and with no
regard for the order) from a given $n$-element set (when $n\in\mathbb{N}%
$)\textquotedblright. This is the reason why $\dbinom{n}{k}$ is called
\textquotedblleft$n$ choose $k$\textquotedblright. Note, however, that Theorem
\ref{thm.binom.comb-int} does not directly help us compute $\dbinom{n}{k}$
when $n\notin\mathbb{N}$.

\begin{proof}
[Proof of Theorem \ref{thm.binom.comb-int}.]What follows is an outline of the
proof. For a detailed proof, see \cite[Exercise 3.4]{detnotes}, where I
thoroughly prove Theorem \ref{thm.binom.comb-int} in the case $k\in\mathbb{N}%
$. (The remaining case $k\notin\mathbb{N}$ is obvious, because in that case
the theorem simply says $0=0$.)

We proceed by induction on $n$:

\textit{Induction base:} Let $n$, $k$ and $N$ be as in Theorem
\ref{thm.binom.comb-int}, and let us assume that $n=0$. From $n=0$, we obtain
$\dbinom{n}{k}=\dbinom{0}{k}=%
\begin{cases}
1, & \text{if }k=0;\\
0, & \text{if }k\neq0
\end{cases}
$ (this is easy to derive from Definition \ref{def.binom.binom}\footnote{To
wit:
\par
\begin{itemize}
\item If $k=0$, then $\dbinom{0}{k}=\dbinom{0}{0}=1$ (by Theorem
\ref{thm.binom.n0}).
\par
\item If $k>0$, then Theorem \ref{thm.binom.k>n0} (applied to $0$ instead of
$n$) yields $\dbinom{0}{k}=0$.
\par
\item If $k<0$, then $k\notin\mathbb{N}$ and thus $\dbinom{0}{k}=0$ (by
Definition \ref{def.binom.binom} \textbf{(b)}).
\end{itemize}
\par
Thus, in all three cases ($k=0$, $k>0$ and $k<0$), we conclude that
$\dbinom{0}{k}=%
\begin{cases}
1, & \text{if }k=0;\\
0, & \text{if }k\neq0
\end{cases}
$.}). On the other hand, the set $N$ is empty (since $\left\vert N\right\vert
=n=0$). Thus, its only subset is $\varnothing$, which is a $0$-element subset.
Hence, $N$ has exactly one $0$-element subset, and no subsets of any other
size. Hence, the number of $k$-element subsets of $N$ is $%
\begin{cases}
1, & \text{if }k=0;\\
0, & \text{if }k\neq0
\end{cases}
$. Comparing this with $\dbinom{n}{k}=%
\begin{cases}
1, & \text{if }k=0;\\
0, & \text{if }k\neq0
\end{cases}
$, we conclude that $\dbinom{n}{k}$ is the number of $k$-element subsets of
$N$. Thus, we have proven Theorem \ref{thm.binom.comb-int} under the
assumption that $n=0$. This completes the induction base.

\textit{Induction step:} Let $m$ be a positive integer. Assume (as the
induction hypothesis) that Theorem \ref{thm.binom.comb-int} holds for $n=m-1$.
We must now prove that Theorem \ref{thm.binom.comb-int} holds for $n=m$.

Let $k\in\mathbb{Q}$. Let $N$ be an $m$-element set. Thus, $\left\vert
N\right\vert =m>0$. Hence, the set $N$ is nonempty; in other words, there
exists some $a\in N$. Pick such an $a$. (It does not matter which one we
choose, but we need to leave it fixed from now on.) Clearly, $\left\vert
N\setminus\left\{  a\right\}  \right\vert =m-1$ (since $\left\vert
N\right\vert =m$). In other words, $N\setminus\left\{  a\right\}  $ is an
$\left(  m-1\right)  $-element set.

Now, the $k$-element subsets of $N$ can be classified into two types:

\begin{itemize}
\item We say that a $k$-element subset is \textit{type-1} if it doesn't
contain $a$.

\item We say that a $k$-element subset is \textit{type-2} if it does contain
$a$.
\end{itemize}

(We shall use the adjectives \textquotedblleft type-1\textquotedblright\ and
\textquotedblleft type-2\textquotedblright\ for $k$-element subsets of $N$
only. Thus, whenever we say \textquotedblleft type-1 subset\textquotedblright%
\ in the following, we will always mean \textquotedblleft type-1 $k$-element
subset of $N$\textquotedblright, and similarly for \textquotedblleft type-2
subset\textquotedblright.)

Clearly, any $k$-element subset of $N$ is either type-1 or type-2 (but never
both at the same time).

The type-1 subsets are precisely the $k$-element subsets of the $\left(
m-1\right)  $-element set $N\setminus\left\{  a\right\}  $. By our induction
hypothesis, we know that Theorem \ref{thm.binom.comb-int} holds for $n=m-1$.
Hence, we can apply Theorem \ref{thm.binom.comb-int} to $m-1$ and
$N\setminus\left\{  a\right\}  $ instead of $n$ and $N$. We thus conclude that
$\dbinom{m-1}{k}$ is the number of $k$-element subsets of $N\setminus\left\{
a\right\}  $. In other words, $\dbinom{m-1}{k}$ is the number of type-1
subsets (since the type-1 subsets are precisely the $k$-element subsets of
$N\setminus\left\{  a\right\}  $). In other words,%
\begin{equation}
\dbinom{m-1}{k}=\left(  \text{the number of type-1 subsets}\right)  .
\label{pf.thm.binom.comb-int.IS.1}%
\end{equation}


Now, let us count the type-2 subsets\footnote{Keep in mind that
\textquotedblleft type-2 subset\textquotedblright\ means \textquotedblleft
type-2 $k$-element subset of $N$\textquotedblright.}. This is a bit harder,
since they are not subsets of $N\setminus\left\{  a\right\}  $ anymore.
However, they are in 1-to-1 correspondence (aka bijection) with some such
subsets. Namely, there is a bijection%
\begin{align*}
\left\{  \left(  k-1\right)  \text{-element subsets of }N\setminus\left\{
a\right\}  \right\}   &  \rightarrow\left\{  \text{type-2 subsets}\right\}
,\\
S  &  \mapsto S\cup\left\{  a\right\}  .
\end{align*}
(The inverse of this bijection sends each type-2 subset $T$ to $T\setminus
\left\{  a\right\}  $. You can easily show that these two maps are actually
well-defined and mutually inverse, so that they really are bijections.) This
bijection shows that%
\begin{equation}
\left\vert \left\{  \text{type-2 subsets}\right\}  \right\vert =\left\vert
\left\{  \left(  k-1\right)  \text{-element subsets of }N\setminus\left\{
a\right\}  \right\}  \right\vert . \label{pf.thm.binom.comb-int.IS.2}%
\end{equation}
But recall that Theorem \ref{thm.binom.comb-int} holds for $n=m-1$. Hence, we
can apply Theorem \ref{thm.binom.comb-int} to $m-1$, $k-1$ and $N\setminus
\left\{  a\right\}  $ instead of $n$, $k$ and $N$. We thus conclude that
$\dbinom{m-1}{k-1}$ is the number of $\left(  k-1\right)  $-element subsets of
$N\setminus\left\{  a\right\}  $. In other words,
\[
\dbinom{m-1}{k-1}=\left\vert \left\{  \left(  k-1\right)  \text{-element
subsets of }N\setminus\left\{  a\right\}  \right\}  \right\vert .
\]
Comparing this equality with (\ref{pf.thm.binom.comb-int.IS.2}), we obtain%
\begin{align}
\dbinom{m-1}{k-1}  &  =\left\vert \left\{  \text{type-2 subsets}\right\}
\right\vert \nonumber\\
&  =\left(  \text{the number of type-2 subsets}\right)  .
\label{pf.thm.binom.comb-int.IS.3}%
\end{align}


Now, recall that any $k$-element subset of $N$ is either type-1 or type-2 (but
never both at the same time). Hence, we can count all $k$-element subsets of
$N$ by first counting the type-1 subsets, then counting the type-2 subsets,
and then adding these two results. We thus find\footnote{The combinatorial
principle we are using in the following computation is the so-called
\textit{sum rule} in its simplest form (see, e.g., \cite[1.1]{Loehr-BC} or
\cite[\S 15.2.3]{LeLeMe}).}%
\begin{align*}
&  \left(  \text{the number of }k\text{-element subsets of }N\right) \\
&  =\underbrace{\left(  \text{the number of type-1 subsets}\right)
}_{\substack{=\dbinom{m-1}{k}\\\text{(by (\ref{pf.thm.binom.comb-int.IS.1}))}%
}}+\underbrace{\left(  \text{the number of type-2 subsets}\right)
}_{\substack{=\dbinom{m-1}{k-1}\\\text{(by (\ref{pf.thm.binom.comb-int.IS.3}%
))}}}\\
&  =\dbinom{m-1}{k}+\dbinom{m-1}{k-1}=\dbinom{m}{k}%
\end{align*}
(since Theorem \ref{thm.binom.rec} (applied to $n=m$) yields $\dbinom{m}%
{k}=\dbinom{m-1}{k}+\dbinom{m-1}{k-1}$). In other words, $\dbinom{m}{k}$ is
the number of $k$-element subsets of $N$.

Now, forget that we fixed $N$ and $k$. We thus have shown that if
$k\in\mathbb{Q}$ and if $N$ is an $m$-element set, then $\dbinom{m}{k}$ is the
number of $k$-element subsets of $N$. In other words, Theorem
\ref{thm.binom.comb-int} holds for $n=m$. This completes the induction step.
Hence, Theorem \ref{thm.binom.comb-int} is proven.
\end{proof}

\begin{corollary}
\label{cor.binom.N->N}Let $n\in\mathbb{N}$ and $k\in\mathbb{Q}$. Then,
$\dbinom{n}{k}$ is a nonnegative integer.
\end{corollary}

\begin{proof}
[Proof of Corollary \ref{cor.binom.N->N}.]Let $N=\left\{  1,2,\ldots
,n\right\}  $; thus, $N$ is an $n$-element set. Hence, Theorem
\ref{thm.binom.comb-int} shows that $\dbinom{n}{k}$ is the number of
$k$-element subsets of $N$. But the latter number is clearly a nonnegative
integer (since it counts something). Thus, $\dbinom{n}{k}$ is a nonnegative
integer. This proves Corollary \ref{cor.binom.N->N}.
\end{proof}

\begin{proposition}
\label{prop.binom.Z->Z}Let $n\in\mathbb{Z}$ and $k\in\mathbb{Q}$. Then,
$\dbinom{n}{k}$ is a integer.
\end{proposition}

\begin{proof}
[Proof of Proposition \ref{prop.binom.Z->Z}.]If $n\geq0$, then this follows
from Corollary \ref{cor.binom.N->N} (because $n\geq0$ implies $n\in\mathbb{N}%
$, and thus we can apply Corollary \ref{cor.binom.N->N}). Thus, for the rest
of this proof, we WLOG assume that $n<0$. Hence, $n\leq-1$ (since $n$ is an
integer), so that $n+1\leq0$ and thus $-\left(  n+1\right)  \geq0$. Therefore,
$-\left(  n+1\right)  \in\mathbb{N}$ (since $-\left(  n+1\right)  $ is an integer).

If $k\notin\mathbb{N}$, then $\dbinom{n}{k}$ is a integer (since Definition
\ref{def.binom.binom} \textbf{(b)} yields $\dbinom{n}{k}=0$ in this case).
Thus, for the rest of this proof, we WLOG assume that $k\in\mathbb{N}$. Thus,
$k+\left(  -n\right)  -1=\underbrace{k}_{\in\mathbb{N}}+\underbrace{\left(
-\left(  n+1\right)  \right)  }_{\in\mathbb{N}}\in\mathbb{N}$. Hence,
Corollary \ref{cor.binom.N->N} (applied to $k+\left(  -n\right)  -1$ instead
of $n$) yields that $\dbinom{k+\left(  -n\right)  -1}{k}$ is a nonnegative
integer. Thus, $\dbinom{k+\left(  -n\right)  -1}{k}\in\mathbb{Z}$.

Theorem \ref{thm.binom.upneg-n} (applied to $-n$ instead of $n$) yields%
\[
\dbinom{-\left(  -n\right)  }{k}=\underbrace{\left(  -1\right)  ^{k}}%
_{\in\mathbb{Z}}\underbrace{\dbinom{k+\left(  -n\right)  -1}{k}}%
_{\in\mathbb{Z}}\in\mathbb{Z}.
\]
In other words, $\dbinom{n}{k}\in\mathbb{Z}$. In other words, $\dbinom{n}{k}$
is an integer. Thus, Proposition \ref{prop.binom.Z->Z} is proven.
\end{proof}

\begin{exercise}
\label{exe.binom.k!divprod}Let $k\in\mathbb{N}$. Prove that the product of any
$k$ consecutive integers is divisible by $k!$.
\end{exercise}

\subsubsection{Binomial formula and Vandermonde convolution}

One of the staples of enumerative combinatorics are identities that involve
binomial coefficients. Hundreds of such identities have been found (see, e.g.,
\href{http://www.math.wvu.edu/~gould/}{Henry W. Gould's website} for a list of
some of them; see also \cite[Chapter 5]{GKP} and \cite[Chapter 3]{detnotes}
for introductions). At this point, let us only show two of the most important
ones (not counting the ones we have already shown above). Probably the most
famous one is the \textit{binomial formula}:

\begin{theorem}
\label{thm.binom.binf}Let $x,y$ be any numbers (e.g., rational or real or
complex numbers). Let $n\in\mathbb{N}$. Then,%
\[
\left(  x+y\right)  ^{n}=\sum_{k=0}^{n}\dbinom{n}{k}x^{k}y^{n-k}.
\]

\end{theorem}

Theorem \ref{thm.binom.binf} is known as the \textit{binomial formula} or the
\textit{binomial theorem}. It generalizes the well-known and beloved
identities%
\begin{align*}
\left(  x+y\right)  ^{2}  &  =x^{2}+2xy+y^{2};\\
\left(  x+y\right)  ^{3}  &  =x^{3}+3x^{2}y+3xy^{2}+y^{3};\\
\left(  x+y\right)  ^{4}  &  =x^{4}+4x^{3}y+6x^{2}y^{2}+4xy^{3}+y^{4}%
\end{align*}
(as well as $\left(  x+y\right)  ^{1}=x^{1}+y^{1}$ and $\left(  x+y\right)
^{0}=1$, of course).

\begin{proof}
[Proof of Theorem \ref{thm.binom.binf} (sketched).]This can be proven by a
straightforward induction on $n$ (using Theorem \ref{thm.binom.rec} in the
induction step). See \cite[Exercise 3.6]{detnotes} for details of this proof.
Alternatively, see \cite[Identity 11.4]{Galvin} for combinatorial proofs
(which rely on Theorem \ref{thm.binom.comb-int}).
\end{proof}

The next identity we want to show is the \textit{Vandermonde convolution
identity}:

\begin{theorem}
\label{thm.binom.vandermonde}Let $x,y\in\mathbb{Q}$ and $n\in\mathbb{N}$.
Then,%
\[
\dbinom{x+y}{n}=\sum_{k=0}^{n}\dbinom{x}{k}\dbinom{y}{n-k}.
\]

\end{theorem}

For example, for $n=2$, Theorem \ref{thm.binom.vandermonde} says that
\[
\dbinom{x+y}{2}=\underbrace{\dbinom{x}{0}}_{=1}\dbinom{y}{2}%
+\underbrace{\dbinom{x}{1}}_{=x}\underbrace{\dbinom{y}{1}}_{=y}+\dbinom{x}%
{2}\underbrace{\dbinom{y}{0}}_{=1}=\dbinom{y}{2}+xy+\dbinom{x}{2}.
\]


The proof of Theorem \ref{thm.binom.vandermonde} that we are soon going to
sketch is similar to the one given in \cite[\S 3.3.3]{detnotes} (but, unlike
the latter proof, we will use polynomials in $1$ variable only). It will not
be a complete proof, since it will rely on some properties of polynomials, and
not only have we not proven these properties -- we have actually not
rigorously defined polynomials yet! (We will do so later, after we have
introduced rings.) See \cite[\S 3.3.2]{detnotes} for another (more boring and
tedious, but conceptually simpler) proof of Theorem
\ref{thm.binom.vandermonde}.

Our proof of Theorem \ref{thm.binom.vandermonde} proceeds via several
intermediate steps. The first one is to prove Theorem
\ref{thm.binom.vandermonde} in the particular case when $x,y\in\mathbb{N}$:

\begin{lemma}
\label{lem.binom.vandermonde.NN}Let $a,b\in\mathbb{N}$ and $n\in\mathbb{N}$.
Then,%
\[
\dbinom{a+b}{n}=\sum_{k=0}^{n}\dbinom{a}{k}\dbinom{b}{n-k}.
\]

\end{lemma}

(We have renamed the variables $x$ and $y$ from Theorem
\ref{thm.binom.vandermonde} as $a$ and $b$ here, since we will soon use the
letter \textquotedblleft$x$\textquotedblright\ for something completely different.)

\begin{proof}
[Proof of Lemma \ref{lem.binom.vandermonde.NN} (sketched).]Let%
\[
C=\left\{  1,2,\ldots,a\right\}  \cup\left\{  -1,-2,\ldots,-b\right\}  .
\]
Thus, $C$ is an $\left(  a+b\right)  $-element set, containing only positive
and negative integers. How many $n$-element subsets does $C$ have?

\begin{itemize}
\item On the one hand: The set $C$ is an $\left(  a+b\right)  $-element set.
Hence, Theorem \ref{thm.binom.comb-int} (applied to $a+b$, $n$ and $C$ instead
of $n$, $k$ and $N$) shows that the number of $n$-element subsets of $C$ is
$\dbinom{a+b}{n}$.

\item On the other hand: Let us classify the $n$-element subsets of $C$
according to how many positive elements they have. We claim the following:

\begin{statement}
\textit{Claim 1:} For each $k\in\left\{  0,1,\ldots,n\right\}  $, the number
of $n$-element subsets of $C$ having \textbf{exactly }$k$ \textbf{positive
elements} is $\dbinom{a}{k}\dbinom{b}{n-k}$.
\end{statement}

[\textit{Proof of Claim 1:} Let $k\in\left\{  0,1,\ldots,n\right\}  $. In
order to choose an $n$-element subset of $C$ having exactly $k$ positive
elements, we need to choose

\begin{itemize}
\item its $k$ positive elements from the set of all positive elements of $C$
(that is, from the set $\left\{  1,2,\ldots,a\right\}  $), and

\item its remaining $n-k$ (negative) elements from the set of all negative
elements of $C$ (that is, from the set $\left\{  -1,-2,\ldots,-b\right\}  $).
\end{itemize}

In other words, we need to choose

\begin{itemize}
\item a $k$-element subset of the set $\left\{  1,2,\ldots,a\right\}  $, and

\item an $\left(  n-k\right)  $-element subset of the set $\left\{
-1,-2,\ldots,-b\right\}  $.
\end{itemize}

Theorem \ref{thm.binom.comb-int} (applied to $a$, $k$ and $\left\{
1,2,\ldots,a\right\}  $ instead of $n$, $k$ and $N$) shows that the number of
$k$-element subsets of the set $\left\{  1,2,\ldots,a\right\}  $ is
$\dbinom{a}{k}$ (since $\left\{  1,2,\ldots,a\right\}  $ is an $a$-element
set). Similarly, the number of $\left(  n-k\right)  $-element subsets of the
set $\left\{  -1,-2,\ldots,-b\right\}  $ is $\dbinom{b}{n-k}$. Since we need
to choose one of the former subsets and one of the latter subsets (and our
choices are independent -- i.e., any of the former subsets can be combined
with any of the latter), we thus conclude that the total number of options we
have is $\dbinom{a}{k}\dbinom{b}{n-k}$\ \ \ \ \footnote{The combinatorial
principle we are using here is the so-called \textit{product rule} (see, e.g.,
\cite[1.8]{Loehr-BC} or \cite[\S 15.2.1]{LeLeMe}).}. In other words, the
number of $n$-element subsets of $C$ having \textbf{exactly }$k$
\textbf{positive elements} is $\dbinom{a}{k}\dbinom{b}{n-k}$. This proves
Claim 1.]

Now, the total number of $n$-element subsets of $C$ is\footnote{The
combinatorial principle we are using in the following computation is the
so-called \textit{sum rule} (see, e.g., \cite[1.2]{Loehr-BC} or
\cite[\S 15.2.3]{LeLeMe}).}%
\begin{align*}
&  \left(  \text{the number of }n\text{-element subsets of }C\right) \\
&  =\sum_{k=0}^{n}\underbrace{\left(  \text{the number of }n\text{-element
subsets of }C\text{ having exactly }k\text{ positive elements}\right)
}_{\substack{=\dbinom{a}{k}\dbinom{b}{n-k}\\\text{(by Claim 1)}}}\\
&  \ \ \ \ \ \ \ \ \ \ \left(
\begin{array}
[c]{c}%
\text{since the number of positive elements of an }n\text{-element}\\
\text{subset of }C\text{ must always be an integer between }0\text{ and }n
\end{array}
\right) \\
&  =\sum_{k=0}^{n}\dbinom{a}{k}\dbinom{b}{n-k}.
\end{align*}

\end{itemize}

Now, we have computed the number of $n$-element subsets of $C$ in two ways.
The first way yielded the result $\dbinom{a+b}{n}$, while the second way
yielded $\sum_{k=0}^{n}\dbinom{a}{k}\dbinom{b}{n-k}$. But these two results
clearly have to be equal. In other words, we have%
\[
\dbinom{a+b}{n}=\sum_{k=0}^{n}\dbinom{a}{k}\dbinom{b}{n-k}.
\]
Thus, Lemma \ref{lem.binom.vandermonde.NN} holds.

(This was an example of a proof by \textit{double counting}, also known as a
\textit{combinatorial proof}. See \cite[\S 15.10]{LeLeMe} for some more
examples of such proofs, and see most textbooks on combinatorics for more.)
\end{proof}

This shows that Theorem \ref{thm.binom.vandermonde} holds for all
$x\in\mathbb{N}$ and $y\in\mathbb{N}$. In order to extend its reach to
arbitrary rational $a$ and $b$, we shall use the \textquotedblleft polynomial
identity trick\textquotedblright. First, let us briefly explain what
polynomials are, without giving a formal definition.

Informally, a \textit{polynomial} (in $1$ variable $x$, with rational
coefficients) is an \textquotedblleft expression\textquotedblright\ of the
form $a_{k}x^{k}+a_{k-1}x^{k-1}+\cdots+a_{0}$, where $a_{k},a_{k-1}%
,\ldots,a_{0}$ are (fixed) rational numbers and where $x$ is a (so far
meaningless) symbol\ (called \textit{indeterminate} or \textit{variable}). For
example, $4x^{3}+2x^{2}-\dfrac{1}{3}x+\dfrac{2}{7}$ is a polynomial, and so is
$0x^{3}+x^{2}-0x+\dfrac{1}{3}$. We can omit terms of the form
\textquotedblleft$0x^{i}$\textquotedblright\ when writing down a polynomial
and treat the result as being the same polynomial; thus, $0x^{3}%
+x^{2}-0x+\dfrac{1}{3}$ can also be written as $x^{2}-0x+\dfrac{1}{3}$ and as
$x^{2}+\dfrac{1}{3}$. Likewise, we can treat the \textquotedblleft%
$+$\textquotedblright\ signs as signifying addition and behaving like it, so,
e.g., commutativity holds: $2x^{3}+5x$ and $5x+2x^{3}$ are the same polynomial
(but $2x+5x^{3}$ is different). We also pretend that distributivity holds, so
\textquotedblleft like terms\textquotedblright\ can be combined: e.g., we have
$4x^{3}+9x^{3}=\left(  4+9\right)  x^{3}=13x^{3}$ or $4x^{3}-12x^{3}=\left(
4-12\right)  x^{3}=-8x^{3}$. Thus, we can add two polynomials: e.g.,%
\[
\left(  3x^{2}-1x+\dfrac{1}{2}\right)  +\left(  6x-7\right)  =3x^{2}%
+\underbrace{\left(  -1+6\right)  }_{=5}x+\underbrace{\left(  \dfrac{1}%
{2}-7\right)  }_{=\dfrac{-13}{2}}=3x^{2}+5x+\dfrac{-13}{2}.
\]
By pretending that the $x^{i}$ (with $i\in\mathbb{N}$) are actual powers of
the symbol $x$, and that multiplication obeys the associativity law (so that
$\left(  \lambda x^{i}\right)  x^{j}=\lambda\left(  x^{i}x^{j}\right)
=\lambda x^{i+j}$ for rational $\lambda$ and $i,j\in\mathbb{N}$), we can
multiply polynomials as well (first use distributivity to expand the product):%
\begin{align*}
\left(  3x-5\right)  \left(  x^{2}+3x+2\right)   &  =3x\left(  x^{2}%
+3x+2\right)  -5\left(  x^{2}+3x+2\right) \\
&  =\left(  3x^{3}+9x^{2}+6x\right)  -\left(  5x^{2}+15x+10\right) \\
&  =3x^{3}+4x^{2}-9x-10.
\end{align*}


Most importantly, it is possible to \textit{substitute} a number into a
polynomial: If $u\in\mathbb{Q}$ and if $P=a_{k}x^{k}+a_{k-1}x^{k-1}%
+\cdots+a_{0}$ is a polynomial, then we define $P\left(  u\right)  $ (called
the \textit{evaluation} of $P$ \textit{at} $u$, or the \textit{result of
substituting }$u$ \textit{for }$x$ \textit{in} $P$) to be the number
$a_{k}u^{k}+a_{k-1}u^{k-1}+\cdots+a_{0}$. More generally, if the polynomial
$P$ is given in any of its forms (e.g., as a product of other polynomials),
then we can compute $P\left(  u\right)  $ by replacing each $x$ appearing in
this form by an $u$. For example, if $P=\left(  2x+1\right)  \left(
3x+1\right)  -\left(  4x+1\right)  \left(  5x+1\right)  $, then $P\left(
u\right)  =\left(  2u+1\right)  \left(  3u+1\right)  -\left(  4u+1\right)
\left(  5u+1\right)  $; thus, we do not need to expand $P$ before substituting
$u$ into it.

Even more generally, $u$ does not have to be a rational number in order to be
substituted in a polynomial $P$ -- it can be (roughly speaking!) anything that
can be taken to the $i$-th power for $i\in\mathbb{N}$ and that can be added
and multiplied by a rational number. For example, $u$ can be a real number or
a square matrix or another polynomial. (We will later learn the precise
meaning of \textquotedblleft anything\textquotedblright\ here.)

We have been vague in our definition of polynomials, since making it rigorous
would take us a fair way afield. But we \textbf{will} eventually (in April?)
define polynomials rigorously and prove that all of the above claims (e.g.,
about associativity and distributivity) actually hold. For now, we need a
basic property of polynomials:

\begin{proposition}
\label{prop.poly.informal.f=g}Let $P$ and $Q$ be two polynomials in $1$
variable $x$ with rational coefficients. Assume that infinitely many
$u\in\mathbb{Q}$ satisfy $P\left(  u\right)  =Q\left(  u\right)  $. Then,
$P=Q$ (as polynomials).
\end{proposition}

We will prove Proposition \ref{prop.poly.informal.f=g} later.

Note that polynomials are not functions -- despite the fact that we can
substitute numbers into them and obtain other numbers. However, in many
regards, they behave like functions. For what we are going to do in this
section, the difference does not matter; we can treat polynomials as functions here.

With Lemma \ref{lem.binom.vandermonde.NN}, we have proven Theorem
\ref{thm.binom.vandermonde} in the case when $x$ and $y$ belong to
$\mathbb{N}$. Our goal, however, is to prove it for arbitrary $x,y\in
\mathbb{Q}$. Let us first go to the intermediate level of generality --
allowing $x$ to be arbitrary, but still requiring $y\in\mathbb{N}$. Thus, we
want to prove the following lemma:

\begin{lemma}
\label{lem.binom.vandermonde.QN}Let $a\in\mathbb{Q}$, $b\in\mathbb{N}$ and
$n\in\mathbb{N}$. Then,%
\[
\dbinom{a+b}{n}=\sum_{k=0}^{n}\dbinom{a}{k}\dbinom{b}{n-k}.
\]

\end{lemma}

\begin{proof}
[Proof of Lemma \ref{lem.binom.vandermonde.NN} (sketched).]Let us define a
polynomial $P$ in $1$ variable $x$ with rational coefficients as follows:%
\begin{equation}
P=\dbinom{x+b}{n}. \label{pf.lem.binom.vandermonde.NN.P=}%
\end{equation}
The \textquotedblleft binomial coefficient\textquotedblright\ $\dbinom{x+b}%
{n}$ here is to be understood by extending Definition \ref{def.binom.binom}
\textbf{(a)} in the obvious fashion to the case when $n$ is a polynomial (in
our case, $x+b$) rather than a rational number. Thus,%
\[
\dbinom{x+b}{n}=\dfrac{\left(  x+b\right)  \left(  x+b-1\right)  \left(
x+b-2\right)  \cdots\left(  x+b-n+1\right)  }{n!}.
\]


Let us also define a polynomial $Q$ in $1$ variable $x$ with rational
coefficients as follows:%
\begin{equation}
Q=\sum_{k=0}^{n}\dbinom{x}{k}\dbinom{b}{n-k}.
\label{pf.lem.binom.vandermonde.NN.Q=}%
\end{equation}
(Again, the \textquotedblleft binomial coefficients\textquotedblright%
\ $\dbinom{x}{k}$ are defined via our extension of Definition
\ref{def.binom.binom} \textbf{(a)}, and can be explicitly written as
$\dbinom{x}{k}=\dfrac{x\left(  x-1\right)  \left(  x-2\right)  \cdots\left(
x-k+1\right)  }{k!}$. Meanwhile, the $\dbinom{b}{n-k}$ are just constant integers.)

Now, for each $u\in\mathbb{N}$, we have%
\begin{align*}
P\left(  u\right)   &  =\dbinom{u+b}{n}\ \ \ \ \ \ \ \ \ \ \left(  \text{by
substituting }u\text{ for }x\text{ in the equality
(\ref{pf.lem.binom.vandermonde.NN.P=})}\right) \\
&  =\sum_{k=0}^{n}\dbinom{u}{k}\dbinom{b}{n-k}%
\end{align*}
(by Lemma \ref{lem.binom.vandermonde.NN}, applied to $u$ instead of $a$) and%
\[
Q\left(  u\right)  =\sum_{k=0}^{n}\dbinom{u}{k}\dbinom{b}{n-k}%
\]
(by substituting $u$ for $x$ in the equality
(\ref{pf.lem.binom.vandermonde.NN.Q=})). Comparing these two equalities, we
obtain $P\left(  u\right)  =Q\left(  u\right)  $ for all $u\in\mathbb{N}$.
Hence, infinitely many $u\in\mathbb{Q}$ satisfy $P\left(  u\right)  =Q\left(
u\right)  $ (since infinitely many $u\in\mathbb{Q}$ satisfy $u\in\mathbb{N}$).
Thus, Proposition \ref{prop.poly.informal.f=g} yields $P=Q$. In view of
(\ref{pf.lem.binom.vandermonde.NN.P=}) and
(\ref{pf.lem.binom.vandermonde.NN.Q=}), this rewrites as%
\begin{equation}
\dbinom{x+b}{n}=\sum_{k=0}^{n}\dbinom{x}{k}\dbinom{b}{n-k}.
\label{pf.lem.binom.vandermonde.NN.final}%
\end{equation}
Now, substituting $a$ for $x$ in this equality of polynomials, we obtain
$\dbinom{a+b}{n}=\sum_{k=0}^{n}\dbinom{a}{k}\dbinom{b}{n-k}$. This proves
Lemma \ref{lem.binom.vandermonde.QN}.
\end{proof}

Let us summarize the main idea of this proof: We replaced the rational number
$a$ by the indeterminate $x$, thus transforming the identity we were proving
into an equality between two polynomials (namely, $P=Q$). But in order to
prove an equality between polynomials, it suffices to prove that it holds at
infinitely many numbers (by Proposition \ref{prop.poly.informal.f=g}); thus,
in particular, it suffices to check it at all nonnegative integers. But this
is precisely what we did in Lemma \ref{lem.binom.vandermonde.NN} above. This
kind of argument (with its use of Proposition \ref{prop.poly.informal.f=g}) is
known as the \textquotedblleft polynomial identity trick\textquotedblright.

Now, let us extend the reach of Lemma \ref{lem.binom.vandermonde.QN} further,
allowing both $a$ and $b$ to be arbitrary (and thus obtaining the whole
Theorem \ref{thm.binom.vandermonde}):

\begin{lemma}
\label{lem.binom.vandermonde.QQ}Let $a,b\in\mathbb{Q}$ and $n\in\mathbb{N}$.
Then,%
\[
\dbinom{a+b}{n}=\sum_{k=0}^{n}\dbinom{a}{k}\dbinom{b}{n-k}.
\]

\end{lemma}

\begin{proof}
[Proof of Lemma \ref{lem.binom.vandermonde.QQ} (sketched).]Deriving Lemma
\ref{lem.binom.vandermonde.QQ} from Lemma \ref{lem.binom.vandermonde.QN} is
very similar to deriving Lemma \ref{lem.binom.vandermonde.QN} from Lemma
\ref{lem.binom.vandermonde.NN}. The main difference is that we replace $b$
(rather than $a$) by the indeterminate $x$ now.

\begin{fineprint}
Here are the details: Let us define a polynomial $P$ in $1$ variable $x$ with
rational coefficients as follows:%
\begin{equation}
P=\dbinom{a+x}{n}. \label{pf.lem.binom.vandermonde.QQ.P=}%
\end{equation}


Let us also define a polynomial $Q$ in $1$ variable $x$ with rational
coefficients as follows:%
\begin{equation}
Q=\sum_{k=0}^{n}\dbinom{a}{k}\dbinom{x}{n-k}.
\label{pf.lem.binom.vandermonde.QQ.Q=}%
\end{equation}


Now, for each $u\in\mathbb{N}$, we have%
\begin{align*}
P\left(  u\right)   &  =\dbinom{a+u}{n}\ \ \ \ \ \ \ \ \ \ \left(  \text{by
substituting }u\text{ for }x\text{ in the equality
(\ref{pf.lem.binom.vandermonde.QQ.P=})}\right) \\
&  =\sum_{k=0}^{n}\dbinom{a}{k}\dbinom{u}{n-k}%
\end{align*}
(by Lemma \ref{lem.binom.vandermonde.QN}, applied to $u$ instead of $b$) and%
\[
Q\left(  u\right)  =\sum_{k=0}^{n}\dbinom{a}{k}\dbinom{u}{n-k}%
\]
(by substituting $u$ for $x$ in the equality
(\ref{pf.lem.binom.vandermonde.QQ.Q=})). Comparing these two equalities, we
obtain $P\left(  u\right)  =Q\left(  u\right)  $ for all $u\in\mathbb{N}$.
Hence, infinitely many $u\in\mathbb{Q}$ satisfy $P\left(  u\right)  =Q\left(
u\right)  $ (since infinitely many $u\in\mathbb{Q}$ satisfy $u\in\mathbb{N}$).
Thus, Proposition \ref{prop.poly.informal.f=g} yields $P=Q$. In view of
(\ref{pf.lem.binom.vandermonde.QQ.P=}) and
(\ref{pf.lem.binom.vandermonde.QQ.Q=}), this rewrites as%
\[
\dbinom{a+x}{n}=\sum_{k=0}^{n}\dbinom{a}{k}\dbinom{x}{n-k}.
\]
Now, substituting $b$ for $x$ in this equality of polynomials, we obtain
$\dbinom{a+b}{n}=\sum_{k=0}^{n}\dbinom{a}{k}\dbinom{b}{n-k}$. This proves
Lemma \ref{lem.binom.vandermonde.QQ}.
\end{fineprint}
\end{proof}

\begin{proof}
[Proof of Theorem \ref{thm.binom.vandermonde} (sketched).]Theorem
\ref{thm.binom.vandermonde} is just Lemma \ref{lem.binom.vandermonde.QQ}, with
$a$ and $b$ renamed as $x$ and $y$.
\end{proof}

\begin{noncompile}
See \cite{GKP} and \cite{detnotes} for further identities involving binomial coefficients.
\end{noncompile}

\subsubsection{Some divisibilities and congruences}

So far we have been proving identities between binomial coefficients. Let us
now step to divisibilities and congruences.

Proposition \ref{prop.binom.Z->Z} shows that binomial coefficients $\dbinom
{n}{k}$ are integers whenever $n$ is an integer. This allows us to study
divisibilities and congruences between binomial coefficients (and you have
seen a few of them on
\href{http://www-users.math.umn.edu/~dgrinber/19s/hw1s.pdf}{homework set
\#1}). One of the most important such divisibilities is the following fact:

\begin{theorem}
\label{thm.binom.p|bin}Let $p$ be a prime. Let $k\in\left\{  1,2,\ldots
,p-1\right\}  $. Then, $p\mid\dbinom{p}{k}$.
\end{theorem}

\begin{proof}
[First proof of Theorem \ref{thm.binom.p|bin}.]Applying Theorem
\ref{thm.binom.abs} to $n=p$, we obtain%
\[
k\dbinom{p}{k}=p\dbinom{p-1}{k-1}.
\]
Thus, $p\mid k\dbinom{p}{k}$ (since $\dbinom{p-1}{k-1}$ is an
integer\footnote{by an application of Proposition \ref{prop.binom.Z->Z}}). But
Proposition \ref{prop.ent.primes.each-i-coprime} (applied to $i=k$) yields
that $k$ is coprime to $p$. In other words, $k\perp p$, and thus $p\perp k$.
Hence, Theorem \ref{thm.ent.coprime.cancel} (applied to $a=p$, $b=k$ and
$c=\dbinom{p}{k}$) yields $p\mid\dbinom{p}{k}$ (since $p\mid k\dbinom{p}{k}$).
This proves Theorem \ref{thm.binom.p|bin}.
\end{proof}

We shall see a second, combinatorial proof of Theorem \ref{thm.binom.p|bin}
further below; it will rely on the concept of group actions.

\begin{noncompile}
\begin{proof}
[Second proof of Theorem \ref{thm.binom.p|bin} (outline).]The following is not
rigorous and probably not readable; we will make sense of this later.

We know that $\dbinom{p}{k}$ counts $k$-element subsets of $\left\{
1,2,\ldots,p\right\}  $. We can restate this using $p$\textit{-bitstrings}.

A $p$\textit{-bitstring} is a $p$-tuple $\left(  i_{1},i_{2},\ldots
,i_{p}\right)  \in\left\{  0,1\right\}  ^{p}$. For example, the $2$-bitstrings
are $\left(  0,0\right)  ,\ \left(  0,1\right)  ,\ \left(  1,0\right)
,\ \left(  1,1\right)  $.

I claim that there is a bijection%
\begin{align*}
\left\{  k\text{-element subsets of }\left\{  1,2,\ldots,p\right\}  \right\}
&  \rightarrow\left\{  p\text{-bitstrings with }k\text{ 1's}\right\}  ,\\
S  &  \mapsto\left\{  \left(  i_{1},i_{2},\ldots,i_{p}\right)  \right\}  ,
\end{align*}
where $i_{x}=%
\begin{cases}
1, & \text{if }x\in S;\\
0, & \text{if }x\notin S
\end{cases}
$.

(Example: If $p=3$ and $k=2$, then

\begin{itemize}
\item the $k$-element subsets of $\left\{  1,2,\ldots,p\right\}  $ are
$\left\{  1,2\right\}  ,\ \left\{  1,3\right\}  ,\ \left\{  2,3\right\}  $;

\item the $p$-bitstrings with $k$ 1's are $\left(  1,1,0\right)  ,\ \left(
1,0,1\right)  ,\ \left(  0,1,1\right)  $.
\end{itemize}

These are listed in a way that the bijection sends them to each other in order.)

Thus,%
\begin{align*}
&  \left(  \text{the number of }p\text{-bitstrings with }k\text{ 1's}\right)
\\
&  =\left(  \text{the number of }k\text{-element subsets of }\left\{
1,2,\ldots,p\right\}  \right) \\
&  =\dbinom{p}{k}.
\end{align*}


\textit{Cyclic rotation} is the map $\mathbf{c}$ sending a $p$-bitstring
$\left(  i_{1},i_{2},\ldots,i_{p}\right)  $ to $\left(  i_{2},i_{3}%
,\ldots,i_{p},i_{1}\right)  $.

A \textit{necklace} is (basically) a bitstring up to cyclic rotation.

If $\left(  i_{1},i_{2},\ldots,i_{p}\right)  $ is any $p$-bitstring, then
\begin{align*}
&  \left(  i_{1},i_{2},\ldots,i_{p}\right)  ,\ \ \ \ \ \ \ \ \ \ \mathbf{c}%
\left(  i_{1},i_{2},\ldots,i_{p}\right)  ,\ \ \ \ \ \ \ \ \ \ \mathbf{c}%
^{2}\left(  i_{1},i_{2},\ldots,i_{p}\right)  ,\\
&  \ldots,\ \ \ \ \ \ \ \ \ \ \mathbf{c}^{p-1}\left(  i_{1},i_{2},\ldots
,i_{p}\right)
\end{align*}
are all distinct \textbf{unless} it is either $\left(  0,0,\ldots,0\right)  $
or $\left(  1,1,\ldots,1\right)  $.

(Example: $\left(  1,1,0\right)  ,\ \left(  1,0,1\right)  ,\ \left(
0,1,1\right)  $ are distinct.

$\left(  1,0,1,0\right)  ,\ \left(  0,1,0,1\right)  ,\ \left(  1,0,1,0\right)
,\ \left(  0,1,0,1\right)  $ are \textbf{not} distinct, but $4$ is not prime.)

We don't claim that this is mathematically obvious! It will be a consequence
of things we do later (group actions on sets).

Thus, the $p$-bitstrings with $k$ 1's can be grouped into \textquotedblleft
necklaces\textquotedblright: A necklace is always a group formed by a
$p$-bitstring $\left(  i_{1},i_{2},\ldots,i_{p}\right)  $ and all its images
$\mathbf{c}^{\ell}\left(  i_{1},i_{2},\ldots,i_{p}\right)  $ under cyclic
rotation (applied several times). Each necklace contains exactly $p$ many
$p$-bitstrings. So the number of $p$-bitstrings with $k$ 1's equals $p$ times
the number of necklaces.
\end{proof}
\end{noncompile}

Let us state two congruences for binomial coefficients, which we will show
later using tools from abstract algebra:

\begin{theorem}
[Lucas's congruence]\label{thm.binom.lucas}Let $p$ be a prime. Let
$a,b\in\mathbb{Z}$. Let $c,d\in\left\{  0,1,\ldots,p-1\right\}  $. Then,%
\[
\dbinom{pa+c}{pb+d}\equiv\dbinom{a}{b}\dbinom{c}{d}\operatorname{mod}p.
\]

\end{theorem}

\begin{theorem}
[Babbage's congruence]\label{thm.binom.babbage}Let $p$ be a prime. Let
$a,b\in\mathbb{Z}$. Then,%
\[
\dbinom{pa}{pb}\equiv\dbinom{a}{b}\operatorname{mod}p^{2}.
\]

\end{theorem}

For the impatient: Elementary proofs of Theorem \ref{thm.binom.lucas} and
Theorem \ref{thm.binom.babbage} can be found in \cite{lucas}.

\begin{remark}
Lucas's congruence has the following consequence: Let $p$ be a prime. Let
$a,b\in\mathbb{N}$. Write $a$ and $b$ in base $p$ as follows:%
\begin{align*}
a  &  =a_{k}p^{k}+a_{k-1}p^{k-1}+\cdots+a_{0}p^{0}%
\ \ \ \ \ \ \ \ \ \ \text{and}\\
b  &  =b_{k}p^{k}+b_{k-1}p^{k-1}+\cdots+b_{0}p^{0}%
\end{align*}
with $k\in\mathbb{N}$ and $a_{k},a_{k-1},\ldots,a_{0},b_{k},b_{k-1}%
,\ldots,b_{0}\in\left\{  0,1,\ldots,p-1\right\}  $. (Note that we allow
\textquotedblleft leading zeroes\textquotedblright\ -- i.e., any of $a_{k}$
and $b_{k}$ can be $0$.) Then,%
\[
\dbinom{a}{b}\equiv\dbinom{a_{k}}{b_{k}}\dbinom{a_{k-1}}{b_{k-1}}\cdots
\dbinom{a_{0}}{b_{0}}\operatorname{mod}p.
\]
(This can be easily proven by induction on $k$, using Theorem
\ref{thm.binom.lucas} in the induction step.) This allows for quick
computation of remainders of $\dbinom{a}{b}$ modulo prime numbers, and also
explains (when applied to $p=2$) why
\href{https://en.wikipedia.org/wiki/Sierpinski_triangle#Pascal's_triangle}{we
can obtain (an approximation of) Sierpinski's triangle from Pascal's triangle
by coloring all even numbers white and all odd numbers black}.
\end{remark}

See \cite{Mestro14} and \cite{Granvi05} for overviews of more complicated
divisibilities and congruences for binomial coefficients.

\begin{center}
\textbf{2019-02-20 lecture}
\end{center}

\subsubsection{Integer-valued polynomials}

Now that we have introduced polynomials (albeit informally and on somewhat
shaky foundations) and binomial coefficients (albeit briefly), it would be a
shame to leave unmentioned a subject that connects the two particularly
closely: the \textit{integer-valued polynomials}. We are going to state a few
basic facts, but we will not prove them.

If $f=a_{k}x^{k}+a_{k-1}x^{k-1}+\cdots+a_{0}$ is a polynomial (in $1$ variable
$x$, with rational coefficients), then the rational numbers $a_{k}%
,a_{k-1},\ldots,a_{0}$ are called the \textit{coefficients} of $f$. The
coefficients of a polynomial $f$ are uniquely determined by $f$ (except for
the fact that we can always add terms of the form $0x^{\ell}$ and thus obtain
extra coefficients that are equal to $0$). (This fact is not obvious, given
our \textquotedblleft definition\textquotedblright\ of polynomials
above\footnote{For example, why cannot we start with (say) $6x^{2}+5x+4$, then
rewrite it as $\left(  2x+1\right)  \left(  3x+1\right)  +3$, then do some
other transformations (using commutativity, associativity and other laws), and
finally end up with a polynomial that has different coefficients (say,
$3x^{2}+9x+4$) ? We cannot, but it is not easy to prove with what we have.}.
We will later define polynomials more formally as sequences of coefficients;
then this will become clear.)

If $f=a_{k}x^{k}+a_{k-1}x^{k-1}+\cdots+a_{0}$ is a polynomial (in $1$ variable
$x$, with rational coefficients) such that $a_{k}\neq0$ (each polynomial that
is not just $0$ can be uniquely written in such a form), then the integer $k$
is called the \textit{degree} of $f$.

\begin{definition}
\label{def.ivp.ivp}A polynomial $P$ with rational coefficients is said to be
\textit{integer-valued} if $\left(  P\left(  n\right)  \in\mathbb{Z}\text{ for
all }n\in\mathbb{Z}\right)  $.
\end{definition}

Of course, a polynomial with integer coefficients is always integer-valued.
But there are other integer-valued polynomials, too:

\begin{example}
\label{exa.ivp.ivps1}\textbf{(a)} The polynomial $\dbinom{x}{2}=\dfrac
{x\left(  x-1\right)  }{2}=\dfrac{1}{2}x^{2}-\dfrac{1}{2}x$ is integer-valued
(since $\dbinom{n}{2}\in\mathbb{Z}$ for each $n\in\mathbb{Z}$), but its
coefficients are $\dfrac{1}{2},-\dfrac{1}{2},0$.

\textbf{(b)} More generally: If $k\in\mathbb{N}$ is arbitrary, then the
polynomial $\dbinom{x}{k}=\dfrac{x\left(  x-1\right)  \left(  x-2\right)
\cdots\left(  x-k+1\right)  }{k!}$ is integer-valued (since $\dbinom{n}{k}%
\in\mathbb{Z}$ for each $n\in\mathbb{Z}$).

\textbf{(c)} If $p$ is any prime, then the polynomial $\dfrac{x^{p}-x}{p}$ is
integer-valued (since Fermat's Little Theorem yields $a^{p}\equiv
a\operatorname{mod}p$ for each $a\in\mathbb{Z}$, which means that
$\dfrac{a^{p}-a}{p}\in\mathbb{Z}$ for each $a\in\mathbb{Z}$). Its coefficients
are not integers.
\end{example}

This suggests the following question\textbf{:} How can we describe the
integer-valued polynomials? The following result of P\'{o}lya \cite{Polya19}
gives an answer:

\begin{theorem}
\label{thm.ivp.binomial}Let $k\in\mathbb{N}$.

\textbf{(a)} Any polynomial $P$ (in $1$ variable $x$, with rational
coefficients) of degree $k$ can be uniquely written in the form%
\[
P\left(  x\right)  =a_{k}\dbinom{x}{k}+a_{k-1}\dbinom{x}{k-1}+\cdots
+a_{0}\dbinom{x}{0}%
\]
with \textbf{rational} $a_{k},a_{k-1},\ldots,a_{0}$.

\textbf{(b)} The polynomial $P$ is integer-valued if and only if these
$a_{k},a_{k-1},\ldots,a_{0}$ are integers.
\end{theorem}

For example, the integer-valued polynomial $\dfrac{x^{3}-x}{3}$ can be written
as%
\[
\dfrac{x^{3}-x}{3}=a_{3}\dbinom{x}{3}+a_{2}\dbinom{x}{2}+a_{1}\dbinom{x}%
{1}+a_{0}\dbinom{x}{0}%
\]
for
\[
a_{3}=2,\ \ \ \ \ \ \ \ \ \ a_{2}=2,\ \ \ \ \ \ \ \ \ \ a_{1}%
=0,\ \ \ \ \ \ \ \ \ \ a_{0}=0.
\]
These $a_{3},a_{2},a_{1},a_{0}$ are integers -- exactly as Theorem
\ref{thm.ivp.binomial} \textbf{(b)} says.

I sketched a proof of Theorem \ref{thm.ivp.binomial} \textbf{(b)} in a talk in
2013 ( \url{http://www.cip.ifi.lmu.de/~grinberg/storrs2013.pdf} )\footnote{In
this talk, I refer to integer-valued polynomials as \textquotedblleft
integral-valued polynomials\textquotedblright.}. See also \cite{daSilv12} for
a self-contained proof.

\section{Equivalence relations and residue classes}

\subsection{Relations}

Loosely speaking, a \textit{relation} on a set $S$ is a property that two
elements $a$ and $b$ of $S$ (or, more formally, a pair $\left(  a,b\right)
\in S\times S$ of two elements of $S$) can either have or not have. For
example, equality (denoted $=$) is a relation, since two elements $a$ and $b$
of $S$ are either equal (i.e., satisfy $a=b$) or not equal. Likewise, the
divisibility relation (denoted $\mid$) is a relation on $\mathbb{Z}$, since
two elements $a$ and $b$ of $\mathbb{Z}$ either satisfy $a\mid b$ or do not.

A formal definition of relations proceeds as follows:

\begin{definition}
\label{def.eqrel.rel.rel}Fix a set $S$. A \textit{binary relation} on $S$ is a
subset of $S\times S$ (that is, a set of pairs of elements of $S$).

If $R$ is a binary relation (on $S$), and if $a,b\in S$, then we write $aRb$
for $\left(  a,b\right)  \in R$.

The word \textquotedblleft\textit{relation}\textquotedblright\ shall always
mean \textquotedblleft binary relation\textquotedblright\ unless we say otherwise.
\end{definition}

So a relation on a set $S$ is, formally speaking, a subset of $S\times S$ --
but in practice, we think of it as a property that holds for some pairs
$\left(  a,b\right)  \in S\times S$ (namely, for the ones that belong to this
subset) and does not hold for some others (namely, for the ones that do not
belong to this subset).\footnote{Here, the word \textquotedblleft
some\textquotedblright\ can mean \textquotedblleft none\textquotedblright\ or
\textquotedblleft all\textquotedblright\ or anything inbetween.} In order to
define a relation $R$ on a given set $S$, it suffices to tell which pairs
$\left(  a,b\right)  \in S\times S$ satisfy $aRb$ (because then, $R$ will
simply be the set of all these pairs $\left(  a,b\right)  $). Let us define
several relations on the set $\mathbb{Z}$ by this strategy:

\begin{example}
\label{exa.eqrel.rel.rels1}Let $S=\mathbb{Z}$.

\textbf{(a)} The relation $=$ is a binary relation on $S$. As a subset of
$S\times S$, this relation is%
\begin{align*}
&  \left\{  \left(  a,b\right)  \in S\times S\ \mid\ a=b\right\} \\
&  =\left\{  \left(  c,c\right)  \ \mid\ c\in S\right\}  =\left\{
\ldots,\left(  -1,-1\right)  ,\left(  0,0\right)  ,\left(  1,1\right)
,\ldots\right\}  .
\end{align*}


\textbf{(b)} The relation $<$ is a binary relation on $S$. As a subset of
$S\times S$, this relation is%
\[
\left\{  \left(  a,b\right)  \in S\times S\ \mid\ a<b\right\}  .
\]


\textbf{(c)} The relation $\leq$ is a binary relation on $S$. As a subset of
$S\times S$, this relation is%
\[
\left\{  \left(  a,b\right)  \in S\times S\ \mid\ a\leq b\right\}  .
\]


\textbf{(d)} The relation $\neq$ is also a binary relation on $S$.

\textbf{(e)} Fix $n\in\mathbb{Z}$. Define a relation $\underset{n}{\equiv}$ on
$S=\mathbb{Z}$ by
\[
\left(  a\underset{n}{\equiv}b\right)  \Longleftrightarrow\left(  a\equiv
b\operatorname{mod}n\right)  .
\]
As a subset of $S\times S=\mathbb{Z}\times\mathbb{Z}$, this relation
$\underset{n}{\equiv}$ is%
\begin{align*}
&  \left\{  \left(  a,b\right)  \in\mathbb{Z}\times\mathbb{Z}\ \mid\ a\equiv
b\operatorname{mod}n\right\} \\
&  =\left\{  \left(  a,b\right)  \in\mathbb{Z}\times\mathbb{Z}\ \mid
\ \text{there exists an integer }d\text{ such that }b=a+nd\right\} \\
&  \ \ \ \ \ \ \ \ \ \ \left(  \text{by Exercise \ref{exe.ent.mod.a+nd}%
}\right) \\
&  =\left\{  \left(  a,a+nd\right)  \ \mid\ a,d\in\mathbb{Z}\right\}  .
\end{align*}


Note that the relation $\underset{0}{\equiv}$ is exactly the relation $=$ (by
Example \ref{exa.ent.cong.triv} \textbf{(c)}).

\textbf{(f)} Define a binary relation \fbox{$N$} on $S$ by%
\[
\left(  a\fbox{$N$}b\right)  \Longleftrightarrow\left(  \text{false}\right)
\]
(that is, $a\fbox{$N$}b$ never holds, no matter what $a$ and $b$ are). As a
subset of $S\times S$, this relation \fbox{$N$} is just the empty subset of
$S\times S$.

\textbf{(g)} On the other extreme: Define a binary relation \fbox{$A$} on $S$
by%
\[
\left(  a\fbox{$A$}b\right)  \Longleftrightarrow\left(  \text{true}\right)
\]
(that is, $a\fbox{$A$}b$ holds for all $a$ and $b$). As a subset of $S\times
S$, this relation \fbox{$A$} is the whole set $S\times S$. Note that the
relation \fbox{$A$} is exactly the relation $\underset{1}{\equiv}$ (by Example
\ref{exa.ent.cong.triv} \textbf{(d)}).

\textbf{(h)} The relation $\mid$ (divisibility) is also a relation on
$S=\mathbb{Z}$.

\textbf{(i)} The relation $\perp$ (coprimality) is also a relation on
$S=\mathbb{Z}$.

\textbf{(j)} We have defined several relations on the set $S=\mathbb{Z}$ now.
The relations $=$, $\neq$, \fbox{$N$} and \fbox{$A$} (or, rather, relations
analogous to them) can be defined on \textbf{any} set.
\end{example}

\subsection{Equivalence relations}

Relations occur frequently in mathematics, and there is a bunch of properties
that a relation can have or not have. (See
\href{https://en.wikipedia.org/wiki/Binary_relation}{the Wikipedia article on
binary relations} for a long list of such properties.) We shall need only the
following three:

\begin{definition}
\label{def.eqrel.rel.rst}Let $R$ be a binary relation on a set $S$.

\textbf{(a)} We say that $R$ is \textit{reflexive} if every $a\in S$ satisfies
$aRa$.

\textbf{(b)} We say that $R$ is \textit{symmetric} if every $a,b\in S$
satisfying $aRb$ satisfy $bRa$.

\textbf{(c)} We say that $R$ is \textit{transitive} if every $a,b,c\in S$
satisfying $aRb$ and $bRc$ satisfy $aRc$.
\end{definition}

(Here are mnemonics for the three words we just defined:

\begin{itemize}
\item \textquotedblleft Reflexive\textquotedblright\ should make you think of
$R$ as a mirror through which $a$ can see itself (that is, satisfy $aRa$).

\item \textquotedblleft Symmetric\textquotedblright\ means that the roles of
$a$ and $b$ in $aRb$ are interchangeable -- a symmetry.

\item \textquotedblleft Transitive\textquotedblright\ means that you can
\textquotedblleft transit\textquotedblright\ an element $b$ on your way from
$a$ to $c$ (that is, if you treat $aRb$ as the existence of a
\textquotedblleft path\textquotedblright\ from $a$ to $b$, and $bRc$ as the
existence of a \textquotedblleft path\textquotedblright\ from $b$ to $c$, then
you can combine a \textquotedblleft path\textquotedblright\ from $a$ to $b$
with a \textquotedblleft path\textquotedblright\ from $b$ to $c$ to get a
\textquotedblleft path\textquotedblright\ from $a$ to $c$).)
\end{itemize}

Let us see some examples of these properties of relations\footnote{See further
below for the proofs of the claims made in this example.}:

\begin{example}
\label{exa.eqrel.rel.rst1}Let $S$ be the set $\mathbb{Z}$. Consider the
relations on $\mathbb{Z}$ defined in Example \ref{exa.eqrel.rel.rels1}.

\textbf{(a)} The relation $=$ is reflexive, symmetric and transitive.

\textbf{(b)} The relation $<$ is transitive, but neither reflexive nor symmetric.

\textbf{(c)} The relation $\leq$ is transitive and reflexive, but not symmetric.

\textbf{(d)} The relation $\neq$ is symmetric, but neither reflexive nor transitive.

\textbf{(e)} For each $n\in\mathbb{Z}$, the relation $\underset{n}{\equiv}$ is
reflexive, symmetric and transitive.

\textbf{(f)} The relation \fbox{$N$} is symmetric and transitive, but not reflexive.

\textbf{(g)} The relation \fbox{$A$} is reflexive, symmetric and transitive.

\textbf{(h)} The divisibility relation $\mid$ is reflexive and transitive, but
not symmetric.

\textbf{(i)} The coprimality relation $\perp$ is symmetric, but neither
reflexive nor transitive.
\end{example}

\begin{proof}
[Proof of Example \ref{exa.eqrel.rel.rst1}.]\textbf{(a)} Indeed:

\begin{itemize}
\item The relation $=$ is reflexive, because every $a\in S$ satisfies $a=a$.

\item The relation $=$ is symmetric, because every $a,b\in S$ satisfying $a=b$
satisfy $b=a$.

\item The relation $=$ is transitive, because every $a,b,c\in S$ satisfying
$a=b$ and $b=c$ satisfy $a=c$.
\end{itemize}

\textbf{(b)} Indeed:

\begin{itemize}
\item The relation $<$ is transitive (because every $a,b,c\in S$ satisfying
$a<b$ and $b<c$ satisfy $a<c$).

\item Not every $a\in S$ satisfies $a<a$ (in fact, no $a\in S$ satisfies
$a<a$); thus, $<$ is not reflexive.

\item Similarly, $<$ is not symmetric, since $a<b$ does not imply $b<a$ (quite
the opposite).
\end{itemize}

\textbf{(c)} Indeed:

\begin{itemize}
\item The relation $\leq$ is transitive (because every $a,b,c\in S$ satisfying
$a\leq b$ and $b\leq c$ satisfy $a\leq c$).

\item The relation $\leq$ is reflexive (since every $a\in S$ satisfies $a\leq
a$).

\item The relation $\leq$ is not symmetric (since $a\leq b$ does not imply
$b\leq a$; for example, $1\leq2$ holds but $2\leq1$ does not).
\end{itemize}

\textbf{(d)} Indeed:

\begin{itemize}
\item The relation $\neq$ is symmetric (because every $a,b\in S$ satisfying
$a\neq b$ satisfy $b\neq a$).

\item The relation $\neq$ is not reflexive (since we don't have $2\neq2$).

\item The relation $\neq$ is not transitive (since $2\neq3$ and $3\neq2$ do
not lead to $2\neq2$).
\end{itemize}

\textbf{(e)} Let $n\in\mathbb{Z}$.

\begin{itemize}
\item Proposition \ref{prop.ent.mod.basics} \textbf{(b)} shows that every
$a,b,c\in\mathbb{Z}$ satisfying $a\equiv b\operatorname{mod}n$ and $b\equiv
c\operatorname{mod}n$ satisfy $a\equiv c\operatorname{mod}n$. In other words,
every $a,b,c\in S$ satisfying $a\underset{n}{\equiv}b$ and
$b\underset{n}{\equiv}c$ satisfy $a\underset{n}{\equiv}c$ (since the
definition of $\underset{n}{\equiv}$ shows that the three statements
\[
\left(  a\underset{n}{\equiv}b\right)  ,\ \ \ \ \ \ \ \ \ \ \left(
b\underset{n}{\equiv}c\right)  ,\ \ \ \ \ \ \ \ \ \ \left(
a\underset{n}{\equiv}c\right)
\]
are equivalent to%
\[
\left(  a\equiv b\operatorname{mod}n\right)  ,\ \ \ \ \ \ \ \ \ \ \left(
b\equiv c\operatorname{mod}n\right)  ,\ \ \ \ \ \ \ \ \ \ \left(  a\equiv
c\operatorname{mod}n\right)  ,
\]
respectively). But this means precisely that the relation $\underset{n}{\equiv
}$ is transitive.

\item Similarly, the relation $\underset{n}{\equiv}$ is reflexive (by
Proposition \ref{prop.ent.mod.basics} \textbf{(a)}).

\item Similarly, the relation $\underset{n}{\equiv}$ is symmetric (by
Proposition \ref{prop.ent.mod.basics} \textbf{(c)}).
\end{itemize}

\textbf{(f)} This may appear strange, but is a completely straightforward
consequence of the concept of \textquotedblleft%
\href{https://en.wikipedia.org/wiki/Vacuous_truth}{vacuous truth}%
\textquotedblright:

\begin{itemize}
\item Every $a,b\in S$ satisfying $a\fbox{$N$}b$ satisfy $b\fbox{$N$}a$
(because there are no such $a,b$ to begin with -- since $a$\fbox{$N$}$b$ never
holds). Thus, \fbox{$N$} is symmetric.

\item Similarly, \fbox{$N$} is transitive.

\item But \fbox{$N$} is not reflexive, since (for example) $1\fbox{$N$}1$ does
not hold.
\end{itemize}

\textbf{(g)} All of this is trivial, because $a$\fbox{$A$}$b$ holds for all
$a,b\in S$.

\textbf{(h)} The divisibility relation $\mid$ is reflexive (by Proposition
\ref{prop.ent.div.2} \textbf{(a)}) and transitive (by Proposition
\ref{prop.ent.div.2} \textbf{(b)}), but not symmetric (since $1\mid2$ does not
lead to $2\mid1$).

\textbf{(i)} The coprimality relation is symmetric (by Proposition
\ref{prop.ent.coprime.perp-symm}), but neither reflexive (since we don't have
$2\perp2$) nor transitive (since $2\perp3$ and $3\perp2$ do not lead to
$2\perp2$).
\end{proof}

\begin{definition}
\label{def.eqrel.rel.eqrel}An \textit{equivalence relation} on a set $S$ means
a relation on $S$ that is reflexive, symmetric and transitive.
\end{definition}

\begin{example}
\label{exa.eqrel.eqrel.eqrel=}Let $S$ be any set. The relation $=$ on the set
$S$ is an equivalence relation, because it is reflexive, symmetric and transitive.
\end{example}

\begin{example}
\label{exa.eqrel.eqrel.eqrelmodn}Let $n\in\mathbb{Z}$. The relation relation
$\underset{n}{\equiv}$ on $\mathbb{Z}$ (defined in Example
\ref{exa.eqrel.rel.rels1} \textbf{(e)}) is an equivalence relation, because
(as we saw in Example \ref{exa.eqrel.rel.rst1} \textbf{(e)}) it is reflexive,
symmetric and transitive.
\end{example}

\begin{example}
Here are some examples from elementary plane geometry: Congruence (e.g., of
triangles) is an equivalence relation. Similarity is also an equivalence
relation. The same holds for direct similarity (i.e., orientation-preserving
similarity). The same holds for parallelism of lines.
\end{example}

\begin{example}
\label{exa.eqrel.eqrel.eqrelf}Let $S$ and $T$ be two sets, and let
$f:S\rightarrow T$ be a map. Define a relation $\underset{f}{\equiv}$ on $S$
by%
\[
\left(  a\underset{f}{\equiv}b\right)  \Longleftrightarrow\left(  f\left(
a\right)  =f\left(  b\right)  \right)  .
\]
This relation $\underset{f}{\equiv}$ is an equivalence relation.
\end{example}

\begin{proof}
[Proof of Example \ref{exa.eqrel.eqrel.eqrelf}.]Indeed:

\begin{itemize}
\item The relation $\underset{f}{\equiv}$ is reflexive, because every $a\in S$
satisfies $a\underset{f}{\equiv}a$ (since $f\left(  a\right)  =f\left(
a\right)  $).

\item The relation $\underset{f}{\equiv}$ is symmetric, because every $a,b\in
S$ satisfying $a\underset{f}{\equiv}b$ satisfy $b\underset{f}{\equiv}a$.
(Indeed, $a\underset{f}{\equiv}b$ means $f\left(  a\right)  =f\left(
b\right)  $, which entails $f\left(  b\right)  =f\left(  a\right)  $, which in
turn rewrites as $b\underset{f}{\equiv}a$.)

\item The relation $\underset{f}{\equiv}$ is transitive, because every
$a,b,c\in S$ satisfying $a\underset{f}{\equiv}b$ and $b\underset{f}{\equiv}c$
satisfy $a\underset{f}{\equiv}c$. (Indeed, the assumptions
$a\underset{f}{\equiv}b$ and $b\underset{f}{\equiv}c$ rewrite as $f\left(
a\right)  =f\left(  b\right)  $ and $f\left(  b\right)  =f\left(  c\right)  $;
therefore, $f\left(  a\right)  =f\left(  b\right)  =f\left(  c\right)  $,
which rewrites as $a\underset{f}{\equiv}c$.)
\end{itemize}

\noindent Thus, $\underset{f}{\equiv}$ is an equivalence relation.
\end{proof}

We will soon learn that \textbf{every} equivalence relation on a set $S$ is
actually of the form $\underset{f}{\equiv}$ for some set $T$ and some map
$f:S\rightarrow T$. (TODO: Exact reference.)

\begin{example}
\label{exa.eqrel.eqrel.eqrel-continents}Let $S$ be the set of all points on
the landmass of the Earth, and let $\sim$ be the relation on $S$ defined by%
\[
\left(  a\sim b\right)  \Longleftrightarrow\left(  \text{there is a land route
from }a\text{ to }b\right)  .
\]
This $\sim$ is an equivalence relation (with the caveat that $S$ is not a
mathematical object and thus not really well-defined).
\end{example}

\begin{example}
\label{exa.eqrel.eqrel.eqrelQ}Let
\[
S=\mathbb{Z}\times\left(  \mathbb{Z}\setminus\left\{  0\right\}  \right)
=\left\{  \left(  a_{1},a_{2}\right)  \ \mid\ a_{1}\in\mathbb{Z}\text{ and
}a_{2}\in\mathbb{Z}\setminus\left\{  0\right\}  \right\}  .
\]
This is the set of all pairs whose first entry is an integer and whose second
entry is a nonzero integer. We define a relation $\underset{\ast}{\sim}$ on
$S$ by%
\[
\left(  \left(  a_{1},a_{2}\right)  \underset{\ast}{\sim}\left(  b_{1}%
,b_{2}\right)  \right)  \ \Longleftrightarrow\ \left(  a_{1}b_{2}=a_{2}%
b_{1}\right)  .
\]
This relation $\underset{\ast}{\sim}$ is an equivalence relation.
\end{example}

\begin{proof}
[Proof of Example \ref{exa.eqrel.eqrel.eqrelQ}.]Indeed:

\begin{itemize}
\item The relation $\underset{\ast}{\sim}$ is reflexive.

\begin{fineprint}
[\textit{Proof:} Let $a\in S$. Thus, $a\in S=\mathbb{Z}\times\left(
\mathbb{Z}\setminus\left\{  0\right\}  \right)  $; in other words, we can
write $a$ as $a=\left(  a_{1},a_{2}\right)  $ for some $a_{1}\in\mathbb{Z}$
and $a_{2}\in\mathbb{Z}\setminus\left\{  0\right\}  $. Consider these $a_{1}$
and $a_{2}$.

Clearly, $a_{1}a_{2}=a_{2}a_{1}$. In other words, $\left(  a_{1},a_{2}\right)
\underset{\ast}{\sim}\left(  a_{1},a_{2}\right)  $ (because the definition of
the relation $\underset{\ast}{\sim}$ yields that $\left(  a_{1},a_{2}\right)
\underset{\ast}{\sim}\left(  a_{1},a_{2}\right)  $ means $a_{1}a_{2}%
=a_{2}a_{1}$). In other words, $a\underset{\ast}{\sim}a$ (since $a=\left(
a_{1},a_{2}\right)  $).

Now, forget that we fixed $a$. We thus have shown that every $a\in S$
satisfies $a\underset{\ast}{\sim}a$. In other words, the relation
$\underset{\ast}{\sim}$ is reflexive.]
\end{fineprint}

\item The relation $\underset{\ast}{\sim}$ is symmetric.

\begin{fineprint}
[\textit{Proof:} Let $a,b\in S$ be such that $a\underset{\ast}{\sim}b$. We
shall prove that $b\underset{\ast}{\sim}a$.

We have $a\in S=\mathbb{Z}\times\left(  \mathbb{Z}\setminus\left\{  0\right\}
\right)  $; in other words, we can write $a$ as $a=\left(  a_{1},a_{2}\right)
$ for some $a_{1}\in\mathbb{Z}$ and $a_{2}\in\mathbb{Z}\setminus\left\{
0\right\}  $. Similarly, we can write $b$ as $b=\left(  b_{1},b_{2}\right)  $
for some $b_{1}\in\mathbb{Z}$ and $b_{2}\in\mathbb{Z}\setminus\left\{
0\right\}  $. Consider these $a_{1}$, $a_{2}$, $b_{1}$ and $b_{2}$.

We have assumed that $a\underset{\ast}{\sim}b$. In other words, $\left(
a_{1},a_{2}\right)  \underset{\ast}{\sim}\left(  b_{1},b_{2}\right)  $ (since
$a=\left(  a_{1},a_{2}\right)  $ and $b=\left(  b_{1},b_{2}\right)  $). In
other words, $a_{1}b_{2}=a_{2}b_{1}$ (because this is what $\left(
a_{1},a_{2}\right)  \underset{\ast}{\sim}\left(  b_{1},b_{2}\right)  $ means,
by the definition of the relation $\underset{\ast}{\sim}$). Thus, $b_{2}%
a_{1}=a_{1}b_{2}=a_{2}b_{1}=b_{1}a_{2}$; in other words, $b_{1}a_{2}%
=b_{2}a_{1}$. In other words, $\left(  b_{1},b_{2}\right)  \underset{\ast
}{\sim}\left(  a_{1},a_{2}\right)  $ (by the definition of the relation
$\underset{\ast}{\sim}$). In other words, $b\underset{\ast}{\sim}a$ (since
$a=\left(  a_{1},a_{2}\right)  $ and $b=\left(  b_{1},b_{2}\right)  $).

Now, forget that we fixed $a$ and $b$. We thus have shown that every $a,b\in
S$ satisfying $a\underset{\ast}{\sim}b$ satisfy $b\underset{\ast}{\sim}a$. In
other words, the relation $\underset{\ast}{\sim}$ is symmetric.]
\end{fineprint}

\item The relation $\underset{\ast}{\sim}$ is transitive.

\begin{fineprint}
[\textit{Proof:} Let $a,b,c\in S$ be such that $a\underset{\ast}{\sim}b$ and
$b\underset{\ast}{\sim}c$. We shall prove that $a\underset{\ast}{\sim}c$.

We have $a\in S=\mathbb{Z}\times\left(  \mathbb{Z}\setminus\left\{  0\right\}
\right)  $; in other words, we can write $a$ as $a=\left(  a_{1},a_{2}\right)
$ for some $a_{1}\in\mathbb{Z}$ and $a_{2}\in\mathbb{Z}\setminus\left\{
0\right\}  $. Similarly, we can write $b$ as $b=\left(  b_{1},b_{2}\right)  $
for some $b_{1}\in\mathbb{Z}$ and $b_{2}\in\mathbb{Z}\setminus\left\{
0\right\}  $. Similarly, we can write $c$ as $c=\left(  c_{1},c_{2}\right)  $
for some $c_{1}\in\mathbb{Z}$ and $c_{2}\in\mathbb{Z}\setminus\left\{
0\right\}  $. Consider these $a_{1}$, $a_{2}$, $b_{1}$, $b_{2}$, $c_{1}$ and
$c_{2}$. Note that $b_{2}\in\mathbb{Z}\setminus\left\{  0\right\}  $, so that
$b_{2}\neq0$.

We have assumed that $a\underset{\ast}{\sim}b$. In other words, $\left(
a_{1},a_{2}\right)  \underset{\ast}{\sim}\left(  b_{1},b_{2}\right)  $ (since
$a=\left(  a_{1},a_{2}\right)  $ and $b=\left(  b_{1},b_{2}\right)  $). In
other words, $a_{1}b_{2}=a_{2}b_{1}$ (by the definition of the relation
$\underset{\ast}{\sim}$). Similarly (by exploiting the assumption
$b\underset{\ast}{\sim}c$ instead of $a\underset{\ast}{\sim}b$), we can obtain
$b_{1}c_{2}=b_{2}c_{1}$. Hence,%
\[
\underbrace{a_{1}b_{2}}_{=a_{2}b_{1}}c_{2}=a_{2}\underbrace{b_{1}c_{2}%
}_{=b_{2}c_{1}}=a_{2}b_{2}c_{1}.
\]
We can cancel $b_{2}$ from this equality (since $b_{2}\neq0$), and thus obtain
$a_{1}c_{2}=a_{2}c_{1}$. In other words, $\left(  a_{1},a_{2}\right)
\underset{\ast}{\sim}\left(  c_{1},c_{2}\right)  $ (by the definition of the
relation $\underset{\ast}{\sim}$). In other words, $a\underset{\ast}{\sim}c$
(since $a=\left(  a_{1},a_{2}\right)  $ and $c=\left(  c_{1},c_{2}\right)  $).

Now, forget that we fixed $a,b,c$. We thus have shown that every $a,b,c\in S$
satisfying $a\underset{\ast}{\sim}b$ and $b\underset{\ast}{\sim}c$ satisfy
$a\underset{\ast}{\sim}c$. In other words, the relation $\underset{\ast}{\sim
}$ is transitive.]
\end{fineprint}
\end{itemize}

\noindent We have now proven that the relation $\underset{\ast}{\sim}$ is
reflexive, symmetric and transitive. In other words, $\underset{\ast}{\sim}$
is an equivalence relation (by the definition of \textquotedblleft equivalence
relation\textquotedblright). This proves Example \ref{exa.eqrel.eqrel.eqrelQ}.
\end{proof}

The relation $\underset{\ast}{\sim}$ from Example \ref{exa.eqrel.eqrel.eqrelQ}
may appear familiar to you. In fact, its definition can be restated as
follows:%
\[
\left(  \left(  a_{1},a_{2}\right)  \underset{\ast}{\sim}\left(  b_{1}%
,b_{2}\right)  \right)  \ \Longleftrightarrow\ \left(  \dfrac{a_{1}}{a_{2}%
}=\dfrac{b_{1}}{b_{2}}\right)  ,
\]
and this makes the claims of Example \ref{exa.eqrel.eqrel.eqrelQ} a lot more
obvious. However, this is (in a sense) circular reasoning: The statement
\textquotedblleft$\dfrac{a_{1}}{a_{2}}=\dfrac{b_{1}}{b_{2}}$\textquotedblright%
\ only makes sense if the rational numbers have been defined\footnote{since
$\dfrac{a_{1}}{a_{2}}$ and $\dfrac{b_{1}}{b_{2}}$ are (in general) not
integers but rational numbers}, but the definition of rational numbers (at
least the usual definition, given in \cite[\S 3.6]{Swanso18} and in many other
places) already relies on the claims of Example \ref{exa.eqrel.eqrel.eqrelQ}.
(Namely, the rational numbers are defined as the equivalence classes of the
relation $\underset{\ast}{\sim}$; this is explained in Example
\ref{exa.eqrel.eqcl.rat} below.) Thus, our above proof of Example
\ref{exa.eqrel.eqrel.eqrelQ} was not a waste of time, but rather an important
prerequisite for the construction of rational numbers (one of the cornerstones
of mathematics).

If you are familiar with basic linear algebra, you may notice that the
relation $\underset{\ast}{\sim}$ from Example \ref{exa.eqrel.eqrel.eqrelQ} can
also be regarded as linear dependence. Namely, two pairs $\left(  a_{1}%
,a_{2}\right)  $ and $\left(  b_{1},b_{2}\right)  $ in $\mathbb{Z}%
\times\left(  \mathbb{Z}\setminus\left\{  0\right\}  \right)  $ satisfy
$\left(  a_{1},a_{2}\right)  \underset{\ast}{\sim}\left(  b_{1},b_{2}\right)
$ if and only if the vectors $\left(  a_{1},a_{2}\right)  $ and $\left(
b_{1},b_{2}\right)  $ in $\mathbb{Q}^{2}$ are linearly
dependent.\footnote{Note, however, that linear dependence is no longer an
equivalence relation if we allow the vector $\left(  0,0\right)  $ in our set
$S$, because then, it is no longer transitive (for example, $\left(
1,1\right)  $ and $\left(  0,0\right)  $ are linearly dependent, and $\left(
0,0\right)  $ and $\left(  1,2\right)  $ are linearly dependent, but $\left(
1,1\right)  $ and $\left(  1,2\right)  $ are not).}

One simple property of symmetric relations will come useful:

\begin{proposition}
\label{prop.eqrel.rel.symm-ba}Let $\sim$ be a symmetric relation on a set $S$.
Let $a,b\in S$. Then, $a\sim b$ if and only if $b\sim a$.
\end{proposition}

\begin{proof}
[Proof of Proposition \ref{prop.eqrel.rel.symm-ba}.]The relation $\sim$ is
symmetric. Thus, if $a$ and $b$ satisfy $a\sim b$, then they also satisfy
$b\sim a$ (by the definition of \textquotedblleft symmetric\textquotedblright%
). In other words, we have the logical implication $\left(  a\sim b\right)
\Longrightarrow\left(  b\sim a\right)  $. But the same argument (with the
roles of $a$ and $b$ interchanged) yields the implication $\left(  b\sim
a\right)  \Longrightarrow\left(  a\sim b\right)  $. Combining these two
implications, we obtain the equivalence $\left(  a\sim b\right)
\Longleftrightarrow\left(  b\sim a\right)  $. This proves Proposition
\ref{prop.eqrel.rel.symm-ba}.
\end{proof}

\subsection{Equivalence classes}

\subsubsection{Definition of equivalence classes}

We can now state one of the most important definitions in mathematics:

\begin{definition}
\label{def.eqrel.eqcl.eqcl}Let $\sim$ be an equivalence relation on a set $S$.

\textbf{(a)} For each $a\in S$, we define a subset $\left[  a\right]  _{\sim}$
of $S$ by%
\begin{equation}
\left[  a\right]  _{\sim}=\left\{  b\in S\ \mid\ b\sim a\right\}  .
\label{eq.def.eqrel.eqcl.eqcl.a.eq}%
\end{equation}
This subset $\left[  a\right]  _{\sim}$ is called the \textit{equivalence
class} of $a$.

\textbf{(b)} The \textit{equivalence classes} of $\sim$ are defined to be the
sets $\left[  a\right]  _{\sim}$ for $a\in S$.
\end{definition}

\begin{example}
\label{exa.eqrel.eqcl.mod3}Consider the relation $\underset{3}{\equiv}$ on
$\mathbb{Z}$ (defined in Example \ref{exa.eqrel.rel.rels1} \textbf{(e)}). We
have%
\begin{align*}
\left[  5\right]  _{\underset{3}{\equiv}}  &  =\left\{  b\in\mathbb{Z}%
\ \mid\ b\underset{3}{\equiv}5\right\}  =\left\{  b\in\mathbb{Z}%
\ \mid\ b\equiv5\operatorname{mod}3\right\} \\
&  =\left\{  \ldots,-4,-1,2,5,8,11,14,\ldots\right\}
\end{align*}
and%
\begin{align*}
\left[  3\right]  _{\underset{3}{\equiv}}  &  =\left\{  b\in\mathbb{Z}%
\ \mid\ b\underset{3}{\equiv}3\right\}  =\left\{  b\in\mathbb{Z}%
\ \mid\ b\equiv3\operatorname{mod}3\right\} \\
&  =\left\{  \ldots,-6,-3,0,3,6,9,12,\ldots\right\}
\end{align*}
and%
\begin{align*}
\left[  2\right]  _{\underset{3}{\equiv}}  &  =\left\{  b\in\mathbb{Z}%
\ \mid\ b\underset{3}{\equiv}2\right\}  =\left\{  b\in\mathbb{Z}%
\ \mid\ b\equiv2\operatorname{mod}3\right\} \\
&  =\left\{  \ldots,-4,-1,2,5,8,11,14,\ldots\right\}  .
\end{align*}
Note that $\left[  5\right]  _{\underset{3}{\equiv}}=\left[  2\right]
_{\underset{3}{\equiv}}$, as you can easily see.
\end{example}

\subsubsection{Basic properties}

\begin{proposition}
\label{prop.eqrel.eqcl.ab}Let $\sim$ be an equivalence relation on a set $S$.
Let $a\in S$. Then,%
\[
\left[  a\right]  _{\sim}=\left\{  b\in S\ \mid\ a\sim b\right\}  .
\]

\end{proposition}

\begin{proof}
[Proof of Proposition \ref{prop.eqrel.eqcl.ab}.]The relation $\sim$ is
symmetric (since it is an equivalence relation). Thus, for any $b\in S$, we
have $\left(  a\sim b\text{ if and only if }b\sim a\right)  $ (by Proposition
\ref{prop.eqrel.rel.symm-ba}). Hence, $\left\{  b\in S\ \mid\ a\sim b\right\}
=\left\{  b\in S\ \mid\ b\sim a\right\}  $. Comparing this with
(\ref{eq.def.eqrel.eqcl.eqcl.a.eq}), we obtain $\left[  a\right]  _{\sim
}=\left\{  b\in S\ \mid\ a\sim b\right\}  $. This proves Proposition
\ref{prop.eqrel.eqcl.ab}.
\end{proof}

Proposition \ref{prop.eqrel.eqcl.ab} shows that we can replace the condition
\textquotedblleft$b\sim a$\textquotedblright\ by \textquotedblleft$a\sim
b$\textquotedblright\ in Definition \ref{def.eqrel.eqcl.eqcl} \textbf{(a)}
without changing the meaning of the definition. (Some authors, such as Swanson
in \cite[Definition 2.3.6]{Swanso18}, do exactly that.)

\begin{proposition}
\label{prop.eqrel.eqcl.aina}Let $\sim$ be an equivalence relation on a set
$S$. Let $a\in S$. Then, $a\in\left[  a\right]  _{\sim}$.
\end{proposition}

\begin{proof}
[Proof of Proposition \ref{prop.eqrel.eqcl.aina}.]The relation $\sim$ is
reflexive (since it is an equivalence relation). Thus, $a\sim a$. In other
words, $a$ is a $b\in S$ satisfying $b\sim a$. In other words, $a\in\left\{
b\in S\ \mid\ b\sim a\right\}  $. But $\left[  a\right]  _{\sim}=\left\{  b\in
S\ \mid\ b\sim a\right\}  $ (by the definition of $\left[  a\right]  _{\sim}%
$). Hence, $a\in\left\{  b\in S\ \mid\ b\sim a\right\}  =\left[  a\right]
_{\sim}$. This proves Proposition \ref{prop.eqrel.eqcl.aina}.
\end{proof}

Proposition \ref{prop.eqrel.eqcl.aina} shows that all equivalence classes of
an equivalence relation are nonempty sets (because each equivalence class
$\left[  a\right]  _{\sim}$ contains at least the element $a$).

\begin{theorem}
\label{thm.eqrel.eqcl.disj}Let $\sim$ be an equivalence relation on a set $S$.
Let $x,y\in S$.

\textbf{(a)} If $x\sim y$, then $\left[  x\right]  _{\sim}=\left[  y\right]
_{\sim}$.

\textbf{(b)} If not $x\sim y$, then the sets $\left[  x\right]  _{\sim}$ and
$\left[  y\right]  _{\sim}$ are disjoint.

\textbf{(c)} We have $x\sim y$ if and only if $x\in\left[  y\right]  _{\sim}$.

\textbf{(d)} We have $x\sim y$ if and only if $y\in\left[  x\right]  _{\sim}$.

\textbf{(e)} We have $x\sim y$ if and only if $\left[  x\right]  _{\sim
}=\left[  y\right]  _{\sim}$.
\end{theorem}

\begin{proof}
[Proof of Theorem \ref{thm.eqrel.eqcl.disj}.]The relation $\sim$ is transitive
(since it is an equivalence relation) and symmetric (for the same reason).

The definition of $\left[  x\right]  _{\sim}$ yields $\left[  x\right]
_{\sim}=\left\{  b\in S\ \mid\ b\sim x\right\}  $. Similarly, $\left[
y\right]  _{\sim}=\left\{  b\in S\ \mid\ b\sim y\right\}  $.

\textbf{(a)} Assume that $x\sim y$. Thus, $y\sim x$ (since the relation $\sim$
is symmetric).

Let $c\in\left[  x\right]  _{\sim}$. Thus, $c\in\left[  x\right]  _{\sim
}=\left\{  b\in S\ \mid\ b\sim x\right\}  $. Thus, $c\sim x$. From $c\sim x$
and $x\sim y$, we obtain $c\sim y$ (since the relation $\sim$ is transitive).
Hence, $c\in\left\{  b\in S\ \mid\ b\sim y\right\}  $. In other words,
$c\in\left[  y\right]  _{\sim}$ (since $\left[  y\right]  _{\sim}=\left\{
b\in S\ \mid\ b\sim y\right\}  $).

Forget that we fixed $c$. We thus have proven that $c\in\left[  y\right]
_{\sim}$ for each $c\in\left[  x\right]  _{\sim}$. Thus, $\left[  x\right]
_{\sim}\subseteq\left[  y\right]  _{\sim}$. The same argument (with $x$ and
$y$ switched) yields $\left[  y\right]  _{\sim}\subseteq\left[  x\right]
_{\sim}$ (since $y\sim x$). Combining $\left[  x\right]  _{\sim}%
\subseteq\left[  y\right]  _{\sim}$ with $\left[  y\right]  _{\sim}%
\subseteq\left[  x\right]  _{\sim}$, we obtain $\left[  x\right]  _{\sim
}=\left[  y\right]  _{\sim}$. This proves Theorem \ref{thm.eqrel.eqcl.disj}
\textbf{(a)}.

\textbf{(b)} Assume that we don't have $x\sim y$. Let $c\in\left[  x\right]
_{\sim}\cap\left[  y\right]  _{\sim}$. We aim for a contradiction.

We have $c\in\left[  x\right]  _{\sim}\cap\left[  y\right]  _{\sim}%
\subseteq\left[  x\right]  _{\sim}=\left\{  b\in S\ \mid\ b\sim x\right\}  $,
so that $c\sim x$. Likewise, $c\sim y$. From $c\sim x$, we obtain $x\sim c$
(since the relation $\sim$ is symmetric). Combining this with $c\sim y$, we
obtain $x\sim y$ (since $\sim$ is transitive). This contradicts our assumption
that we don't have $x\sim y$.

Now, forget that we fixed $c$. So we have found a contradiction for each
$c\in\left[  x\right]  _{\sim}\cap\left[  y\right]  _{\sim}$. Thus, there is
no such $c$. In other words, $\left[  x\right]  _{\sim}\cap\left[  y\right]
_{\sim}=\varnothing$. In other words, the sets $\left[  x\right]  _{\sim}$ and
$\left[  y\right]  _{\sim}$ are disjoint. This proves Theorem
\ref{thm.eqrel.eqcl.disj} \textbf{(b)}.

\textbf{(c)} Recall that $\left[  y\right]  _{\sim}=\left\{  b\in
S\ \mid\ b\sim y\right\}  $. Thus, we have $x\in\left[  y\right]  _{\sim}$ if
and only if $x\sim y$. In other words, we have $x\sim y$ if and only if
$x\in\left[  y\right]  _{\sim}$. This proves Theorem \ref{thm.eqrel.eqcl.disj}
\textbf{(c)}.

\textbf{(d)} Theorem \ref{thm.eqrel.eqcl.disj} \textbf{(c)} (applied to $y$
and $x$ instead of $x$ and $y$) shows that we have $y\sim x$ if and only if
$y\in\left[  x\right]  _{\sim}$. In other words, we have the logical
equivalence $\left(  y\sim x\right)  \Longleftrightarrow\left(  y\in\left[
x\right]  _{\sim}\right)  $.

Proposition \ref{prop.eqrel.rel.symm-ba} (applied to $a=x$ and $b=y$) shows
that we have $x\sim y$ if and only if $y\sim x$. Thus, we have the following
chain of logical equivalences:
\[
\left(  x\sim y\right)  \Longleftrightarrow\left(  y\sim x\right)
\Longleftrightarrow\left(  y\in\left[  x\right]  _{\sim}\right)  .
\]
In other words, we have $x\sim y$ if and only if $y\in\left[  x\right]
_{\sim}$. This proves Theorem \ref{thm.eqrel.eqcl.disj} \textbf{(d)}.

\textbf{(e)} $\Longrightarrow:$ Assume that $x\sim y$. Then, Theorem
\ref{thm.eqrel.eqcl.disj} \textbf{(a)} yields $\left[  x\right]  _{\sim
}=\left[  y\right]  _{\sim}$. Thus, the \textquotedblleft$\Longrightarrow
$\textquotedblright\ direction of Theorem \ref{thm.eqrel.eqcl.disj}
\textbf{(e)} is proven.

$\Longleftarrow:$ Assume that $\left[  x\right]  _{\sim}=\left[  y\right]
_{\sim}$. Then, Proposition \ref{prop.eqrel.eqcl.aina} (applied to $a=x$)
yields $x\in\left[  x\right]  _{\sim}=\left[  y\right]  _{\sim}=\left\{  b\in
S\ \mid\ b\sim y\right\}  $. In other words, $x\sim y$. This proves the
\textquotedblleft$\Longleftarrow$\textquotedblright\ direction of Theorem
\ref{thm.eqrel.eqcl.disj} \textbf{(e)}.
\end{proof}

Theorem \ref{thm.eqrel.eqcl.disj} yields an important property of equivalence classes:

\begin{exercise}
\label{exe.eqrel.eqcl.dj}Let $\sim$ be an equivalence relation on a set $S$.
Prove that any two equivalence classes of $\sim$ are either identical or disjoint.
\end{exercise}

In the following, we will try to use Greek letters for equivalence classes and
Roman letters for their representatives (as we did in the solution to Exercise
\ref{exe.eqrel.eqcl.dj} above).

\begin{center}
\textbf{2019-02-22 lecture}
\end{center}

\subsubsection{More examples}

\begin{example}
\label{exa.eqrel.eqcl.rat}Consider the relation $\underset{\ast}{\sim}$ on
$S=\mathbb{Z}\times\left(  \mathbb{Z}\setminus\left\{  0\right\}  \right)  $
defined in Example \ref{exa.eqrel.eqrel.eqrelQ}. Its equivalence classes are
the rational numbers. Indeed, the equivalence class $\left[  \left(
a_{1},a_{2}\right)  \right]  _{\underset{\ast}{\sim}}$ of a pair $\left(
a_{1},a_{2}\right)  \in S$ is commonly denoted by $\dfrac{a_{1}}{a_{2}}$ (or
by $a_{1}/a_{2}$). This is how rational numbers are defined!
\end{example}

Equivalence classes appear in real life too, at least in the modern world.
When you say that the sun rises approximately at 7 AM in\ February\footnote{in
Minneapolis}, what do \textquotedblleft7 AM\textquotedblright\ and
\textquotedblleft February\textquotedblright\ mean? Clearly, \textquotedblleft
February\textquotedblright\ is not a specific month in history, since each
year has its own February. Rather, it stands for an equivalence class of
months, with respect to the relation of \textquotedblleft being an integer
number of years apart\textquotedblright. Similarly, \textquotedblleft7
AM\textquotedblright\ means an equivalence class of moments with respect to
the relation of \textquotedblleft being an integer number of days
apart\textquotedblright. Likewise, \textquotedblleft the
horse\textquotedblright\ in \textquotedblleft the horse has a lifespan of 25
years\textquotedblright\ refers not to a specific horse, but to the whole
species, which is an equivalence class of creatures with respect to a certain
relation\footnote{According to Darwin, the relation is \textquotedblleft being
able to procreate\textquotedblright\ -- although this is not per se an
equivalence relation, so some tweaks need to be made (\textquotedblleft
reflexive-and-transitive closure\textquotedblright) to turn it into one.}.
Finally, the equivalence classes of the relation $\sim$ in Example
\ref{exa.eqrel.eqrel.eqrel-continents} are commonly referred to as
\textquotedblleft continents\textquotedblright\footnote{at least if one
considers Eurasia to be a single continent} or \textquotedblleft
islands\textquotedblright. Equivalence classes provide a way to refer to
multiple objects (usually similar in some way) as if they were one.

\subsubsection{The \textquotedblleft is a permutation of\textquotedblright%
\ relation on tuples}

Let us give a few more mathematical examples for equivalences and equivalence classes:

\begin{definition}
\label{def.eqrel.eqcl.perm}Let $A$ be a set, and let $k\in\mathbb{N}$. As we
know, $A^{k}$ denotes the set of all $k$-tuples of elements of $A$.

The relation $\underset{\operatorname*{perm}}{\sim}$ on $A^{k}$ is defined as
follows:%
\[
\left(  \mathbf{p}\underset{\operatorname*{perm}}{\sim}\mathbf{q}\right)
\Longleftrightarrow\left(  \mathbf{p}\text{ is a permutation of }%
\mathbf{q}\right)  .
\]
(We are using Definition \ref{def.comb.tuples.perm-tup} here.) For example,
$\left(  3,8,8,2\right)  \underset{\operatorname*{perm}}{\sim}\left(
8,3,2,8\right)  $.
\end{definition}

\begin{exercise}
\label{exe.eqrel.eqcl.perm.eq}Prove that the relation
$\underset{\operatorname*{perm}}{\sim}$ is an equivalence relation.
\end{exercise}

\begin{definition}
\label{def.eqrel.eqcl.perm.unord-tup}Let $A$ be a set, and let $k\in
\mathbb{N}$. The relation $\underset{\operatorname*{perm}}{\sim}$ on $A^{k}$
is an equivalence relation (by Exercise \ref{exe.eqrel.eqcl.perm.eq}). Its
equivalence classes are called the \textit{unordered }$k$\textit{-tuples} of
elements of $A$. For example, for $k=2$ and $A=\mathbb{Z}$, the two $2$-tuples
$\left(  6,8\right)  $ and $\left(  8,6\right)  $ are permutations of each
other, so $\left(  6,8\right)  \underset{\operatorname*{perm}}{\sim}\left(
8,6\right)  $ and thus $\left[  \left(  6,8\right)  \right]
_{\underset{\operatorname*{perm}}{\sim}}=\left[  \left(  8,6\right)  \right]
_{\underset{\operatorname*{perm}}{\sim}}$.
\end{definition}

\subsubsection{The \textquotedblleft is a cyclic rotation of\textquotedblright%
\ relation on tuples}

Another example of an equivalence relation is the following:

\begin{definition}
\label{def.eqrel.eqcl.cyc}Again, let $A$ be a set and $k\in\mathbb{N}$. If
$\mathbf{a}=\left(  a_{1},a_{2},\ldots,a_{k}\right)  \in A^{k}$, then a
\textit{cyclic rotation} of $\mathbf{a}$ means a $k$-tuple of the form%
\[
\left(  a_{i+1},a_{i+2},\ldots,a_{k},a_{1},a_{2},\ldots,a_{i}\right)  \in
A^{k}%
\]
for some $i\in\left\{  0,1,\ldots,k\right\}  $.

For example, the cyclic rotations of the $3$-tuple $\left(  1,4,5\right)  $
are $\left(  1,4,5\right)  $, $\left(  4,5,1\right)  $ and $\left(
5,1,4\right)  $.

(Here is an equivalent description of cyclic rotations: Let $C$ be the map
$A^{k}\rightarrow A^{k}$ that sends each $k$-tuple $\left(  a_{1},a_{2}%
,\ldots,a_{k}\right)  $ to $\left(  a_{2},a_{3},\ldots,a_{k},a_{1}\right)  $.
Then, it is easy to see that a cyclic rotation of $\mathbf{a}$ is the same as
a $k$-tuple of the form $C^{i}\left(  \mathbf{a}\right)  $ for some
$i\in\left\{  0,1,\ldots,k\right\}  $. But it is also easy to see that
$C^{k}=\operatorname*{id}$. Thus, the $C^{i}\left(  \mathbf{a}\right)  $ for
$i\in\left\{  0,1,\ldots,k\right\}  $ are exactly the $C^{i}\left(
\mathbf{a}\right)  $ for $i\in\mathbb{N}$.)

The relation $\underset{\operatorname*{cyc}}{\sim}$ on $A^{k}$ is defined as
follows:%
\begin{align*}
\left(  \mathbf{p}\underset{\operatorname*{cyc}}{\sim}\mathbf{q}\right)   &
\Longleftrightarrow\ \left(  \mathbf{p}\text{ is a cyclic rotation of
}\mathbf{q}\right) \\
&  \Longleftrightarrow\ \left(  \mathbf{p}=C^{i}\left(  \mathbf{q}\right)
\text{ for some }i\in\mathbb{N}\right)  .
\end{align*}


This relation $\underset{\operatorname*{cyc}}{\sim}$ is an equivalence
relation. Its equivalence classes are called \textit{necklaces} of length $k$
over $A$.
\end{definition}

We shall not prove the statements claimed in this definition, since they are
particular cases of more general results that will be proven below (about
groups acting on sets).

For example, the necklaces of length $3$ over the set $A=\left\{  1,2\right\}
$ are%
\begin{align*}
\left[  \left(  1,1,1\right)  \right]  _{\underset{\operatorname*{cyc}}{\sim
}}  &  =\left\{  \left(  1,1,1\right)  \right\}  ,\\
\left[  \left(  1,1,2\right)  \right]  _{\underset{\operatorname*{cyc}}{\sim
}}  &  =\left\{  \left(  1,1,2\right)  ,\left(  1,2,1\right)  ,\left(
2,1,1\right)  \right\}  ,\\
\left[  \left(  1,2,2\right)  \right]  _{\underset{\operatorname*{cyc}}{\sim
}}  &  =\left\{  \left(  1,2,2\right)  ,\left(  2,2,1\right)  ,\left(
2,1,2\right)  \right\}  ,\\
\left[  \left(  2,2,2\right)  \right]  _{\underset{\operatorname*{cyc}}{\sim
}}  &  =\left\{  \left(  2,2,2\right)  \right\}  .
\end{align*}
This may suggest that a necklace $\left[  \left(  a_{1},a_{2},\ldots
,a_{k}\right)  \right]  _{\underset{\operatorname*{cyc}}{\sim}}$ is uniquely
determined by how often each element appears in the tuple $\left(  a_{1}%
,a_{2},\ldots,a_{k}\right)  $. But this is not true in general; for example,
$\left[  \left(  1,2,3\right)  \right]  _{\underset{\operatorname*{cyc}}{\sim
}}$ and $\left[  \left(  1,3,2\right)  \right]
_{\underset{\operatorname*{cyc}}{\sim}}$ are two different necklaces of length
$3$ over the set $A=\left\{  1,2,3\right\}  $.

How many necklaces of length $k$ over a $q$-element set $A$ exist? It turns
out that there is a nice formula for this, involving Euler's totient function
$\phi$:

\begin{theorem}
\label{thm.eqrel.eqcl.necklace-count}Let $k$ be a positive integer. Let $A$ be
a $q$-element set (where $q\in\mathbb{N}$). Then, the number of necklaces of
length $k$ over a $q$-element set $A$ is%
\[
\dfrac{1}{k}\sum_{d\mid k}\phi\left(  d\right)  q^{k/d}.
\]

\end{theorem}

Note that it is not (a priori) clear that $\dfrac{1}{k}\sum_{d\mid k}%
\phi\left(  d\right)  q^{k/d}$ is an integer! Actually, this holds even when
$q$ is a negative integer, even though there exist no $q$-element sets in that
case. Thus, $\dfrac{1}{k}\sum_{d\mid k}\phi\left(  d\right)  x^{k/d}$ is
another integer-valued polynomial for each positive integer $k$.

We will prove Theorem \ref{thm.eqrel.eqcl.necklace-count} using the concept of
group actions further below.

\subsubsection{Definition of the quotient set and the projection map}

\begin{definition}
\label{def.eqrel.eqcl.proj}Let $S$ be a set, and let $\sim$ be an equivalence
relation on $S$.

\textbf{(a)} The set of equivalence classes of $\sim$ is denoted by $S/\sim$.
It is called the \textit{quotient} (or \textit{quotient set}) of $S$ by $\sim$.

\textbf{(b)} The map%
\begin{align*}
S  &  \rightarrow\left.  S/\sim\right.  ,\\
s  &  \mapsto\left[  s\right]  _{\sim}%
\end{align*}
(which sends each element $s\in S$ to its equivalence class) is called the
\textit{canonical projection (onto the quotient)}, and we will denote it by
$\pi_{\sim}$.

\textbf{(c)} An element of an equivalence class of $\sim$ is also called a
\textit{representative} of this class.
\end{definition}

\subsection{$\mathbb{Z}/n$ (\textquotedblleft integers modulo $n$%
\textquotedblright)}

We now come to one of the most important example of equivalence classes: the
residue classes of integers modulo a given positive integer $n$.

\begin{convention}
For this section, we fix a positive integer $n$.
\end{convention}

\subsubsection{Definition of $\mathbb{Z}/n$}

\begin{definition}
\label{def.eqrel.Z/n.res-class}\textbf{(a)} Define a relation
$\underset{n}{\equiv}$ on the set $\mathbb{Z}$ by
\[
\left(  a\underset{n}{\equiv}b\right)  \Longleftrightarrow\left(  a\equiv
b\operatorname{mod}n\right)  .
\]
(This is precisely the relation $\underset{n}{\equiv}$ from Example
\ref{exa.eqrel.rel.rels1} \textbf{(e)}.)

Recall that $\underset{n}{\equiv}$ is an equivalence relation (by Example
\ref{exa.eqrel.eqrel.eqrelmodn}).

\textbf{(b)} A \textit{residue class modulo}\textbf{ }$n$ means an equivalence
class of the relation $\underset{n}{\equiv}$.
\end{definition}

For example,%
\begin{align*}
\left[  0\right]  _{\underset{5}{\equiv}}  &  =\left\{  \ldots
,-15,-10,-5,0,5,10,15,20,\ldots\right\}  ,\\
\left[  1\right]  _{\underset{5}{\equiv}}  &  =\left\{  \ldots
,-14,-9,-4,1,6,11,16,21,\ldots\right\}  ,\\
\left[  2\right]  _{\underset{5}{\equiv}}  &  =\left\{  \ldots
,-13,-8,-3,2,7,12,17,22,\ldots\right\}  ,\\
\left[  3\right]  _{\underset{5}{\equiv}}  &  =\left\{  \ldots
,-12,-7,-2,3,8,13,18,23,\ldots\right\}  ,\\
\left[  4\right]  _{\underset{5}{\equiv}}  &  =\left\{  \ldots
,-11,-6,-1,4,9,14,19,24,\ldots\right\}
\end{align*}
are all the residue classes modulo $5$. As you see, these classes are in
1-to-1 correspondence with the $5$ possible remainders $0,1,2,3,4$ modulo $5$.
This generalizes (see Theorem \ref{thm.eqrel.Zn.explicit} below). First, let
us introduce a few notations:

\begin{definition}
\label{def.eqrel.Z/n.Z/n}\textbf{(a)} If $i$ is an integer, then we denote the
residue class $\left[  i\right]  _{\underset{n}{\equiv}}$ by $\left[
i\right]  _{n}$. (Some authors denote this residue class by $\overline{i}_{n}$
or $i\operatorname{mod}n$. Be careful with the notation $i\operatorname{mod}%
n$, since other authors use it for the integer $i\%n$.)

\textbf{(b)} The set $\mathbb{Z}/\underset{n}{\equiv}$ of residue classes
modulo $n$ is called $\mathbb{Z}/n$. (Some authors call it $\mathbb{Z}/\left(
n\right)  $ or $\mathbb{Z}/n\mathbb{Z}$ or $\mathbb{Z}_{n}$. Be careful with
the notation $\mathbb{Z}_{n}$, since it has a different meaning, too.)
\end{definition}

\subsubsection{How $\mathbb{Z}/n$ looks like}

Let us now state and rigorously prove what we have just observed on the
example of $n=5$:

\begin{theorem}
\label{thm.eqrel.Zn.explicit}The set $\mathbb{Z}/n$ has exactly $n$ elements,
namely $\left[  0\right]  _{n},\left[  1\right]  _{n},\ldots,\left[
n-1\right]  _{n}$. (In particular, these elements $\left[  0\right]
_{n},\left[  1\right]  _{n},\ldots,\left[  n-1\right]  _{n}$ are distinct.)
\end{theorem}

Before we prove this, let us make a simple observation:

\begin{proposition}
\label{prop.eqrel.Zn.ab}\textbf{(a)} Each element of $\mathbb{Z}/n$ can be
written in the form $\left[  s\right]  _{n}$ for some integer $s$.

\textbf{(b)} Let $a$ and $b$ be integers. Then, we have $\left[  a\right]
_{n}=\left[  b\right]  _{n}$ if and only if $a\equiv b\operatorname{mod}n$.
\end{proposition}

\begin{proof}
[Proof of Proposition \ref{prop.eqrel.Zn.ab}.]\textbf{(a)} If $\sigma
\in\mathbb{Z}/n$, then $\sigma$ is a residue class modulo $n$ (by the
definition of $\mathbb{Z}/n$), and thus is an equivalence class of the
relation $\underset{n}{\equiv}$ (by the definition of a residue class). Hence,
this $\sigma$ can be written in the form $\left[  s\right]
_{\underset{n}{\equiv}}$ for some integer $s$. In other words, this $\sigma$
can be written in the form $\left[  s\right]  _{n}$ for some integer $s$
(since we have defined $\left[  s\right]  _{n}$ to be a shorthand for $\left[
s\right]  _{\underset{n}{\equiv}}$). In other words, each element of
$\mathbb{Z}/n$ can be written in the form $\left[  s\right]  _{n}$ for some
integer $s$. This proves Proposition \ref{prop.eqrel.Zn.ab} \textbf{(a)}.

\textbf{(b)} Theorem \ref{thm.eqrel.eqcl.disj} \textbf{(e)} (applied to
$\mathbb{Z}$, $\underset{n}{\equiv}$, $a$ and $b$ instead of $S$, $\sim$, $x$
and $y$) shows that we have $a\underset{n}{\equiv}b$ if and only if $\left[
a\right]  _{\underset{n}{\equiv}}=\left[  b\right]  _{\underset{n}{\equiv}}$.
Thus, we have the logical equivalence
\begin{equation}
\left(  a\underset{n}{\equiv}b\right)  \ \Longleftrightarrow\ \left(  \left[
a\right]  _{\underset{n}{\equiv}}=\left[  b\right]  _{\underset{n}{\equiv}%
}\right)  \label{pf.prop.eqrel.Zn.ab.1}%
\end{equation}


Definition \ref{def.eqrel.Z/n.Z/n} \textbf{(a)} shows that $\left[  a\right]
_{n}=\left[  a\right]  _{\underset{n}{\equiv}}$ and $\left[  b\right]
_{n}=\left[  b\right]  _{\underset{n}{\equiv}}$. Hence, we have the following
chain of logical equivalences:
\begin{align*}
\left(  \left[  a\right]  _{n}=\left[  b\right]  _{n}\right)  \  &
\Longleftrightarrow\ \left(  \left[  a\right]  _{\underset{n}{\equiv}}=\left[
b\right]  _{\underset{n}{\equiv}}\right) \\
&  \Longleftrightarrow\ \left(  a\underset{n}{\equiv}b\right)
\ \ \ \ \ \ \ \ \ \ \left(  \text{by (\ref{pf.prop.eqrel.Zn.ab.1})}\right) \\
&  \Longleftrightarrow\ \left(  a\equiv b\operatorname{mod}n\right)
\end{align*}
(by the definition of the relation $\underset{n}{\equiv}$). In other words, we
have $\left[  a\right]  _{n}=\left[  b\right]  _{n}$ if and only if $a\equiv
b\operatorname{mod}n$. This proves Proposition \ref{prop.eqrel.Zn.ab}
\textbf{(b)}.
\end{proof}

\begin{proof}
[Proof of Theorem \ref{thm.eqrel.Zn.explicit}.]We have a map%
\begin{align*}
\pi_{\underset{n}{\equiv}}:\mathbb{Z}  &  \rightarrow\mathbb{Z}/n,\\
s  &  \mapsto\left[  s\right]  _{n}.
\end{align*}
(This is simply the map $\pi_{\sim}$ defined in Definition
\ref{def.eqrel.eqcl.proj} \textbf{(b)}, applied to the case when
$S=\mathbb{Z}$ and when $\sim$ is the equivalence relation
$\underset{n}{\equiv}$.)

We restrict this map $\underset{n}{\equiv}$ to the set $\left\{
0,1,\ldots,n-1\right\}  $; we thus obtain a map%
\begin{align*}
P:\left\{  0,1,\ldots,n-1\right\}   &  \rightarrow\mathbb{Z}/n,\\
s  &  \mapsto\left[  s\right]  _{n}.
\end{align*}
Our goal is to prove that this map $P$ is bijective.

In general, there are two ways in which one usually proves that a map is
bijective: One way is to prove that it is surjective and injective; the other
way is by constructing an inverse to this map. Both ways can be used here; let
us follow the second way, since it demonstrates an important point about
equivalence classes.

So we want to construct an inverse to the map $P$. To do so, we try to define
a map%
\begin{align*}
R:\mathbb{Z}/n  &  \rightarrow\left\{  0,1,\ldots,n-1\right\}  ,\\
\left[  s\right]  _{n}  &  \mapsto s\%n
\end{align*}
(that is, a map $R:\mathbb{Z}/n\rightarrow\left\{  0,1,\ldots,n-1\right\}  $
that sends each residue class $\left[  s\right]  _{n}$ to the remainder
$s\%n$). Can we do this? Would this map $R$ be actually well-defined?

First of all, our definition of $R$ does indeed specify a value of $R\left(
\sigma\right)  $ for each $\sigma\in\mathbb{Z}/n$. This is because each
element of $\mathbb{Z}/n$ can be written in the form $\left[  s\right]  _{n}$
for some integer $s$ (because of Proposition \ref{prop.eqrel.Zn.ab}
\textbf{(a)}), and therefore our definition tells us where this element should
go under $R$.

Furthermore, if $s$ is an integer, then $s\%n\in\left\{  0,1,\ldots
,n-1\right\}  $ (by Corollary \ref{cor.ent.quo-rem.remmod} \textbf{(a)},
applied to $u=s$). Hence, our definition of $R$ does not require the map $R$
to take values lying outside of its target\footnote{This is one way in which
maps can fail to be well-defined. For example, the map
\[
\mathbb{N}\rightarrow\mathbb{N},\ \ \ \ \ \ \ \ \ \ i\mapsto i-1
\]
is not well-defined for this reason (because $i-1\notin\mathbb{N}$ for
$i=0$).}.

However, there is one more thing that could go wrong with our definition of
$R$: One element $\sigma$ of $\mathbb{Z}/n$ can be written as $\left[
s\right]  _{n}$ for several different integers $s$. For instance, $\left[
2\right]  _{5}=\left[  7\right]  _{5}=\left[  12\right]  _{5}=\left[
17\right]  _{5}=\cdots$. If the remainders $s\%n$ of these integers $s$ were
different, then the map $R$ would have to send the class $\sigma$ to several
different numbers, and this is not something a map can do. To see an example
where this does go wrong, let us try to define a map%
\begin{align*}
R_{\operatorname*{wrong}}:\mathbb{Z}/n  &  \rightarrow\left\{  0,1,\ldots
,n-1\right\}  ,\\
\left[  s\right]  _{n}  &  \mapsto s\%\left(  n+1\right)  .
\end{align*}
So this definition of $R_{\operatorname*{wrong}}$ is identical to our
definition of $R$ above, except that we are sending $\left[  s\right]  _{n}$
to $s\%\left(  n+1\right)  $ rather than to $s\%n$. However,
$R_{\operatorname*{wrong}}$ does not actually exist. In fact, if this
ostensible map $R_{\operatorname*{wrong}}$ would exist, then it would have to
send $\left[  0\right]  _{n}$ to $0\%\left(  n+1\right)  =0$ and send $\left[
-n\right]  _{n}$ to $\left(  -n\right)  \%\left(  n+1\right)  =1$%
\ \ \ \ \footnote{The equality $\left(  -n\right)  \%\left(  n+1\right)  =1$
follows from writing $-n$ in the form $-n=\left(  -1\right)  \cdot\left(
n+1\right)  +1$.}; however, $\left[  0\right]  _{n}$ and $\left[  -n\right]
_{n}$ are the same residue class (since $0\equiv-n\operatorname{mod}n$),
whereas $0$ and $1$ are not the same number, and thus this map
$R_{\operatorname*{wrong}}$ would send the same class to two different
numbers. Thus, the map $R_{\operatorname*{wrong}}$ does not exist.

We shall now check that our above definition of $R$ does \textbf{not} suffer
from this problem. In other words, we shall check that in the definition of
\begin{align*}
R:\mathbb{Z}/n  &  \rightarrow\left\{  0,1,\ldots,n-1\right\}  ,\\
\left[  s\right]  _{n}  &  \mapsto s\%n,
\end{align*}
any two possible integers $s$ leading to the same class $\left[  s\right]
_{n}$ also lead to the same remainder $s\%n$. In other words, we shall prove
the following claim:

\begin{statement}
\textit{Claim 1:} If $s_{1}$ and $s_{2}$ are two integers such that $\left[
s_{1}\right]  _{n}=\left[  s_{2}\right]  _{n}$, then $s_{1}\%n=s_{2}\%n$.
\end{statement}

[\textit{Proof of Claim 1:} Let $s_{1}$ and $s_{2}$ be two integers such that
$\left[  s_{1}\right]  _{n}=\left[  s_{2}\right]  _{n}$.

Proposition \ref{prop.eqrel.Zn.ab} \textbf{(b)} (applied to $s_{1}$ and
$s_{2}$ instead of $a$ and $b$) shows that we have $\left[  s_{1}\right]
_{n}=\left[  s_{2}\right]  _{n}$ if and only if $s_{1}\equiv s_{2}%
\operatorname{mod}n$. Thus, we have $s_{1}\equiv s_{2}\operatorname{mod}n$
(since $\left[  s_{1}\right]  _{n}=\left[  s_{2}\right]  _{n}$). But Exercise
\ref{exe.ent.quo-rem.mod=rem} (applied to $u=s_{1}$ and $v=s_{2}$) shows that
$s_{1}\equiv s_{2}\operatorname{mod}n$ if and only if $s_{1}\%n=s_{2}\%n$.
Hence, we have $s_{1}\%n=s_{2}\%n$. This proves Claim 1.]

Claim 1 shows that if $s$ is an integer, then $s\%n$ depends only on the
\textbf{residue class} $\left[  s\right]  _{n}$, but not on the actual integer
$s$. Thus, if we have a residue class $\sigma\in\mathbb{Z}/n$, then we can
write $\sigma$ in the form $\sigma=\left[  s\right]  _{n}$ for some integer
$s$ (since every residue class in $\mathbb{Z}/n$ can be written in this form),
and then the integer $s\%n$ will depend only on the class $\sigma$ and not on
the specific choice of this integer $s$. Hence, the map $R$ is well-defined.

Now we have two maps%
\begin{align*}
P:\left\{  0,1,\ldots,n-1\right\}   &  \rightarrow\mathbb{Z}/n,\\
s  &  \mapsto\left[  s\right]  _{n}%
\end{align*}
and%
\begin{align*}
R:\mathbb{Z}/n  &  \rightarrow\left\{  0,1,\ldots,n-1\right\}  ,\\
\left[  s\right]  _{n}  &  \mapsto s\%n.
\end{align*}
We claim that they are mutually inverse. Indeed:

\begin{itemize}
\item We have $P\circ R=\operatorname*{id}$.

[\textit{Proof:} Let $\sigma\in\mathbb{Z}/n$. We shall prove that $\left(
P\circ R\right)  \left(  \sigma\right)  =\operatorname*{id}\left(
\sigma\right)  $.

Proposition \ref{prop.eqrel.Zn.ab} \textbf{(a)} says that each element of
$\mathbb{Z}/n$ can be written in the form $\left[  s\right]  _{n}$ for some
integer $s$. Hence, $\sigma$ can be written in this form. In other words,
$\sigma=\left[  s\right]  _{n}$ for some integer $s$. Consider this $s$. The
definition of $R$ yields $R\left(  \left[  s\right]  _{n}\right)  =s\%n$.
Corollary \ref{cor.ent.quo-rem.remmod} \textbf{(a)} (applied to $u=s$) yields
$s\%n\equiv s\operatorname{mod}n$. Now, from $\sigma=\left[  s\right]  _{n}$,
we obtain%
\begin{align*}
\left(  P\circ R\right)  \left(  \sigma\right)   &  =\left(  P\circ R\right)
\left(  \left[  s\right]  _{n}\right)  =P\left(  \underbrace{R\left(  \left[
s\right]  _{n}\right)  }_{=s\%n}\right)  =P\left(  s\%n\right) \\
&  =\left[  s\%n\right]  _{n}\ \ \ \ \ \ \ \ \ \ \left(  \text{by the
definition of }P\right) \\
&  =\left[  s\right]  _{n}\ \ \ \ \ \ \ \ \ \ \left(  \text{since }s\%n\equiv
s\operatorname{mod}n\right) \\
&  =\sigma=\operatorname*{id}\left(  \sigma\right)  .
\end{align*}


Now, forget that we fixed $\sigma$. We thus have proven that $\left(  P\circ
R\right)  \left(  \sigma\right)  =\operatorname*{id}\left(  \sigma\right)  $
for each $\sigma\in\mathbb{Z}/n$. In other words, $P\circ R=\operatorname*{id}%
$.]

\item We have $R\circ P=\operatorname*{id}$.

[\textit{Proof:} Let $s\in\left\{  0,1,\ldots,n-1\right\}  $. Thus, Corollary
\ref{cor.ent.quo-rem.remmod} \textbf{(c)} (applied to $u=s$ and $c=s$) yields
$s=s\%n$ (since $s\equiv s\operatorname{mod}n$). But the definition of $P$
yields $P\left(  s\right)  =\left[  s\right]  _{n}$. Hence,%
\begin{align*}
\left(  R\circ P\right)  \left(  s\right)   &  =R\left(  \underbrace{P\left(
s\right)  }_{=\left[  s\right]  _{n}}\right)  =R\left(  \left[  s\right]
_{n}\right)  =s\%n\ \ \ \ \ \ \ \ \ \ \left(  \text{by the definition of
}R\right) \\
&  =s=\operatorname*{id}\left(  s\right)  .
\end{align*}


Now, forget that we fixed $s$. We thus have proven that $\left(  R\circ
P\right)  \left(  s\right)  =\operatorname*{id}\left(  s\right)  $ for each
$s\in\left\{  0,1,\ldots,n-1\right\}  $. In other words, $R\circ
P=\operatorname*{id}$.]
\end{itemize}

Combining $P\circ R=\operatorname*{id}$ and $R\circ P=\operatorname*{id}$, we
conclude that the maps $P$ and $R$ are mutually inverse. Thus, the map $P$ is
invertible, i.e., bijective. Thus, $P$ is surjective and injective. Since $P$
is injective, we see that $P$ must send the distinct elements $0,1,\ldots,n-1$
of its domain to distinct elements. In other words, the $n$ elements $P\left(
0\right)  ,P\left(  1\right)  ,\ldots,P\left(  n-1\right)  $ of $\mathbb{Z}/n$
must be distinct.

But recall that $P\left(  s\right)  =\left[  s\right]  _{n}$ for each
$s\in\left\{  0,1,\ldots,n-1\right\}  $ (by the definition of $P$). Thus, the
$n$ elements $P\left(  0\right)  ,P\left(  1\right)  ,\ldots,P\left(
n-1\right)  $ can be rewritten as $\left[  0\right]  _{n},\left[  1\right]
_{n},\ldots,\left[  n-1\right]  _{n}$. Hence, the $n$ elements $\left[
0\right]  _{n},\left[  1\right]  _{n},\ldots,\left[  n-1\right]  _{n}$ are
distinct (since the $n$ elements $P\left(  0\right)  ,P\left(  1\right)
,\ldots,P\left(  n-1\right)  $ are distinct).

Moreover, $P$ is surjective. Thus,%
\begin{align*}
\mathbb{Z}/n  &  =P\left(  \left\{  0,1,\ldots,n-1\right\}  \right) \\
&  =\left\{  P\left(  0\right)  ,P\left(  1\right)  ,\ldots,P\left(
n-1\right)  \right\} \\
&  =\left\{  \left[  0\right]  _{n},\left[  1\right]  _{n},\ldots,\left[
n-1\right]  _{n}\right\}
\end{align*}
(since $P\left(  s\right)  =\left[  s\right]  _{n}$ for each $s\in\left\{
0,1,\ldots,n-1\right\}  $). In other words, the elements of $\mathbb{Z}/n$ are
exactly the $n$ elements $\left[  0\right]  _{n},\left[  1\right]  _{n}%
,\ldots,\left[  n-1\right]  _{n}$. These $n$ elements are distinct (as we have
previously shown). Hence, the set $\mathbb{Z}/n$ has exactly $n$ elements,
namely $\left[  0\right]  _{n},\left[  1\right]  _{n},\ldots,\left[
n-1\right]  _{n}$. This proves Theorem \ref{thm.eqrel.Zn.explicit}.
\end{proof}

\subsubsection{Making choices that don't matter: The universal property of
quotient sets}

\begin{teachingnote}
I haven't taught this subsection in class.
\end{teachingnote}

In the above proof of Theorem \ref{thm.eqrel.Zn.explicit}, we have witnessed
an important issue in dealing with quotient sets: If you want to define a map
$f$ going \textbf{out} of a quotient set $S/\sim$\ \ \ \ \footnote{In our
case, the quotient set was $\mathbb{Z}/\underset{n}{\equiv}$ (also known as
$\mathbb{Z}/n$), and the map we wanted to define was $R$.}, then the easiest
way to do so is often to specify $f\left(  \left[  s\right]  _{\sim}\right)  $
for each $s\in S$; but in order to ensure that this definition is well-defined
(i.e., that our map $f$ actually exists), we need to verify that the value of
$f\left(  \left[  s\right]  _{\sim}\right)  $ we are specifying depends
\textbf{only on the equivalence class }$\left[  s\right]  _{\sim}$ but not on
the representative $s$. In other words, we need to verify that if $s_{1}$ and
$s_{2}$ are two elements of $S$ such that $\left[  s_{1}\right]  _{\sim
}=\left[  s_{2}\right]  _{\sim}$, then our definition of $f$ assigns the same
value to $f\left(  \left[  s_{1}\right]  _{\sim}\right)  $ as it does to
$f\left(  \left[  s_{2}\right]  _{\sim}\right)  $. This verification (which we
did in our above proof by proving Claim 1) is often quite easy, but it is necessary.

Let us restate this strategy for defining maps out of a quotient set more rigorously:

\begin{remark}
\label{rmk.eqrel.quot.uniprop-as-method}Let $S$ and $T$ be two sets, and let
$\sim$ be an equivalence relation on $S$. Assume that we want to define a map%
\begin{align*}
f:\left.  S/\sim\right.   &  \rightarrow T,\\
\left[  s\right]  _{\sim}  &  \mapsto F\left(  s\right)  ,
\end{align*}
where $F\left(  s\right)  $ is some element of $T$ for each $s\in S$. (That
is, we want to define a map $f:S\rightarrow T$ such that every $s\in S$
satisfies $f\left(  \left[  s\right]  _{\sim}\right)  =F\left(  s\right)  $.)

In order to ensure that this $f$ is well-defined, we need to verify that if
$s_{1}$ and $s_{2}$ are two elements of $S$ such that $\left[  s_{1}\right]
_{\sim}=\left[  s_{2}\right]  _{\sim}$, then $F\left(  s_{1}\right)  =F\left(
s_{2}\right)  $. If this verification has been done, the map $f$ is well-defined.
\end{remark}

Further examples of maps out of quotient sets defined in this way can be found
in \cite{Conrad-Well}\footnote{When reading \cite[Example 1.1]{Conrad-Well},
keep in mind that rational numbers are defined as equivalence classes of
elements of $\mathbb{Z}\times\left(  \mathbb{Z}\setminus\left\{  0\right\}
\right)  $, as we have seen in Example \ref{exa.eqrel.eqcl.rat}. Thus,
$\mathbb{Q}$ is actually a quotient set: namely, $\mathbb{Q}=S/\underset{\ast
}{\sim}$ using the notations of Example \ref{exa.eqrel.eqcl.rat}.}.

\begin{fineprint}
Let us illustrate this method of defining maps on a few more examples:

\begin{example}
Let $A$ be a set, and let $k\in\mathbb{N}$. Fix some $c\in A$. We can then
define a map%
\begin{align*}
\operatorname*{mult}\nolimits_{c}:A^{k}  &  \rightarrow\mathbb{N},\\
\left(  a_{1},a_{2},\ldots,a_{k}\right)   &  \mapsto\left(  \text{the number
of }i\in\left\{  1,2,\ldots,k\right\}  \text{ such that }a_{i}=c\right)  .
\end{align*}
This map $\operatorname*{mult}\nolimits_{c}$ simply sends each $k$-tuple to
the number of times that $c$ appears in this $k$-tuple. For example,
$\operatorname*{mult}\nolimits_{5}\left(  1,5,2,4,7,5,5,6\right)  =3$, since
$5$ appears exactly $3$ times in the $8$-tuple $\left(
1,5,2,4,7,5,5,6\right)  $ (assuming that $k=8$ and $A=\mathbb{Z}$). It is
clear that this map $\operatorname*{mult}\nolimits_{c}$ is well-defined. (The
number $\operatorname*{mult}\nolimits_{c}\mathbf{a}$ for a $k$-tuple
$\mathbf{a}$ is called the \textit{multiplicity of }$c$ \textit{in
}$\mathbf{a}$. Therefore the notation \textquotedblleft$\operatorname*{mult}%
\nolimits_{c}$\textquotedblright.)

Now, it stands to reason that the same can be done with \textbf{unordered}
$k$-tuples: After all, the number of times that $c$ appears in a $k$-tuple
should not depend on the order of the entries of the tuple. To formalize this,
however, we need to deal with quotient sets. Indeed, recall that the
\textquotedblleft unordered $k$-tuples of elements of $A$\textquotedblright%
\ were defined (in Definition \ref{def.eqrel.eqcl.perm.unord-tup}) as
equivalence classes of the relation $\underset{\operatorname*{perm}}{\sim}$ on
the set $A^{k}$. So $A^{k}/\underset{\operatorname*{perm}}{\sim}$ is the set
of all unordered $k$-tuples of elements of $A$. The map that counts how often
$c$ appears in an unordered $k$-tuple should thus have the form%
\begin{align*}
\operatorname*{mult}\nolimits_{c}^{\prime}:\left.  A^{k}%
/\underset{\operatorname*{perm}}{\sim}\right.   &  \rightarrow\mathbb{N},\\
\left[  \left(  a_{1},a_{2},\ldots,a_{k}\right)  \right]
_{\underset{\operatorname*{perm}}{\sim}}  &  \mapsto\left(  \text{the number
of }i\in\left\{  1,2,\ldots,k\right\}  \text{ such that }a_{i}=c\right)  .
\end{align*}
Or, to put it more compactly (making use of the map $\operatorname*{mult}%
\nolimits_{c}$ for \textbf{ordered} $k$-tuples defined above), it should have
the form%
\begin{align*}
\operatorname*{mult}\nolimits_{c}^{\prime}:\left.  A^{k}%
/\underset{\operatorname*{perm}}{\sim}\right.   &  \rightarrow\mathbb{N},\\
\left[  \mathbf{a}\right]  _{\underset{\operatorname*{perm}}{\sim}}  &
\mapsto\operatorname*{mult}\nolimits_{c}\mathbf{a}.
\end{align*}
The question is: Why is this map $\operatorname*{mult}\nolimits_{c}^{\prime}$ well-defined?

Remark \ref{rmk.eqrel.quot.uniprop-as-method} (applied to $A^{k}$,
$\mathbb{N}$ and $\underset{\operatorname*{perm}}{\sim}$ instead of $S$, $T$
and $\sim$) shows that in order to ensure that this map $\operatorname*{mult}%
\nolimits_{c}^{\prime}$ is well-defined, we need to verify that if
$\mathbf{a}_{1}$ and $\mathbf{a}_{2}$ are two elements of $A^{k}$ (that is,
two ordered $k$-tuples) such that $\left[  \mathbf{a}_{1}\right]
_{\underset{\operatorname*{perm}}{\sim}}=\left[  \mathbf{a}_{2}\right]
_{\underset{\operatorname*{perm}}{\sim}}$, then $\operatorname*{mult}%
\nolimits_{c}\left(  \mathbf{a}_{1}\right)  =\operatorname*{mult}%
\nolimits_{c}\left(  \mathbf{a}_{2}\right)  $. Let us do this: Let
$\mathbf{a}_{1}$ and $\mathbf{a}_{2}$ be two elements of $A^{k}$ (that is, two
ordered $k$-tuples) such that $\left[  \mathbf{a}_{1}\right]
_{\underset{\operatorname*{perm}}{\sim}}=\left[  \mathbf{a}_{2}\right]
_{\underset{\operatorname*{perm}}{\sim}}$. Now, $\left[  \mathbf{a}%
_{1}\right]  _{\underset{\operatorname*{perm}}{\sim}}=\left[  \mathbf{a}%
_{2}\right]  _{\underset{\operatorname*{perm}}{\sim}}$ entails $\mathbf{a}%
_{1}\underset{\operatorname*{perm}}{\sim}\mathbf{a}_{2}$ (indeed, Theorem
\ref{thm.eqrel.eqcl.disj} \textbf{(e)} shows that we have $\mathbf{a}%
_{1}\underset{\operatorname*{perm}}{\sim}\mathbf{a}_{2}$ if and only if
$\left[  \mathbf{a}_{1}\right]  _{\underset{\operatorname*{perm}}{\sim}%
}=\left[  \mathbf{a}_{2}\right]  _{\underset{\operatorname*{perm}}{\sim}}$).
In other words, $\mathbf{a}_{1}$ is a permutation of $\mathbf{a}_{2}$ (by the
definition of $\underset{\operatorname*{perm}}{\sim}$). In other words, the
tuples $\mathbf{a}_{1}$ and $\mathbf{a}_{2}$ differ only in the order of their
entries. Hence, Lemma \ref{lem.comb.tuples.mult=perm.conv} (applied to $A$,
$\mathbf{a}_{1}$, $\mathbf{a}_{2}$ and $c$ instead of $P$, $\left(
a_{1},a_{2},\ldots,a_{k}\right)  $, $\left(  b_{1},b_{2},\ldots,b_{\ell
}\right)  $ and $p$) yields that%
\[
\left(  \text{the number of times }c\text{ appears in }\mathbf{a}_{1}\right)
=\left(  \text{the number of times }c\text{ appears in }\mathbf{a}_{2}\right)
.
\]
This rewrites as $\operatorname*{mult}\nolimits_{c}\left(  \mathbf{a}%
_{1}\right)  =\operatorname*{mult}\nolimits_{c}\left(  \mathbf{a}_{2}\right)
$ (since $\left(  \text{the number of times }c\text{ appears in }%
\mathbf{a}_{1}\right)  =\operatorname*{mult}\nolimits_{c}\left(
\mathbf{a}_{1}\right)  $ and $\left(  \text{the number of times }c\text{
appears in }\mathbf{a}_{2}\right)  =\operatorname*{mult}\nolimits_{c}\left(
\mathbf{a}_{2}\right)  $). This is what we needed to prove. Thus, we have
shown that $\operatorname*{mult}\nolimits_{c}^{\prime}$ is well-defined.

On the other hand, if we tried to define a map%
\begin{align*}
\operatorname*{first}:\left.  A^{k}/\underset{\operatorname*{perm}}{\sim
}\right.   &  \rightarrow\mathbb{N},\\
\left[  \mathbf{a}\right]  _{\underset{\operatorname*{perm}}{\sim}}  &
\mapsto\left(  \text{the first entry of }\mathbf{a}\right)
\end{align*}
(assuming that $k>0$, so that an ordered $k$-tuple does indeed have a first
entry), then we would run into troubles, because it is \textbf{not} true that
if $\mathbf{a}_{1}$ and $\mathbf{a}_{2}$ are two elements of $A^{k}$ such that
$\left[  \mathbf{a}_{1}\right]  _{\underset{\operatorname*{perm}}{\sim}%
}=\left[  \mathbf{a}_{2}\right]  _{\underset{\operatorname*{perm}}{\sim}}$,
then $\left(  \text{the first entry of }\mathbf{a}_{1}\right)  =\left(
\text{the first entry of }\mathbf{a}_{2}\right)  $. And this is no surprise:
There is no such thing as \textquotedblleft the first entry\textquotedblright%
\ of an unordered $k$-tuple. The first entry of a $k$-tuple is sensitive to
reordering of its entries.
\end{example}
\end{fineprint}

We can restate this method of defining maps as a rigorous theorem:

\begin{theorem}
\label{thm.eqrel.quot.uniprop.1}Let $S$ and $T$ be two sets, and let $\sim$ be
an equivalence relation on $S$. For each $s\in S$, let $F\left(  s\right)  $
be an element of $T$. (In other words, let $F$ be a map from $S$ to $T$.)
Assume that the following assumption holds:

\begin{statement}
\textit{Assumption 1:} If $s_{1}$ and $s_{2}$ are two elements of $S$
satisfying $s_{1}\sim s_{2}$, then $F\left(  s_{1}\right)  =F\left(
s_{2}\right)  $.
\end{statement}

Then, there exists a unique map $f:\left.  S/\sim\right.  \rightarrow T$ such
that every $s\in S$ satisfies $f\left(  \left[  s\right]  _{\sim}\right)
=F\left(  s\right)  $.
\end{theorem}

Theorem \ref{thm.eqrel.quot.uniprop.1} says that (under the assumption that
Assumption 1 holds) we can define a map%
\begin{align*}
f:\left.  S/\sim\right.   &  \rightarrow T,\\
\left[  s\right]  _{\sim}  &  \mapsto F\left(  s\right)  .
\end{align*}
For example, the map $R$ defined in our proof of Theorem
\ref{thm.eqrel.Zn.explicit} was defined in this way (with $\mathbb{Z}$,
$\mathbb{Z}$, $\underset{n}{\equiv}$ and $s\%n$ playing the roles of $S$, $T$,
$\sim$ and $F\left(  s\right)  $), and our proof of Claim 1 was essentially us
verifying that Assumption 1 of Theorem \ref{thm.eqrel.quot.uniprop.1} is satisfied.

\begin{fineprint}
For the sake of completeness, let us give a formal proof for Theorem
\ref{thm.eqrel.quot.uniprop.1} as well:

\begin{proof}
[Proof of Theorem \ref{thm.eqrel.quot.uniprop.1}.]We need to prove the
following two statements:

\begin{statement}
\textit{Statement 1:} There exists \textbf{at least one} map $f:\left.
S/\sim\right.  \rightarrow T$ such that every $s\in S$ satisfies $f\left(
\left[  s\right]  _{\sim}\right)  =F\left(  s\right)  $.
\end{statement}

\begin{statement}
\textit{Statement 2:} There exists \textbf{at most one} map $f:\left.
S/\sim\right.  \rightarrow T$ such that every $s\in S$ satisfies $f\left(
\left[  s\right]  _{\sim}\right)  =F\left(  s\right)  $.
\end{statement}

[\textit{Proof of Statement 1:} We define a map $\varphi$ as follows:

Let $\sigma\in\left.  S/\sim\right.  $. Thus, $\sigma$ is an equivalence class
of $\sim$ (by the definition of $S/\sim$). In other words, $\sigma=\left[
s\right]  _{\sim}$ for some element $s\in S$. In other words, there exists
some element $s\in S$ such that $\sigma=\left[  s\right]  _{\sim}$. If $s_{1}$
and $s_{2}$ are two such elements $s$, then $F\left(  s_{1}\right)  =F\left(
s_{2}\right)  $\ \ \ \ \footnote{\textit{Proof.} Let $s_{1}$ and $s_{2}$ be
two such elements $s$. Then, $\sigma=\left[  s_{1}\right]  _{\sim}$ (since
$s_{1}$ is an element $s\in S$ such that $\sigma=\left[  s\right]  _{\sim}$)
and $\sigma=\left[  s_{2}\right]  _{\sim}$ (for similar reasons). Hence,
$\left[  s_{1}\right]  _{\sim}=\sigma=\left[  s_{2}\right]  _{\sim}$. But
Theorem \ref{thm.eqrel.eqcl.disj} \textbf{(e)} (applied to $x=s_{1}$ and
$y=s_{2}$) yields that we have $s_{1}\sim s_{2}$ if and only if $\left[
s_{1}\right]  _{\sim}=\left[  s_{2}\right]  _{\sim}$. Hence, we have
$s_{1}\sim s_{2}$ (since $\left[  s_{1}\right]  _{\sim}=\left[  s_{2}\right]
_{\sim}$). Thus, Assumption 1 shows that $F\left(  s_{1}\right)  =F\left(
s_{2}\right)  $, qed.}. Thus, the element $F\left(  s\right)  \in T$ obtained
from such an element $s$ does not depend on the choice of $s$ (as long as
$\sigma$ is fixed). Hence, we can define $\varphi\left(  \sigma\right)  $ by
setting
\begin{equation}
\varphi\left(  \sigma\right)  =F\left(  s\right)  ,
\label{pf.thm.eqrel.quot.uniprop.1.s1.pf.3}%
\end{equation}
where $s$ is any element of $S$ satisfying $\sigma=\left[  s\right]  _{\sim}$.

Define $\varphi\left(  \sigma\right)  $ this way. Thus, we have defined an
element $\varphi\left(  \sigma\right)  $ of $T$ for each $\sigma\in\left.
S/\sim\right.  $. Hence, we have defined a map $\varphi:\left.  S/\sim\right.
\rightarrow T$. Moreover, this map has the property that every $s\in S$
satisfies $\varphi\left(  \left[  s\right]  _{\sim}\right)  =F\left(
s\right)  $. (Indeed, this follows from
(\ref{pf.thm.eqrel.quot.uniprop.1.s1.pf.3}) (applied to $\sigma=\left[
s\right]  _{\sim}$), since obviously $\left[  s\right]  _{\sim}=\left[
s\right]  _{\sim}$.)

Hence, there exists \textbf{at least one} map $f:\left.  S/\sim\right.
\rightarrow T$ such that every $s\in S$ satisfies $f\left(  \left[  s\right]
_{\sim}\right)  =F\left(  s\right)  $ (namely, the map $\varphi$). This proves
Statement 1.]

[\textit{Proof of Statement 2:} Let $f_{1}$ and $f_{2}$ be two maps $f:\left.
S/\sim\right.  \rightarrow T$ such that every $s\in S$ satisfies $f\left(
\left[  s\right]  _{\sim}\right)  =F\left(  s\right)  $. We shall show that
$f_{1}=f_{2}$.

We know that $f_{1}$ is a map $f:\left.  S/\sim\right.  \rightarrow T$ such
that every $s\in S$ satisfies $f\left(  \left[  s\right]  _{\sim}\right)
=F\left(  s\right)  $. In other words, $f_{1}$ is a map from $\left.
S/\sim\right.  $ to $T$ and has the property that
\begin{equation}
\text{every }s\in S\text{ satisfies }f_{1}\left(  \left[  s\right]  _{\sim
}\right)  =F\left(  s\right)  . \label{pf.thm.eqrel.quot.uniprop.1.s2.pf.1}%
\end{equation}
Likewise, $f_{2}$ is a map from $\left.  S/\sim\right.  $ to $T$ and has the
property that
\begin{equation}
\text{every }s\in S\text{ satisfies }f_{2}\left(  \left[  s\right]  _{\sim
}\right)  =F\left(  s\right)  . \label{pf.thm.eqrel.quot.uniprop.1.s2.pf.2}%
\end{equation}


Now, let $\sigma\in\left.  S/\sim\right.  $ be arbitrary. Thus, $\sigma$ is an
equivalence class of $\sim$ (by the definition of $S/\sim$). In other words,
$\sigma=\left[  s\right]  _{\sim}$ for some element $s\in S$. Consider this
$s$. Then, from $\sigma=\left[  s\right]  _{\sim}$, we obtain $f_{1}\left(
\sigma\right)  =f_{1}\left(  \left[  s\right]  _{\sim}\right)  =F\left(
s\right)  $ (by (\ref{pf.thm.eqrel.quot.uniprop.1.s2.pf.1})). Similarly,
$f_{2}\left(  \sigma\right)  =F\left(  s\right)  $. Comparing these two
equalities, we find $f_{1}\left(  \sigma\right)  =f_{2}\left(  \sigma\right)
$.

Forget that we fixed $\sigma$. We thus have proven that $f_{1}\left(
\sigma\right)  =f_{2}\left(  \sigma\right)  $ for each $\sigma\in\left.
S/\sim\right.  $. In other words, $f_{1}=f_{2}$.

Forget that we fixed $f_{1}$ and $f_{2}$. We thus have proven that if $f_{1}$
and $f_{2}$ are two maps $f:\left.  S/\sim\right.  \rightarrow T$ such that
every $s\in S$ satisfies $f\left(  \left[  s\right]  _{\sim}\right)  =F\left(
s\right)  $, then $f_{1}=f_{2}$. In other words, there exists \textbf{at most
one} such map $f$. This proves Statement 2.]

Now, we conclude that there exists a unique map $f:\left.  S/\sim\right.
\rightarrow T$ such that every $s\in S$ satisfies $f\left(  \left[  s\right]
_{\sim}\right)  =F\left(  s\right)  $ (because Statement 1 shows that there
exists \textbf{at least one} such map, while Statement 2 shows that there
exists \textbf{at most one} such map). This proves Theorem
\ref{thm.eqrel.quot.uniprop.1}.
\end{proof}
\end{fineprint}

Theorem \ref{thm.eqrel.quot.uniprop.1} is known as the \textit{universal
property of the quotient set}.

\subsubsection{Projecting from $\mathbb{Z}/n$ to $\mathbb{Z}/d$}

As another example of a map from a quotient set, let us define certain maps
from $\mathbb{Z}/n$ to $\mathbb{Z}/d$ that exist whenever two positive
integers $n$ and $d$ satisfy $d\mid n$:

\begin{proposition}
\label{prop.eqrel.Zn.pind.wd}Let $n$ be a positive integer. Let $d$ be a
positive divisor of $n$. Then, there is a map%
\begin{align*}
\pi_{n,d}:\mathbb{Z}/n  &  \rightarrow\mathbb{Z}/d,\\
\left[  s\right]  _{n}  &  \mapsto\left[  s\right]  _{d}.
\end{align*}

\end{proposition}

\begin{example}
\label{exa.eqrel.Zn.pind.wd}\textbf{(a)} For example, for $n=6$ and $d=2$,
Proposition \ref{prop.eqrel.Zn.pind.wd} says that there is a map
\begin{align*}
\pi_{6,2}:\mathbb{Z}/6  &  \rightarrow\mathbb{Z}/2,\\
\left[  s\right]  _{6}  &  \mapsto\left[  s\right]  _{2}.
\end{align*}
This map sends the residue classes
\begin{align*}
&  \left[  0\right]  _{6},\left[  1\right]  _{6},\left[  2\right]
_{6},\left[  3\right]  _{6},\left[  4\right]  _{6},\left[  5\right]  _{6}\\
\text{to }  &  \left[  0\right]  _{2},\left[  1\right]  _{2},\left[  2\right]
_{2},\left[  3\right]  _{2},\left[  4\right]  _{2},\left[  5\right]
_{2}\text{, respectively.}%
\end{align*}
In other words, it sends the residue classes%
\begin{align*}
&  \left[  0\right]  _{6},\left[  1\right]  _{6},\left[  2\right]
_{6},\left[  3\right]  _{6},\left[  4\right]  _{6},\left[  5\right]  _{6}\\
\text{to }  &  \left[  0\right]  _{2},\left[  1\right]  _{2},\left[  0\right]
_{2},\left[  1\right]  _{2},\left[  0\right]  _{2},\left[  1\right]
_{2}\text{, respectively}%
\end{align*}
(since $\left[  2\right]  _{2}=\left[  0\right]  _{2}$ and $\left[  3\right]
_{2}=\left[  1\right]  _{2}$ and $\left[  4\right]  _{2}=\left[  0\right]
_{2}$ and $\left[  5\right]  _{2}=\left[  1\right]  _{2}$). More generally,
for arbitrary $n$ and $d$, the map $\pi_{n,d}$ sends the $n$ residue classes
$\left[  0\right]  _{n},\left[  1\right]  _{n},\ldots,\left[  n-1\right]
_{n}$ to
\[
\left[  0\right]  _{d},\left[  1\right]  _{d},\ldots,\left[  d-1\right]
_{d},\left[  0\right]  _{d},\left[  1\right]  _{d},\ldots,\left[  d-1\right]
_{d},\ldots,\left[  0\right]  _{d},\left[  1\right]  _{d},\ldots,\left[
d-1\right]  _{d}%
\]
(that is, $\left[  0\right]  _{d},\left[  1\right]  _{d},\ldots,\left[
d-1\right]  _{d}$ in this order, repeated $\dfrac{n}{d}$ many times), respectively.

\textbf{(b)} For a non-example, set $n=3$ and $d=2$. Then, Proposition
\ref{prop.eqrel.Zn.pind.wd} does not apply, since $2$ is not a divisor of $3$.
And for good reason: There is no map%
\begin{align*}
\pi_{3,2}:\mathbb{Z}/3  &  \rightarrow\mathbb{Z}/2,\\
\left[  s\right]  _{3}  &  \mapsto\left[  s\right]  _{2}.
\end{align*}
Indeed, this map would have to send $\left[  0\right]  _{3}$ and $\left[
3\right]  _{3}$ to $\left[  0\right]  _{2}$ and $\left[  3\right]  _{2}$,
respectively; but this means sending two equal inputs to different outputs
(since $\left[  0\right]  _{3}=\left[  3\right]  _{3}$ but $\left[  0\right]
_{2}\neq\left[  3\right]  _{2}$), which is impossible. More generally, if a
positive integer $d$ is \textbf{not} a divisor of a positive integer $n$, then
there is no map%
\begin{align*}
\pi_{n,d}:\mathbb{Z}/n  &  \rightarrow\mathbb{Z}/d,\\
\left[  s\right]  _{n}  &  \mapsto\left[  s\right]  _{d}.
\end{align*}

\end{example}

\begin{proof}
[Proof of Proposition \ref{prop.eqrel.Zn.pind.wd}.]We must prove that, for an
integer $s\in\mathbb{Z}$, the class $\left[  s\right]  _{d}\in\mathbb{Z}/d$
depends only on the residue class $\left[  s\right]  _{n}$ but not on the
integer $s$ itself. In other words, we need to prove the following claim:

\begin{statement}
\textit{Claim 1:} If $s_{1}$ and $s_{2}$ are two integers such that $\left[
s_{1}\right]  _{n}=\left[  s_{2}\right]  _{n}$, then, $\left[  s_{1}\right]
_{d}=\left[  s_{2}\right]  _{d}$.
\end{statement}

[\textit{Proof of Claim 1:} Let $s_{1}$ and $s_{2}$ be two integers such that
$\left[  s_{1}\right]  _{n}=\left[  s_{2}\right]  _{n}$.

Proposition \ref{prop.eqrel.Zn.ab} \textbf{(b)} (applied to $a=s_{1}$ and
$b=s_{2}$) shows that we have $\left[  s_{1}\right]  _{n}=\left[
s_{2}\right]  _{n}$ if and only if $s_{1}\equiv s_{2}\operatorname{mod}n$.
Thus, we have $s_{1}\equiv s_{2}\operatorname{mod}n$ (since $\left[
s_{1}\right]  _{n}=\left[  s_{2}\right]  _{n}$). Hence, Proposition
\ref{prop.ent.mod.basics} \textbf{(e)} (applied to $s_{1}$, $s_{2}$ and $d$
instead of $a$, $b$ and $m$) yields $s_{1}\equiv s_{2}\operatorname{mod}d$
(since $d\mid n$).

But Proposition \ref{prop.eqrel.Zn.ab} \textbf{(b)} (applied to $d$, $s_{1}$
and $s_{2}$ instead of $n$, $a$ and $b$) shows that we have $\left[
s_{1}\right]  _{d}=\left[  s_{2}\right]  _{d}$ if and only if $s_{1}\equiv
s_{2}\operatorname{mod}d$. Thus, we have $\left[  s_{1}\right]  _{d}=\left[
s_{2}\right]  _{d}$ (since $s_{1}\equiv s_{2}\operatorname{mod}d$). This
proves Claim 1.]

Having proven Claim 1, we can now conclude that the map%
\begin{align*}
\pi_{n,d}:\mathbb{Z}/n  &  \rightarrow\mathbb{Z}/d,\\
\left[  s\right]  _{n}  &  \mapsto\left[  s\right]  _{d}%
\end{align*}
is well-defined. (This can be regarded as a consequence of applying Theorem
\ref{thm.eqrel.quot.uniprop.1} to $\mathbb{Z}$, $\mathbb{Z}/d$,
$\underset{n}{\equiv}$ and $\left[  s\right]  _{d}$ instead of $S$, $T$,
$\sim$ and $F\left(  s\right)  $. The Claim 1 that we proved above guarantees
that Assumption 1 of Theorem \ref{thm.eqrel.quot.uniprop.1} is satisfied.)
Hence, Proposition \ref{prop.eqrel.Zn.pind.wd} is proven.
\end{proof}

The next exercise is unrelated to $\mathbb{Z}/n$, but has been placed in this
section because it relies on the same sort of \textquotedblleft
well-definedness\textquotedblright\ argument that we have seen in our proofs above:

\begin{exercise}
\label{exe.eqrel.quot.wp}Fix a prime $p$. For each nonzero rational number
$r$, define an integer $w_{p}\left(  r\right)  $ (called the \textit{extended
$p$-adic valuation} of $r$) as follows: We write $r$ in the form $r=a/b$ for
two nonzero integers $a$ and $b$, and we set $w_{p}\left(  r\right)
=v_{p}\left(  a\right)  -v_{p}\left(  b\right)  $. (It also makes sense to set
$w_{p}\left(  0\right)  =\infty$, but we shall not concern ourselves with this
border case in this exercise.)

\textbf{(a)} Prove that this is well-defined -- i.e., that $w_{p}\left(
r\right)  $ does not depend on the precise choice of $a$ and $b$ satisfying
$r=a/b$.

\textbf{(b)} Prove that $w_{p}\left(  n\right)  =v_{p}\left(  n\right)  $ for
each nonzero integer $n$.

\textbf{(c)} Prove that $w_{p}\left(  ab\right)  =w_{p}\left(  a\right)
+w_{p}\left(  b\right)  $ for any two nonzero rational numbers $a$ and $b$.

\textbf{(d)} Prove that $w_{p}\left(  a+b\right)  \geq\min\left\{
w_{p}\left(  a\right)  ,w_{p}\left(  b\right)  \right\}  $ for any two nonzero
rational numbers $a$ and $b$ if $a+b\neq0$.
\end{exercise}

\subsubsection{Addition, subtraction and multiplication in $\mathbb{Z}/n$}

Let us recall the concept of a binary operation (defined in Definition
\ref{def.intro.binop}). We shall now define several such operations on the set
$\mathbb{Z}/n$\ \ \ \ \footnote{We will check afterwards that these operations
are indeed well-defined.}:

\begin{definition}
\label{def.eqrel.Z/n.op}\textbf{(a)} We define a binary operation $+$ on
$\mathbb{Z}/n$ (called \textit{addition}) by setting%
\[
\left[  a\right]  _{n}+\left[  b\right]  _{n}=\left[  a+b\right]
_{n}\ \ \ \ \ \ \ \ \ \ \text{for any integers }a\text{ and }b.
\]
(In other words, we define a binary operation $+$ on $\mathbb{Z}/n$ as
follows: For any $\alpha,\beta\in\mathbb{Z}/n$, we let $\alpha+\beta=\left[
a+b\right]  _{n}$, where $a$ and $b$ are two integers satisfying
$\alpha=\left[  a\right]  _{n}$ and $\beta=\left[  b\right]  _{n}$.)

\textbf{(b)} We define a binary operation $-$ on $\mathbb{Z}/n$ (called
\textit{subtraction}) by setting%
\[
\left[  a\right]  _{n}-\left[  b\right]  _{n}=\left[  a-b\right]
_{n}\ \ \ \ \ \ \ \ \ \ \text{for any integers }a\text{ and }b.
\]


\textbf{(c)} We define a binary operation $\cdot$ on $\mathbb{Z}/n$ (called
\textit{multiplication}) by setting%
\[
\left[  a\right]  _{n}\cdot\left[  b\right]  _{n}=\left[  a\cdot b\right]
_{n}\ \ \ \ \ \ \ \ \ \ \text{for any integers }a\text{ and }b.
\]
We also write $\left[  a\right]  _{n}\left[  b\right]  _{n}$ for $\left[
a\right]  _{n}\cdot\left[  b\right]  _{n}$.
\end{definition}

\begin{theorem}
\label{thm.eqrel.Z/n.op.wd}Everything defined in Definition
\ref{def.eqrel.Z/n.op} is well-defined.
\end{theorem}

\begin{proof}
[Proof of Theorem \ref{thm.eqrel.Z/n.op.wd}.]\textbf{(a)} Let us first prove
that the binary operation $+$ in Definition \ref{def.eqrel.Z/n.op}
\textbf{(a)} is well-defined.

Indeed, here we are in the same situation in which we were when defining the
map $R$ in the proof of Theorem \ref{thm.eqrel.Zn.explicit}: We are trying to
define a map (in the current case, the binary operation $+$, which should be a
map from $\left(  \mathbb{Z}/n\right)  \times\left(  \mathbb{Z}/n\right)  $ to
$\mathbb{Z}/n$) by specifying how it acts on inputs of the form $\left[
a\right]  _{n}$, but our definition refers to the integer $a$. (Actually, it
is a little bit more complicated: We have two inputs $\left[  a\right]  _{n}$
and $\left[  b\right]  _{n}$ and thus two integers $a$ and $b$. But the
problem we are facing is the same.) We want to prove that this map is
well-defined. This requires checking that the output (that is, $\left[
a+b\right]  _{n}$) depends only on the two classes $\left[  a\right]  _{n}$
and $\left[  b\right]  _{n}$, but not on the integers $a$ and $b$.

So we have to prove the following:

\begin{statement}
\textit{Claim 1:} Let $a_{1}$ and $a_{2}$ be two integers such that $\left[
a_{1}\right]  _{n}=\left[  a_{2}\right]  _{n}$. Let $b_{1}$ and $b_{2}$ be two
integers such that $\left[  b_{1}\right]  _{n}=\left[  b_{2}\right]  _{n}$.
Then,%
\[
\left[  a_{1}+b_{1}\right]  _{n}=\left[  a_{2}+b_{2}\right]  _{n}.
\]

\end{statement}

[\textit{Proof of Claim 1:} Proposition \ref{prop.eqrel.Zn.ab} \textbf{(b)}
(applied to $a_{1}$ and $a_{2}$ instead of $a$ and $b$) shows that we have
$\left[  a_{1}\right]  _{n}=\left[  a_{2}\right]  _{n}$ if and only if
$a_{1}\equiv a_{2}\operatorname{mod}n$. Thus, we have $a_{1}\equiv
a_{2}\operatorname{mod}n$ (since $\left[  a_{1}\right]  _{n}=\left[
a_{2}\right]  _{n}$). Similarly, $b_{1}\equiv b_{2}\operatorname{mod}n$ (since
$\left[  b_{1}\right]  _{n}=\left[  b_{2}\right]  _{n}$). Adding these two
congruences together, we obtain $a_{1}+b_{1}\equiv a_{2}+b_{2}%
\operatorname{mod}n$.

But Proposition \ref{prop.eqrel.Zn.ab} \textbf{(b)} (applied to $a_{1}+b_{1}$
and $a_{2}+b_{2}$ instead of $a$ and $b$) shows that we have $\left[
a_{1}+b_{1}\right]  _{n}=\left[  a_{2}+b_{2}\right]  _{n}$ if and only if
$a_{1}+b_{1}\equiv a_{2}+b_{2}\operatorname{mod}n$. Thus, we have $\left[
a_{1}+b_{1}\right]  _{n}=\left[  a_{2}+b_{2}\right]  _{n}$ (since $a_{1}%
+b_{1}\equiv a_{2}+b_{2}\operatorname{mod}n$). This proves Claim 1.]

Claim 1 shows that in Definition \ref{def.eqrel.Z/n.op} \textbf{(a)}, the
residue class $\left[  a+b\right]  _{n}$ depends only on the two classes
$\left[  a\right]  _{n}$ and $\left[  b\right]  _{n}$, but not on the integers
$a$ and $b$. Thus, the binary operation $+$ is indeed well-defined.

\textbf{(b)} The binary operation $-$ in Definition \ref{def.eqrel.Z/n.op}
\textbf{(b)} is well-defined. This can be proven in the same way as we just
proved that the binary operation $+$ in Definition \ref{def.eqrel.Z/n.op}
\textbf{(a)} is well-defined; the only difference is that we now have to
subtract the congruences $a_{1}\equiv a_{2}\operatorname{mod}n$ and
$b_{1}\equiv b_{2}\operatorname{mod}n$ instead of adding them together.

\textbf{(c)} The binary operation $\cdot$ in Definition \ref{def.eqrel.Z/n.op}
\textbf{(c)} is well-defined. This can be proven in the same way as we just
proved that the binary operation $+$ in Definition \ref{def.eqrel.Z/n.op}
\textbf{(a)} is well-defined; the only difference is that we now have to
multiply the congruences $a_{1}\equiv a_{2}\operatorname{mod}n$ and
$b_{1}\equiv b_{2}\operatorname{mod}n$ instead of adding them together.

Thus, we have proven that all three operations $+$, $-$ and $\cdot$ in
Definition \ref{def.eqrel.Z/n.op} are well-defined. This proves Theorem
\ref{thm.eqrel.Z/n.op.wd}.
\end{proof}

\begin{remark}
We \textbf{cannot} define a division operation on $\mathbb{Z}/n$ by setting%
\[
\left[  a\right]  _{n}/\left[  b\right]  _{n}:=\left[  a/b\right]
_{n}\ \ \ \ \ \ \ \ \ \ \text{for any integers }a\text{ and }b.
\]
Indeed, leaving aside the issues that $b$ could be $0$ or $a/b$ could be
non-integer, this would still not be well-defined, because the class $\left[
a/b\right]  _{n}$ depends not just on $\left[  a\right]  _{n}$ and $\left[
b\right]  _{n}$ but also on the concrete choices of $a$ and $b$. For example,
for $n=4$, this ostensible \textquotedblleft division
operation\textquotedblright\ would have to satisfy
\[
\text{\textquotedblleft}\left[  6\right]  _{4}/\left[  2\right]
_{4}\text{\textquotedblright}=\left[  6/2\right]  _{4}=\left[  3\right]  _{4}%
\]
and%
\[
\text{\textquotedblleft}\left[  2\right]  _{4}/\left[  2\right]
_{4}\text{\textquotedblright}=\left[  2/2\right]  _{4}=\left[  1\right]
_{4},
\]
but this is impossible (since $\left[  6\right]  _{4}=\left[  2\right]  _{4}$
but $\left[  3\right]  _{4}\neq\left[  1\right]  _{4}$).

For similar reasons, we cannot define $\left(  \left[  a\right]  _{n}\right)
^{\left[  b\right]  _{n}}$.
\end{remark}

For the outputs of our binary operations $+$, $-$ and $\cdot$ on
$\mathbb{Z}/n$, we shall use the same terminology as with integers:

\begin{definition}
\label{def.eqrel.Z/n.sum-diff-prod}\textbf{(a)} If $\alpha$ and $\beta$ are
two elements of $\mathbb{Z}/n$, then we shall refer to $\alpha+\beta$ as the
\textit{sum} of $\alpha$ and $\beta$.

\textbf{(b)} If $\alpha$ and $\beta$ are two elements of $\mathbb{Z}/n$, then
we shall refer to $\alpha-\beta$ as the \textit{difference} of $\alpha$ and
$\beta$.

\textbf{(c)} If $\alpha$ and $\beta$ are two elements of $\mathbb{Z}/n$, then
we shall refer to $\alpha\cdot\beta$ (also known as $\alpha\beta$) as the
\textit{product} of $\alpha$ and $\beta$.
\end{definition}

Caution: While the remainder $i\%n$ and the residue class $\left[  i\right]
_{n}$ encode the same information about an integer $i$ (for fixed $n$), they
are not the same thing! For example, any two integers $u$ and $v$ satisfy
$\left[  u\right]  _{n}+\left[  v\right]  _{n}=\left[  u+v\right]  _{n}$ but
don't always satisfy $u\%n+v\%n=\left(  u+v\right)  \%n$\ \ \ \ \footnote{Here
is a specific example:%
\begin{align*}
\left[  2\right]  _{5}+\left[  3\right]  _{5}  &  =\left[  2+3\right]
_{5}=\left[  5\right]  _{5}=\left[  0\right]  _{5}%
,\ \ \ \ \ \ \ \ \ \ \text{but}\\
2\%5+3\%5  &  =2+3=5\neq0\%5;
\end{align*}
\par
Exercise \ref{exe.ent.quo-rem.u+v} addresses how $u\%n+v\%n$ differs from
$\left(  u+v\right)  \%n$.}. Thus, it is important to distinguish between
$i\%n$ and $\left[  i\right]  _{n}$.

\begin{remark}
We can view the residue classes modulo $24$ (that is, the elements of
$\mathbb{Z}/24$) as the hours of the day. For example, the time
\textquotedblleft2 AM\textquotedblright\ can be viewed as the residue class
$\left[  2\right]  _{24}$, whereas the time \textquotedblleft3
PM\textquotedblright\ can be viewed as the residue class $\left[  15\right]
_{24}$. From this point of view, addition of residue classes is a rather
familiar operation: For example, the statement that \textquotedblleft10 hours
from 3 PM is 1 AM\textquotedblright\ is saying $\left[  15\right]
_{24}+\left[  10\right]  _{24}=\left[  1\right]  _{24}$.
\end{remark}

\subsubsection{Scaling by $r\in\mathbb{Z}$}

Let us define another operation -- not binary this time -- on $\mathbb{Z}/n$:

\begin{definition}
\label{def.eqrel.Z/n.scaling}Fix $r\in\mathbb{Z}$.

For any $\alpha\in\mathbb{Z}/n$, we define a residue class $r\alpha
\in\mathbb{Z}/n$ by setting
\[
\left(  r\left[  a\right]  _{n}=\left[  ra\right]  _{n}%
\ \ \ \ \ \ \ \ \ \ \text{for any }a\in\mathbb{Z}\right)  .
\]
(In other words, for any $\alpha\in\mathbb{Z}/n$, we let $r\alpha=\left[
ra\right]  _{n}$, where $a$ is an integer satisfying $\alpha=\left[  a\right]
_{n}$.) This is well-defined, because of Proposition
\ref{prop.eqrel.Z/n.scaling.wd} \textbf{(a)} below.

We also write $r\cdot\left[  a\right]  _{n}$ for $r\left[  a\right]  _{n}$.
\end{definition}

\begin{proposition}
\label{prop.eqrel.Z/n.scaling.wd}Fix $r\in\mathbb{Z}$.

\textbf{(a)} For any $\alpha\in\mathbb{Z}/n$, the residue class $r\alpha
\in\mathbb{Z}/n$ in Definition \ref{def.eqrel.Z/n.scaling} is well-defined.

\textbf{(b)} For any $\alpha\in\mathbb{Z}/n$, we have $r\alpha=\left[
r\right]  _{n}\cdot\alpha$.
\end{proposition}

\begin{proof}
[Proof of Proposition \ref{prop.eqrel.Z/n.scaling.wd}.]\textbf{(a)} We are
again in the same situation in which we were when defining the map $R$ in the
proof of Theorem \ref{thm.eqrel.Zn.explicit}: We are trying to define a map
(in this case, the map%
\begin{align*}
\mathbb{Z}/n  &  \rightarrow\mathbb{Z}/n,\\
\alpha &  \mapsto r\alpha
\end{align*}
) by specifying how it acts on inputs of the form $\left[  a\right]  _{n}$,
but our definition refers to the integer $a$. We want to prove that this map
is well-defined. This requires checking that the output (that is, $\left[
ra\right]  _{n}$) depends only on the class $\left[  a\right]  _{n}$, but not
on the integer $a$. So we have to prove the following:

\begin{statement}
\textit{Claim 1:} Let $a_{1}$ and $a_{2}$ be two integers such that $\left[
a_{1}\right]  _{n}=\left[  a_{2}\right]  _{n}$. Then, $\left[  ra_{1}\right]
_{n}=\left[  ra_{2}\right]  $.
\end{statement}

[\textit{Proof of Claim 1:} Proposition \ref{prop.eqrel.Zn.ab} \textbf{(b)}
(applied to $a_{1}$ and $a_{2}$ instead of $a$ and $b$) shows that we have
$\left[  a_{1}\right]  _{n}=\left[  a_{2}\right]  _{n}$ if and only if
$a_{1}\equiv a_{2}\operatorname{mod}n$. Thus, we have $a_{1}\equiv
a_{2}\operatorname{mod}n$ (since $\left[  a_{1}\right]  _{n}=\left[
a_{2}\right]  _{n}$). On the other hand, we have the (obvious) congruence
$r\equiv r\operatorname{mod}n$. Multiplying this congruence by the congruence
$a_{1}\equiv a_{2}\operatorname{mod}n$, we obtain $ra_{1}\equiv ra_{2}%
\operatorname{mod}n$.

But Proposition \ref{prop.eqrel.Zn.ab} \textbf{(b)} (applied to $ra_{1}$ and
$ra_{2}$ instead of $a$ and $b$) shows that we have $\left[  ra_{1}\right]
_{n}=\left[  ra_{2}\right]  _{n}$ if and only if $ra_{1}\equiv ra_{2}%
\operatorname{mod}n$. Thus, we have $\left[  ra_{1}\right]  _{n}=\left[
ra_{2}\right]  _{n}$ (since $ra_{1}\equiv ra_{2}\operatorname{mod}n$). This
proves Claim 1.]

Claim 1 shows that in Definition \ref{def.eqrel.Z/n.scaling}, the residue
class $\left[  ra\right]  _{n}$ depends only on the class $\left[  a\right]
_{n}$, but not on the integer $a$. Thus, the residue class $r\alpha$ is indeed
well-defined for each $\alpha\in\mathbb{Z}/n$. This proves Proposition
\ref{prop.eqrel.Z/n.scaling.wd} \textbf{(a)}.

\textbf{(b)} Let $\alpha\in\mathbb{Z}/n$. Proposition \ref{prop.eqrel.Zn.ab}
\textbf{(a)} shows that each element of $\mathbb{Z}/n$ can be written in the
form $\left[  s\right]  _{n}$ for some integer $s$. Thus, $\alpha\in
\mathbb{Z}/n$ can be written in this form. In other words, $\alpha=\left[
a\right]  _{n}$ for some integer $a$. Consider this $a$. Comparing%
\[
r\underbrace{\alpha}_{=\left[  a\right]  _{n}}=r\left[  a\right]  _{n}=\left[
ra\right]  _{n}\ \ \ \ \ \ \ \ \ \ \left(  \text{by Definition
\ref{def.eqrel.Z/n.scaling}}\right)
\]
with%
\begin{align*}
\left[  r\right]  _{n}\cdot\underbrace{\alpha}_{=\left[  a\right]  _{n}}  &
=\left[  r\right]  _{n}\cdot\left[  \alpha_{n}\right]  =\left[  r\cdot
a\right]  _{n}\ \ \ \ \ \ \ \ \ \ \left(  \text{by Definition
\ref{def.eqrel.Z/n.op} \textbf{(c)}}\right) \\
&  =\left[  ra\right]  _{n},
\end{align*}
we obtain $r\alpha=\left[  r\right]  _{n}\cdot\alpha$. This proves Proposition
\ref{prop.eqrel.Z/n.scaling.wd} \textbf{(b)}.
\end{proof}

For a fixed $r\in\mathbb{Z}$, we shall refer to the map
\begin{align*}
\mathbb{Z}/n  &  \rightarrow\mathbb{Z}/n,\\
\alpha &  \mapsto r\alpha
\end{align*}
as \textit{scaling by }$r$. This map is actually the same as multiplication by
the residue class $\left[  r\right]  _{n}$ (by Proposition
\ref{prop.eqrel.Z/n.scaling.wd} \textbf{(b)}). So why did we define it
\textquotedblleft from scratch\textquotedblright\ rather than piggybacking on
the already established definition of multiplication in $\mathbb{Z}/n$
(Definition \ref{def.eqrel.Z/n.op} \textbf{(c)})? The reason is that scaling
operations appear much more frequently in algebra than multiplication
operations. (For example, every vector space has a scaling operation, but
usually there is no way of multiplying two vectors.) Thus, it is useful to
have seen a scaling operation constructed independently.

\subsubsection{$k$-th powers for $k\in\mathbb{N}$}

Similarly to Definition \ref{def.eqrel.Z/n.scaling}, we can define what it
means to take the $k$-th power of a residue class in $\mathbb{Z}/n$, when $k$
is a nonnegative integer.

\begin{definition}
\label{def.eqrel.Z/n.kpower}Fix $k\in\mathbb{N}$.

For any $\alpha\in\mathbb{Z}/n$, we define a residue class $\alpha^{k}%
\in\mathbb{Z}/n$ by setting
\[
\left(  \left(  \left[  a\right]  _{n}\right)  ^{k}=\left[  a^{k}\right]
_{n}\ \ \ \ \ \ \ \ \ \ \text{for any }a\in\mathbb{Z}\right)  .
\]
(In other words, for any $\alpha\in\mathbb{Z}/n$, we let $\alpha^{k}=\left[
a^{k}\right]  _{n}$, where $a$ is an integer satisfying $\alpha=\left[
a\right]  _{n}$.) This is well-defined, because of Proposition
\ref{prop.eqrel.Z/n.kpower.wd} below.

If $\alpha\in\mathbb{Z}/n$, then we shall refer to $\alpha^{k}$ as the
$k$\textit{-th power} of $\alpha$.
\end{definition}

\begin{proposition}
\label{prop.eqrel.Z/n.kpower.wd}Fix $k\in\mathbb{N}$. For any $\alpha
\in\mathbb{Z}/n$, the residue class $\alpha^{k}\in\mathbb{Z}/n$ in Definition
\ref{def.eqrel.Z/n.kpower} is well-defined.
\end{proposition}

\begin{proof}
[Proof of Proposition \ref{prop.eqrel.Z/n.scaling.wd}.]This proof is analogous
to the above proof of Proposition \ref{prop.eqrel.Z/n.scaling.wd}
\textbf{(a)}; but instead of multiplying the two congruences $r\equiv
r\operatorname{mod}n$ and $a_{1}\equiv a_{2}\operatorname{mod}n$, we now need
to take the $k$-th power of the congruence $a_{1}\equiv a_{2}%
\operatorname{mod}n$. (Exercise \ref{exe.ent.mod.basics.k-power} allows us to
do that.)
\end{proof}

\begin{center}
\textbf{2019-02-25 lecture}
\end{center}

\subsubsection{Rules and properties for the operations}

\begin{convention}
We shall follow \href{https://en.wikipedia.org/wiki/Order_of_operations}{the
usual \textquotedblleft PEMDAS\textquotedblright\ rules for the order of
operations} when interpreting expressions involving the operations defined in
Definition \ref{def.eqrel.Z/n.op}, Definition \ref{def.eqrel.Z/n.scaling} and
Definition \ref{def.eqrel.Z/n.kpower}\footnote{The scaling operation (defined
in Definition \ref{def.eqrel.Z/n.scaling}) is treated exactly like
multiplication.}. Thus, for example, the expression \textquotedblleft%
$\alpha\cdot\beta+\gamma\cdot\delta$\textquotedblright\ means $\left(
\alpha\cdot\beta\right)  +\left(  \gamma\cdot\delta\right)  $ and not
$\alpha\cdot\left(  \beta+\gamma\right)  \cdot\delta$. Likewise, the
expression \textquotedblleft$\alpha\beta^{k}+r\gamma$\textquotedblright\ (with
$r\in\mathbb{Z}$) should be understood as \textquotedblleft$\left(
\alpha\left(  \beta^{k}\right)  \right)  +\left(  r\gamma\right)
$\textquotedblright\ and not in any other way.
\end{convention}

We shall now study some properties of the many \textquotedblleft
arithmetical\textquotedblright\ operations we have defined on $\mathbb{Z}/n$.

\begin{theorem}
\label{thm.eqrel.Z/n.rules}The following rules for addition, subtraction and
multiplication in $\mathbb{Z}/n$ hold:

\textbf{(a)} We have $\alpha+\beta=\beta+\alpha$ for any $\alpha,\beta
\in\mathbb{Z}/n$.

\textbf{(b)} We have $\alpha+\left(  \beta+\gamma\right)  =\left(
\alpha+\beta\right)  +\gamma$ for any $\alpha,\beta,\gamma\in\mathbb{Z}/n$.

\textbf{(c)} We have $\alpha+\left[  0\right]  _{n}=\alpha$ for any $\alpha
\in\mathbb{Z}/n$.

\textbf{(d)} We have $\alpha\cdot\left[  1\right]  _{n}=\alpha$ for any
$\alpha\in\mathbb{Z}/n$.

\textbf{(e)} We have $\alpha\cdot\beta=\beta\cdot\alpha$ for any $\alpha
,\beta\in\mathbb{Z}/n$.

\textbf{(f)} We have $\alpha\cdot\left(  \beta\cdot\gamma\right)  =\left(
\alpha\cdot\beta\right)  \cdot\gamma$ for any $\alpha,\beta,\gamma
\in\mathbb{Z}/n$.

\textbf{(g)} We have $\alpha\cdot\left(  \beta+\gamma\right)  =\alpha
\beta+\alpha\gamma$ and $\left(  \alpha+\beta\right)  \cdot\gamma=\alpha
\gamma+\beta\gamma$ for any $\alpha,\beta,\gamma\in\mathbb{Z}/n$.

\textbf{(h)} We have $\alpha\cdot\left[  0\right]  _{n}=\left[  0\right]
_{n}$ for any $\alpha\in\mathbb{Z}/n$.

\textbf{(i)} If $\alpha,\beta,\gamma\in\mathbb{Z}/n$, then we have the
equivalence $\left(  \alpha-\beta=\gamma\right)  \Longleftrightarrow\left(
\alpha=\beta+\gamma\right)  $.

\textbf{(j)} We have $r\left(  \alpha+\beta\right)  =r\alpha+r\beta$ for any
$r\in\mathbb{Z}$ and $\alpha,\beta\in\mathbb{Z}/n$.

\textbf{(k)} We have $r\left(  s\alpha\right)  =\left(  rs\right)  \alpha$ for
any $r,s\in\mathbb{Z}$ and $\alpha\in\mathbb{Z}/n$.
\end{theorem}

These properties should all look familiar, as they mirror the classical
properties of the arithmetic operations on integers, rational numbers and real
numbers (with the caveat that the residue classes $\left[  0\right]  _{n}$ and
$\left[  1\right]  _{n}$ take on the roles of the numbers $0$ and $1$). For
example, Theorem \ref{thm.eqrel.Z/n.rules} \textbf{(g)} corresponds to the
laws of distributivity for numbers. Parts \textbf{(a)}, \textbf{(b)},
\textbf{(c)}, \textbf{(i)}, \textbf{(j)} and \textbf{(k)} of Theorem
\ref{thm.eqrel.Z/n.rules} furthermore are reminiscent of the axioms for a
vector space (with the caveat that scaling by $r$ is only defined for integers
$r$ here, so $\mathbb{Z}/n$ is not precisely a vector space).

\begin{proof}
[Proof of Theorem \ref{thm.eqrel.Z/n.rules}.]Let us first prove Theorem
\ref{thm.eqrel.Z/n.rules} \textbf{(f)}:

\textbf{(f)} Let $\alpha,\beta,\gamma\in\mathbb{Z}/n$. Proposition
\ref{prop.eqrel.Zn.ab} \textbf{(a)} shows that each element of $\mathbb{Z}/n$
can be written in the form $\left[  s\right]  _{n}$ for some integer $s$.
Thus, in particular, the element $\alpha$ can be written in this form. In
other words, there exists an integer $a$ such that $\alpha=\left[  a\right]
_{n}$. Similarly, there exists an integer $b$ such that $\beta=\left[
b\right]  _{n}$. Similarly, there exists an integer $c$ such that
$\gamma=\left[  c\right]  _{n}$. Consider these integers $a,b,c$.

Now,%
\begin{align}
\underbrace{\alpha}_{=\left[  a\right]  _{n}}\cdot\left(  \underbrace{\beta
}_{=\left[  b\right]  _{n}}\cdot\underbrace{\gamma}_{=\left[  c\right]  _{n}%
}\right)   &  =\left[  a\right]  _{n}\cdot\underbrace{\left(  \left[
b\right]  _{n}\cdot\left[  c\right]  _{n}\right)  }_{\substack{=\left[  b\cdot
c\right]  _{n}\\\text{(by Definition \ref{def.eqrel.Z/n.op} \textbf{(c)})}%
}}=\left[  a\right]  _{n}\cdot\left[  b\cdot c\right]  _{n}\nonumber\\
&  =\left[  a\cdot\left(  b\cdot c\right)  \right]  _{n}
\label{pf.thm.eqrel.Z/n.rules.f.1}%
\end{align}
(by Definition \ref{def.eqrel.Z/n.op} \textbf{(c)}) and%
\begin{align}
\left(  \underbrace{\alpha}_{=\left[  a\right]  _{n}}\cdot\underbrace{\beta
}_{=\left[  b\right]  _{n}}\right)  \cdot\underbrace{\gamma}_{=\left[
c\right]  _{n}}  &  =\underbrace{\left(  \left[  a\right]  _{n}\cdot\left[
b\right]  _{n}\right)  }_{\substack{=\left[  a\cdot b\right]  _{n}\\\text{(by
Definition \ref{def.eqrel.Z/n.op} \textbf{(c)})}}}\cdot\left[  c\right]
_{n}=\left[  a\cdot b\right]  _{n}\cdot\left[  c\right]  _{n}\nonumber\\
&  =\left[  \left(  a\cdot b\right)  \cdot c\right]  _{n}
\label{pf.thm.eqrel.Z/n.rules.f.2}%
\end{align}
(by Definition \ref{def.eqrel.Z/n.op} \textbf{(c)}).

But it is well-known that multiplication of integers is associative. Thus,
$a\cdot\left(  b\cdot c\right)  =\left(  a\cdot b\right)  \cdot c$. Hence,
$\left[  a\cdot\left(  b\cdot c\right)  \right]  _{n}=\left[  \left(  a\cdot
b\right)  \cdot c\right]  _{n}$. In other words, the right hand sides of the
equalities (\ref{pf.thm.eqrel.Z/n.rules.f.1}) and
(\ref{pf.thm.eqrel.Z/n.rules.f.2}) are equal. Hence, the left hand sides of
these equalities must also be equal. In other words, $\alpha\cdot\left(
\beta\cdot\gamma\right)  =\left(  \alpha\cdot\beta\right)  \cdot\gamma$. This
proves Theorem \ref{thm.eqrel.Z/n.rules} \textbf{(f)}.

The idea of the above proof of Theorem \ref{thm.eqrel.Z/n.rules} \textbf{(f)}
was simple: We fixed a representative for each residue class involved (namely,
we fixed representatives $a,b,c$ for the residue classes $\alpha,\beta,\gamma
$), and rewrote each of the two sides of the alleged equality (which, in our
case, was $\alpha\cdot\left(  \beta\cdot\gamma\right)  =\left(  \alpha
\cdot\beta\right)  \cdot\gamma$) in terms of these representatives (obtaining
$\left[  a\cdot\left(  b\cdot c\right)  \right]  _{n}$ for the left hand side,
and $\left[  \left(  a\cdot b\right)  \cdot c\right]  _{n}$ for the right hand
side). Thus, the equality that we had to prove followed from the analogous
equality for integers (in our case, $a\cdot\left(  b\cdot c\right)  =\left(
a\cdot b\right)  \cdot c$), which was well-known. In short, we have realized
that the equality $\alpha\cdot\left(  \beta\cdot\gamma\right)  =\left(
\alpha\cdot\beta\right)  \cdot\gamma$ for $\alpha,\beta,\gamma\in\mathbb{Z}/n$
is \textquotedblleft inherited from $\mathbb{Z}$\textquotedblright\ (in the
sense that it follows straightforwardly from the corresponding property
$a\cdot\left(  b\cdot c\right)  =\left(  a\cdot b\right)  \cdot c$ of integers
$a,b,c\in\mathbb{Z}$). This strategy proves all the other parts of Theorem
\ref{thm.eqrel.Z/n.rules} in the same way, except for part \textbf{(i)}%
.\footnote{The reason why this works is that the operations $+,-,\cdot$ on
$\mathbb{Z}/n$ as well as scaling by integers are defined by picking a
representative of each residue class and doing the analogous operation
\textbf{with the representatives} (and then taking the residue class again).}
Part \textbf{(i)} does not lend itself to such a proof, since it claims not an
equality but rather an equivalence between two equalities. So let us prove
part \textbf{(i)} separately:

\textbf{(i)} Let $\alpha,\beta,\gamma\in\mathbb{Z}/n$. Proposition
\ref{prop.eqrel.Zn.ab} \textbf{(a)} shows that each element of $\mathbb{Z}/n$
can be written in the form $\left[  s\right]  _{n}$ for some integer $s$.
Thus, in particular, the element $\alpha$ can be written in this form. In
other words, there exists an integer $a$ such that $\alpha=\left[  a\right]
_{n}$. Similarly, there exists an integer $b$ such that $\beta=\left[
b\right]  _{n}$. Similarly, there exists an integer $c$ such that
$\gamma=\left[  c\right]  _{n}$. Consider these integers $a,b,c$.

We have $\underbrace{\alpha}_{=\left[  a\right]  _{n}}-\underbrace{\beta
}_{=\left[  b\right]  _{n}}=\left[  a\right]  _{n}-\left[  b\right]
_{n}=\left[  a-b\right]  _{n}$ (by Definition \ref{def.eqrel.Z/n.op}
\textbf{(b)}) and $\underbrace{\beta}_{=\left[  b\right]  _{n}}%
+\underbrace{\gamma}_{=\left[  c\right]  _{n}}=\left[  b\right]  _{n}+\left[
c\right]  _{n}=\left[  b+c\right]  _{n}$ (by Definition \ref{def.eqrel.Z/n.op}
\textbf{(a)}). Now, we have the following chain of logical equivalences:%
\begin{align}
\left(  \alpha-\beta=\gamma\right)  \  &  \Longleftrightarrow\ \left(  \left[
a-b\right]  _{n}=\left[  c\right]  _{n}\right)  \ \ \ \ \ \ \ \ \ \ \left(
\text{since }\alpha-\beta=\left[  a-b\right]  _{n}\text{ and }\gamma=\left[
c\right]  _{n}\right) \nonumber\\
&  \Longleftrightarrow\ \left(  a-b\equiv c\operatorname{mod}n\right)
\label{pf.thm.eqrel.Z/n.rules.i.1}%
\end{align}
(since Proposition \ref{prop.eqrel.Zn.ab} \textbf{(b)} (applied to $a-b$ and
$c$ instead of $a$ and $b$) shows that we have $\left[  a-b\right]
_{n}=\left[  c\right]  _{n}$ if and only if $a-b\equiv c\operatorname{mod}n$).
Also, we have the following chain of logical equivalences:%
\begin{align}
\left(  \alpha=\beta+\gamma\right)  \  &  \Longleftrightarrow\ \left(  \left[
a\right]  _{n}=\left[  b+c\right]  _{n}\right)  \ \ \ \ \ \ \ \ \ \ \left(
\text{since }\alpha=\left[  a\right]  _{n}\text{ and }\beta+\gamma=\left[
b+c\right]  _{n}\right) \nonumber\\
&  \Longleftrightarrow\ \left(  a\equiv b+c\operatorname{mod}n\right)
\label{pf.thm.eqrel.Z/n.rules.i.2}%
\end{align}
(since Proposition \ref{prop.eqrel.Zn.ab} \textbf{(b)} (applied to $b+c$
instead of $b$) shows that we have $\left[  a\right]  _{n}=\left[  b+c\right]
_{n}$ if and only if $a\equiv b+c\operatorname{mod}n$). Finally, Exercise
\ref{exe.ent.mod.diff} shows that we have $a-b\equiv c\operatorname{mod}n$ if
and only if $a\equiv b+c\operatorname{mod}n$; thus, we have the equivalence
$\left(  a-b\equiv c\operatorname{mod}n\right)  \ \Longleftrightarrow\ \left(
a\equiv b+c\operatorname{mod}n\right)  $.

Now, we have the following chain of logical equivalences:%
\begin{align*}
\left(  \alpha-\beta=\gamma\right)  \  &  \Longleftrightarrow\ \left(
a-b\equiv c\operatorname{mod}n\right)  \ \ \ \ \ \ \ \ \ \ \left(  \text{by
(\ref{pf.thm.eqrel.Z/n.rules.i.1})}\right) \\
&  \Longleftrightarrow\ \left(  a\equiv b+c\operatorname{mod}n\right)
\ \Longleftrightarrow\ \left(  \alpha=\beta+\gamma\right)
\ \ \ \ \ \ \ \ \ \ \left(  \text{by (\ref{pf.thm.eqrel.Z/n.rules.i.2}%
)}\right)  .
\end{align*}
This proves Theorem \ref{thm.eqrel.Z/n.rules} \textbf{(i)}.
\end{proof}

Recall the concept of a finite sum of integers (i.e., a sum of the form
$\sum_{i\in I}a_{i}$, where $I$ is a finite set and $a_{i}$ is an integer for
each $i\in I$), and the analogous concept of a finite product of integers
(i.e., a product of the form $\prod_{i\in I}a_{i}$). These concepts are
defined recursively\footnote{See \cite[\S 1.4.1 and \S 1.4.3]{detnotes} for
their definitions, and \cite[\S 2.14]{detnotes} for a proof that these are
well-defined.} and satisfy various rules\footnote{such as $\sum_{i\in
I}\left(  a_{i}+b_{i}\right)  =\sum_{i\in I}a_{i}+\sum_{i\in I}b_{i}$ (where
$a_{i}$ and $b_{i}$ are two integers for each $i\in I$) or $\sum_{i\in I}%
a_{i}=\sum_{i\in J}a_{i}+\sum_{i\in I\setminus J}a_{i}$ (where $J$ is a subset
of $I$)}. See \cite[\S 1.4]{detnotes} for a comprehensive list of these rules
and \cite[\S 2.14]{detnotes} for their proofs.

\begin{definition}
\label{def.eqrel.Z/n.sums}In the same vein, we define the concept of a finite
sum of residue classes in $\mathbb{Z}/n$ (i.e., a sum of the form $\sum_{i\in
I}\alpha_{i}$, where $I$ is a finite set and $\alpha_{i}\in\mathbb{Z}/n$ for
each $i\in I$), and the analogous concept of a finite product of residue
classes in $\mathbb{Z}/n$ (i.e., a product of the form $\prod_{i\in I}%
\alpha_{i}$, where $I$ is a finite set and $\alpha_{i}\in\mathbb{Z}/n$ for
each $i\in I$).

More precisely, the concept of a finite sum $\sum_{i\in I}\alpha_{i}$ (with
$I$ being a finite set, and with $\alpha_{i}\in\mathbb{Z}/n$ for each $i\in
I$) is defined recursively as follows:

\begin{itemize}
\item If the set $I$ is empty (that is, $\left\vert I\right\vert =0$), then
$\sum_{i\in I}\alpha_{i}$ is defined to be $\left[  0\right]  _{n}%
\in\mathbb{Z}/n$ (and called an empty sum).

\item Otherwise, we pick an arbitrary element $t\in I$, and set%
\[
\sum_{i\in I}\alpha_{i}=\alpha_{t}+\sum_{i\in I\setminus\left\{  t\right\}
}\alpha_{i}.
\]
(The sum $\sum_{i\in I\setminus\left\{  t\right\}  }\alpha_{i}$ on the right
hand side is a sum over a smaller set than $I$, whence we can assume it to
already be defined in this recursive definition.)
\end{itemize}

This definition is well-defined (i.e., the choice of element $t$ does not
influence the final value of the sum), by Proposition
\ref{prop.eqrel.Z/n.sums.wd} \textbf{(a)} below.

The concept of a finite product $\prod_{i\in I}\alpha_{i}$ is defined
similarly, except that we use multiplication instead of addition (and we
define the empty product to be $\left[  1\right]  _{n}$ instead of $\left[
0\right]  _{n}$).
\end{definition}

We will use the usual shorthands for special kinds of finite sums and
products. For example, if $I$ is an interval $\left\{  p,p+1,\ldots,q\right\}
$ of integers (and if $\alpha_{i}\in\mathbb{Z}/n$ for each $i\in I$), then the
sum $\sum_{i\in I}\alpha_{i}$ will also be denoted by $\sum_{i=p}^{q}%
\alpha_{i}$ or $\alpha_{p}+\alpha_{p+1}+\cdots+\alpha_{q}$. Likewise for
products. Thus, for example, $\alpha_{1}+\alpha_{2}+\cdots+\alpha_{k}$ and
$\alpha_{1}\alpha_{2}\cdots\alpha_{k}$ are well-defined whenever $\alpha
_{1},\alpha_{2},\ldots,\alpha_{k}\in\mathbb{Z}/n$.

\begin{proposition}
\label{prop.eqrel.Z/n.sums.wd}\textbf{(a)} Definition \ref{def.eqrel.Z/n.sums}
is well-defined.

\textbf{(b)} Finite sums ($\sum_{i\in I}\alpha_{i}$) and finite products
($\prod_{i\in I}\alpha_{i}$) of elements $\alpha_{i}\in\mathbb{Z}/n$ satisfy
the same rules that finite sums and finite products of integers satisfy.
\end{proposition}

\begin{remark}
\textbf{(c)} If $a_{1},a_{2},\ldots,a_{k}$ are $k$ integers, then
\begin{align*}
\left[  a_{1}\right]  _{n}+\left[  a_{2}\right]  _{n}+\cdots+\left[
a_{k}\right]  _{n}  &  =\left[  a_{1}+a_{2}+\cdots+a_{k}\right]
_{n}\ \ \ \ \ \ \ \ \ \ \text{and}\\
\left[  a_{1}\right]  _{n}\cdot\left[  a_{2}\right]  _{n}\cdot\cdots
\cdot\left[  a_{k}\right]  _{n}  &  =\left[  a_{1}a_{2}\cdots a_{k}\right]
_{n}.
\end{align*}

\end{remark}

\begin{proof}
[Proof of Proposition \ref{prop.eqrel.Z/n.sums.wd}.]\textbf{(a)} In
\cite[Theorem 2.118 \textbf{(a)}]{detnotes}, it is proven that finite sums of
integers are well-defined. The same argument (but relying on Theorem
\ref{thm.eqrel.Z/n.rules} instead of the usual rules of commutativity,
associativity etc. for integers) shows that finite sums of elements
$\alpha_{i}\in\mathbb{Z}/n$ are well-defined. The analogous fact for products
is proven in the same way, except that we need to replace $\left[  0\right]
_{n}$ by $\left[  1\right]  _{n}$ and properties of addition by corresponding
properties of multiplication.

\textbf{(b)} The proofs of the properties of finite sums and finite products
of elements of $\mathbb{Z}/n$ are identical to the analogous proofs for
integers, but (again) rely on Theorem \ref{thm.eqrel.Z/n.rules} instead of the
usual rules of commutativity, associativity etc. for integers.

\textbf{(c)} This can be proven by a straightforward induction on $k$.
\end{proof}

Also, the standard rules for exponents apply to residue classes:

\begin{theorem}
\label{thm.eqrel.Z/n.rules-exp}\textbf{(a)} We have $\alpha^{0}=\left[
1\right]  _{n}$ for any $\alpha\in\mathbb{Z}/n$.

\textbf{(b)} We have $\alpha^{1}=\alpha$ for any $\alpha\in\mathbb{Z}/n$.

\textbf{(c)} We have $\alpha^{k}=\underbrace{\alpha\alpha\cdots\alpha
}_{k\text{ times}}$ for any $\alpha\in\mathbb{Z}/n$ and $k\in\mathbb{N}$.

\textbf{(d)} We have $\alpha^{u+v}=\alpha^{u}\alpha^{v}$ for any $\alpha
\in\mathbb{Z}/n$ and any $u,v\in\mathbb{N}$.

\textbf{(e)} We have $\left(  \alpha\beta\right)  ^{k}=\alpha^{k}\beta^{k}$
for any $\alpha,\beta\in\mathbb{Z}/n$ and $k\in\mathbb{N}$.

\textbf{(f)} We have $\left(  \alpha^{u}\right)  ^{v}=\alpha^{uv}$ for any
$\alpha\in\mathbb{Z}/n$ and any $u,v\in\mathbb{N}$.
\end{theorem}

\begin{proof}
[Proof of Theorem \ref{thm.eqrel.Z/n.rules-exp}.]Each part of Theorem
\ref{thm.eqrel.Z/n.rules-exp} follows from the analogous property of integers,
in the same way as we derived Theorem \ref{thm.eqrel.Z/n.rules} \textbf{(f)}
from the associativity of multiplication for integers. (Note that Proposition
\ref{prop.eqrel.Z/n.sums.wd} \textbf{(c)} has to be used in proving Theorem
\ref{thm.eqrel.Z/n.rules-exp} \textbf{(c)}.)
\end{proof}

Also, the binomial formula holds for residue classes:

\begin{theorem}
\label{thm.eqrel.Z/n.binf}Let $\alpha,\beta\in\mathbb{Z}/n$ and $m\in
\mathbb{N}$. Then,%
\[
\left(  \alpha+\beta\right)  ^{m}=\sum_{k=0}^{m}\dbinom{m}{k}\alpha^{k}%
\beta^{m-k}.
\]

\end{theorem}

\begin{proof}
This follows from Theorem \ref{thm.binom.binf}, in the same way as we derived
Theorem \ref{thm.eqrel.Z/n.rules} \textbf{(f)} from the associativity of
multiplication for integers.
\end{proof}

%

\[%
\begin{tabular}
[c]{||l||}\hline\hline
\textbf{You have reached the end of the finished part.}\\
\textbf{TODO: Write on from here.}\\\hline\hline
\end{tabular}
\
\]


\subsection{\label{sect.equiv.modinv}Modular inverses revisited}

The idea of this section is that working with residue classes turns modular
inverses into actual inverses.

Recall: Integers other than $1$ and $-1$ have no actual inverses in
$\mathbb{Z}$.

But if $n$ is a positive integer, then any $a\perp n$ has a modular inverse
with respect to $n$.

Let us restate this in terms of residue classes.

Again, we fix a positive integer $n$.

\begin{definition}
Let $\alpha\in\mathbb{Z}/n$. An \textit{inverse} of $\alpha$ means an
$\alpha^{\prime}\in\mathbb{Z}/n$ such that $\alpha\cdot\alpha^{\prime}=\left[
1\right]  _{n}$.
\end{definition}

For example, $\left[  2\right]  _{5}$ is an inverse of $\left[  3\right]
_{5}$ for $n=5$, since $\left[  3\right]  _{5}\cdot\left[  2\right]
_{5}=\left[  3\cdot2\right]  _{5}=\left[  6\right]  _{5}=\left[  1\right]
_{5}$.

Now, we can restate of the existence \& uniqueness of modular inverses as follows:

\begin{proposition}
Let $a\in\mathbb{Z}$.

\textbf{(a)} If $\left[  a\right]  _{n}\in\mathbb{Z}/n$ has an inverse, then
$a\perp n$.

\textbf{(b)} If $a\perp n$, then $\left[  a\right]  _{n}\in\mathbb{Z}/n$ has a
unique inverse.
\end{proposition}

\begin{proof}
\textbf{(a)} Assume that $\left[  a\right]  _{n}\in\mathbb{Z}/n$ has an
inverse. Write this inverse as $\left[  a^{\prime}\right]  _{n}$ for some
$a^{\prime}\in\mathbb{Z}$. Then, $\left[  a\right]  _{n}\cdot\left[
a^{\prime}\right]  _{n}=\left[  1\right]  _{n}$. But the definition of
multiplication on $\mathbb{Z}/n$ yields $\left[  a\right]  _{n}\cdot\left[
a^{\prime}\right]  _{n}=\left[  aa^{\prime}\right]  _{n}$, so that $\left[
aa^{\prime}\right]  _{n}=\left[  a\right]  _{n}\cdot\left[  a^{\prime}\right]
_{n}=\left[  1\right]  _{n}$. In other words, $aa^{\prime}\equiv
1\operatorname{mod}n$. Thus, Theorem \ref{thm.ent.coprime.modinv} \textbf{(c)}
yields $a\perp n$.

\textbf{(b)} Assume that $a\perp n$. Hence, Theorem
\ref{thm.ent.coprime.modinv} \textbf{(b)} yields that there exists an
$a^{\prime}\in\mathbb{Z}$ such that $aa^{\prime}\equiv1\operatorname{mod}n$.
Consider this $a^{\prime}$. We have $\left[  a\right]  _{n}\cdot\left[
a^{\prime}\right]  _{n}=\left[  aa^{\prime}\right]  _{n}=\left[  1\right]
_{n}$ (since $aa^{\prime}\equiv1\operatorname{mod}n$), and thus $\left[
a^{\prime}\right]  _{n}$ is an inverse of $\left[  a\right]  _{n}$. So we have
proven that $\left[  a\right]  _{n}$ has \textbf{at least }one inverse.

But it remains to prove that $\left[  a\right]  _{n}$ has \textbf{at most} one inverse.

First, set $\alpha=\left[  a\right]  _{n}$. Thus, we must prove that $\alpha$
has at most one inverse.

To prove this, we fix two inverses $\beta$ and $\gamma$ of $\alpha$. We must
show that $\beta=\gamma$.

We have $\alpha\beta=\left[  1\right]  _{n}$ (since $\beta$ is an inverse of
$\alpha$) and $\alpha\gamma=\left[  1\right]  _{n}$ (similarly). Theorem
\ref{thm.eqrel.Z/n.rules} \textbf{(f)} shows that $\gamma\left(  \alpha
\beta\right)  =\left(  \gamma\alpha\right)  \beta$. Now, comparing
\[
\gamma\left(  \underbrace{\alpha\beta}_{=\left[  1\right]  _{n}}\right)
=\gamma\cdot\left[  1\right]  _{n}=\gamma\ \ \ \ \ \ \ \ \ \ \left(  \text{by
Theorem \ref{thm.eqrel.Z/n.rules} \textbf{(d)}}\right)
\]
with%
\[
\gamma\left(  \alpha\beta\right)  =\left(  \underbrace{\gamma\alpha}%
_{=\alpha\gamma=\left[  1\right]  _{n}}\right)  \beta=\left[  1\right]
_{n}\beta=\beta\cdot\left[  1\right]  _{n}=\beta\ \ \ \ \ \ \ \ \ \ \left(
\text{by Theorem \ref{thm.eqrel.Z/n.rules} \textbf{(d)}}\right)  ,
\]
we find $\beta=\gamma$, as desired.

So $\left[  a\right]  _{n}$ has a unique inverse (since it has at least one
inverse and at most one inverse).
\end{proof}

The proposition above lets us speak of \textquotedblleft the
inverse\textquotedblright\ of a class $\alpha\in\mathbb{Z}/n$, provided that
$\alpha$ has an inverse. Indeed, if $\alpha$ has an inverse, then
$\alpha=\left[  a\right]  _{n}$ for some integer $a$ satisfying $a\perp n$ (by
part \textbf{(a)} of the proposition), and thus $\alpha=\left[  a\right]
_{n}\in\mathbb{Z}/n$ has a unique inverse (by part \textbf{(b)}).

\begin{corollary}
Let $U_{n}$ be the set of all $\alpha\in\mathbb{Z}/n$ that have an inverse. Then:

\textbf{(a)} For an integer $a$, we have $\left[  a\right]  _{n}\in U_{n}$ if
and only if $a\perp n$.

\textbf{(b)} We have $\left\vert U_{n}\right\vert =\phi\left(  n\right)  $.
\end{corollary}

\begin{proof}
\textbf{(a)} This is just saying: $\left[  a\right]  _{n}$ has an inverse if
and only if $a\perp n$. But this follows from the proposition above.

\textbf{(b)} Recall that $\mathbb{Z}/n$ consists of the $n$ distinct elements
$\left[  0\right]  _{n},\left[  1\right]  _{n},\ldots,\left[  n-1\right]
_{n}$. By part \textbf{(a)}, the ones among these $n$ elements that belong to
$U_{n}$ are exactly the ones of the form $\left[  a\right]  _{n}$ with $a\perp
n$. So $U_{n}$ consists of the elements $\left[  a\right]  _{n}$ for all
$a\in\left\{  0,1,\ldots,n-1\right\}  $ that satisfy $a\perp n$, and
furthermore these elements are all distinct (since $\left[  0\right]
_{n},\left[  1\right]  _{n},\ldots,\left[  n-1\right]  _{n}$ are distinct).
Hence,%
\begin{align*}
\left\vert U_{n}\right\vert  &  =\left(  \text{the number of }a\in\left\{
0,1,\ldots,n-1\right\}  \text{ that satisfy }a\perp n\right) \\
&  =\left\vert \left\{  i\in\left\{  0,1,\ldots,n-1\right\}  \ \mid\ i\perp
n\right\}  \right\vert =\phi\left(  n\right)
\end{align*}
(by Lemma \ref{lem.ent.euler.phi0}).
\end{proof}

We can now prove Theorem \ref{thm.ent.wilson} again -- or, rather, restate our
previous proof of Theorem \ref{thm.ent.wilson} in more natural terms:

\begin{proof}
[Second proof of Theorem \ref{thm.ent.wilson}.]If $p=2$, then the claim of
Theorem \ref{thm.ent.wilson} is easy to check. Thus, we WLOG assume that
$p\neq2$ for the rest of this proof. Hence, $p>2$ (since $p$ is prime, and
thus $p>1$). Thus, $p-1\neq1$. Thus, $p-1\not \equiv 1\operatorname{mod}p$. In
other words, the two residue classes $\left[  1\right]  _{p}$ and $\left[
p-1\right]  _{p}$ are distinct.

Recall%
\[
\left(  p-1\right)  !=1\cdot2\cdot\cdots\cdot\left(  p-1\right)  .
\]
Thus,%
\[
\left[  \left(  p-1\right)  !\right]  _{p}=\left[  1\cdot2\cdot\cdots
\cdot\left(  p-1\right)  \right]  _{p}=\left[  1\right]  _{p}\cdot\left[
2\right]  _{p}\cdot\cdots\cdot\left[  p-1\right]  _{p}.
\]


The $p-1$ residue classes $\left[  1\right]  _{p},\left[  2\right]
_{p},\ldots,\left[  p-1\right]  _{p}$ are precisely the $p-1$ residue classes
in $\mathbb{Z}/p$ that have inverses (since $1,2,\ldots,p-1$ are coprime to
$p$, while the remaining class $\left[  0\right]  _{p}$ does not have $0$
coprime to $p$). Their inverses must also be among these $p-1$ residue classes
(since an inverse always has an inverse: $\left(  \alpha^{-1}\right)
^{-1}=\alpha$). So there is an involution on the set $\left\{  \left[
1\right]  _{p},\left[  2\right]  _{p},\ldots,\left[  p-1\right]  _{p}\right\}
$ that sends each class to its inverse (again since $\left(  \alpha
^{-1}\right)  ^{-1}=\alpha$). We can use it to try to pair up each class with
its inverse.

\textit{Example:} If $p=11$, then we have the $10$ classes%
\[
\left[  1\right]  _{11},\left[  2\right]  _{11},\left[  3\right]
_{11},\left[  4\right]  _{11},\left[  5\right]  _{11},\left[  6\right]
_{11},\left[  7\right]  _{11},\left[  8\right]  _{11},\left[  9\right]
_{11},\left[  10\right]  _{11}.
\]


We pair $\left[  2\right]  _{11}$ up with $\left[  6\right]  _{11}$, since
$2\cdot6=12\equiv1\operatorname{mod}11$.

We pair $\left[  3\right]  _{11}$ up with $\left[  4\right]  _{11}$.

We pair $\left[  5\right]  _{11}$ up with $\left[  9\right]  _{11}$.

We pair $\left[  7\right]  _{11}$ up with $\left[  8\right]  _{11}$.

Also, the two classes $\left[  1\right]  _{11}$ and $\left[  10\right]  _{11}$
each \textquotedblleft pair with itself\textquotedblright, so they are not
actually paired.

The two classes $\left[  1\right]  _{11}$ and $\left[  10\right]  _{11}$ each
\textquotedblleft pair with itself\textquotedblright, so they are not actually paired.

So%
\begin{align*}
\left[  10!\right]  _{11}  &  =\left[  1\right]  _{11}\cdot\left[  2\right]
_{11}\cdot\cdots\cdot\left[  10\right]  _{11}\\
&  =\underbrace{\left(  \left[  2\right]  _{11}\cdot\left[  6\right]
_{11}\right)  }_{=\left[  1\right]  _{11}}\cdot\underbrace{\left(  \left[
3\right]  _{11}\cdot\left[  4\right]  _{11}\right)  }_{=\left[  1\right]
_{11}}\cdot\underbrace{\left(  \left[  5\right]  _{11}\cdot\left[  9\right]
_{11}\right)  }_{=\left[  1\right]  _{11}}\\
&  \ \ \ \ \ \ \ \ \ \ \cdot\underbrace{\left(  \left[  7\right]  _{11}%
\cdot\left[  8\right]  _{11}\right)  }_{=\left[  1\right]  _{11}}\cdot\left[
1\right]  _{11}\cdot\left[  10\right]  _{11}\\
&  =\left[  10\right]  _{11}=\left[  -1\right]  _{11},
\end{align*}
so $10!\equiv-1\operatorname{mod}11$.

Back to the general case: We can still pair each class $\alpha\in U_{p}$ (the
notation $U_{p}$ is from the corollary above) with its inverse. The only
classes that remain unpaired are the ones that are their own inverses. Which
ones are they?

Clearly, $\left[  1\right]  _{p}$ and $\left[  p-1\right]  _{p}$ are two
classes that are their own inverses (indeed, for $\left[  p-1\right]  _{p}$,
it is true because $\left[  p-1\right]  _{p}=\left[  -1\right]  _{p}=-\left[
1\right]  _{p}$).

Are there any other such classes? Let us see.

Let $\left[  a\right]  _{p}$ be a class that is its own inverse. Thus,
$\left[  a\right]  _{p}\cdot\left[  a\right]  _{p}=\left[  1\right]  _{p}$.

In other words, $aa\equiv1\operatorname{mod}p$. Thus, $a^{2}\equiv
1\operatorname{mod}p$. Hence, Exercise \ref{exe.ent.primes.aa-1} shows that
$a\equiv1\operatorname{mod}p$ or $a\equiv-1\operatorname{mod}p$. In other
words, $\left[  a\right]  _{p}=\left[  1\right]  _{p}$ or $\left[  a\right]
_{p}=\left[  -1\right]  _{p}$.

So any class that is its own inverse must be either $\left[  1\right]  _{p}$
or $\left[  -1\right]  _{p}=\left[  p-1\right]  _{p}$.

So we conclude that the only classes that are their own inverses are $\left[
1\right]  _{p}$ and $\left[  p-1\right]  _{p}$.

Thus, in the product $\left[  1\right]  _{p}\cdot\left[  2\right]  _{p}%
\cdot\cdots\cdot\left[  p-1\right]  _{p}$, all factors are paired up except
for $\left[  1\right]  _{p}$ and $\left[  p-1\right]  _{p}$. Since paired
factors neutralize each other, we thus conclude that the value of this product
is%
\[
\left[  1\right]  _{p}\cdot\left[  p-1\right]  _{p}=\left[  p-1\right]
_{p}=\left[  -1\right]  _{p}.
\]
This yields $\left[  \left(  p-1\right)  !\right]  _{p}=\left[  -1\right]
_{p}$. In other words, $\left(  p-1\right)  !\equiv-1\operatorname{mod}p$.

(Exercise: Tweak this argument to work for $p=2$.)
\end{proof}

\subsection{The Chinese Remainder Theorem reexamined}

\begin{definition}
\label{def.eqrel.Zn.pind}Let $n$ be a positive integer. Let $d$ be a positive
divisor of $n$. Then, define the map%
\begin{align*}
\pi_{n,d}:\mathbb{Z}/n  &  \rightarrow\mathbb{Z}/d,\\
\left[  s\right]  _{n}  &  \mapsto\left[  s\right]  _{d}.
\end{align*}
(This is well-defined, according to Proposition \ref{prop.eqrel.Zn.pind.wd}.)
\end{definition}

See Example \ref{exa.eqrel.Zn.pind.wd} \textbf{(a)} for how this map looks like.

\begin{theorem}
\label{thm.eqrel.CRT2}(Chinese Remainder Theorem, bijective form)

Let $m$ and $n$ be two coprime positive integers. Then, the map%
\begin{align*}
S_{m,n}  &  :\mathbb{Z}/\left(  mn\right)  \rightarrow\left(  \mathbb{Z}%
/m\right)  \times\left(  \mathbb{Z}/n\right)  ,\\
\alpha &  \mapsto\left(  \pi_{mn,m}\left(  \alpha\right)  ,\pi_{mn,n}\left(
\alpha\right)  \right)
\end{align*}
is well-defined and is a bijection. It sends each $\left[  s\right]  _{mn}$
(with $s\in\mathbb{Z}$) to the pair $\left(  \left[  s\right]  _{m},\left[
s\right]  _{n}\right)  $.
\end{theorem}

\begin{example}
\textbf{(a)} Theorem \ref{thm.eqrel.CRT2} (applied to $m=3$ and $n=2$) says
that the map%
\begin{align*}
S_{3,2}:\mathbb{Z}/6  &  \rightarrow\left(  \mathbb{Z}/3\right)  \times\left(
\mathbb{Z}/2\right)  ,\\
\alpha &  \mapsto\left(  \pi_{6,3}\left(  \alpha\right)  ,\pi_{6,2}\left(
\alpha\right)  \right)
\end{align*}
is a bijection. This map sends%
\[%
\begin{array}
[c]{cccccccc}%
\left[  0\right]  _{6}, & \left[  1\right]  _{6}, & \left[  2\right]  _{6}, &
\left[  3\right]  _{6}, & \left[  4\right]  _{6}, & \left[  5\right]  _{6} &
& \text{to}\\
\left(  \left[  0\right]  _{3},\left[  0\right]  _{2}\right)  , & \left(
\left[  1\right]  _{3},\left[  1\right]  _{2}\right)  , & \left(  \left[
2\right]  _{3},\left[  2\right]  _{2}\right)  , & \left(  \left[  3\right]
_{3},\left[  3\right]  _{2}\right)  , & \left(  \left[  4\right]  _{3},\left[
4\right]  _{2}\right)  , & \left(  \left[  5\right]  _{3},\left[  5\right]
_{2}\right)  , &  &
\end{array}
\]
respectively. In other words, it sends%
\[%
\begin{array}
[c]{cccccccc}%
\left[  0\right]  _{6}, & \left[  1\right]  _{6}, & \left[  2\right]  _{6}, &
\left[  3\right]  _{6}, & \left[  4\right]  _{6}, & \left[  5\right]  _{6} &
& \text{to}\\
\left(  \left[  0\right]  _{3},\left[  0\right]  _{2}\right)  , & \left(
\left[  1\right]  _{3},\left[  1\right]  _{2}\right)  , & \left(  \left[
2\right]  _{3},\left[  0\right]  _{2}\right)  , & \left(  \left[  0\right]
_{3},\left[  1\right]  _{2}\right)  , & \left(  \left[  1\right]  _{3},\left[
0\right]  _{2}\right)  , & \left(  \left[  2\right]  _{3},\left[  1\right]
_{2}\right)  , &  &
\end{array}
\]
respectively (since $\left[  2\right]  _{2}=\left[  0\right]  _{2}$ and
$\left[  3\right]  _{3}=\left[  0\right]  _{3}$ and $\left[  3\right]
_{2}=\left[  1\right]  _{2}$ and so on). This list of values shows that this
map is bijective (since it takes on every possible value in $\left(
\mathbb{Z}/3\right)  \times\left(  \mathbb{Z}/2\right)  $ exactly once).
Theorem \ref{thm.eqrel.CRT2} says that this holds for arbitrary coprime $m$
and $n$.

\textbf{(b)} Let us see how Theorem \ref{thm.eqrel.CRT2} fails when $m$ and
$n$ are \textbf{not} coprime. For example, take $m=6$ and $n=4$. Then, the map%
\begin{align*}
S_{6,4}:\mathbb{Z}/24  &  \rightarrow\left(  \mathbb{Z}/6\right)
\times\left(  \mathbb{Z}/4\right)  ,\\
\alpha &  \mapsto\left(  \pi_{24,6}\left(  \alpha\right)  ,\pi_{24,4}\left(
\alpha\right)  \right)
\end{align*}
is \textbf{not} a bijection. Indeed, it is neither injective (for example, it
sends both $\left[  0\right]  _{24}$ and $\left[  12\right]  _{24}$ to the
same pair $\left(  \left[  0\right]  _{6},\left[  0\right]  _{4}\right)  $)
nor surjective (for example, it never takes the value $\left(  \left[
1\right]  _{6},\left[  2\right]  _{4}\right)  $).
\end{example}

\begin{proof}
[Proof of Theorem \ref{thm.eqrel.CRT2}.]The maps $\pi_{mn,m}$ and $\pi_{mn,n}$
are well-defined, since $m$ and $n$ are divisors of $mn$. Thus, the map%
\begin{align*}
S_{m,n}:\mathbb{Z}/\left(  mn\right)   &  \rightarrow\left(  \mathbb{Z}%
/m\right)  \times\left(  \mathbb{Z}/n\right)  ,\\
\alpha &  \mapsto\left(  \pi_{mn,m}\left(  \alpha\right)  ,\pi_{mn,n}\left(
\alpha\right)  \right)
\end{align*}
is well-defined. Consider this map $S_{m,n}$. Clearly, for each $s\in
\mathbb{Z}$, we have%
\begin{align}
S_{m,n}\left(  \left[  s\right]  _{mn}\right)   &  =\left(  \underbrace{\pi
_{mn,m}\left(  \left[  s\right]  _{mn}\right)  }_{\substack{=\left[  s\right]
_{m}\\\text{(by the definition of }\pi_{mn,m}\text{)}}},\underbrace{\pi
_{mn,n}\left(  \left[  s\right]  _{mn}\right)  }_{\substack{=\left[  s\right]
_{n}\\\text{(by the definition of }\pi_{mn,n}\text{)}}}\right)
\ \ \ \ \ \ \ \ \ \ \left(  \text{by the definition of }S_{m,n}\right)
\nonumber\\
&  =\left(  \left[  s\right]  _{m},\left[  s\right]  _{n}\right)  .
\label{pf.thm.eqrel.CRT2.Ss=}%
\end{align}
In other words, the map $S_{m,n}$ sends each $\left[  s\right]  _{mn}$ (with
$s\in\mathbb{Z}$) to the pair $\left(  \left[  s\right]  _{m},\left[
s\right]  _{n}\right)  $.

It thus remains to prove that $S_{m,n}$ is a bijection. To that aim, we shall
prove that $S_{m,n}$ is injective and surjective.

\textit{Proof that }$S_{m,n}$ \textit{is injective:} Let $\alpha,\beta
\in\mathbb{Z}/\left(  mn\right)  $ be such that $S_{m,n}\left(  \alpha\right)
=S_{m,n}\left(  \beta\right)  $. We want to prove $\alpha=\beta$.

Write $\alpha=\left[  a\right]  _{mn}$ and $\beta=\left[  b\right]  _{mn}$ for
two integers $a$ and $b$. From $\alpha=\left[  a\right]  _{mn}$, we obtain
$S_{m,n}\left(  \alpha\right)  =S_{m,n}\left(  \left[  a\right]  _{mn}\right)
=\left(  \left[  a\right]  _{m},\left[  a\right]  _{n}\right)  $ (by
(\ref{pf.thm.eqrel.CRT2.Ss=}), applied to $s=a$). Similarly, $S_{m,n}\left(
\beta\right)  =\left(  \left[  b\right]  _{m},\left[  b\right]  _{n}\right)
$. Thus, $S_{m,n}\left(  \alpha\right)  =S_{m,n}\left(  \beta\right)  $
rewrites as $\left(  \left[  a\right]  _{m},\left[  a\right]  _{n}\right)
=\left(  \left[  b\right]  _{m},\left[  b\right]  _{n}\right)  $. In other
words, $\left[  a\right]  _{m}=\left[  b\right]  _{m}$ and $\left[  a\right]
_{n}=\left[  b\right]  _{n}$.

Now, $\left[  a\right]  _{m}=\left[  b\right]  _{m}$ means $a\equiv
b\operatorname{mod}m$; in other words, $m\mid a-b$. Similarly, $n\mid a-b$.

Since $m\perp n$, we can combine these two divisibilities to obtain $mn\mid
a-b$. In other words, $a\equiv b\operatorname{mod}mn$. In other words,
$\left[  a\right]  _{mn}=\left[  b\right]  _{mn}$. In other words,
$\alpha=\beta$ (since $\alpha=\left[  a\right]  _{mn}$ and $\beta=\left[
b\right]  _{mn}$). So we have shown that $S_{m,n}$ is injective.

\textit{Proof that }$S_{m,n}$ \textit{is surjective:} Fix $\left(
\alpha,\beta\right)  \in\left(  \mathbb{Z}/m\right)  \times\left(
\mathbb{Z}/n\right)  $. We want to find a $\gamma\in\mathbb{Z}/\left(
mn\right)  $ such that $S_{m,n}\left(  \gamma\right)  =\left(  \alpha
,\beta\right)  $.

Write $\alpha$ as $\alpha=\left[  a\right]  _{m}$ for some integer $a$ (since
$\alpha\in\mathbb{Z}/m$). Similarly, write $\beta$ as $\beta=\left[  b\right]
_{n}$. Theorem \ref{thm.ent.crt1} \textbf{(a)} shows that there exists an
integer $x\in\mathbb{Z}$ such that%
\[
\left(  x\equiv a\operatorname{mod}m\text{ and }x\equiv b\operatorname{mod}%
n\right)  .
\]
Fix such an $x$. We have $\left[  x\right]  _{m}=\left[  a\right]  _{m}$
(since $x\equiv a\operatorname{mod}m$) and $\left[  x\right]  _{n}=\left[
b\right]  _{n}$ (since $x\equiv b\operatorname{mod}n$). Now,
(\ref{pf.thm.eqrel.CRT2.Ss=}) (applied to $s=x$) yields
\[
S_{m,n}\left(  \left[  x\right]  _{mn}\right)  =\left(  \underbrace{\left[
x\right]  _{m}}_{=\left[  a\right]  _{m}=\alpha},\underbrace{\left[  x\right]
_{n}}_{=\left[  b\right]  _{n}=\beta}\right)  =\left(  \alpha,\beta\right)  .
\]
Thus, there exists a $\gamma\in\mathbb{Z}/\left(  mn\right)  $ such that
$S_{m,n}\left(  \gamma\right)  =\left(  \alpha,\beta\right)  $ (namely,
$\gamma=\left[  x\right]  _{mn}$). This proves that $S_{m,n}$ is surjective.

So, $S_{m,n}$ is bijective (being both injective and surjective). This proves
the Theorem.

(We could have saved ourselves some of the work by invoking the Pigeonhole
Principle. Indeed, our goal was to show that $S_{m,n}$ is bijective. By the
Pigeonhole Principle, it suffices to prove that it is an injection \textbf{or}
that it is a surjection, since $\mathbb{Z}/\left(  mn\right)  $ and $\left(
\mathbb{Z}/m\right)  \times\left(  \mathbb{Z}/n\right)  $ are finite sets of
the same size. But this argument would be harder to generalize to certain
settings that we might later want to generalize the Theorem to.)
\end{proof}

\begin{center}
\textbf{2019-02-27 lecture}
\end{center}

Recall Theorem \ref{thm.ent.phi.mult}: Let $m$ and $n$ be two coprime
integers. Then, $\phi\left(  mn\right)  =\phi\left(  m\right)  \cdot
\phi\left(  n\right)  $.

\begin{proof}
[Proof of Theorem \ref{thm.ent.phi.mult}.]We know that $\phi\left(  n\right)
=\left\vert U_{n}\right\vert $. Similarly, $\phi\left(  m\right)  =\left\vert
U_{m}\right\vert $ and $\phi\left(  mn\right)  =\left\vert U_{mn}\right\vert $.

Now, let $S_{m,n}$ be the map%
\begin{align*}
\mathbb{Z}/\left(  mn\right)   &  \rightarrow\left(  \mathbb{Z}/m\right)
\times\left(  \mathbb{Z}/n\right)  ,\\
\alpha &  \mapsto\left(  \pi_{mn,m}\left(  \alpha\right)  ,\pi_{mn,n}\left(
\alpha\right)  \right)  .
\end{align*}
Then, $S_{m,n}$ is a bijection (by Theorem \ref{thm.eqrel.CRT2}).

\begin{statement}
\textit{Claim 0:} We have $\pi_{mn,m}\left(  \alpha\beta\right)  =\pi
_{mn,m}\left(  \alpha\right)  \cdot\pi_{mn,m}\left(  \beta\right)  $ for all
$\alpha,\beta\in\mathbb{Z}/\left(  mn\right)  $.
\end{statement}

[\textit{Proof:} Write $\alpha$ and $\beta$ as $\alpha=\left[  a\right]
_{mn}$ and $\beta=\left[  b\right]  _{mn}$ for some integers $a$ and $b$.
Then, the claim rewrites as $\left[  ab\right]  _{m}=\left[  a\right]
_{m}\cdot\left[  b\right]  _{m}$. But this follows from the definition of
multiplication on $\mathbb{Z}/m$.]

Note that $U_{m}\times U_{n}\subseteq\left(  \mathbb{Z}/m\right)
\times\left(  \mathbb{Z}/n\right)  $.

\begin{statement}
\textit{Claim 1:} Let $\alpha\in\mathbb{Z}/\left(  mn\right)  $. If $\alpha\in
U_{mn}$, then $S_{m,n}\left(  \alpha\right)  \in U_{m}\times U_{n}$.
\end{statement}

[\textit{Proof:} Assume that $\alpha\in U_{mn}$. Thus, $\alpha$ has an inverse
$\beta\in\mathbb{Z}/\left(  mn\right)  $. Consider this $\beta$. Hence,
$\alpha\beta=\left[  1\right]  _{mn}$.

Now, Claim 0 yields $\pi_{mn,m}\left(  \alpha\beta\right)  =\pi_{mn,m}\left(
\alpha\right)  \cdot\pi_{mn,m}\left(  \beta\right)  $, so%
\[
\pi_{mn,m}\left(  \alpha\right)  \cdot\pi_{mn,m}\left(  \beta\right)
=\pi_{mn,m}\left(  \underbrace{\alpha\beta}_{=\left[  1\right]  _{mn}}\right)
=\pi_{mn,m}\left(  \left[  1\right]  _{mn}\right)  =\left[  1\right]  _{m}.
\]
Thus, $\pi_{mn,m}\left(  \beta\right)  $ is an inverse of $\pi_{mn,m}\left(
\alpha\right)  $ in $\mathbb{Z}/m$. Therefore, $\pi_{mn,m}\left(
\alpha\right)  \in U_{m}$. Similarly, $\pi_{mn,n}\left(  \alpha\right)  \in
U_{n}$. Now, the definition of $S_{m,n}$ yields%
\[
S_{m,n}\left(  \alpha\right)  =\left(  \underbrace{\pi_{mn,m}\left(
\alpha\right)  }_{\in U_{m}},\underbrace{\pi_{mn,n}\left(  \alpha\right)
}_{\in U_{n}}\right)  \in U_{m}\times U_{n}.
\]
Thus, Claim 1 is proven.]

Conversely:

\begin{statement}
\textit{Claim 2:} Let $\alpha\in\mathbb{Z}/\left(  mn\right)  $. If
$S_{m,n}\left(  \alpha\right)  \in U_{m}\times U_{n}$, then $\alpha\in U_{mn}$.
\end{statement}

[\textit{Proof:} Assume that $S_{m,n}\left(  \alpha\right)  \in U_{m}\times
U_{n}$. Since $S_{m,n}\left(  \alpha\right)  =\left(  \pi_{mn,m}\left(
\alpha\right)  ,\pi_{mn,n}\left(  \alpha\right)  \right)  $, this rewrites as
$\left(  \pi_{mn,m}\left(  \alpha\right)  ,\pi_{mn,n}\left(  \alpha\right)
\right)  \in U_{m}\times U_{n}$. In other words, $\pi_{mn,m}\left(
\alpha\right)  \in U_{m}$ and $\pi_{mn,n}\left(  \alpha\right)  \in U_{n}$.

In other words, $\pi_{mn,m}\left(  \alpha\right)  $ has an inverse $\gamma
\in\mathbb{Z}/m$, while $\pi_{mn,n}\left(  \alpha\right)  $ has an inverse
$\delta\in\mathbb{Z}/n$. Consider these $\gamma$ and $\delta$.

We have $\left(  \gamma,\delta\right)  \in\left(  \mathbb{Z}/m\right)
\times\left(  \mathbb{Z}/n\right)  $. Since $S_{m,n}$ is bijective, we can
thus find a $\beta\in\mathbb{Z}/\left(  mn\right)  $ such that $S_{m,n}\left(
\beta\right)  =\left(  \gamma,\delta\right)  $. Consider this $\beta$. We have%
\[
\left(  \gamma,\delta\right)  =S_{m,n}\left(  \beta\right)  =\left(
\pi_{mn,m}\left(  \beta\right)  ,\pi_{mn,n}\left(  \beta\right)  \right)  .
\]
In other words, $\gamma=\pi_{mn,m}\left(  \beta\right)  $ and $\delta
=\pi_{mn,n}\left(  \beta\right)  $.

Now, we want to prove that $\beta$ is an inverse of $\alpha$ (in
$\mathbb{Z}/\left(  mn\right)  $). This means proving that $\alpha
\beta=\left[  1\right]  _{mn}$. Since $S_{m,n}$ is bijective, this is
tantamount to proving that $S_{m,n}\left(  \alpha\beta\right)  =S_{m,n}\left(
\left[  1\right]  _{mn}\right)  $. In other words, we need to show that%
\[
\left(  \pi_{mn,m}\left(  \alpha\beta\right)  ,\pi_{mn,n}\left(  \alpha
\beta\right)  \right)  =\left(  \pi_{mn,m}\left(  \left[  1\right]
_{mn}\right)  ,\pi_{mn,n}\left(  \left[  1\right]  _{mn}\right)  \right)
\]
(because of how $S_{m,n}$ is defined). In other words, we need to show that
\[
\pi_{mn,m}\left(  \alpha\beta\right)  =\pi_{mn,m}\left(  \left[  1\right]
_{mn}\right)  \ \ \ \ \ \ \ \ \ \ \text{and}\ \ \ \ \ \ \ \ \ \ \pi
_{mn,n}\left(  \alpha\beta\right)  =\pi_{mn,n}\left(  \left[  1\right]
_{mn}\right)  .
\]
But this is true, since
\begin{align*}
\pi_{mn,m}\left(  \alpha\beta\right)   &  =\pi_{mn,m}\left(  \alpha\right)
\cdot\underbrace{\pi_{mn,m}\left(  \beta\right)  }_{=\gamma}%
\ \ \ \ \ \ \ \ \ \ \left(  \text{by Claim 0}\right) \\
&  =\pi_{mn,m}\left(  \alpha\right)  \cdot\gamma=\left[  1\right]
_{m}\ \ \ \ \ \ \ \ \ \ \left(  \text{since }\gamma\text{ is an inverse of
}\pi_{mn,m}\left(  \alpha\right)  \right) \\
&  =\pi_{mn,m}\left(  \left[  1\right]  _{mn}\right)
\end{align*}
and similarly $\pi_{mn,n}\left(  \alpha\beta\right)  =\pi_{mn,n}\left(
\left[  1\right]  _{mn}\right)  $. So Claim 2 is proven.]

Combining Claim 1 with Claim 2, we obtain the equivalence%
\[
\left(  \alpha\in U_{mn}\right)  \Longleftrightarrow\left(  S_{m,n}\left(
\alpha\right)  \in U_{m}\times U_{n}\right)
\]
for each $\alpha\in\mathbb{Z}/\left(  mn\right)  $.

Thus, $U_{m}\times U_{n}$ is the image of the set $U_{mn}$ under the bijection
$S_{m,n}$. So%
\[
\left\vert U_{m}\times U_{n}\right\vert =\left\vert U_{mn}\right\vert
=\phi\left(  mn\right)  .
\]
Therefore,%
\[
\phi\left(  mn\right)  =\left\vert U_{m}\times U_{n}\right\vert
=\underbrace{\left\vert U_{m}\right\vert }_{=\phi\left(  m\right)  }%
\cdot\underbrace{\left\vert U_{n}\right\vert }_{=\phi\left(  n\right)  }%
=\phi\left(  m\right)  \cdot\phi\left(  n\right)  .
\]
So Theorem \ref{thm.ent.phi.mult} is proven.
\end{proof}

\begin{corollary}
\label{cor.ent.phi.multk}If $n_{1},n_{2},\ldots,n_{k}$ are mutually coprime
positive integers, then $\phi\left(  n_{1}n_{2}\cdots n_{k}\right)
=\phi\left(  n_{1}\right)  \cdot\phi\left(  n_{2}\right)  \cdot\cdots\cdot
\phi\left(  n_{k}\right)  $.
\end{corollary}

\begin{proof}
[Proof of Corollary \ref{cor.ent.phi.multk}.]Induction on $k$. The base case
($k=0$) uses $\phi\left(  1\right)  =1$. The induction step relies on Theorem
\ref{thm.ent.phi.mult} and the observation that $n_{1}n_{2}\cdots n_{k-1}\perp
n_{k}$.
\end{proof}

\begin{proof}
[Proof of Theorem \ref{thm.ent.phi.explicit}.]Corollary
\ref{cor.ent.primes.can-fac} yields%
\begin{align*}
n  &  =\prod_{p\text{ prime}}p^{v_{p}\left(  n\right)  }=\left(
\prod_{\substack{p\text{ prime;}\\p\mid n}}p^{v_{p}\left(  n\right)  }\right)
\cdot\left(  \prod_{\substack{p\text{ prime;}\\p\nmid n}}\underbrace{p^{v_{p}%
\left(  n\right)  }}_{=p^{0}=1}\right) \\
&  =\prod_{\substack{p\text{ prime;}\\p\mid n}}p^{v_{p}\left(  n\right)  }.
\end{align*}
The factors $p^{v_{p}\left(  n\right)  }$ for different primes $p$ are
mutually coprime (e.g., by Exercise \ref{exe.ent.coprime.powers}, since
different primes are coprime). Thus, Corollary \ref{cor.ent.phi.multk} yields%
\begin{align*}
\phi\left(  \prod_{\substack{p\text{ prime;}\\p\mid n}}p^{v_{p}\left(
n\right)  }\right)   &  =\prod_{\substack{p\text{ prime;}\\p\mid
n}}\underbrace{\phi\left(  p^{v_{p}\left(  n\right)  }\right)  }%
_{\substack{=\left(  p-1\right)  p^{v_{p}\left(  n\right)  -1}\\\text{(by
Exercise \ref{exe.ent.phi.pk},}\\\text{since }v_{p}\left(  n\right)  \text{ is
a positive integer)}}}\\
&  =\prod_{\substack{p\text{ prime;}\\p\mid n}}\left(  \left(  p-1\right)
p^{v_{p}\left(  n\right)  -1}\right)  .
\end{align*}
In view of $n=\prod_{\substack{p\text{ prime;}\\p\mid n}}p^{v_{p}\left(
n\right)  }$, this rewrites as%
\begin{align*}
\phi\left(  n\right)   &  =\prod_{\substack{p\text{ prime;}\\p\mid
n}}\underbrace{\left(  \left(  p-1\right)  p^{v_{p}\left(  n\right)
-1}\right)  }_{\substack{=p^{v_{p}\left(  n\right)  }-p^{v_{p}\left(
n\right)  -1}\\=p^{v_{p}\left(  n\right)  }-p^{v_{p}\left(  n\right)
}/p\\=p^{v_{p}\left(  n\right)  }\left(  1-\dfrac{1}{p}\right)  }%
}=\prod_{\substack{p\text{ prime;}\\p\mid n}}\left(  p^{v_{p}\left(  n\right)
}\left(  1-\dfrac{1}{p}\right)  \right) \\
&  =\underbrace{\left(  \prod_{\substack{p\text{ prime;}\\p\mid n}%
}p^{v_{p}\left(  n\right)  }\right)  }_{=n}\cdot\prod_{\substack{p\text{
prime;}\\p\mid n}}\left(  1-\dfrac{1}{p}\right)  =n\cdot\prod
_{\substack{p\text{ prime;}\\p\mid n}}\left(  1-\dfrac{1}{p}\right)  .
\end{align*}
This proves Theorem \ref{thm.ent.phi.explicit}.
\end{proof}

\subsection{A couple of applications of elementary number theory}

\subsubsection{The RSA cryptosystem}

This is one of the first modern algorithms for encrypting data.

(RSA = Rivest, Shamir and Adleman.)

Standard setup: Albert and Julia want to communicate secretly,
\textbf{without} having to give each other keys in advance.

Albert wants to send encrypted messages that only Julia can read, and receive
encrypted messsages that only he can read. The channel of communication may
have eavesdroppers. How can we do that?

\textbf{Setup:}

\begin{itemize}
\item Albert generates two distinct large and sufficiently random primes $p$
and $q$. (This involves a lot of technicalities like actually finding large
primes. See \cite{Gallier-RSA} if you are interested.)

\item Albert computes $m=pq$. This number (called the \textit{modulus}) he
makes public. (Note that it is hard to factor a number into primes. Thus, the
public will not know $p$ and $q$.)

\item Albert computes $\ell=\left(  p-1\right)  \left(  q-1\right)  $, but
keeps this number private.

\item Albert randomly picks an $e\in\left\{  2,3,\ldots,\ell-1\right\}  $ such
that $e\perp\ell$. This number $e$ will be called the \textit{encryption key},
and Albert keeps it private.

\item Albert computes a positive modular inverse $d$ of $e$ modulo $\ell$
(that is, a positive integer $d$ such that $ed\equiv1\operatorname{mod}\ell$).
This number will be called the \textit{decryption key}.

\item Albert publishes the pair $\left(  e,m\right)  $ as his \textit{public
key}.
\end{itemize}

\textbf{Encrypting a message:}

If Julia wants to send a message $x\in\mathbb{Z}/m$ to Albert:

\begin{itemize}
\item She computes $x^{e}$ in $\mathbb{Z}/m$. (This is realistically
computable by \textit{binary exponentiation}: We can compute $a^{n}$ for
$a\in\mathbb{Z}/m$ and $n\in\mathbb{N}$ recursively via the formulas
$a^{2k}=\left(  a^{k}\right)  ^{2}$ and $a^{2k+1}=\left(  a^{k}\right)  ^{2}a$.)

\item She sends $x^{e}$ to Albert.
\end{itemize}

\textbf{Decrypting a message:}

Albert receives $y=x^{e}$ and recovers $x$ as follows:

\begin{itemize}
\item He sets $x=y^{d}$. (This follows from Lemma \ref{lem.ent.rsa.rsa-lem} below.)
\end{itemize}

This way, Julia can send a message to Albert that no one can intercept (unless
they know $d$, or have algorithms that no one knows so far).

We are using the following fact:

\begin{lemma}
\label{lem.ent.rsa.rsa-lem}Let $p$ and $q$ be two distinct primes. Let
$a\in\mathbb{Z}$. Let $N$ be a positive integer such that $N\equiv
1\operatorname{mod}\left(  p-1\right)  \left(  q-1\right)  $. Then,%
\[
a^{N}\equiv a\operatorname{mod}pq.
\]

\end{lemma}

This lemma can be restated as saying that $x^{N}=x$ for each $x\in
\mathbb{Z}/\left(  pq\right)  $ (when $p$, $q$ and $N$ are as in the lemma).
Now, when Albert receives $y=x^{e}$ from Julia, we have%
\[
y^{d}=\left(  x^{e}\right)  ^{d}=x^{ed}.
\]
But $d$ was a modular inverse of $e$ modulo $\ell$; thus, $ed\equiv
1\operatorname{mod}\ell$. Since $\ell=\left(  p-1\right)  \left(  q-1\right)
$, Lemma \ref{lem.ent.rsa.rsa-lem} (applied to $N=ed$) yields $x^{ed}=x$.
Thus, $y^{d}=x^{ed}=x$, so Albert recovers the message.

\begin{proof}
[Proof of Lemma \ref{lem.ent.rsa.rsa-lem}.]We need to show that $pq\mid
a^{N}-a$. Since $p\perp q$, it suffices to prove that $p\mid a^{N}-a$ and
$q\mid a^{N}-a$.

Let us prove that $p\mid a^{N}-a$ first. Two cases are possible:

\textit{Case 1:} We have $p\mid a$.

\textit{Case 2:} We have $p\nmid a$.

In Case 1, it is easy to see that $p\mid a^{N}-a$.

Now, consider Case 2. In this case, we have $p\nmid a$. Hence, Fermat's little
theorem yields $a^{p-1}\equiv1\operatorname{mod}p$. Thus, $a^{c\left(
p-1\right)  }=\left(  \underbrace{a^{p-1}}_{\equiv1\operatorname{mod}%
p}\right)  ^{c}\equiv1^{c}=1\operatorname{mod}p$ for each $c\in\mathbb{N}$.

Now, $N\equiv1\operatorname{mod}\left(  p-1\right)  \left(  q-1\right)  $. In
other words, $\left(  p-1\right)  \left(  q-1\right)  \mid N-1$. Hence,
$p-1\mid\left(  p-1\right)  \left(  q-1\right)  \mid N-1$. In other words,
$N-1=c\left(  p-1\right)  $ for some integer $c$. Consider this $c$. From
$N-1=c\left(  p-1\right)  $, we conclude that $c$ is nonnegative (since $N-1$
is nonnegative and $p-1$ is positive). In other words, $c\in\mathbb{N}$. So we
have $a^{c\left(  p-1\right)  }\equiv1\operatorname{mod}p$. But
\begin{align*}
a^{N}  &  =aa^{N-1}=a\underbrace{a^{c\left(  p-1\right)  }}_{\equiv
1\operatorname{mod}p}\ \ \ \ \ \ \ \ \ \ \left(  \text{since }N-1=c\left(
p-1\right)  \right) \\
&  \equiv a1=a\operatorname{mod}p.
\end{align*}
In other words, $p\mid a^{N}-a$.

So we have proven $p\mid a^{N}-a$ in both Cases. Similarly, we can prove
$q\mid a^{N}-a$. Thus, Lemma \ref{lem.ent.rsa.rsa-lem} is proven.
\end{proof}

\subsubsection{Computing using the Chinese Remainder Theorem}

Assume that you have an expression $a$ that is made of integers, addition,
subtraction and multiplication. For example, say%
\[
a=400\cdot405\cdot409\cdot413-401\cdot404\cdot408\cdot414.
\]


Assume that computing $a$ directly is too hard, because the intermediate
results will be forbiddingly huge, but you know (e.g., from some estimates)
that the final result will be a fairly small numbers. Let's say (for
simplicity) that you know that $0\leq a<500\ 000$.

How can you use this information to compute $a$ quickly?

One trick is to compute the residue classes $\left[  a\right]  _{n}$ for
several coprime integers $n$. For example, we can compute $\left[  a\right]
_{2}$ (by doing the whole computation in $\mathbb{Z}/2$ instead of
$\mathbb{Z}$; now the intermediate results will certainly not be forbiddingly
huge anymore) and similarly $\left[  a\right]  _{3}$ and $\left[  a\right]
_{5}$ and $\left[  a\right]  _{7}$ etc. (here we are using $n=2,3,5,7$, but we
don't have to use primes -- we just need a bunch of coprime integers).

The Chinese Remainder Theorem (plus an actual algorithm that computes $\left(
S_{m,n}\right)  ^{-1}$) lets us \textquotedblleft patch\textquotedblright%
\ these results together:

\begin{itemize}
\item From $\left[  a\right]  _{2}$ and $\left[  a\right]  _{3}$, you can get
$\left[  a\right]  _{6}$.

\item From $\left[  a\right]  _{6}$ and $\left[  a\right]  _{5}$, you can get
$\left[  a\right]  _{30}$.

\item From $\left[  a\right]  _{30}$ and $\left[  a\right]  _{7}$, you can get
$\left[  a\right]  _{210}$.
\end{itemize}

and so on, until you get $\left[  a\right]  _{N}$ for some $N>500\ 000$. But
then you know $a\%N$. This means that you know $a$, because $0\leq
a<500\ 000<N$ shows that $a\%N=a$.

This technique has been used a lot. I think computer algebra software uses it,
e.g., for factoring integer polynomials.

\begin{center}
\textbf{2019-03-01 lecture}
\end{center}

\subsection{Primitive roots (preview?)}

\begin{definition}
Let $n$ be a positive integer. An invertible residue class $\alpha
\in\mathbb{Z}/n$ is said to be a \textbf{primitive root} modulo $n$ if every
invertible residue class $\beta\in\mathbb{Z}/n$ is a power of $\alpha$.

(\textquotedblleft Invertible\textquotedblright\ means \textquotedblleft has
an inverse\textquotedblright. \textquotedblleft Power of $\alpha
$\textquotedblright\ means $\alpha^{m}$ for some $m\in\mathbb{N}$.)
\end{definition}

\begin{example}
Let $n=9$. The invertible residue classes in $\mathbb{Z}/9$ are $\left[
1\right]  _{9},\left[  2\right]  _{9},\left[  4\right]  _{9},\left[  5\right]
_{9},\left[  7\right]  _{9},\left[  8\right]  _{9}$.

Clearly, $\left[  1\right]  _{9}$ is not a primitive root modulo $9$, since
all its powers equal $\left[  1\right]  _{9}$.

The powers of $\left[  2\right]  _{9}$ are
\begin{align*}
\left(  \left[  2\right]  _{9}\right)  ^{0}  &  =\left[  1\right]  _{9},\\
\left(  \left[  2\right]  _{9}\right)  ^{1}  &  =\left[  2\right]  _{9},\\
\left(  \left[  2\right]  _{9}\right)  ^{2}  &  =\left[  4\right]  _{9},\\
\left(  \left[  2\right]  _{9}\right)  ^{3}  &  =\left[  8\right]  _{9},\\
\left(  \left[  2\right]  _{9}\right)  ^{4}  &  =\left[  16\right]
_{9}=\left[  7\right]  _{9},\\
\left(  \left[  2\right]  _{9}\right)  ^{5}  &  =\left[  2\cdot7\right]
_{9}=\left[  14\right]  _{9}=\left[  5\right]  _{9},\\
&  \ldots.
\end{align*}
So all six invertible classes are covered. Thus, $\left[  2\right]  _{9}$ is a
primitive root modulo $9$.
\end{example}

Note that Euler's theorem (Theorem \ref{thm.ent.euler}) yields that if $\beta$
is an invertible residue class in $\mathbb{Z}/n$, then $\beta^{\phi\left(
n\right)  }=\left[  1\right]  _{n}$. So such a $\beta$ has at most
$\phi\left(  n\right)  $ distinct powers. When $\beta$ has \textbf{exactly}
$\phi\left(  n\right)  $ distinct powers, it is a primitive root.

\begin{example}
What are the primitive roots modulo $8$ ?

The invertible residue classes in $\mathbb{Z}/8$ are $\left[  1\right]
_{8},\left[  3\right]  _{8},\left[  5\right]  _{8},\left[  7\right]  _{8}$.

Again, $\left[  1\right]  _{8}$ is certainly not a primitive root.

The powers of $\left[  3\right]  _{8}$ are
\begin{align*}
\left(  \left[  3\right]  _{8}\right)  ^{0}  &  =\left[  1\right]  _{8},\\
\left(  \left[  3\right]  _{8}\right)  ^{1}  &  =\left[  3\right]  _{8},\\
\left(  \left[  3\right]  _{8}\right)  ^{2}  &  =\left[  9\right]
_{8}=\left[  1\right]  _{8},\\
&  \ldots
\end{align*}
(so the even powers are $\left[  1\right]  _{8}$ and the odd powers are
$\left[  3\right]  _{8}$). So $\left[  3\right]  _{8}$ is not a primitive root.

The same behavior prevents $\left[  5\right]  _{8}$ and $\left[  7\right]
_{8}$ from being primitive roots.

So there are no primitive roots modulo $8$.
\end{example}

\begin{theorem}
(Gauss) Let $n$ be a positive integer.

\textbf{(a)} A primitive root modulo $n$ exists if and only if $n$ is

\begin{itemize}
\item either $1$,

\item or a prime $p$,

\item or a power $p^{k}$ of an odd prime $p$ (recall: odd primes are just
primes $\neq2$),

\item or $4$,

\item or $2p^{k}$ for an odd prime $p$.
\end{itemize}

\textbf{(b)} If a primitive root modulo $n$ exists, then there are precisely
$\phi\left(  \phi\left(  n\right)  \right)  $ many of them.
\end{theorem}

This would be fairly difficult to prove at this point, but will be doable with
some abstract algebra (at least in the case $n=p$). See \cite[Chapter
4]{Gallier-RSA}.

\section{Complex numbers and Gaussian integers}

\subsection{Complex numbers}

First, let me recall the idea behind complex numbers unrigorously. Let us
extend the real numbers by a mystical \textquotedblleft$\sqrt{-1}%
$\textquotedblright. So let us just pretend that $-1$ has a square root that
behaves (in some ways) like a normal number would. Denote this square root by
$i$. So $i$ is some sort of weird new number such that $i^{2}=-1$.

Now, we get a bunch of new numbers from $i$ by applying addition, subtraction
and multiplication. They all have the form $a+bi+ci^{2}+di^{3}+\cdots$ (that
is, polynomials in $i$) for some reals $a,b,c,d,\ldots$. However, this form
can be reduced to the form $a^{\prime}+b^{\prime}i$ because $i^{2}=-1$,
$i^{3}=i\underbrace{i^{2}}_{=-1}=-i$ and so on. So all our new numbers have
the form $a+bi$ for two reals $a$ and $b$.

If we pretend that the standard rules of arithmetic still hold for our new
numbers, then we can easily see how to compute the sum, difference, product
and quotient of two numbers written in this form, and how to represent the
result again in this form: Namely,%
\begin{align*}
\left(  a+bi\right)  +\left(  c+di\right)   &  =\left(  a+c\right)  +\left(
b+d\right)  i,\\
\left(  a+bi\right)  -\left(  c+di\right)   &  =\left(  a-c\right)  +\left(
b-d\right)  i,\\
\left(  a+bi\right)  \left(  c+di\right)   &  =ac+adi+bci+bd\underbrace{i^{2}%
}_{=-1}\\
&  =ac+adi+bci-bd\\
&  =\left(  ac-bd\right)  +\left(  ad+bc\right)  i,\\
\dfrac{a+bi}{c+di}  &  =\dfrac{\left(  a+bi\right)  \left(  c-di\right)
}{\left(  c+di\right)  \left(  c-di\right)  }=\dfrac{\left(  ac+bd\right)
+\left(  bc-ad\right)  i}{c^{2}+d^{2}}\\
&  \ \ \ \ \ \ \ \ \ \ \left(  \text{if }c,d\text{ are not both }0\right)  .
\end{align*}
(Note that the latter formula is an analogue of the standard procedure for
rationalizing denominators:%
\[
\dfrac{a+\sqrt{2}}{c+d\sqrt{2}}=\dfrac{\left(  a+b\sqrt{2}\right)  \left(
c-d\sqrt{2}\right)  }{\left(  c+d\sqrt{2}\right)  \left(  c-d\sqrt{2}\right)
}=\dfrac{\left(  ac-2bd\right)  +\left(  bc-ad\right)  \sqrt{2}}{c^{2}-2d^{2}%
},
\]
except that now our square root is $\sqrt{-1}=i$.)

However, not everything works. Inequalities do not make sense for these new
numbers. Indeed, if they would make sense, then we would have:

\begin{itemize}
\item if $i\geq0$, then $i^{2}\geq0$, contradicting $i^{2}=-1<0$.

\item if $i<0$, then $i^{2}=\left(  -i\right)  ^{2}>0$, contradicting
$i^{2}=-1<0$.
\end{itemize}

So our weird new numbers have the operations $+,-,\cdot,/$ but not the
relations $<,\leq,>,\geq$.

But why does this all work? Why don't we run into contradictions just using
the operations $+,-,\cdot$ alone?

So let us forget this motivation and instead give a formal definition of
complex numbers:

\begin{definition}
\label{def.CC.CC}A \textit{complex number} is a pair $\left(  a,b\right)  $ of
two real numbers.

We let $\mathbb{C}$ be the set of all complex numbers.

For each real number $r$, we denote the complex number $\left(  r,0\right)  $
by $r_{\mathbb{C}}$.

We let $i$ be the complex number $\left(  0,1\right)  $. When the notation $i$
is ambiguous, I will be using $i_{\mathbb{C}}$ instead. (Some authors call it
$j$ or $\iota$ or just $\sqrt{-1}$.)

Define three binary operations $+,-,\cdot$ on $\mathbb{C}$ by setting%
\begin{align*}
\left(  a,b\right)  +\left(  c,d\right)   &  =\left(  a+c,b+d\right)  ,\\
\left(  a,b\right)  -\left(  c,d\right)   &  =\left(  a-c,b-d\right)  ,\\
\left(  a,b\right)  \cdot\left(  c,d\right)   &  =\left(  ac-bd,ad+bc\right)
\end{align*}
for all $\left(  a,b\right)  \in\mathbb{C}$ and $\left(  c,d\right)
\in\mathbb{C}$. We also write $\left(  a,b\right)  \left(  c,d\right)  $ for
$\left(  a,b\right)  \cdot\left(  c,d\right)  $.
\end{definition}

For example,%
\[
ii=\left(  0,1\right)  \left(  0,1\right)  =\left(  0\cdot0-1\cdot
1,0\cdot1+1\cdot0\right)  =\left(  -1,0\right)  =\left(  -1\right)
_{\mathbb{C}}.
\]
So $i$ \textquotedblleft acts as a square root of $-1$\textquotedblright. But
we also have $\left(  -i\right)  \left(  -i\right)  =\left(  -1\right)
_{\mathbb{C}}$, so $-i$ fits the same bill.

We are leaving division undefined so far, because we will later get it more or
less for free.

We shall follow \href{https://en.wikipedia.org/wiki/Order_of_operations}{the
usual \textquotedblleft PEMDAS\textquotedblright\ rules for the order of
operations} when interpreting expressions involving the operations $+,-,\cdot$
on $\mathbb{C}$. Thus, for example, $\alpha+\beta\cdot\gamma$ means
$\alpha+\left(  \beta\cdot\gamma\right)  $ and not $\left(  \alpha
+\beta\right)  \cdot\gamma$; likewise, $\alpha\beta^{k}+\gamma$ means $\left(
\alpha\left(  \beta^{k}\right)  \right)  +\gamma$ and not any other interpretation.

\begin{theorem}
\label{thm.CC.CC.rules}The following rules for addition, subtraction and
multiplication in $\mathbb{C}$ hold:

\textbf{(a)} We have $\alpha+\beta=\beta+\alpha$ for any $\alpha,\beta
\in\mathbb{C}$.

\textbf{(b)} We have $\alpha+\left(  \beta+\gamma\right)  =\left(
\alpha+\beta\right)  +\gamma$ for any $\alpha,\beta,\gamma\in\mathbb{C}$.

\textbf{(c)} We have $\alpha+0_{\mathbb{C}}=\alpha$ for any $\alpha
\in\mathbb{C}$.

\textbf{(d)} We have $\alpha\cdot1_{\mathbb{C}}=\alpha$ for any $\alpha
\in\mathbb{C}$.

\textbf{(e)} We have $\alpha\cdot\beta=\beta\cdot\alpha$ for any $\alpha
,\beta\in\mathbb{C}$.

\textbf{(f)} We have $\alpha\cdot\left(  \beta\cdot\gamma\right)  =\left(
\alpha\cdot\beta\right)  \cdot\gamma$ for any $\alpha,\beta,\gamma
\in\mathbb{C}$.

\textbf{(g)} We have $\alpha\cdot\left(  \beta+\gamma\right)  =\alpha
\beta+\alpha\gamma$ and $\left(  \alpha+\beta\right)  \cdot\gamma=\alpha
\gamma+\beta\gamma$ for any $\alpha,\beta,\gamma\in\mathbb{C}$.

\textbf{(h)} We have $\alpha\cdot0_{\mathbb{C}}=0_{\mathbb{C}}$ for any
$\alpha\in\mathbb{C}$.

\textbf{(i)} If $\alpha,\beta,\gamma\in\mathbb{C}$, then we have the
equivalence $\left(  \alpha-\beta=\gamma\right)  \Longleftrightarrow\left(
\alpha=\beta+\gamma\right)  $.
\end{theorem}

\begin{proof}
[Proof of Theorem \ref{thm.CC.CC.rules}.]All parts are straightforward. I will
only prove \textbf{(f)}, since it is the hardest part.

\textbf{(f)} Let $\alpha,\beta,\gamma\in\mathbb{C}$. Write $\alpha
,\beta,\gamma$ as $\alpha=\left(  a,a^{\prime}\right)  $ and $\beta=\left(
b,b^{\prime}\right)  $ and $\gamma=\left(  c,c^{\prime}\right)  $. Thus,%
\begin{align*}
\alpha\cdot\left(  \beta\cdot\gamma\right)   &  =\left(  a,a^{\prime}\right)
\cdot\underbrace{\left(  \left(  b,b^{\prime}\right)  \cdot\left(
c,c^{\prime}\right)  \right)  }_{=\left(  bc-b^{\prime}c^{\prime},bc^{\prime
}+b^{\prime}c\right)  }\\
&  =\left(  a,a^{\prime}\right)  \cdot\left(  bc-b^{\prime}c^{\prime
},bc^{\prime}+b^{\prime}c\right) \\
&  =\left(  a\left(  bc-b^{\prime}c^{\prime}\right)  -a^{\prime}\left(
bc^{\prime}+b^{\prime}c\right)  ,a\left(  bc^{\prime}+b^{\prime}c\right)
+a^{\prime}\left(  bc-b^{\prime}c^{\prime}\right)  \right) \\
&  =\left(  abc-ab^{\prime}c^{\prime}-a^{\prime}bc^{\prime}-a^{\prime
}b^{\prime}c,abc^{\prime}+ab^{\prime}c+a^{\prime}bc-a^{\prime}b^{\prime
}c^{\prime}\right)
\end{align*}
\newline and%
\begin{align*}
\left(  \alpha\cdot\beta\right)  \cdot\gamma &  =\underbrace{\left(  \left(
a,a^{\prime}\right)  \cdot\left(  b,b^{\prime}\right)  \right)  }_{=\left(
ab-a^{\prime}b^{\prime},ab^{\prime}+a^{\prime}b\right)  }\cdot\left(
c,c^{\prime}\right) \\
&  =\left(  ab-a^{\prime}b^{\prime},ab^{\prime}+a^{\prime}b\right)
\cdot\left(  c,c^{\prime}\right) \\
&  =\left(  \left(  ab-a^{\prime}b^{\prime}\right)  c-\left(  ab^{\prime
}+a^{\prime}b\right)  c^{\prime},\left(  ab-a^{\prime}b^{\prime}\right)
c^{\prime}+\left(  ab^{\prime}+a^{\prime}b\right)  c\right) \\
&  =\left(  abc-ab^{\prime}c^{\prime}-a^{\prime}bc^{\prime}-a^{\prime
}b^{\prime}c,abc^{\prime}+ab^{\prime}c+a^{\prime}bc-a^{\prime}b^{\prime
}c^{\prime}\right)  .
\end{align*}
Comparing these equalities, we see that $\alpha\cdot\left(  \beta\cdot
\gamma\right)  =\left(  \alpha\cdot\beta\right)  \cdot\gamma$. So part
\textbf{(f)} is proven.
\end{proof}

\begin{remark}
Finite sums ($\sum_{i\in I}\alpha_{i}$) and finite products ($\prod_{i\in
I}\alpha_{i}$) of elements $\alpha_{i}\in\mathbb{C}$ are well-defined and
satisfy the same rules that finite sums and finite products of reals satisfy.
(The proofs are identical to the analogous proofs for reals, but use Theorem
\ref{thm.CC.CC.rules} instead of the usual rules of commutativity,
associativity etc.) Thus, for example, $\alpha_{1}+\alpha_{2}+\cdots
+\alpha_{k}$ and $\alpha_{1}\alpha_{2}\cdots\alpha_{k}$ are well-defined
whenever $\alpha_{1},\alpha_{2},\ldots,\alpha_{k}\in\mathbb{C}$.
\end{remark}

\begin{theorem}
\label{thm.CC.RRtoCC.hom}For any real numbers $a$ and $b$, we have%
\begin{align*}
\left(  a+b\right)  _{\mathbb{C}}  &  =a_{\mathbb{C}}+b_{\mathbb{C}%
}\ \ \ \ \ \ \ \ \ \ \text{and}\\
\left(  a-b\right)  _{\mathbb{C}}  &  =a_{\mathbb{C}}-b_{\mathbb{C}%
}\ \ \ \ \ \ \ \ \ \ \text{and}\\
\left(  ab\right)  _{\mathbb{C}}  &  =a_{\mathbb{C}}b_{\mathbb{C}}.
\end{align*}

\end{theorem}

\begin{proof}
[Proof of Theorem \ref{thm.CC.RRtoCC.hom}.]Easy verification. For example, the
third equality follows from%
\begin{align*}
\underbrace{a_{\mathbb{C}}}_{=\left(  a,0\right)  }\underbrace{b_{\mathbb{C}}%
}_{=\left(  b,0\right)  }  &  =\left(  a,0\right)  \left(  b,0\right)
=\left(  ab-0\cdot0,a\cdot0+0\cdot b\right) \\
&  =\left(  ab,0\right)  =\left(  ab\right)  _{\mathbb{C}}.
\end{align*}

\end{proof}

\begin{remark}
\label{rmk.CC.RRtoCC.homk}If $a_{1},a_{2},\ldots,a_{k}$ are $k$ reals, then
\begin{align*}
\left(  a_{1}\right)  _{\mathbb{C}}+\left(  a_{2}\right)  _{\mathbb{C}}%
+\cdots+\left(  a_{k}\right)  _{\mathbb{C}}  &  =\left(  a_{1}+a_{2}%
+\cdots+a_{k}\right)  _{\mathbb{C}}\ \ \ \ \ \ \ \ \ \ \text{and}\\
\left(  a_{1}\right)  _{\mathbb{C}}\cdot\left(  a_{2}\right)  _{\mathbb{C}%
}\cdot\cdots\cdot\left(  a_{k}\right)  _{\mathbb{C}}  &  =\left(  a_{1}%
a_{2}\cdots a_{k}\right)  _{\mathbb{C}}.
\end{align*}
This can be proven by a straightforward induction on $k$.
\end{remark}

\begin{convention}
\label{conv.CC.RRtoCC.embed}From now on, for each real number $r$, we shall
identify the real number $r$ with the complex number $r_{\mathbb{C}}=\left(
r,0\right)  $. This is legitimate, due to the previous theorem.
\end{convention}

Thus, the complex numbers extend the real numbers: $\mathbb{R}\subseteq
\mathbb{C}$.

\begin{proposition}
\label{prop.CC.RRtoCC.a+bi}For any $\left(  a,b\right)  \in\mathbb{C}$, we
have $\left(  a,b\right)  =a+bi$.
\end{proposition}

\begin{proof}
By Convention \ref{conv.CC.RRtoCC.embed}, we identify the real numbers $a$ and
$b$ with the complex numbers $a_{\mathbb{C}}=\left(  a,0\right)  $ and
$b_{\mathbb{C}}=\left(  b,0\right)  $, respectively. Thus,%
\begin{align*}
\underbrace{a}_{=\left(  a,0\right)  }+\underbrace{b}_{=\left(  b,0\right)
}\underbrace{i}_{=\left(  0,1\right)  }  &  =\left(  a,0\right)
+\underbrace{\left(  b,0\right)  \left(  0,1\right)  }_{=\left(
b\cdot0-0\cdot1,b\cdot1+0\cdot0\right)  =\left(  0,b\right)  }=\left(
a,0\right)  +\left(  0,b\right) \\
&  =\left(  a+0,0+b\right)  =\left(  a,b\right)  .
\end{align*}

\end{proof}

\begin{proposition}
\label{prop.CC.CC.a(b,c)}For any $a\in\mathbb{R}$ and $\left(  b,c\right)
\in\mathbb{C}$, we have $a\left(  b,c\right)  =\left(  ab,ac\right)  $.
\end{proposition}

\begin{proof}
Straightforward verification.
\end{proof}

\begin{definition}
\label{def.CC.CC.inverse.inverse}An \textit{inverse} of a complex number
$\alpha$ is a complex number $\beta$ such that $\alpha\beta=1$. (Recall that
$1=1_{\mathbb{C}}$ by the convention that we just made.)
\end{definition}

\begin{theorem}
\label{thm.CC.CC.inverse.unique}Let $\alpha$ be a nonzero complex number.
(\textquotedblleft Nonzero\textquotedblright\ means \textquotedblleft distinct
from $0=0_{\mathbb{C}}=\left(  0,0\right)  $\textquotedblright.) Then,
$\alpha$ has a unique inverse.
\end{theorem}

\begin{proof}
\textit{Existence of the inverse:} Write $\alpha$ as $\alpha=\left(
c,d\right)  $ for two real numbers $c$ and $d$. Then, $c^{2}+d^{2}>0$ (since
$\left(  c,d\right)  =\alpha\neq0=\left(  0,0\right)  $). Now, set%
\[
\beta=\left(  \dfrac{c}{c^{2}+d^{2}},\dfrac{-d}{c^{2}+d^{2}}\right)  .
\]
Then,%
\begin{align*}
\alpha\beta &  =\left(  c,d\right)  \left(  \dfrac{c}{c^{2}+d^{2}},\dfrac
{-d}{c^{2}+d^{2}}\right) \\
&  =\left(  c\cdot\dfrac{c}{c^{2}+d^{2}}-d\cdot\dfrac{-d}{c^{2}+d^{2}}%
,c\cdot\dfrac{-d}{c^{2}+d^{2}}+d\cdot\dfrac{c}{c^{2}+d^{2}}\right) \\
&  =\left(  1,0\right)  =1_{\mathbb{C}}.
\end{align*}
So $\beta$ is an inverse of $\alpha$.

\textit{Uniqueness of the inverse:} We proved the uniqueness of an inverse of
an invertible element in $\mathbb{Z}/n$. The same argument applies to complex numbers.
\end{proof}

\begin{definition}
\label{def.CC.CC.inverse.notations}\textbf{(a)} The inverse of a nonzero
complex number $\beta$ is called $\beta^{-1}$.

\textbf{(b)} Let $\alpha$ and $\beta$ be two complex numbers such that
$\beta\neq0$. Then, the quotient $\dfrac{\alpha}{\beta}$ (also known as
$\alpha/\beta$) is defined as $\alpha\cdot\beta^{-1}$.
\end{definition}

It is easy to see that division undoes multiplication:

\begin{proposition}
\label{prop.CC.CC.inverse.undo}Given three complex numbers $\alpha
,\beta,\gamma$ with $\beta\neq0$. Then, we have the equivalence%
\[
\left(  \gamma=\dfrac{\alpha}{\beta}\right)  \Longleftrightarrow\left(
\alpha=\beta\gamma\right)  .
\]

\end{proposition}

\begin{proof}
$\Longrightarrow:$ Assume that $\gamma=\dfrac{\alpha}{\beta}$. Thus,
$\gamma=\dfrac{\alpha}{\beta}=\alpha\beta^{-1}$. Multiplying both sides with
$\beta$, we obtain $\gamma\beta=\alpha\underbrace{\beta^{-1}\beta}_{=1}%
=\alpha$. Hence, $\alpha=\gamma\beta=\beta\gamma$. This proves the
\textquotedblleft$\Longrightarrow$\textquotedblright\ direction.

$\Longleftarrow:$ Assume that $\alpha=\beta\gamma$. Multiplying both sides
with $\beta^{-1}$, we obtain $\beta^{-1}\alpha=\underbrace{\beta^{-1}\beta
}_{=1}\gamma=\gamma$, so that $\gamma=\beta^{-1}\alpha=\alpha\beta^{-1}%
=\dfrac{\alpha}{\beta}$. This proves the \textquotedblleft$\Longleftarrow
$\textquotedblright\ direction.
\end{proof}

\begin{definition}
\label{def.CC.CC.power}Let $\alpha\in\mathbb{C}$.

\textbf{(a)} For any $n\in\mathbb{N}$, we set $\alpha^{n}=\underbrace{\alpha
\alpha\cdots\alpha}_{n\text{ times}}$.

\textbf{(b)} For any negative $n\in\mathbb{Z}$, we set $\alpha^{n}=\left(
\alpha^{-1}\right)  ^{-n}$ whenever $\alpha\neq0$.
\end{definition}

Caution: Fractional powers (like $\alpha^{1/2}$) are not really well-defined.

\begin{proposition}
\textbf{(a)} Complex numbers satisfy the usual rules for exponents apply:
e.g., we have%
\[
\left(  \alpha\beta\right)  ^{n}=\alpha^{n}\beta^{n}%
,\ \ \ \ \ \ \ \ \ \ \alpha^{n+m}=\alpha^{n}\alpha^{m}%
,\ \ \ \ \ \ \ \ \ \ \left(  \alpha^{n}\right)  ^{m}=\alpha^{nm}%
\]
for all $\alpha,\beta\in\mathbb{C}$ and $n,m\in\mathbb{N}$. These equalities
also hold for arbitrary $n,m\in\mathbb{Z}$ when $\alpha$ and $\beta$ are nonzero.

\textbf{(b)} Complex numbers satisfy the binomial formula: That is, if
$\alpha,\beta\in\mathbb{C}$, then%
\[
\left(  \alpha+\beta\right)  ^{n}=\sum_{k=0}^{n}\dbinom{n}{k}\alpha^{k}%
\beta^{n-k}\ \ \ \ \ \ \ \ \ \ \text{for }n\in\mathbb{N}\text{.}%
\]

\end{proposition}

\begin{proof}
The same arguments as for real (or rational) numbers apply here.
\end{proof}

Also, $i^{2}=ii=-1$.

\begin{definition}
\label{def.CC.norm.norm-abs}Let $\alpha=\left(  a,b\right)  $ be a complex number.

\textbf{(a)} The \textit{norm} of $\alpha$ is defined to be the real number
$a^{2}+b^{2}\in\mathbb{R}$. This norm is called $\operatorname*{N}\left(
\alpha\right)  $. Note that $\operatorname*{N}\left(  \alpha\right)  \geq0$,
and equality holds only when $\alpha=0$.

\textbf{(b)} The \textit{absolute value} (or \textit{modulus} or
\textit{length}) of $\alpha$ is defined to be $\sqrt{\operatorname*{N}\left(
\alpha\right)  }=\sqrt{a^{2}+b^{2}}\in\mathbb{R}$. It is called $\left\vert
\alpha\right\vert $.
\end{definition}

Note that $\left\vert a_{\mathbb{C}}\right\vert =\left\vert a\right\vert $ for
all $a\in\mathbb{R}$.

\begin{definition}
\label{def.CC.conj.conj}Let $\alpha=\left(  a,b\right)  \in\mathbb{C}$.

The \textit{conjugate} $\overline{\alpha}$ of $\alpha$ is defined to be the
complex number $\left(  a,-b\right)  \in\mathbb{C}$.
\end{definition}

The following is easy to check:

\begin{proposition}
\label{prop.CC.conj.conjconj}Let $\alpha\in\mathbb{C}$.

\textbf{(a)} We have $\alpha=\overline{\alpha}$ if and only if $\alpha
\in\mathbb{R}$ (or, more formally: $\alpha=r_{\mathbb{C}}$ for some
$r\in\mathbb{R}$).

\textbf{(b)} We always have $\overline{\overline{\alpha}}=\alpha$.
\end{proposition}

\begin{proposition}
\label{prop.CC.norm.conj}Let $\alpha\in\mathbb{C}$.

\textbf{(a)} We have $\operatorname*{N}\left(  \alpha\right)  =\alpha
\overline{\alpha}$ (or, more formally: $\left(  \operatorname*{N}\left(
\alpha\right)  \right)  _{\mathbb{C}}=\alpha\overline{\alpha}$).

\textbf{(b)} We have $\operatorname*{N}\left(  \overline{\alpha}\right)
=\operatorname*{N}\left(  \alpha\right)  $.
\end{proposition}

\begin{proof}
\textbf{(a)} Write $\alpha$ as $\alpha=\left(  a,b\right)  $. Then,
$\overline{\alpha}=\left(  a,-b\right)  $. Thus,%
\begin{align*}
\alpha\overline{\alpha}  &  =\left(  a,b\right)  \left(  a,-b\right)  =\left(
aa-b\left(  -b\right)  ,a\left(  -b\right)  +ba\right) \\
&  =\left(  \underbrace{a^{2}+b^{2}}_{=\operatorname*{N}\left(  \alpha\right)
},0\right)  =\left(  \operatorname*{N}\left(  \alpha\right)  ,0\right)
=\left(  \operatorname*{N}\left(  \alpha\right)  \right)  _{\mathbb{C}}.
\end{align*}
This proves Proposition \ref{prop.CC.norm.conj} \textbf{(a)}.

\textbf{(b)} Write $\alpha$ as $\alpha=\left(  a,b\right)  $. Then,
$\overline{\alpha}=\left(  a,-b\right)  $. Thus, the definition of
$\operatorname*{N}\left(  \overline{\alpha}\right)  $ yields
$\operatorname*{N}\left(  \overline{\alpha}\right)  =a^{2}+\left(  -b\right)
^{2}=a^{2}+b^{2}=\operatorname*{N}\left(  \alpha\right)  $ (since this is how
$\operatorname*{N}\left(  \alpha\right)  $ was defined).
\end{proof}

A good reference for the basic properties of complex numbers is
\cite{LaNaSc16}.

\begin{center}
\textbf{2019-03-04 lecture}
\end{center}

\begin{proposition}
\label{prop.CC.conj.hom}Let $\alpha$ and $\beta$ be two complex numbers. Then:

\textbf{(a)} We have $\overline{\alpha+\beta}=\overline{\alpha}+\overline
{\beta}$.

\textbf{(b)} We have $\overline{\alpha-\beta}=\overline{\alpha}-\overline
{\beta}$.

\textbf{(c)} We have $\overline{\alpha\cdot\beta}=\overline{\alpha}%
\cdot\overline{\beta}$.

\textbf{(d)} We have $\operatorname*{N}\left(  \alpha\beta\right)
=\operatorname*{N}\left(  \alpha\right)  \cdot\operatorname*{N}\left(
\beta\right)  $.

\textbf{(e)} If $\beta\neq0$, then $\operatorname*{N}\left(  \dfrac{\alpha
}{\beta}\right)  =\dfrac{\operatorname*{N}\left(  \alpha\right)
}{\operatorname*{N}\left(  \beta\right)  }$.
\end{proposition}

\begin{proof}
\textbf{(c)} Write $\alpha$ as $\alpha=\left(  a,b\right)  $ for
$a,b\in\mathbb{R}$.

Write $\beta$ as $\beta=\left(  c,d\right)  $ for $c,d\in\mathbb{R}$.

Thus, $\alpha\cdot\beta=\left(  a,b\right)  \left(  c,d\right)  =\left(
ac-bd,ad+bc\right)  $.

Hence, $\overline{\alpha\cdot\beta}=\left(  ac-bd,-\left(  ad+bc\right)
\right)  $.

On the other hand, $\overline{\alpha}=\left(  a,-b\right)  $ (since
$\alpha=\left(  a,b\right)  $) and $\overline{\beta}=\left(  c,-d\right)  $
(similarly). Hence,%
\[
\overline{\alpha}\cdot\overline{\beta}=\left(  ac-\left(  -b\right)  \left(
-d\right)  ,a\left(  -d\right)  +b\left(  -c\right)  \right)  =\left(
ac-bd,-\left(  ad+bc\right)  \right)  .
\]
Comparing this with $\overline{\alpha\cdot\beta}=\left(  ac-bd,-\left(
ad+bc\right)  \right)  $, we obtain $\overline{\alpha\cdot\beta}%
=\overline{\alpha}\cdot\overline{\beta}$. This proves part \textbf{(c)}.

\textbf{(a)} and \textbf{(b)} are similar but easier.

\textbf{(d)} The proposition above (from last time) yields $\operatorname*{N}%
\left(  \alpha\right)  =\alpha\overline{\alpha}$. Similarly,
$\operatorname*{N}\left(  \beta\right)  =\beta\overline{\beta}$ and
$\operatorname*{N}\left(  \alpha\beta\right)  =\alpha\beta\overline
{\alpha\beta}$. Hence,%
\[
\operatorname*{N}\left(  \alpha\beta\right)  =\alpha\beta\underbrace{\overline
{\alpha\beta}}_{\substack{=\overline{\alpha\cdot\beta}=\overline{\alpha}%
\cdot\overline{\beta}\\\text{(by part \textbf{(c)})}}}=\alpha\beta
\overline{\alpha}\cdot\overline{\beta}=\underbrace{\left(  \alpha
\overline{\alpha}\right)  }_{=\operatorname*{N}\left(  \alpha\right)  }%
\cdot\underbrace{\left(  \beta\overline{\beta}\right)  }_{=\operatorname*{N}%
\left(  \beta\right)  }=\operatorname*{N}\left(  \alpha\right)  \cdot
\operatorname*{N}\left(  \beta\right)  .
\]
This proves part \textbf{(d)}.

\textbf{(e)} Assume that $\beta\neq0$. Part \textbf{(d)} (applied to
$\dfrac{\alpha}{\beta}$ instead of $\alpha$) yields $\operatorname*{N}\left(
\dfrac{\alpha}{\beta}\cdot\beta\right)  =\operatorname*{N}\left(
\dfrac{\alpha}{\beta}\right)  \cdot\operatorname*{N}\left(  \beta\right)  $.
In view of $\dfrac{\alpha}{\beta}\cdot\beta=\alpha$, this rewrites as
$\operatorname*{N}\left(  \alpha\right)  =\operatorname*{N}\left(
\dfrac{\alpha}{\beta}\right)  \cdot\operatorname*{N}\left(  \beta\right)  $.
From this, part \textbf{(e)} follows.
\end{proof}

Remember the Brahmagupta--Fibonacci identity
(\ref{eq.intro.sum-of-2sq.sum*sum}), which said that%
\[
\left(  a^{2}+b^{2}\right)  \left(  c^{2}+d^{2}\right)  =\left(  ad+bc\right)
^{2}+\left(  ac-bd\right)  ^{2}%
\]
for $a,b,c,d\in\mathbb{R}$. This identity is equivalent to the identity%
\[
\operatorname*{N}\left(  \alpha\right)  \cdot\operatorname*{N}\left(
\beta\right)  =\operatorname*{N}\left(  \alpha\beta\right)
\]
for the complex numbers $\alpha=\left(  a,b\right)  =a+bi$ and $\beta=\left(
c,d\right)  =c+di$. Thus, the identity (\ref{eq.intro.sum-of-2sq.sum*sum}) is
just part \textbf{(d)} of the above proposition, restated without the use of
complex numbers. This answers the question of how you could have come up with
this identity (although Brahmagupta must have found it in a different way,
since complex numbers were not known to him).

\begin{definition}
\label{def.CC.ReIm}Let $\alpha=\left(  a,b\right)  =a+bi$ be a complex number.

Then, $a$ is called the \textit{real part} of $\alpha$ and denoted
$\operatorname*{Re}\alpha$ (or $\mathfrak{R}\alpha$).

Also, $b$ is called the \textit{imaginary part} of $\alpha$ and denoted
$\operatorname*{Im}\alpha$ (or $\mathfrak{I}\alpha$).
\end{definition}

\begin{proposition}
\label{prop.CC.as-matrices.mu}Let $\mathbb{R}^{2\times2}$ be the set of
$2\times2$-matrices with real entries.

Define a map $\mu:\mathbb{C}\rightarrow\mathbb{R}^{2\times2}$ by%
\[
\mu\left(  a+bi\right)  =\left(
\begin{array}
[c]{cc}%
a & b\\
-b & a
\end{array}
\right)  .
\]


\textbf{(a)} We have $\mu\left(  \alpha+\beta\right)  =\mu\left(
\alpha\right)  +\mu\left(  \beta\right)  $ for all $\alpha,\beta\in\mathbb{C}$.

\textbf{(b)} We have $\mu\left(  \alpha-\beta\right)  =\mu\left(
\alpha\right)  -\mu\left(  \beta\right)  $ for all $\alpha,\beta\in\mathbb{C}$.

\textbf{(c)} We have $\mu\left(  \alpha\cdot\beta\right)  =\mu\left(
\alpha\right)  \cdot\mu\left(  \beta\right)  $ for all $\alpha,\beta
\in\mathbb{C}$.

\textbf{(d)} The map $\mu$ is injective.
\end{proposition}

\begin{proof}
\textbf{(a)}, \textbf{(b)} and \textbf{(c)} are straightforward computations.
E.g., for \textbf{(c)}, you want%
\[
\left(
\begin{array}
[c]{cc}%
a & b\\
-b & a
\end{array}
\right)  \left(
\begin{array}
[c]{cc}%
c & d\\
-d & c
\end{array}
\right)  =\left(
\begin{array}
[c]{cc}%
ac-bd & ad+bc\\
-\left(  ad+bc\right)  & ac-bd
\end{array}
\right)  .
\]


\textbf{(d)} You can always reconstruct $a+bi$ from $\left(
\begin{array}
[c]{cc}%
a & b\\
-b & a
\end{array}
\right)  $.
\end{proof}

Proposition \ref{prop.CC.as-matrices.mu} really says that (instead of
regarding complex numbers as pairs of real numbers) we can regard complex
numbers as a specific kind of $2\times2$-matrices with real entries (by
identifying each complex number $\alpha$ with the matrix $\mu\left(
\alpha\right)  $). This viewpoint has the advantage that multiplication of
complex numbers becomes a particular case of matrix multiplication. (We could
have saved ourselves the trouble of proving the associativity of
multiplication for complex numbers if we had taken this viewpoint.)

Finally, let me mention without proof the so-called \textit{Fundamental
Theorem of Algebra}:

\begin{theorem}
\label{thm.CC.FTA.factor}Let $p\left(  x\right)  $ be a polynomial of degree
$n$ with complex coefficients. Then, there exist complex numbers $\alpha
_{1},\alpha_{2},\ldots,\alpha_{n}$ and $\beta$ such that%
\[
p\left(  x\right)  =\beta\left(  x-\alpha_{1}\right)  \left(  x-\alpha
_{2}\right)  \cdots\left(  x-\alpha_{n}\right)  .
\]

\end{theorem}

In other words, any polynomial with complex coefficients can be factored into
linear factors. This is in contrast to real numbers, where polynomials can at
best be factored into linear and quadratic factors. (For example, the
polynomial $x^{2}+1$ cannot be factored further over the real numbers, but
factors as $\left(  x+i\right)  \left(  x-i\right)  $ over the complex numbers.)

The Fundamental Theorem of Algebra is not actually a theorem of algebra. It
relies heavily on the concepts of real and complex numbers. So it is actually
a theorem of analysis. For a proof, see \cite[Theorem 3.2.2]{LaNaSc16}.

\subsection{Gaussian integers}

Inside the set $\mathbb{C}$ of all complex numbers (an uncountable set) lies a
much smaller (countable) set of numbers, which are much closer to integers
than even to real numbers. We shall study them partly for their own sake,
partly as an instructive example of what will later call a commutative ring,
and partly in order to answer the questions from Section
\ref{sect.intro.sum-of-2sq} (although complex numbers were never mentioned in
that section).

We shall follow Keith Conrad's notes \cite{Conrad-Gauss} for most of this
section (but at the end we will go a bit further in order to answer Question
\ref{quest.intro.sum-of-2sq.2} \textbf{(b)}).

\subsubsection{Definitions and basics}

\begin{definition}
\label{def.Z[i].gauss.gauss}A \textit{Gaussian integer} is a complex number
$\left(  a,b\right)  $ with $a,b\in\mathbb{Z}$.
\end{definition}

For example, $3+5i$ and $3-7i$ are Gaussian integers. So are $0$, $1$ and $i$.
Every integer is a Gaussian integer. But $\dfrac{1}{2}+3i$ and $\sqrt{2}+4i$
are not Gaussian integers.

Equivalently, we could have defined Gaussian integers in the same way as we
defined complex numbers, but using $\mathbb{Z}$ instead of $\mathbb{R}$.

\begin{definition}
\label{def.Z[i].gauss.Z[i]}We let $\mathbb{Z}\left[  i\right]  $ be the set of
all Gaussian integers.
\end{definition}

Elementary number theory concerns itself with integers (mostly). Our goal in
this section is to replicate as much as we can of this theory in the setting
of Gaussian integers.

We will try to use Greek letters for Gaussian integers and Roman letters for integers.

\begin{proposition}
\label{prop.Z[i].gauss.ring}\textbf{(a)} Let $\alpha$ and $\beta$ be two
Gaussian integers. Then, $\alpha+\beta$, $\alpha-\beta$ and $\alpha\cdot\beta$
are Gaussian integers.

\textbf{(b)} Sums and products of finitely many Gaussian integers are Gaussian integers.
\end{proposition}

\begin{proof}
\textbf{(a)} This follows from the definitions of $+,-,\cdot$ on $\mathbb{C}$.

\textbf{(b)} This follows by induction from part \textbf{(a)}.
\end{proof}

\begin{proposition}
\label{prop.Z[i].gauss.conj}Let $\alpha$ be a Gaussian integer. Then,
$\overline{\alpha}$ is a Gaussian integer.
\end{proposition}

\begin{proof}
Obvious.
\end{proof}

\begin{definition}
\label{def.Z[i].gauss.unit}\textbf{(a)} A Gaussian integer $\alpha
\in\mathbb{Z}\left[  i\right]  $ is said to be \textit{invertible in}\textbf{
}$\mathbb{Z}\left[  i\right]  $ if it has an inverse in $\mathbb{Z}\left[
i\right]  $.

A \textit{unit} will mean a Gaussian integer that is invertible in
$\mathbb{Z}\left[  i\right]  $.

\textbf{(b)} We define a relation $\sim$ on $\mathbb{Z}\left[  i\right]  $ by%
\[
\left(  \alpha\sim\beta\right)  \Longleftrightarrow\left(  \alpha=\gamma
\beta\text{ for some unit }\gamma\in\mathbb{Z}\left[  i\right]  \right)  .
\]
This relation will be called \textit{unit-equivalence} (or \textit{equality up
to unit}).
\end{definition}

For comparison: The units of $\mathbb{Z}$ (that is, the integers that are
invertible in $\mathbb{Z}$) are $1$ and $-1$. So if we defined a relation
$\underset{\mathbb{Z}}{\sim}$ on $\mathbb{Z}$ in the same way as we defined
the relation $\sim$ (but requiring $\gamma\in\mathbb{Z}$ instead of $\gamma
\in\mathbb{Z}\left[  i\right]  $), then this relation would just be given by%
\begin{align}
\left(  a\underset{\mathbb{Z}}{\sim}b\right)   &  \Longleftrightarrow\left(
a=cb\text{ for some }c\in\left\{  1,-1\right\}  \right) \nonumber\\
&  \Longleftrightarrow\left(  a=b\text{ or }a=-b\right)  \Longleftrightarrow
\left(  \left\vert a\right\vert =\left\vert b\right\vert \right)  .
\label{eq.Z[i].gauss.unit-Z}%
\end{align}
But this does not hold for the relation $\sim$. It is easy to find two
Gaussian integers $\alpha$ and $\beta$ such that $\left\vert \alpha\right\vert
=\left\vert \beta\right\vert $ holds but $\alpha\sim\beta$ does not (for
example, $\alpha=16+63i$ and $\beta=33+56i$ both have absolute value $65$ but
are not unit-equivalent).

\begin{proposition}
\label{prop.Z[i].gauss.uniteq.eqrel}The relation $\sim$ on $\mathbb{Z}\left[
i\right]  $ is an equivalence relation.
\end{proposition}

\begin{proof}
The relation $\sim$ is reflexive. [\textit{Proof:} Each $\alpha\in
\mathbb{Z}\left[  i\right]  $ satisfies $\alpha=1\alpha$, but $1$ is a unit.]

The relation $\sim$ is symmetric. [\textit{Proof:} Let $\alpha,\beta
\in\mathbb{Z}\left[  i\right]  $ be such that $\alpha\sim\beta$. From
$\alpha\sim\beta$, we conclude that $\alpha=\gamma\beta$ for some unit
$\gamma$. Consider this $\gamma$. Then, $\gamma^{-1}$ is a Gaussian integer
(since $\gamma$ is a unit) and is also a unit (since $\left(  \gamma
^{-1}\right)  ^{-1}=\gamma$), and the equality $\alpha=\gamma\beta$ leads to
$\beta=\gamma^{-1}\alpha$. Hence, $\beta\sim\alpha$.]

The relation $\sim$ is transitive. [\textit{Proof:} Let $\alpha,\beta
,\gamma\in\mathbb{Z}\left[  i\right]  $ be such that $\alpha\sim\beta$ and
$\beta\sim\gamma$. From $\alpha\sim\beta$, we conclude that $\alpha
=\delta\beta$ for some unit $\delta$. From $\beta\sim\gamma$, we conclude that
$\beta=\varepsilon\gamma$ for some unit $\varepsilon$. Now, $\delta
\varepsilon$ is a product of two units, and thus is itself a unit (since
$\left(  \delta\varepsilon\right)  ^{-1}=\varepsilon^{-1}\delta^{-1}$). This
unit $\delta\varepsilon$ satisfies $\alpha=\left(  \delta\varepsilon\right)
\gamma$ (since $\alpha=\delta\underbrace{\beta}_{=\varepsilon\gamma}%
=\delta\varepsilon\gamma=\left(  \delta\varepsilon\right)  \gamma$). Hence,
$\alpha\sim\gamma$.]
\end{proof}

\begin{proposition}
\label{prop.Z[i].gauss.Norm-N}Let $\alpha\in\mathbb{Z}\left[  i\right]  $.
Then, $\operatorname*{N}\left(  \alpha\right)  \in\mathbb{N}$.
\end{proposition}

\begin{proof}
Write $\alpha$ as $\left(  a,b\right)  $ for $a,b\in\mathbb{Z}$. Then,
$\operatorname*{N}\left(  \alpha\right)  =a^{2}+b^{2}\in\mathbb{N}$, since
squares of integers belong to $\mathbb{N}$.
\end{proof}

\begin{proposition}
\label{prop.Z[i].gauss.units}The units of $\mathbb{Z}\left[  i\right]  $ are
$1,-1,i,-i$.
\end{proposition}

\begin{proof}
First of all, $1,-1,i,-i$ are units of $\mathbb{Z}\left[  i\right]  $ (since
$i\left(  -i\right)  =1$). It remains to prove that there are no other units.

So let $\alpha\in\mathbb{Z}\left[  i\right]  $ be a unit. Thus, it has an
inverse $\alpha^{-1}\in\mathbb{Z}\left[  i\right]  $.

Hence, $\alpha\alpha^{-1}=1$, so that $\operatorname*{N}\left(  \alpha
\alpha^{-1}\right)  =\operatorname*{N}\left(  1\right)  =\operatorname*{N}%
\left(  \left(  1,0\right)  \right)  =1^{2}+0^{2}=1$. But the formula
$\operatorname*{N}\left(  \alpha\beta\right)  =\operatorname*{N}\left(
\alpha\right)  \cdot\operatorname*{N}\left(  \beta\right)  $ (applied to
$\beta=\alpha^{-1}$) yields $\operatorname*{N}\left(  \alpha\alpha
^{-1}\right)  =\operatorname*{N}\left(  \alpha\right)  \cdot\operatorname*{N}%
\left(  \alpha^{-1}\right)  $. Hence, $\operatorname*{N}\left(  \alpha\right)
\cdot\operatorname*{N}\left(  \alpha^{-1}\right)  =\operatorname*{N}\left(
\alpha\alpha^{-1}\right)  =1$. But the previous proposition yields
$\operatorname*{N}\left(  \alpha\right)  ,\operatorname*{N}\left(  \alpha
^{-1}\right)  \in\mathbb{N}$. Hence, $\operatorname*{N}\left(  \alpha\right)
\cdot\operatorname*{N}\left(  \alpha^{-1}\right)  =1$ yields
$\operatorname*{N}\left(  \alpha\right)  =\operatorname*{N}\left(  \alpha
^{-1}\right)  =1$.

But write $\alpha$ as $\alpha=\left(  a,b\right)  $ with $a,b\in\mathbb{Z}$.
Then, $a^{2}+b^{2}=\operatorname*{N}\left(  \alpha\right)  =1$. This entails
that $\left(  a,b\right)  $ is either $\left(  1,0\right)  $ or $\left(
-1,0\right)  $ or $\left(  0,1\right)  $ or $\left(  0,-1\right)  $ (since
$a^{2}+b^{2}=1$ leads to $a^{2}\leq1$ and thus $a\in\left\{  0,1,-1\right\}  $
and similarly $b\in\left\{  0,1,-1\right\}  $, and we can check all these
cases by hand). In other words, $\alpha$ is either $1$ or $-1$ or $i$ or $-i$.
This proves the proposition.
\end{proof}

As a consequence of this proposition, if we are given two Gaussian integers
$\alpha$ and $\beta$, we can easily check whether $\alpha\sim\beta$ holds.

\begin{proposition}
\label{prop.Z[i].gauss.norm1}Let $\alpha$ be a Gaussian integer.

\textbf{(a)} We have $\operatorname*{N}\left(  \alpha\right)  =0$ if and only
if $\alpha=0$.

\textbf{(b)} We have $\operatorname*{N}\left(  \alpha\right)  =1$ if and only
if $\alpha$ is a unit.
\end{proposition}

\begin{proof}
Write $\alpha$ as $\alpha=\left(  a,b\right)  =a+bi$ for $a,b\in\mathbb{Z}$.
Then, $\operatorname*{N}\left(  \alpha\right)  =a^{2}+b^{2}$.

\textbf{(a)} We have $\operatorname*{N}\left(  \alpha\right)  =0$ if only if
$a^{2}+b^{2}=0$ (since $\operatorname*{N}\left(  \alpha\right)  =a^{2}+b^{2}%
$), which can only happen when both $a$ and $b$ equal $0$, which means that
$\alpha=0$.

\textbf{(b)} We have $\operatorname*{N}\left(  \alpha\right)  =a^{2}+b^{2}$.
Thus, $\operatorname*{N}\left(  \alpha\right)  =1$ if and only if one of $a$
and $b$ is $\pm1$ and the other is $0$; but this characterizes the Gaussian
integers $1,-1,i,-i$, which are precisely the units.
\end{proof}

\begin{definition}
\label{def.Z[i].gauss.uniteq.cl}The \textit{unit-equivalence classes} are
defined to be the equivalence classes of the relation $\sim$ on $\mathbb{Z}%
\left[  i\right]  $.
\end{definition}

\begin{proposition}
\label{prop.Z[i].gauss.uniteq.cl}The unit-equivalence classes are the sets of
the form $\left\{  \alpha,i\alpha,-\alpha,-i\alpha\right\}  $ for some
$\alpha\in\mathbb{C}$.
\end{proposition}

\begin{proof}
Easy.
\end{proof}

\begin{proposition}
\label{prop.Z[i].gauss.uniteq.1}Let $\alpha$ be a Gaussian integer. Then,
$\alpha\sim1$ if and only if $\alpha$ is a unit.
\end{proposition}

\begin{proposition}
\label{prop.Z[i].gauss.uniteq.norm=norm}Let $\alpha$ and $\beta$ be two
unit-equivalent Gaussian integers. Then, $\operatorname*{N}\left(
\alpha\right)  =\operatorname*{N}\left(  \beta\right)  $.
\end{proposition}

\begin{proof}
We have $\alpha=\gamma\beta$ for some unit $\gamma\in\mathbb{Z}\left[
i\right]  $ (since $\alpha\sim\beta$). Consider this $\gamma$. Since $\gamma$
is a unit, we have $\operatorname*{N}\left(  \gamma\right)  =1$ (by
Proposition \ref{prop.Z[i].gauss.norm1} \textbf{(b)}). Thus,
$\operatorname*{N}\left(  \alpha\right)  =\underbrace{\operatorname*{N}\left(
\gamma\right)  }_{=1}\operatorname*{N}\left(  \beta\right)  =\operatorname*{N}%
\left(  \beta\right)  $.
\end{proof}

\subsubsection{Divisibility and congruence}

Now, we begin to do proper number theory with Gaussian integers. The next
definition is the straightforward analogue of Definition \ref{def.ent.div.div}.

\begin{definition}
\label{def.Z[i].gauss.div}Let $\alpha$ and $\beta$ be two Gaussian integers.
We say that $\alpha\mid\beta$ (or \textquotedblleft$\alpha$ \textit{divides}
$\beta$\textquotedblright\ or \textquotedblleft$\beta$ is \textit{divisible by
}$\alpha$\textquotedblright\ or \textquotedblleft$\beta$ is a
\textit{multiple} of $\alpha$\textquotedblright) if there exists a Gaussian
integer $\gamma$ such that $\beta=\alpha\gamma$.

We furthermore say that $\alpha\nmid\beta$ if $\alpha$ does not divide $\beta$.
\end{definition}

When making such a definition, we need to be very careful: Potentially, it
might create a clash of notations. In fact, every integer is a Gaussian
integer. If $a$ and $b$ are integers, then the statement \textquotedblleft%
$a\mid b$\textquotedblright\ already has a meaning (explained in Definition
\ref{def.ent.div.div}). Definition \ref{def.Z[i].gauss.div} gives this
statement a new meaning, because we can consider our integers $a$ and $b$ as
Gaussian integers. If these two meanings are not equivalent, then we have laid
ourselves a landmine!

Fortunately, these two meanings \textbf{are} equivalent. That is: If $a$ and
$b$ are two integers, then the statement \textquotedblleft$a\mid
b$\textquotedblright\ interpreted according to Definition
\ref{def.ent.div.div} is equivalent to the statement \textquotedblleft$a\mid
b$\textquotedblright\ interpreted according to Definition
\ref{def.Z[i].gauss.div}. This follows from the following proposition:

\begin{proposition}
\label{prop.Z[i].gauss.div.int|gauss}Let $a\in\mathbb{Z}$ and $\beta=\left(
b,c\right)  \in\mathbb{Z}\left[  i\right]  $. Then, $a\mid\beta$ if and only
if $a$ divides both $b$ and $c$.
\end{proposition}

\begin{proof}
We have the following equivalence:%
\begin{align*}
&  \ \left(  a\mid\beta\right) \\
&  \Longleftrightarrow\ \left(  \text{there exists a Gaussian integer }%
\gamma\text{ such that }\beta=a\gamma\right) \\
&  \Longleftrightarrow\ \left(  \text{there exists a Gaussian integer }\left(
u,v\right)  \text{ such that }\beta=a\left(  u,v\right)  \right) \\
&  \Longleftrightarrow\ \left(  \text{there exist integers }u\text{ and
}v\text{ such that }\beta=a\left(  u,v\right)  \right) \\
&  \Longleftrightarrow\ \left(  \text{there exist integers }u\text{ and
}v\text{ such that }\underbrace{\left(  b,c\right)  =\left(  au,av\right)
}_{\Longleftrightarrow\ \left(  b=au\text{ and }c=av\right)  }\right) \\
&  \ \ \ \ \ \ \ \ \ \ \left(  \text{since }\beta=\left(  b,c\right)  \text{
and }a\left(  u,v\right)  =\left(  au,av\right)  \right) \\
&  \Longleftrightarrow\ \left(  \text{there exist integers }u\text{ and
}v\text{ such that }b=au\text{ and }c=av\right) \\
&  \Longleftrightarrow\ \underbrace{\left(  \text{there exists an integer
}u\text{ such that }b=au\right)  }_{\Longleftrightarrow\ \left(  a\mid
b\right)  }\\
&  \ \ \ \ \ \ \ \ \ \ \wedge\underbrace{\left(  \text{there exists an integer
}v\text{ such that }c=av\right)  }_{\Longleftrightarrow\ \left(  a\mid
c\right)  }\\
&  \Longleftrightarrow\ \left(  a\mid b\right)  \wedge\left(  a\mid c\right)
\\
&  \Longleftrightarrow\ \left(  a\text{ divides }b\text{ and }c\right)  .
\end{align*}

\end{proof}

The next proposition is a (partial) analogue of Proposition
\ref{prop.ent.div.1}:

\begin{proposition}
\label{prop.Z[i].gauss.div.1}Let $\alpha$ and $\beta$ be two Gaussian integers.

\textbf{(a)} If $\alpha\mid\beta$, then $\operatorname*{N}\left(
\alpha\right)  \mid\operatorname*{N}\left(  \beta\right)  $.

\textbf{(b)} If $\alpha\mid\beta$ and $\beta\neq0$, then $\operatorname*{N}%
\left(  \alpha\right)  \leq\operatorname*{N}\left(  \beta\right)  $.

\textbf{(c)} Assume that $\alpha\neq0$. Then, $\alpha\mid\beta$ if and only if
$\dfrac{\beta}{\alpha}\in\mathbb{Z}\left[  i\right]  $.
\end{proposition}

Note that we are using the norms $\operatorname*{N}\left(  \alpha\right)  $
and $\operatorname*{N}\left(  \beta\right)  $ as analogues of $\left\vert
a\right\vert $ and $\left\vert b\right\vert $ here, since the absolute values
$\left\vert \alpha\right\vert $ and $\left\vert \beta\right\vert $ of Gaussian
integers are often irrational and thus it makes no sense to talk of their divisibility.

Note that the converse of Proposition \ref{prop.Z[i].gauss.div.1} does not
hold. (That is, $\operatorname*{N}\left(  \alpha\right)  \mid\operatorname*{N}%
\left(  \beta\right)  $ does not yield $\alpha\mid\beta$.)

\begin{proof}
[Proof of Proposition \ref{prop.Z[i].gauss.div.1}.]\textbf{(a)} Assume that
$\alpha\mid\beta$. Then, $\beta=\alpha\gamma$ for some $\gamma\in
\mathbb{Z}\left[  i\right]  $. Thus, $\operatorname*{N}\left(  \beta\right)
=\operatorname*{N}\left(  \alpha\gamma\right)  =\operatorname*{N}\left(
\alpha\right)  \cdot\operatorname*{N}\left(  \gamma\right)  $, so
$\operatorname*{N}\left(  \alpha\right)  \mid\operatorname*{N}\left(
\beta\right)  $ since $\operatorname*{N}\left(  \gamma\right)  \in\mathbb{N}$.

\textbf{(b)} follows from \textbf{(a)}, since the norms are nonnegative
integers (and since $\beta\neq0$ implies $\operatorname*{N}\left(
\beta\right)  \neq0$).

\textbf{(c)} is proven as in the integer case.
\end{proof}

The next proposition is a straightforward analogue of Proposition
\ref{prop.ent.div.2}:

\begin{proposition}
\label{prop.Z[i].div.2}\textbf{(a)} We have $\alpha\mid\alpha$ for every
$\alpha\in\mathbb{Z}\left[  i\right]  $. (This is called the
\textit{reflexivity of divisibility}.)

\textbf{(b)} If $\alpha,\beta,\gamma\in\mathbb{Z}\left[  i\right]  $ satisfy
$\alpha\mid\beta$ and $\beta\mid\gamma$, then $\alpha\mid\gamma$. (This is
called the \textit{transitivity of divisibility}.)

\textbf{(c)} If $\alpha_{1},\alpha_{2},\beta_{1},\beta_{2}\in\mathbb{Z}\left[
i\right]  $ satisfy $\alpha_{1}\mid\beta_{1}$ and $\alpha_{2}\mid\beta_{2}$,
then $\alpha_{1}\alpha_{2}\mid\beta_{1}\beta_{2}$.
\end{proposition}

\begin{proof}
Analogous to the proof of Proposition \ref{prop.ent.div.2}.
\end{proof}

The next exercise is a Gaussian-integer analogue of Exercise
\ref{exe.ent.div.abba}:

\begin{exercise}
\label{exe.Z[i].div.abba}Let $\alpha$ and $\beta$ be two Gaussian integers
such that $\alpha\mid\beta$ and $\beta\mid\alpha$. Prove that $\alpha\sim
\beta$.
\end{exercise}

\begin{proof}
[Solution sketch.]WLOG assume that $\alpha\neq0$. Then, $\beta\neq0$. Now,
from $\alpha\mid\beta$, we obtain $\dfrac{\beta}{\alpha}\in\mathbb{Z}\left[
i\right]  $. Similarly, $\dfrac{\alpha}{\beta}\in\mathbb{Z}\left[  i\right]
$. Thus, $\dfrac{\beta}{\alpha}$ and $\dfrac{\alpha}{\beta}$ are mutually
inverse Gaussian integers. So $\dfrac{\beta}{\alpha}$ is invertible, i.e., is
a unit. But $\beta=\alpha\cdot\dfrac{\beta}{\alpha}$, so $\beta\sim\alpha$
(since $\dfrac{\beta}{\alpha}$ is a unit), and thus $\alpha\sim\beta$.
\end{proof}

Note that the conclusion \textquotedblleft$\alpha\sim\beta$\textquotedblright%
\ in Exercise \ref{exe.Z[i].div.abba} is the proper Gaussian-integer analogue
of the conclusion \textquotedblleft$\left\vert a\right\vert =\left\vert
b\right\vert $\textquotedblright\ in Exercise \ref{exe.ent.div.abba} (since
(\ref{eq.Z[i].gauss.unit-Z}) shows that unit-equivalence on $\mathbb{Z}\left[
i\right]  $ is an analogue of the \textquotedblleft have the same absolute
value\textquotedblright\ relation on $\mathbb{Z}$). (We could have stated the
weaker conclusion $\left\vert \alpha\right\vert =\left\vert \beta\right\vert $
as well, but it would not be half as useful.)

The next exercise is an analogue of Exercise \ref{exe.ent.div.acbc}:

\begin{exercise}
\label{exe.Z[i].div.acbc}Let $\alpha,\beta,\gamma$ be three Gaussian integers
such that $\gamma\neq0$. Prove that $\alpha\mid\beta$ holds if and only if
$\alpha\gamma\mid\beta\gamma$.
\end{exercise}

The next exercise is an analogue of Exercise \ref{exe.ent.div.powers}:

\begin{exercise}
\label{exe.Z[i].div.powers}Let $\nu\in\mathbb{Z}\left[  i\right]  $. Let
$a,b\in\mathbb{N}$ be such that $a\leq b$. Prove that $\nu^{a}\mid\nu^{b}$.
\end{exercise}

Needless to say, the $a$ and $b$ in this exercise still have to be nonnegative
integers, since Gaussian integers make no sense in exponents.

The next exercise is an analogue of Exercise \ref{exe.ent.div.g|1}:

\begin{exercise}
\label{exe.Z[i].div.g|1}Let $\gamma$ be a Gaussian integer such that
$\gamma\mid1$. Prove that $\gamma\sim1$ (that is, $\gamma$ is a unit, i.e.,
either $1$ or $-1$ or $i$ or $-i$).
\end{exercise}

Next comes another trivial fact:

\begin{exercise}
\label{exe.Z[i].div.conj}Let $\alpha$ and $\beta$ be Gaussian integers such
that $\alpha\mid\beta$. Prove that $\overline{\alpha}\mid\overline{\beta}$.
\end{exercise}

\begin{center}
\textbf{2019-03-06 lecture}
\end{center}

We have defined congruence for integers in Definition \ref{def.ent.cong}. We
can repeat the same definition for Gaussian integers:

\begin{definition}
\label{def.Z[i].cong}Let $\nu,\alpha,\beta\in\mathbb{Z}\left[  i\right]  $. We
say that $\alpha$ \textit{is congruent to }$\beta$ \textit{modulo }$\nu$ if
and only if $\nu\mid\alpha-\beta$. We shall use the notation \textquotedblleft%
$\alpha\equiv\beta\operatorname{mod}\nu$\textquotedblright\ for
\textquotedblleft$\alpha$ is congruent to $\beta$ modulo $\nu$%
\textquotedblright.

We furthermore shall use the notation \textquotedblleft$\alpha\not \equiv
\beta\operatorname{mod}\nu$\textquotedblright\ for \textquotedblleft$\alpha$
is not congruent to $\beta$ modulo $\nu$\textquotedblright.
\end{definition}

Once again, such a definition risks sneaking in ambiguity, but fortunately
this one does not: If $n,a,b\in\mathbb{Z}$, then the statement
\textquotedblleft$a\equiv b\operatorname{mod}n$\textquotedblright\ interpreted
according to Definition \ref{def.ent.cong} is equivalent to the statement
\textquotedblleft$a\equiv b\operatorname{mod}n$\textquotedblright\ interpreted
according to Definition \ref{def.Z[i].cong} (by treating $n,a,b$ as Gaussian
integers). To do so, recall that both statements are defined to mean
\textquotedblleft$n\mid a-b$\textquotedblright, and the meaning of the latter
statement does not depend on whether we interpret $n,a,b$ as integers or as
Gaussian integers.

The next proposition is a straightforward analogue of Proposition
\ref{prop.ent.mod.0}:

\begin{proposition}
\label{prop.Z[i].mod.0}Let $\nu\in\mathbb{Z}\left[  i\right]  $ and $\alpha
\in\mathbb{Z}\left[  i\right]  $. Then, $\alpha\equiv0\operatorname{mod}\nu$
if and only if $\nu\mid\alpha$.
\end{proposition}

\begin{proof}
Analogous to the proof of Proposition \ref{prop.ent.mod.0}.
\end{proof}

The next proposition is a straightforward analogue of Proposition
\ref{prop.ent.mod.basics}:

\begin{proposition}
\label{prop.Z[i].mod.basics}Let $\nu\in\mathbb{Z}\left[  i\right]  $.

\textbf{(a)} We have $\alpha\equiv\alpha\operatorname{mod}\nu$ for every
$\alpha\in\mathbb{Z}\left[  i\right]  $.

\textbf{(b)} If $\alpha,\beta,\gamma\in\mathbb{Z}\left[  i\right]  $ satisfy
$\alpha\equiv\beta\operatorname{mod}\nu$ and $\beta\equiv\gamma
\operatorname{mod}\nu$, then $\alpha\equiv\gamma\operatorname{mod}\nu$.

\textbf{(c)} If $\alpha,\beta\in\mathbb{Z}\left[  i\right]  $ satisfy
$\alpha\equiv\beta\operatorname{mod}\nu$, then $\beta\equiv\alpha
\operatorname{mod}\nu$.

\textbf{(d)} If $\alpha_{1},\alpha_{2},\beta_{1},\beta_{2}\in\mathbb{Z}\left[
i\right]  $ satisfy $\alpha_{1}\equiv\beta_{1}\operatorname{mod}\nu$ and
$\alpha_{2}\equiv\beta_{2}\operatorname{mod}\nu$, then%
\begin{align}
\alpha_{1}+\alpha_{2}  &  \equiv\beta_{1}+\beta_{2}\operatorname{mod}%
\nu;\label{eq.prop.Z[i].mod.basics.d.1}\\
\alpha_{1}-\alpha_{2}  &  \equiv\beta_{1}-\beta_{2}\operatorname{mod}%
\nu;\label{eq.prop.Z[i].mod.basics.d.2}\\
\alpha_{1}\alpha_{2}  &  \equiv\beta_{1}\beta_{2}\operatorname{mod}\nu.
\label{eq.prop.Z[i].mod.basics.d.3}%
\end{align}


\textbf{(e)} Let $\mu\in\mathbb{Z}\left[  i\right]  $ be such that $\mu\mid
\nu$. If $\alpha,\beta\in\mathbb{Z}\left[  i\right]  $ satisfy $\alpha
\equiv\beta\operatorname{mod}\nu$, then $\alpha\equiv\beta\operatorname{mod}%
\mu$.
\end{proposition}

\begin{proof}
Analogous to the proof of Proposition \ref{prop.ent.mod.basics}.
\end{proof}

\subsubsection{Division with remainder}

Now, let us try to make division with remainder work for Gaussian integers.
This is no longer easy or just a straightforward modification of the
corresponding situation for integers.

Let us recall how division with remainder works for (usual) integers. The
relevant fact (Theorem \ref{thm.ent.quorem.full} with $u$ and $n$ renamed as
$a$ and $b$) is the following:

\begin{theorem}
Let $b$ be a positive integer. Let $a\in\mathbb{Z}$. Then, there exists a
unique pair $\left(  q,r\right)  \in\mathbb{Z}\times\left\{  0,1,\ldots
,b-1\right\}  $ such that $a=qb+r$.
\end{theorem}

With Gaussian integers, it is no longer clear what $\left\{  0,1,\ldots
,b-1\right\}  $ would be. But when we have Gaussian integers $\alpha$ and
$\beta\neq0$, we may try to find a pair $\left(  \gamma,\rho\right)
\in\mathbb{Z}\left[  i\right]  \times\mathbb{Z}\left[  i\right]  $ such that
$\alpha=\gamma\beta+\rho$ and $\operatorname*{N}\left(  \rho\right)
<\operatorname*{N}\left(  \beta\right)  $. It turns out that such a pair
exists (but is not unique).

To prove this, let us recall a similar statement about integers -- which turns
out to be not the original Theorem \ref{thm.ent.quorem.full}, but rather a
modified version thereof:

\begin{theorem}
(Minimum-size division theorem) Let $b$ be a positive integer. Let
$a\in\mathbb{Z}$. Then, there exist integers $q$ and $r$ such that $a=qb+r$
and $\left\vert r\right\vert \leq b/2$.
\end{theorem}

This is the claim of Exercise \ref{exe.ent.quo-rem.minrem} \textbf{(a)}. Note
that $\left(  q,r\right)  $ is not always unique.

Now, let us state an analogous fact for Gaussian integers:

\begin{theorem}
\label{thm.Z[i].gauss.quorem}(Division-with-remainder theorem for Gaussian integers:)

Let $\alpha$ and $\beta\neq0$ be Gaussian integers. There exist Gaussian
integers $\gamma$ and $\rho$ such that $\alpha=\gamma\beta+\rho$ and
$\operatorname*{N}\left(  \rho\right)  \leq\operatorname*{N}\left(
\beta\right)  /2$.
\end{theorem}

Note that $\left(  \gamma,\rho\right)  $ is not unique. It is best to regard
Theorem \ref{thm.Z[i].gauss.quorem} as an analogue of Exercise
\ref{exe.ent.quo-rem.minrem} \textbf{(a)}, not as an analogue of Theorem
\ref{thm.ent.quorem.full}; nevertheless, it is the closest we can get to
Theorem \ref{thm.ent.quorem.full} in $\mathbb{Z}\left[  i\right]  $, and can
often be substituted in places where one would usually want to apply Theorem
\ref{thm.ent.quorem.full}.

Theorem \ref{thm.Z[i].gauss.quorem} can be visualized geometrically (similarly
to the visualizations shown in Remark \ref{rmk.ent.quo-rem.full.geo} and
Remark \ref{rmk.ent.quo-rem.minrem.geo}). See \cite[\S 7]{Conrad-Gauss} for
the details.

\begin{proof}
[Proof of Theorem \ref{thm.Z[i].gauss.quorem}.](The following proof follows
\cite[proof of Theorem 3.1]{Conrad-Gauss}.) Let $N=\operatorname*{N}\left(
\beta\right)  $. Write%
\[
\dfrac{\alpha}{\beta}=\dfrac{\alpha\overline{\beta}}{\beta\overline{\beta}%
}=\dfrac{\alpha\overline{\beta}}{N}\ \ \ \ \ \ \ \ \ \ \left(  \text{since
}\beta\overline{\beta}=\operatorname*{N}\left(  \beta\right)  =N\right)  .
\]
Note that $\alpha\overline{\beta}$ is a Gaussian integer (since $\alpha$ and
$\overline{\beta}$ are Gaussian integers); thus, we can write it in the form
\[
\alpha\overline{\beta}=m+ni\ \ \ \ \ \ \ \ \ \ \text{for some }m,n\in
\mathbb{Z}.
\]
Consider these $m,n$. Note that $N=\operatorname*{N}\left(  \beta\right)  >0$
since $\beta\neq0$.

Exercise \ref{exe.ent.quo-rem.minrem} \textbf{(a)} (applied to $N$ and $m$
instead of $n$ and $u$) shows that there exists a pair $\left(  q_{1}%
,r_{1}\right)  \in\mathbb{Z}\times\mathbb{Z}$ such that
\[
m=q_{1}N+r_{1}\ \ \ \ \ \ \ \ \ \ \text{and}\ \ \ \ \ \ \ \ \ \ \left\vert
r_{1}\right\vert \leq N/2.
\]
Consider this pair.

Exercise \ref{exe.ent.quo-rem.minrem} \textbf{(a)} (applied to $N$ and $n$
instead of $n$ and $u$) shows that there exists a pair $\left(  q_{2}%
,r_{2}\right)  \in\mathbb{Z}\times\mathbb{Z}$ such that
\[
n=q_{2}N+r_{2}\ \ \ \ \ \ \ \ \ \ \text{and}\ \ \ \ \ \ \ \ \ \ \left\vert
r_{2}\right\vert \leq N/2.
\]
Consider this pair.

Now,%
\begin{align}
\dfrac{\alpha}{\beta}  &  =\dfrac{\alpha\overline{\beta}}{N}=\dfrac{\left(
q_{1}N+r_{1}\right)  +\left(  q_{2}N+r_{2}\right)  i}{N}\nonumber\\
&  \ \ \ \ \ \ \ \ \ \ \left(  \text{since }\alpha\overline{\beta
}=\underbrace{m}_{=q_{1}N+r_{1}}+\underbrace{n}_{=q_{2}N+r_{2}}i=\left(
q_{1}N+r_{1}\right)  +\left(  q_{2}N+r_{2}\right)  i\right) \nonumber\\
&  =\left(  q_{1}+q_{2}i\right)  +\dfrac{r_{1}+r_{2}i}{N}.
\label{pf.thm.Z[i].gauss.quorem.4}%
\end{align}
Set $\gamma=q_{1}+q_{2}i$ and $\rho=\alpha-\gamma\beta$. Note that $\gamma$
and thus $\rho$ are Gaussian integers.

From $\rho=\alpha-\gamma\beta$, we obtain $\alpha=\gamma\beta+\rho$. Thus it
remains to prove $\operatorname*{N}\left(  \rho\right)  \leq\operatorname*{N}%
\left(  \beta\right)  /2$.

The equation (\ref{pf.thm.Z[i].gauss.quorem.4}) becomes $\dfrac{\alpha}{\beta
}=\gamma+\dfrac{r_{1}+r_{2}i}{N}$ (since $q_{1}+q_{2}i=\gamma$), so that
$\dfrac{r_{1}+r_{2}i}{N}=\dfrac{\alpha}{\beta}-\gamma=\dfrac{\alpha
-\gamma\beta}{\beta}=\dfrac{\rho}{\beta}$ (since $\alpha-\gamma\beta=\rho$).
Hence,%
\begin{align*}
\rho &  =\beta\cdot\dfrac{r_{1}+r_{2}i}{N}=\beta\cdot\dfrac{r_{1}+r_{2}%
i}{\beta\overline{\beta}}\ \ \ \ \ \ \ \ \ \ \left(  \text{since
}N=\operatorname*{N}\left(  \beta\right)  =\beta\overline{\beta}\right) \\
&  =\dfrac{r_{1}+r_{2}i}{\overline{\beta}}%
\end{align*}
and thus%
\begin{align*}
\operatorname*{N}\left(  \rho\right)   &  =\operatorname*{N}\left(
\dfrac{r_{1}+r_{2}i}{\overline{\beta}}\right)  =\dfrac{\operatorname*{N}%
\left(  r_{1}+r_{2}i\right)  }{\operatorname*{N}\left(  \overline{\beta
}\right)  }\ \ \ \ \ \ \ \ \ \ \left(  \text{by Proposition
\ref{prop.CC.conj.hom} \textbf{(e)}}\right) \\
&  =\dfrac{r_{1}^{2}+r_{2}^{2}}{N}\ \ \ \ \ \ \ \ \ \ \left(  \text{since
}\operatorname*{N}\left(  r_{1}+r_{2}i\right)  =r_{1}^{2}+r_{2}^{2}\text{ and
}\operatorname*{N}\left(  \overline{\beta}\right)  =\operatorname*{N}\left(
\beta\right)  =N\right) \\
&  \leq\dfrac{\left(  N/2\right)  ^{2}+\left(  N/2\right)  ^{2}}{N}\\
&  \ \ \ \ \ \ \ \ \ \ \left(  \text{since }\left\vert r_{1}\right\vert \leq
N/2\text{ and }\left\vert r_{2}\right\vert \leq N/2\right) \\
&  =N/2=\operatorname*{N}\left(  \beta\right)  /2
\end{align*}
(since $N=\operatorname*{N}\left(  \beta\right)  $). This proves Theorem
\ref{thm.Z[i].gauss.quorem}.
\end{proof}

Note: We cannot define $\alpha//\beta$ or $\alpha\%\beta$ for Gaussian
integers $\alpha$ and $\beta$, since there is no uniqueness statement in
Theorem \ref{thm.Z[i].gauss.quorem}.

\subsubsection{Common divisors}

Next, we define the Gaussian divisors of a Gaussian integer (in analogy to
Definition \ref{def.ent.divisors.divisors}):

\begin{definition}
\label{def.Z[i].divisors.divisors}Let $\beta\in\mathbb{Z}\left[  i\right]  $.
The \textit{Gaussian divisors} of $\beta$ are defined as the Gaussian integers
that divide $\beta$.
\end{definition}

Note that we are calling them \textquotedblleft Gaussian
divisors\textquotedblright\ and not \textquotedblleft
divisors\textquotedblright, because when $\beta$ is an actual integer, there
are (usually) Gaussian divisors of $\beta$ that are not divisors of $\beta$
(in the sense of Definition \ref{def.ent.divisors.divisors}). For example,
$1+i$ is a Gaussian divisor of $2$ (since $2=\left(  1+i\right)  \left(
1-i\right)  $), but the only divisors of $2$ (in the sense of Definition
\ref{def.ent.divisors.divisors}) are $-2,-1,1,2$. This is one of those
situations where using the same name for a concept and its Gaussian-integer
analogue would lead to ambiguities.

The following is an analogue of Proposition \ref{prop.ent.divisors.find}:

\begin{proposition}
\label{prop.Z[i].divisors.find}\textbf{(a)} If $\beta\in\mathbb{Z}\left[
i\right]  $, then $1$ and $\beta$ are Gaussian divisors of $\beta$.

\textbf{(b)} The Gaussian divisors of $0$ are all the Gaussian integers.

\textbf{(c)} Let $\beta\in\mathbb{Z}\left[  i\right]  $ be nonzero. Then, all
Gaussian divisors of $\beta$ belong to the set%
\[
\left\{  x+yi\ \mid\ x,y\in\mathbb{Z}\text{ satisfying }\left\vert
x\right\vert \leq\left\vert \beta\right\vert \text{ and }\left\vert
y\right\vert \leq\left\vert \beta\right\vert \right\}  .
\]

\end{proposition}

\begin{proof}
[Proof of Proposition \ref{prop.Z[i].divisors.find}.]Parts \textbf{(a)} and
\textbf{(b)} are clear.

\textbf{(c)} Let $x+yi$ be a Gaussian divisor of $\beta$. Then, Proposition
\ref{prop.Z[i].gauss.div.1} \textbf{(b)} yields $\operatorname*{N}\left(
x+yi\right)  \leq\operatorname*{N}\left(  \beta\right)  $, thus $\left\vert
x+yi\right\vert \leq\left\vert \beta\right\vert $ (since $\left\vert
\alpha\right\vert =\sqrt{\operatorname*{N}\left(  \alpha\right)  }$ for every
$\alpha\in\mathbb{C}$). But $\left\vert x+yi\right\vert =\sqrt{x^{2}+y^{2}%
}\geq\sqrt{x^{2}}=\left\vert x\right\vert $, so that $\left\vert x\right\vert
\leq\left\vert x+yi\right\vert \leq\left\vert \beta\right\vert $. Similarly,
$\left\vert y\right\vert \leq\left\vert \beta\right\vert $.
\end{proof}

Thus, again, finding all Gaussian divisors of a Gaussian integer $\beta$ is a
problem solvable in finite time. (Indeed, the set in Proposition
\ref{prop.Z[i].divisors.find} \textbf{(c)} is clearly finite.)

The following is a straightforward analogue of Definition \ref{def.ent.Div}:

\begin{definition}
\label{def.Z[i].Div}Let $\beta_{1},\beta_{2},\ldots,\beta_{k}$ be Gaussian
integers. Then, the \textit{common Gaussian divisors} of $\beta_{1},\beta
_{2},\ldots,\beta_{k}$ are defined to be the Gaussian integers $\alpha$ that
satisfy%
\begin{equation}
\left(  \alpha\mid\beta_{i}\text{ for all }i\in\left\{  1,2,\ldots,k\right\}
\right)  \label{eq.def.Z[i].Div.cond}%
\end{equation}
(in other words, that divide all of the Gaussian integers $\beta_{1},\beta
_{2},\ldots,\beta_{k}$). We let $\operatorname*{Div}\left(  \beta_{1}%
,\beta_{2},\ldots,\beta_{k}\right)  $ denote the set of these common Gaussian divisors.
\end{definition}

The notation $\operatorname*{Div}\left(  \beta_{1},\beta_{2},\ldots,\beta
_{k}\right)  $ is actually ambiguous, because when $\beta_{1},\beta_{2}%
,\ldots,\beta_{k}$ are integers, it may mean both the set of common divisors
and the set of common Gaussian divisors of $\beta_{1},\beta_{2},\ldots
,\beta_{k}$. We hope that it will not cause \textbf{us} ambiguities in what follows.

We cannot directly define $\gcd\left(  \beta_{1},\beta_{2},\ldots,\beta
_{k}\right)  $ to be the greatest element of $\operatorname*{Div}\left(
\beta_{1},\beta_{2},\ldots,\beta_{k}\right)  $, since \textquotedblleft
greatest\textquotedblright\ does not make sense for complex numbers. (Even if
we wanted \textquotedblleft greatest in norm\textquotedblright, it would not
a-priori be obvious that there are no ties, i.e., that such a greatest common
Gaussian divisor is unique.)

However, it turns out that $\gcd\left(  \beta_{1},\beta_{2},\ldots,\beta
_{k}\right)  $ actually can be defined reasonably (although only up to
multiplication by units). Before we can do so, let us state some basic
properties of common Gaussian divisors:

\begin{proposition}
\label{prop.Z[i].gauss.divrules}\textbf{(a)} We have $\operatorname*{Div}%
\left(  \alpha,0\right)  =\operatorname*{Div}\left(  \alpha\right)  $ for all
$\alpha\in\mathbb{Z}\left[  i\right]  $.

\textbf{(b)} We have $\operatorname*{Div}\left(  \alpha,\beta\right)
=\operatorname*{Div}\left(  \beta,\alpha\right)  $ for all $\alpha,\beta
\in\mathbb{Z}\left[  i\right]  $.

\textbf{(c)} We have $\operatorname*{Div}\left(  \alpha,\eta\alpha
+\beta\right)  =\operatorname*{Div}\left(  \alpha,\beta\right)  $ for all
$\alpha,\beta,\eta\in\mathbb{Z}\left[  i\right]  $.

\textbf{(d)} If $\alpha,\beta,\gamma\in\mathbb{Z}\left[  i\right]  $ satisfy
$\beta\equiv\gamma\operatorname{mod}\alpha$, then $\operatorname*{Div}\left(
\alpha,\beta\right)  =\operatorname*{Div}\left(  \alpha,\gamma\right)  $.

\textbf{(g)} We have $\operatorname*{Div}\left(  \eta\alpha,\beta\right)
=\operatorname*{Div}\left(  \alpha,\beta\right)  $ for all $\alpha,\beta
\in\mathbb{Z}\left[  i\right]  $ for every unit $\eta\in\mathbb{Z}\left[
i\right]  $.

\textbf{(h)} We have $\operatorname*{Div}\left(  \alpha,\eta\beta\right)
=\operatorname*{Div}\left(  \alpha,\beta\right)  $ for all $\alpha,\beta
\in\mathbb{Z}\left[  i\right]  $ for every unit $\eta\in\mathbb{Z}\left[
i\right]  $.

\textbf{(i)} If $\alpha,\beta\in\mathbb{Z}\left[  i\right]  $ satisfy
$\alpha\mid\beta$, then $\operatorname*{Div}\left(  \alpha,\beta\right)
=\operatorname*{Div}\left(  \alpha\right)  $.

\textbf{(j)} The common Gaussian divisors of the empty list of Gaussian
integers are $\operatorname*{Div}\left(  {}\right)  =\mathbb{Z}\left[
i\right]  $.
\end{proposition}

\begin{proof}
Most of these facts are analogues of Proposition \ref{prop.ent.gcd.props1}, or
rather of the corresponding properties of $\operatorname*{Div}\left(
a,b\right)  $ for two integers $a$ and $b$ that were proven during our proof
of Proposition \ref{prop.ent.gcd.props1}. Their proofs also are
straightforward adaptations of the proofs of the latter properties. Let us
only sketch the proof of \textbf{(g)}, since it may require some extra thinking:

\textbf{(g)} Let $\eta\in\mathbb{Z}\left[  i\right]  $ be a unit.

Claim: The Gaussian divisors of $\alpha$ are exactly the Gaussian divisors of
$\eta\alpha$.

(Indeed, any Gaussian divisor of $\alpha$ is clearly a Gaussian divisor of
$\eta\alpha$. Conversely, since $\eta^{-1}$ is a Gaussian integer, any
Gaussian divisor of $\eta\alpha$ is a Gaussian divisor of $\eta^{-1}\eta
\alpha=\alpha$.)

The rest is proven just as for integers, except that we don't make the final
step from $\operatorname*{Div}$ to $\gcd$.
\end{proof}

Now, we can compute $\operatorname*{Div}\left(  \alpha,\beta\right)  $ for
Gaussian integers $\alpha$ and $\beta$ by a version of the \textquotedblleft
Euclidean algorithm\textquotedblright\ that we used to compute $\gcd\left(
a,b\right)  $ for integers $a$ and $b$. For example, we can compute
$\operatorname*{Div}\left(  32+9i,4+11i\right)  $ as follows:\footnote{This is
\cite[Example 4.4]{Conrad-Gauss}.}%
\begin{align*}
&  \operatorname*{Div}\left(  32+9i,4+11i\right) \\
&  =\operatorname*{Div}\left(  4+11i,\underbrace{32+9i}_{=\left(  2-2i\right)
\left(  4+11i\right)  +\left(  2-5i\right)  }\right)
\ \ \ \ \ \ \ \ \ \ \left(  \text{by Proposition
\ref{prop.Z[i].gauss.divrules} \textbf{(b)}}\right) \\
&  =\operatorname*{Div}\left(  4+11i,\left(  2-2i\right)  \left(
4+11i\right)  +\left(  2-5i\right)  \right) \\
&  =\operatorname*{Div}\left(  4+11i,2-5i\right)  \ \ \ \ \ \ \ \ \ \ \left(
\text{by Proposition \ref{prop.Z[i].gauss.divrules} \textbf{(c)}}\right) \\
&  =\operatorname*{Div}\left(  2-5i,\underbrace{4+11i}_{=\left(  -2+i\right)
\left(  2-5i\right)  +\left(  3-i\right)  }\right)
\ \ \ \ \ \ \ \ \ \ \left(  \text{by Proposition
\ref{prop.Z[i].gauss.divrules} \textbf{(b)}}\right) \\
&  =\operatorname*{Div}\left(  2-5i,\left(  -2+i\right)  \left(  2-5i\right)
+\left(  3-i\right)  \right) \\
&  =\operatorname*{Div}\left(  2-5i,3-i\right)  \ \ \ \ \ \ \ \ \ \ \left(
\text{by Proposition \ref{prop.Z[i].gauss.divrules} \textbf{(c)}}\right) \\
&  =\operatorname*{Div}\left(  3-i,\underbrace{2-5i}_{=\left(  1-i\right)
\left(  3-i\right)  -i}\right)  \ \ \ \ \ \ \ \ \ \ \left(  \text{by
Proposition \ref{prop.Z[i].gauss.divrules} \textbf{(b)}}\right)
\end{align*}%
\begin{align*}
&  =\operatorname*{Div}\left(  3-i,\left(  1-i\right)  \left(  3-i\right)
-i\right) \\
&  =\operatorname*{Div}\left(  3-i,-i\right)  \ \ \ \ \ \ \ \ \ \ \left(
\text{by Proposition \ref{prop.Z[i].gauss.divrules} \textbf{(c)}}\right) \\
&  =\operatorname*{Div}\left(  -i,\underbrace{3-i}_{=\left(  1+3i\right)
\left(  -i\right)  +0}\right)  \ \ \ \ \ \ \ \ \ \ \left(  \text{by
Proposition \ref{prop.Z[i].gauss.divrules} \textbf{(b)}}\right) \\
&  =\operatorname*{Div}\left(  -i,\left(  1+3i\right)  \left(  -i\right)
+0\right) \\
&  =\operatorname*{Div}\left(  -i,0\right)  \ \ \ \ \ \ \ \ \ \ \left(
\text{by Proposition \ref{prop.Z[i].gauss.divrules} \textbf{(c)}}\right) \\
&  =\operatorname*{Div}\left(  -i\right)  \ \ \ \ \ \ \ \ \ \ \left(  \text{by
Proposition \ref{prop.Z[i].gauss.divrules} \textbf{(a)}}\right) \\
&  =\left\{  1,i,-1,-i\right\}  .
\end{align*}
In the same way, for \textbf{any} two Gaussian integers $\alpha$ and $\beta$
we obtain a Gaussian integer $\gamma$ such that $\operatorname*{Div}\left(
\alpha,\beta\right)  =\operatorname*{Div}\left(  \gamma\right)  $. This
resulting $\gamma$ will actually be unique up to multiplication by units
(i.e., its unit-equivalence class will be unique). Better yet, we have the following:

\begin{theorem}
\label{thm.Z[i].gauss.bezout}(Bezout's theorem for Gaussian integers:)

Let $\alpha,\beta\in\mathbb{Z}\left[  i\right]  $. Then:

\textbf{(a)} There exists a $\mathbb{Z}\left[  i\right]  $-linear combination
$\gamma$ of $\alpha$ and $\beta$ that is a common Gaussian divisor of $\alpha$
and $\beta$. (Note: A $\mathbb{Z}\left[  i\right]  $\textbf{-linear
combination of }$\alpha$ \textbf{and }$\beta$ means a Gaussian integer of the
form $\lambda\alpha+\mu\beta$ with $\lambda,\mu\in\mathbb{Z}\left[  i\right]
$.)

\textbf{(b)} It satisfies $\operatorname*{Div}\left(  \alpha,\beta\right)
=\operatorname*{Div}\left(  \gamma\right)  $.

\textbf{(c)} The unit-equivalence class of $\gamma$ is uniquely determined.
\end{theorem}

This theorem is, in a sense, a generalization of Theorem
\ref{thm.ent.gcd.bezout}, even though (unlike the latter theorem) it does not
rely on an already existing concept of \textquotedblleft greatest common
divisor\textquotedblright\ but rather builds the foundation for such a
concept. With Theorem \ref{thm.Z[i].gauss.bezout} in hand, it makes sense to
call $\gamma$ the \textquotedblleft greatest common Gaussian
divisor\textquotedblright\ of $\alpha$ and $\beta$, but rigorously speaking
this name should be reserved for the unit-equivalence class of $\gamma$ since
$\gamma$ itself is not unique.

\begin{center}
\textbf{2019-03-08 lecture}
\end{center}

\begin{proof}
[Proof of Theorem \ref{thm.Z[i].gauss.bezout} (sketched).]\textbf{(a)} Rough
idea: This is analogous to the proof of Lemma \ref{lem.ent.gcd.bezout.++}.
(But instead of strong induction on $a+b$, we need to do strong induction on
$\operatorname*{N}\left(  \alpha\right)  +\operatorname*{N}\left(
\beta\right)  $. Also, instead of the usual division-with-remainder theorem,
you have to use Theorem \ref{thm.Z[i].gauss.quorem}. Note that the inequality
$\operatorname*{N}\left(  \rho\right)  \leq\operatorname*{N}\left(
\beta\right)  /2$ in Theorem \ref{thm.Z[i].gauss.quorem} implies
$\operatorname*{N}\left(  \rho\right)  <\operatorname*{N}\left(  \beta\right)
$, which is the only inequality you need.)

Actually, here are some more details of the proof. For any $\alpha,\beta
\in\mathbb{Z}\left[  i\right]  $, we let $\operatorname*{Lin}\left(
\alpha,\beta\right)  $ be the set of all $\mathbb{Z}\left[  i\right]  $-linear
combinations of $\alpha$ and $\beta$. (This will be called the $\mathbb{Z}%
\left[  i\right]  $\textit{-linear span of }$\alpha$ \textit{and }$\beta$
later on, in analogy to spans in classical linear algebra.) Now, the claim of
Theorem \ref{thm.Z[i].gauss.bezout} \textbf{(a)} can be restated as follows:%
\[
\operatorname*{Div}\left(  \alpha,\beta\right)  \cap\operatorname*{Lin}\left(
\alpha,\beta\right)  \neq\varnothing.
\]


We shall prove this nonemptiness by strong induction on $\operatorname*{N}%
\left(  \alpha\right)  +\operatorname*{N}\left(  \beta\right)  $.

So we fix $n\in\mathbb{N}$, and assume as the induction hypothesis that the
nonemptiness holds for all $\alpha,\beta\in\mathbb{Z}\left[  i\right]  $
satisfying $\operatorname*{N}\left(  \alpha\right)  +\operatorname*{N}\left(
\beta\right)  <n$. We must now prove it for all $\alpha,\beta\in
\mathbb{Z}\left[  i\right]  $ satisfying $\operatorname*{N}\left(
\alpha\right)  +\operatorname*{N}\left(  \beta\right)  =n$.

So let $\alpha,\beta\in\mathbb{Z}\left[  i\right]  $ be such that
$\operatorname*{N}\left(  \alpha\right)  +\operatorname*{N}\left(
\beta\right)  =n$. We must prove $\operatorname*{Div}\left(  \alpha
,\beta\right)  \cap\operatorname*{Lin}\left(  \alpha,\beta\right)
\neq\varnothing$. We can WLOG assume $\operatorname*{N}\left(  \beta\right)
\geq\operatorname*{N}\left(  \alpha\right)  $, since otherwise we can swap
$\alpha$ with $\beta$ without changing any of the sets $\operatorname*{Div}%
\left(  \alpha,\beta\right)  $ and $\operatorname*{Lin}\left(  \alpha
,\beta\right)  $. Assume this. Furthermore, we WLOG assume that $\alpha\neq0$
(since otherwise, the set $\operatorname*{Div}\left(  \alpha,\beta\right)
\cap\operatorname*{Lin}\left(  \alpha,\beta\right)  =\operatorname*{Div}%
\left(  0,\beta\right)  \cap\operatorname*{Lin}\left(  0,\beta\right)  $
clearly contains $\beta$ and thus is $\neq\varnothing$). Hence,
$\operatorname*{N}\left(  \alpha\right)  >0$. Now, Theorem
\ref{thm.Z[i].gauss.quorem} (applied to $\beta$ and $\alpha$ instead of
$\alpha$ and $\beta$) yields that there exist Gaussian integers $\gamma$ and
$\rho$ such that $\beta=\gamma\alpha+\rho$ and $\operatorname*{N}\left(
\rho\right)  \leq\operatorname*{N}\left(  \alpha\right)  /2$. Consider these
$\gamma$ and $\rho$.

The Gaussian integers $\beta$ and $\rho$ satisfy $\beta\equiv\rho
\operatorname{mod}\alpha$ (since $\beta=\gamma\alpha+\rho$). Hence,
Proposition \ref{prop.Z[i].gauss.divrules} \textbf{(d)} yields
$\operatorname*{Div}\left(  \alpha,\beta\right)  =\operatorname*{Div}\left(
\alpha,\rho\right)  $. Also, it is easy to see that $\operatorname*{Lin}%
\left(  \alpha,\beta\right)  =\operatorname*{Lin}\left(  \alpha,\rho\right)  $
(since every $\lambda,\mu\in\mathbb{Z}\left[  i\right]  $ satisfy%
\begin{align*}
\lambda\alpha+\mu\underbrace{\beta}_{=\gamma\alpha+\rho}  &  =\lambda
\alpha+\mu\left(  \gamma\alpha+\rho\right)  =\left(  \lambda+\mu\gamma\right)
\alpha+\mu\rho\in\operatorname*{Lin}\left(  \alpha,\rho\right)
\ \ \ \ \ \ \ \ \ \ \text{and}\\
\lambda\alpha+\mu\underbrace{\rho}_{=\beta-\gamma\alpha}  &  =\lambda
\alpha+\mu\left(  \beta-\gamma\alpha\right)  =\left(  \lambda-\mu
\gamma\right)  \alpha+\mu\beta\in\operatorname*{Lin}\left(  \alpha
,\beta\right)
\end{align*}
). Hence, proving $\operatorname*{Div}\left(  \alpha,\beta\right)
\cap\operatorname*{Lin}\left(  \alpha,\beta\right)  \neq\varnothing$ boils
down to proving $\operatorname*{Div}\left(  \alpha,\rho\right)  \cap
\operatorname*{Lin}\left(  \alpha,\rho\right)  \neq\varnothing$. But this
follows from the induction hypothesis, since%
\[
\operatorname*{N}\left(  \alpha\right)  +\underbrace{\operatorname*{N}\left(
\rho\right)  }_{\leq\operatorname*{N}\left(  \alpha\right)
/2<\operatorname*{N}\left(  \alpha\right)  \leq\operatorname*{N}\left(
\beta\right)  }<\operatorname*{N}\left(  \alpha\right)  +\operatorname*{N}%
\left(  \beta\right)  =n.
\]
This completes the induction step. Thus, the nonemptiness (and thus Theorem
\ref{thm.Z[i].gauss.bezout} \textbf{(a)}) follows by induction.

\textbf{(b)} $\subseteq:$ Since $\gamma$ is a $\mathbb{Z}\left[  i\right]
$-linear combination of $\alpha$ and $\beta$, every common Gaussian divisor of
$\alpha$ and $\beta$ must also divide $\gamma$. Thus, $\operatorname*{Div}%
\left(  \alpha,\beta\right)  \subseteq\operatorname*{Div}\left(
\gamma\right)  $.

$\supseteq:$ Since $\gamma$ is a common Gaussian divisor of $\alpha$ and
$\beta$, every Gaussian divisor of $\gamma$ must be a common Gaussian divisor
of $\alpha$ and $\beta$. Thus, $\operatorname*{Div}\left(  \alpha
,\beta\right)  \supseteq\operatorname*{Div}\left(  \gamma\right)  $.

\textbf{(c)} Let $\gamma_{1}$ and $\gamma_{2}$ be two such $\gamma$'s. We must
prove that $\gamma_{1}\sim\gamma_{2}$.

We have $\operatorname*{Div}\left(  \alpha,\beta\right)  =\operatorname*{Div}%
\left(  \gamma_{1}\right)  $ and $\operatorname*{Div}\left(  \alpha
,\beta\right)  =\operatorname*{Div}\left(  \gamma_{2}\right)  $, so that
$\operatorname*{Div}\left(  \gamma_{1}\right)  =\operatorname*{Div}\left(
\gamma_{2}\right)  $. Now, $\gamma_{1}\in\operatorname*{Div}\left(  \gamma
_{1}\right)  =\operatorname*{Div}\left(  \gamma_{2}\right)  $, thus
$\gamma_{1}\mid\gamma_{2}$. Similarly, $\gamma_{2}\mid\gamma_{1}$. Combining
these, we obtain $\gamma_{1}\sim\gamma_{2}$.
\end{proof}

\begin{definition}
The \textit{greatest common Gaussian divisor} (or, short, \textit{gcd}) of two
Gaussian integers $\alpha$ and $\beta$ is defined to be the $\gamma$ from
Theorem \ref{thm.Z[i].gauss.bezout} \textbf{(a)}. It is called $\gcd\left(
\alpha,\beta\right)  $.

So it is a common Gaussian divisor of $\alpha$ and $\beta$ and also a
$\mathbb{Z}\left[  i\right]  $-linear combination of $\alpha$ and $\beta$ and
satisfies $\operatorname*{Div}\left(  \gcd\left(  \alpha,\beta\right)
\right)  =\operatorname*{Div}\left(  \alpha,\beta\right)  $.

However, it is only well-defined up to unit-equivalence. Thus, if you have
$\gamma_{1}=\gcd\left(  \alpha,\beta\right)  $ and $\gamma_{2}=\gcd\left(
\alpha,\beta\right)  $, then you cannot conclude that $\gamma_{1}=\gamma_{2}$
(you can only conclude $\gamma_{1}\sim\gamma_{2}$). So, strictly speaking, we
should have defined $\gcd\left(  \alpha,\beta\right)  $ as a unit-equivalence
class, not as a concrete Gaussian integer. But we will allow ourselves this
abuse of notation. We shall not write equality signs like the one in
\textquotedblleft$\gamma_{1}=\gcd\left(  \alpha,\beta\right)  $%
\textquotedblright, however; we instead prefer \textquotedblleft$\gamma
_{1}\sim\gcd\left(  \alpha,\beta\right)  $\textquotedblright. Generally,
whenever you see $\gcd\left(  \alpha,\beta\right)  $ in a statement, you
should be understanding the statement to hold for \textbf{every} possible
choice of $\gcd\left(  \alpha,\beta\right)  $.
\end{definition}

\begin{proposition}
Let $\alpha$ and $\beta$ be two Gaussian integers, not both equal to $0$.
Then, the possible values of $\gcd\left(  \alpha,\beta\right)  $ (that is,
strictly speaking, all four elements of the unit-equivalence class
$\gcd\left(  \alpha,\beta\right)  $) are exactly the elements of
$\operatorname*{Div}\left(  \alpha,\beta\right)  $ having the largest norm.
\end{proposition}

\begin{proof}
First of all, $\gcd\left(  \alpha,\beta\right)  $ is a Gaussian divisor of
$\alpha$ and $\beta$, and thus is $\neq0$ (since $\alpha$ and $\beta$ are not
both equal to $0$). Thus, there are exactly four possible values of
$\gcd\left(  \alpha,\beta\right)  $. We must show that these values are
exactly the elements of $\operatorname*{Div}\left(  \alpha,\beta\right)  $
having the largest norm.

In other words, we must show the following two claims:

\begin{statement}
\textit{Claim 1:} We have $\operatorname*{N}\left(  \gcd\left(  \alpha
,\beta\right)  \right)  >\operatorname*{N}\left(  \gamma\right)  $ for each
$\gamma\in\operatorname*{Div}\left(  \alpha,\beta\right)  $ that does not
satisfy $\gamma\sim\gcd\left(  \alpha,\beta\right)  $.
\end{statement}

\begin{statement}
\textit{Claim 2:} We have $\operatorname*{N}\left(  \gcd\left(  \alpha
,\beta\right)  \right)  =\operatorname*{N}\left(  \gamma\right)  $ for each
$\gamma\in\operatorname*{Div}\left(  \alpha,\beta\right)  $ that does satisfy
$\gamma\sim\gcd\left(  \alpha,\beta\right)  $.
\end{statement}

Claim 2 is obvious, since any two unit-equivalent Gaussian integers have the
same norm (by Proposition \ref{prop.Z[i].gauss.uniteq.norm=norm}).

[\textit{Proof of Claim 1:} Let $\gamma\in\operatorname*{Div}\left(
\alpha,\beta\right)  $ do not satisfy $\gamma\sim\gcd\left(  \alpha
,\beta\right)  $. Now, $\gamma\in\operatorname*{Div}\left(  \alpha
,\beta\right)  =\operatorname*{Div}\left(  \gcd\left(  \alpha,\beta\right)
\right)  $ (since $\operatorname*{Div}\left(  \gcd\left(  \alpha,\beta\right)
\right)  =\operatorname*{Div}\left(  \alpha,\beta\right)  $). Hence,
$\gamma\mid\gcd\left(  \alpha,\beta\right)  $.

Let us set $\delta=\gcd\left(  \alpha,\beta\right)  $. So $\gamma\mid\delta$.
Hence, $\gamma\neq0$ (since $\delta\neq0$ (because $\alpha$ and $\beta$ are
not both zero)). Thus, $\gamma\mid\delta$ yields that $\dfrac{\delta}{\gamma}$
is a Gaussian integer, which is furthermore nonzero (since $\delta\neq0$). If
this Gaussian integer $\dfrac{\delta}{\gamma}$ was a unit, then we would have
$\gamma\sim\delta=\gcd\left(  \alpha,\beta\right)  $, which would contradict
the assumption that $\gamma$ does not satisfy $\gamma\sim\gcd\left(
\alpha,\beta\right)  $. So $\dfrac{\delta}{\gamma}$ is a nonzero Gaussian
integer that is not a unit. Hence, $\operatorname*{N}\left(  \dfrac{\delta
}{\gamma}\right)  >1$ (because Proposition \ref{prop.Z[i].gauss.norm1} yields
that every nonzero Gaussian integer that is not a unit must have norm $>1$).
Now,%
\[
\operatorname*{N}\left(  \delta\right)  =\underbrace{\operatorname*{N}\left(
\dfrac{\delta}{\gamma}\right)  }_{>1}\cdot\operatorname*{N}\left(
\gamma\right)  >\operatorname*{N}\left(  \gamma\right)  .
\]
In other words, $\operatorname*{N}\left(  \gcd\left(  \alpha,\beta\right)
\right)  >\operatorname*{N}\left(  \gamma\right)  $. This proves Claim 1.]
\end{proof}

This proposition shows that $\gcd\left(  \alpha,\beta\right)  $ is uniquely
determined by the set $\operatorname*{Div}\left(  \alpha,\beta\right)  $.
(Yes, you have to consider the case $\alpha=\beta=0$ separately in proving
this.) Hence, Proposition \ref{prop.Z[i].gauss.divrules} yields:

\begin{proposition}
\textbf{(a)} We have $\gcd\left(  \alpha,0\right)  \sim\gcd\left(
\alpha\right)  $ for all $\alpha\in\mathbb{Z}\left[  i\right]  $.

\textbf{(b)} We have $\gcd\left(  \alpha,\beta\right)  \sim\gcd\left(
\beta,\alpha\right)  $ for all $\alpha,\beta\in\mathbb{Z}\left[  i\right]  $.

\textbf{(c)} We have $\gcd\left(  \alpha,\eta\alpha+\beta\right)  \sim
\gcd\left(  \alpha,\beta\right)  $ for all $\alpha,\beta,\eta\in
\mathbb{Z}\left[  i\right]  $.

\textbf{(d)} If $\alpha,\beta,\gamma\in\mathbb{Z}\left[  i\right]  $ satisfy
$\beta\equiv\gamma\operatorname{mod}\alpha$, then $\gcd\left(  \alpha
,\beta\right)  \sim\gcd\left(  \alpha,\gamma\right)  $.

\textbf{(g)} We have $\gcd\left(  \eta\alpha,\beta\right)  \sim\gcd\left(
\alpha,\beta\right)  $ for all $\alpha,\beta\in\mathbb{Z}\left[  i\right]  $
for every unit $\eta\in\mathbb{Z}\left[  i\right]  $.

\textbf{(h)} We have $\gcd\left(  \alpha,\eta\beta\right)  \sim\gcd\left(
\alpha,\beta\right)  $ for all $\alpha,\beta\in\mathbb{Z}\left[  i\right]  $
for every unit $\eta\in\mathbb{Z}\left[  i\right]  $.

\textbf{(i)} If $\alpha,\beta\in\mathbb{Z}\left[  i\right]  $ satisfy
$\alpha\mid\beta$, then $\gcd\left(  \alpha,\beta\right)  \sim\gcd\left(
\alpha\right)  $.

\textbf{(j)} The greatest common Gaussian divisor of the empty list of
Gaussian integers is $\gcd\left(  {}\right)  =0$.
\end{proposition}

Theorem \ref{thm.ent.gcd.uniprop} still holds for Gaussian integers.

Theorem \ref{thm.ent.gcd.combine} still holds for Gaussian integers.

Theorem \ref{thm.ent.gcd.cancel} still holds for Gaussian integers.

Corollary \ref{cor.ent.gcd.sa,sb} has to be modified as follows:

\begin{corollary}
Let $\sigma,\alpha,\beta\in\mathbb{Z}\left[  i\right]  $. Then,
\[
\gcd\left(  \sigma\alpha,\sigma\beta\right)  \sim\sigma\gcd\left(
\alpha,\beta\right)  .
\]

\end{corollary}

Exercise \ref{exe.ent.gcd.div} still holds for Gaussian integers.

Exercise \ref{exe.ent.gcd.abs} becomes the claim that if $\alpha_{1}\sim
\alpha_{2}$ and $\beta_{1}\sim\beta_{2}$, then $\gcd\left(  \alpha_{1}%
,\beta_{1}\right)  \sim\gcd\left(  \alpha_{2},\beta_{2}\right)  $. The
solution does not carry over, but you can easily prove this new claim by hand.

Greatest common Gaussian divisors of $k$ Gaussian integers can also be defined.

\begin{proposition}
\label{prop.Z[i].gauss.gcd=gcd}Let $a$ and $b$ be two integers. Then,%
\[
\gcd\nolimits_{\mathbb{Z}}\left(  a,b\right)  \sim\gcd\nolimits_{\mathbb{Z}%
\left[  i\right]  }\left(  a,b\right)  .
\]
Here, $\gcd\nolimits_{\mathbb{Z}}$ means \textquotedblleft the gcd of two
integers as defined in Definition \ref{def.ent.gcd.gcd}\textquotedblright,
whereas $\gcd\nolimits_{\mathbb{Z}\left[  i\right]  }$ means \textquotedblleft
the greatest common Gaussian divisor of Gaussian integers\textquotedblright.
\end{proposition}

\begin{proof}
The integer $\gcd\nolimits_{\mathbb{Z}}\left(  a,b\right)  $ is a common
divisor of $a$ and $b$ and also is a $\mathbb{Z}$-linear combination of $a$
and $b$ (by Bezout). Therefore, it is also a common Gaussian divisor of the
Gaussian integers $a$ and $b$ and also is a $\mathbb{Z}\left[  i\right]
$-linear combination of $a$ and $b$. But this yields that it is $\gcd
\nolimits_{\mathbb{Z}\left[  i\right]  }\left(  a,b\right)  $ (due to the
definition of $\gcd\nolimits_{\mathbb{Z}\left[  i\right]  }\left(  a,b\right)
$).
\end{proof}

This proposition allows us to write \textquotedblleft$\gcd$\textquotedblright%
\ for both concepts of gcd without having to disambiguate the meaning.

The next definition is an analogue of Definition \ref{def.ent.coprime.coprime}:

\begin{definition}
Let $\alpha$ and $\beta$ be two Gaussian integers. We say that $\alpha$ is
\textbf{coprime} to $\beta$ if and only if $\gcd\left(  \alpha,\beta\right)
\sim1$ (that is, $\gcd\left(  \alpha,\beta\right)  $ is a unit).
\end{definition}

Thus, any two coprime integers are also two coprime Gaussian integers (because
of Proposition \ref{prop.Z[i].gauss.gcd=gcd}).

Everything we said about coprimality of integers still holds for Gaussian
integers. In particular, Proposition \ref{prop.ent.coprime.perp-symm}, Theorem
\ref{thm.ent.coprime.cancel}, Theorem \ref{thm.ent.coprime.combine}, Theorem
\ref{thm.ent.coprime.modinv} and Theorem \ref{thm.ent.coprime.ab-to-c} still
hold if all integers are replaced by Gaussian integers (with the caveat that
the gcd is no longer unique, so for example \textquotedblleft$ab\equiv
\gcd\left(  a,n\right)  \operatorname{mod}n$\textquotedblright\ must be
interpreted as \textquotedblleft$ab$ is congruent to \textbf{some} of the
possible values of $\gcd\left(  a,n\right)  $ modulo $n$\textquotedblright.

\begin{noncompile}
Let us generalize Theorem \ref{thm.Z[i].gauss.bezout} to $k$ Gaussian integers:

\begin{theorem}
(Bezout's theorem for $k$ Gaussian integers:)

Let $\alpha_{1},\alpha_{2},\ldots,\alpha_{k}\in\mathbb{Z}\left[  i\right]  $. Then:

\textbf{(a)} There exists a $\mathbb{Z}\left[  i\right]  $-linear combination
$\gamma$ of $\alpha_{1},\alpha_{2},\ldots,\alpha_{k}$ that is a common
Gaussian divisor of $\alpha_{1},\alpha_{2},\ldots,\alpha_{k}$. (Note: A
$\mathbb{Z}\left[  i\right]  $\textbf{-linear combination of }$\alpha
_{1},\alpha_{2},\ldots,\alpha_{k}$ means a Gaussian integer of the form
$\lambda_{1}\alpha_{1}+\lambda_{2}\alpha_{2}+\cdots+\lambda_{k}\alpha_{k}$
with $\lambda_{1},\lambda_{2},\ldots,\lambda_{k}\in\mathbb{Z}\left[  i\right]
$.)

\textbf{(b)} It satisfies $\operatorname*{Div}\left(  \alpha_{1},\alpha
_{2},\ldots,\alpha_{k}\right)  =\operatorname*{Div}\left(  \gamma\right)  $.

\textbf{(c)} The unit-equivalence class of $\gamma$ is uniquely determined.
\end{theorem}

\begin{proof}
[Proof sketch.]Induction on $k$, similar to the proof of Theorem
\ref{thm.ent.gcd.uniprop-mul}. The details are left to the reader.
\end{proof}

Again, the $\gamma$ from this theorem is called $\gcd\left(  \alpha_{1}%
,\alpha_{2},\ldots,\alpha_{k}\right)  $ and is unique up to unit-equivalence.

Theorem \ref{thm.ent.gcd.uniprop-mul} generalizes as follows:

\begin{theorem}
Let $\beta_{1},\beta_{2},\ldots,\beta_{k}$ be integers.

\textbf{(a)} For each $\mu\in\mathbb{Z}\left[  i\right]  $, we have the
following logical equivalence:%
\[
\left(  \mu\mid\beta_{i}\text{ for all }i\in\left\{  1,2,\ldots,k\right\}
\right)  \ \Longleftrightarrow\ \left(  \mu\mid\gcd\left(  \beta_{1},\beta
_{2},\ldots,\beta_{k}\right)  \right)  .
\]


\textbf{(b)} The common Gaussian divisors of $\beta_{1},\beta_{2},\ldots
,\beta_{k}$ are precisely the Gaussian divisors of $\gcd\left(  \beta
_{1},\beta_{2},\ldots,\beta_{k}\right)  $.

\textbf{(c)} We have $\operatorname*{Div}\left(  \beta_{1},\beta_{2}%
,\ldots,\beta_{k}\right)  =\operatorname*{Div}\left(  \gcd\left(  \beta
_{1},\beta_{2},\ldots,\beta_{k}\right)  \right)  $.

\textbf{(d)} If $k>0$, then%
\[
\gcd\left(  \beta_{1},\beta_{2},\ldots,\beta_{k}\right)  \sim\gcd\left(
\gcd\left(  \beta_{1},\beta_{2},\ldots,\beta_{k-1}\right)  ,\beta_{k}\right)
.
\]

\end{theorem}

Theorem \ref{thm.ent.gcd.split} still holds for Gaussian integers, with the
obvious changes (the $=$ sign is replaced by $\sim$).
\end{noncompile}

We could define \textit{Gaussian rationals} (their set is called
$\mathbb{Q}\left[  i\right]  $) as complex numbers $a+bi$ with $a,b\in
\mathbb{Q}$. These are exactly the quotients of Gaussian integers.

Lowest common multiples of Gaussian integers still exist, but their definition
has to be modified. For example, we can define $\operatorname{lcm}\left(
\alpha,\beta\right)  $ as the (unique up to unit-equivalence) Gaussian integer
$\gamma$ such that the common multiples of $\alpha$ and $\beta$ are the
multiples of $\gamma$. (We would have to prove that it actually is unique and
exists.) Theorem \ref{thm.ent.lcm.gcd*lcm} still holds, in the sense that
$\gcd\left(  \alpha,\beta\right)  \cdot\operatorname{lcm}\left(  \alpha
,\beta\right)  \sim\alpha\beta$. Many other properties of lowest common
multiplies extend to Gaussian integers.

The Chinese remainder theorem (Theorem \ref{thm.ent.crt1}) still holds for
coprime Gaussian integers $\mu$ and $\nu$. Similarly for $k$ mutually coprime
Gaussian integers.

\subsubsection{Gaussian primes}

\begin{definition}
Let $\pi$ be a nonzero Gaussian integer that is not a unit. We say that $\pi$
is a \textbf{Gaussian prime} if each Gaussian divisor of $\pi$ is either a
unit or unit-equivalent to $\pi$.
\end{definition}

The letter \textquotedblleft$\pi$\textquotedblright\ in this definition is
unrelated to the irrational number $\pi=3.14159\ldots$. It just happens to be
the Greek letter corresponding to the Roman \textquotedblleft$p$%
\textquotedblright.

The Gaussian primes are \textbf{not} a superset of the primes. For example:

\begin{example}
The Gaussian integer $2$ is not a Gaussian prime.
\end{example}

\begin{proof}
We have $2=\left(  1+i\right)  \left(  1-i\right)  $. The factors $1+i$ and
$1-i$ have norms $2$, which means that they are neither units themselves
(since units would have norm $1$) nor unit-equivalent to $2$ (since $2$ has
norm $4$, but unit-equivalent Gaussian integers have equal norms). Thus, $1+i$
is a Gaussian divisor of $2$ that is neither a unit nor is unit-equivalent to
$\pi$. Hence, $2$ is not a Gaussian prime.
\end{proof}

So don't forget the word \textquotedblleft Gaussian\textquotedblright\ when
you mean it!

Let us search for Gaussian primes. So we know that $2$ is not a Gaussian
prime. What about $3$?

If we had $3=\left(  a+bi\right)  \left(  c+di\right)  $ with neither $a+bi$
nor $c+di$ being a unit, then we would get%
\[
\operatorname*{N}\left(  3\right)  =\operatorname*{N}\left(  \left(
a+bi\right)  \left(  c+di\right)  \right)  =\underbrace{\operatorname*{N}%
\left(  a+bi\right)  }_{=a^{2}+b^{2}}\cdot\underbrace{\operatorname*{N}\left(
c+di\right)  }_{=c^{2}+d^{2}}=\left(  a^{2}+b^{2}\right)  \cdot\left(
c^{2}+d^{2}\right)  ,
\]
so that%
\[
\left(  a^{2}+b^{2}\right)  \cdot\left(  c^{2}+d^{2}\right)
=\operatorname*{N}\left(  3\right)  =3^{2}+0^{2}=9.
\]
Since $a^{2}+b^{2}$ and $c^{2}+d^{2}$ are nonnegative integers, this would
mean that

\begin{itemize}
\item \textbf{either} $a^{2}+b^{2}=1$ and $c^{2}+d^{2}=9$,

\item \textbf{or }$a^{2}+b^{2}=3$ and $c^{2}+d^{2}=3$,

\item \textbf{or }$a^{2}+b^{2}=9$ and $c^{2}+d^{2}=1$.
\end{itemize}

The first and third of these options are impossible, since neither $a+bi$ nor
$c+di$ should be a unit, but non-units cannot have norm $1$. So the second
option must be true. Thus, $a^{2}+b^{2}=3$ and $c^{2}+d^{2}=3$. But this is
impossible since $a$ and $b$ have to be integers. So $3$ is a Gaussian prime.

\begin{center}
\textbf{2019-03-11 lecture}
\end{center}

TODO:

\begin{itemize}
\item If $\operatorname*{N}\left(  \alpha\right)  $ prime, then $\alpha$
Gaussian prime.

\item Thus, $1+i$ is a Gaussian prime.

\item But no converse! $3$ is a Gaussian prime. To see this, use
\textquotedblleft If $\alpha\mid\beta$, then $\operatorname*{N}\left(
\alpha\right)  \mid\operatorname*{N}\left(  \beta\right)  $\textquotedblright.

\item $5=\left(  1+2i\right)  \left(  1-2i\right)  $ not Gaussian prime.

\item $7$ is a Gaussian prime again.

\item What is the pattern?

\item Prop. 2.13.5 works again.

\item ....
\end{itemize}

\section{Solutions to the exercises}

\subsection{Solution to Exercise \ref{exe.ent.div.aabs}}

\begin{fineprint}
\begin{proof}
[Solution to Exercise \ref{exe.ent.div.aabs}.]The definition of $\left\vert
a\right\vert $ shows that $\left\vert a\right\vert $ equals either $a$ or
$-a$. In other words, $\left\vert a\right\vert $ equals either $1a$ or
$\left(  -1\right)  a$. In other words, $\left\vert a\right\vert =qa$ for some
$q\in\left\{  1,-1\right\}  $. Consider this $q$. Clearly, $q$ is an integer.
Now, from $\left\vert a\right\vert =qa=aq$, we conclude that $a\mid\left\vert
a\right\vert $ (since $q$ is an integer). This solves Exercise
\ref{exe.ent.div.aabs} \textbf{(a)}.

\textbf{(b)} From $q\in\left\{  1,-1\right\}  $, we obtain $q^{2}\in\left\{
1^{2},\left(  -1\right)  ^{2}\right\}  =\left\{  1,1\right\}  =\left\{
1\right\}  $, so that $q^{2}=1$. Now, multiplying the equality $\left\vert
a\right\vert =qa$ by $q$, we obtain $q\left\vert a\right\vert =\underbrace{qq}%
_{=q^{2}=1}a=a$. Hence, $a=q\left\vert a\right\vert =\left\vert a\right\vert
\cdot q$. Thus, $\left\vert a\right\vert \mid a$ (since $q$ is an integer).
This solves Exercise \ref{exe.ent.div.aabs} \textbf{(b)}.
\end{proof}
\end{fineprint}

\subsection{Solution to Exercise \ref{exe.ent.div.abba}}

\begin{fineprint}
\begin{proof}
[Solution to Exercise \ref{exe.ent.div.abba}.]We are in one of the following
two cases:

\textit{Case 1:} We have $b\neq0$.

\textit{Case 2:} We have $b=0$.

Let us first consider Case 1. In this case, we have $b\neq0$. Thus,
Proposition \ref{prop.ent.div.1} \textbf{(b)} yields $\left\vert a\right\vert
\leq\left\vert b\right\vert $ (since $a\mid b$).

We have $a\mid b$. In other words, there exists an integer $c$ such that
$b=ac$. Consider this $c$. If we had $a=0$, then we would have
$b=\underbrace{a}_{=0}c=0$, which would contradict $b\neq0$. Thus, we cannot
have $a=0$. Hence, $a\neq0$. Thus, Proposition \ref{prop.ent.div.1}
\textbf{(b)} (applied to $b$ and $a$ instead of $a$ and $b$) yields
$\left\vert b\right\vert \leq\left\vert a\right\vert $ (since $b\mid a$).
Combining this with $\left\vert a\right\vert \leq\left\vert b\right\vert $, we
obtain $\left\vert a\right\vert =\left\vert b\right\vert $. Thus, Exercise
\ref{exe.ent.div.abba} is solved in Case 1.

Let us now consider Case 2. In this case, we have $b=0$. But we have $b\mid
a$. In other words, there exists an integer $c$ such that $a=bc$. Consider
this $c$. Hence, $a=\underbrace{b}_{=0}c=0c=0=b$ (since $b=0$). Thus,
$\left\vert a\right\vert =\left\vert b\right\vert $. Hence, Exercise
\ref{exe.ent.div.abba} is solved in Case 2.

Now, we have solved Exercise \ref{exe.ent.div.abba} in both Cases 1 and 2.
Hence, Exercise \ref{exe.ent.div.abba} always holds.
\end{proof}
\end{fineprint}

\subsection{Solution to Exercise \ref{exe.ent.div.acbc}}

\begin{fineprint}
\begin{proof}
[Solution to Exercise \ref{exe.ent.div.acbc}.]$\Longrightarrow:$ Assume that
$a\mid b$ holds. We must prove that $ac\mid bc$.

It is easy to do this straight from the definition of divisibility, but here
is a shorter argument: Proposition \ref{prop.ent.div.2} \textbf{(a)} (applied
to $c$ instead of $a$) yields $c\mid c$. Also, $a\mid b$. Hence, Proposition
\ref{prop.ent.div.2} \textbf{(c)} (applied to $a_{1}=a$, $b_{1}=b$, $a_{2}=c$
and $b_{2}=c$) yields $ac\mid bc$. This proves the \textquotedblleft%
$\Longrightarrow$\textquotedblright\ direction of Exercise
\ref{exe.ent.div.acbc}.

$\Longleftarrow:$ Assume that $ac\mid bc$ holds. We must prove that $a\mid b$.

We have $ac\mid bc$. In other words, there exists an integer $d$ such that
$bc=\left(  ac\right)  d$ (by Definition \ref{def.ent.div.div}). Consider this
$d$. We have $bc=\left(  ac\right)  d=adc$. We can divide both sides of this
equality by $c$ (since $c\neq0$), and thus obtain $b=ad$. Thus, there exists
an integer $e$ such that $b=ae$ (namely, $e=d$). In other words, $a\mid b$ (by
Definition \ref{def.ent.div.div}). This proves the \textquotedblleft%
$\Longleftarrow$\textquotedblright\ direction of Exercise
\ref{exe.ent.div.acbc}.
\end{proof}
\end{fineprint}

\subsection{Solution to Exercise \ref{exe.ent.div.powers}}

\begin{fineprint}
\begin{proof}
[Solution to Exercise \ref{exe.ent.div.powers}.]We have $b-a\geq0$ (since
$a\leq b$), thus $b-a\in\mathbb{N}$. Hence, $n^{b-a}$ is a well-defined
integer. Now, $n^{b}=n^{a}n^{b-a}$ (since $n^{a}n^{b-a}=n^{a+\left(
b-a\right)  }=n^{b}$). Hence, there exists an integer $c$ such that
$n^{b}=n^{a}c$ (namely, $c=n^{b-a}$). In other words, $n^{a}\mid n^{b}$ (by
the definition of divisibility). This solves Exercise \ref{exe.ent.div.powers}.
\end{proof}
\end{fineprint}

\subsection{Solution to Exercise \ref{exe.ent.div.g|1}}

\begin{fineprint}
\begin{proof}
[Solution to Exercise \ref{exe.ent.div.g|1}.]Assume the contrary. Thus,
$g\neq1$. But Proposition \ref{prop.ent.div.1} \textbf{(b)} (applied to $g$
and $1$ instead of $a$ and $b$) yields $\left\vert g\right\vert \leq\left\vert
1\right\vert $ (since $g\mid1$ and $1\neq0$). But $g$ is nonnegative; hence,
$\left\vert g\right\vert =g$, so that $g=\left\vert g\right\vert
\leq\left\vert 1\right\vert =1$. Combining this with $g\neq1$, we obtain
$g<1$. Hence, $g=0$ (since $g$ is a nonnegative integer).

But $g\mid1$. In other words, there exists an integer $c$ such that $1=gc$ (by
Definition \ref{def.ent.div.div}). Consider this $c$. Now, $1=\underbrace{g}%
_{=0}c=0c=0$. This contradicts $1\neq0$. This contradiction shows that our
assumption was wrong. Hence, Exercise \ref{exe.ent.div.g|1} is solved.
\end{proof}
\end{fineprint}

\subsection{Solution to Exercise \ref{exe.ent.mod.a+b=a-b}}

\begin{fineprint}
\begin{proof}
[Solution to Exercise \ref{exe.ent.mod.a+b=a-b}.]According to Definition
\ref{def.ent.cong}, we have $a+b\equiv a-b\operatorname{mod}2$ if and only if
$2\mid\left(  a+b\right)  -\left(  a-b\right)  $. Thus, it remains to prove
that $2\mid\left(  a+b\right)  -\left(  a-b\right)  $. But this follows
immediately from $\left(  a+b\right)  -\left(  a-b\right)  =2b$. Thus Exercise
\ref{exe.ent.mod.a+b=a-b} is solved.
\end{proof}
\end{fineprint}

\subsection{Solution to Exercise \ref{exe.ent.mod.basics-nope}}

\begin{fineprint}
\begin{proof}
[Solution to Exercise \ref{exe.ent.mod.basics-nope}.]There are many such
examples. Here is one:%
\[
n=8,\ \ \ \ \ \ \ \ \ \ a_{1}=10,\ \ \ \ \ \ \ \ \ \ a_{2}%
=2,\ \ \ \ \ \ \ \ \ \ b_{1}=10,\ \ \ \ \ \ \ \ \ \ b_{2}=10.
\]
These satisfy $a_{1}\equiv b_{1}\operatorname{mod}n$ and $a_{2}\equiv
b_{2}\operatorname{mod}n$ but neither $a_{1}/a_{2}\equiv b_{1}/b_{2}%
\operatorname{mod}n$ nor $a_{1}^{a_{2}}\equiv b_{1}^{b_{2}}\operatorname{mod}%
n$.

It is much easier to find examples which fail only one of the two congruences
$a_{1}/a_{2}\equiv b_{1}/b_{2}\operatorname{mod}n$ and $a_{1}^{a_{2}}\equiv
b_{1}^{b_{2}}\operatorname{mod}n$.
\end{proof}
\end{fineprint}

\subsection{Solution to Exercise \ref{exe.ent.mod.basics.2}}

\begin{fineprint}
\begin{proof}
[Solution to Exercise \ref{exe.ent.mod.basics.2}.]We have $a\equiv
b\operatorname{mod}n$. In other words, $n\mid a-b$ (by the definition of
congruence). Note that all of $a/d$, $b/d$ and $n/d$ are integers (since $d$
divides each of $a,b,n$). Hence, $\left(  a-b\right)  /d=a/d-b/d$ is an
integer as well. Hence, Exercise \ref{exe.ent.div.acbc} (applied to $n/d$,
$\left(  a-b\right)  /d$ and $d$ instead of $a$, $b$ and $c$) shows that
$n/d\mid\left(  a-b\right)  /d$ holds if and only if $\left(  n/d\right)
d\mid\left(  \left(  a-b\right)  /d\right)  d$. Since $\left(  n/d\right)
d\mid\left(  \left(  a-b\right)  /d\right)  d$ does hold (indeed, this is just
a complicated way to say $n\mid a-b$), we thus conclude that $n/d\mid\left(
a-b\right)  /d$ holds. In other words, $n/d\mid a/d-b/d$ (since $\left(
a-b\right)  /d=a/d-b/d$). In other words, $a/d\equiv b/d\operatorname{mod}n/d$
(by the definition of congruence). This solves Exercise
\ref{exe.ent.mod.basics.2}.
\end{proof}
\end{fineprint}

\subsection{Solution to Exercise \ref{exe.ent.mod.basics.k-power}}

\begin{fineprint}
\begin{proof}
[First solution to Exercise \ref{exe.ent.mod.basics.k-power}.]We want to prove
that
\begin{equation}
a^{k}\equiv b^{k}\operatorname{mod}n\ \ \ \ \ \ \ \ \ \ \text{for each }%
k\in\mathbb{N}. \label{sol.ent.mod.basics.k-power.goal}%
\end{equation}
We shall prove this by induction on $k$:

\textit{Induction base:} Proposition \ref{prop.ent.mod.basics} \textbf{(a)}
yields $1\equiv1\operatorname{mod}n$. In view of $a^{0}=1$ and $b^{0}=1$, this
rewrites as $a^{0}\equiv b^{0}\operatorname{mod}n$. In other words,
(\ref{sol.ent.mod.basics.k-power.goal}) holds for $k=0$. This completes the
induction base.

\textit{Induction step:} Let $\ell\in\mathbb{N}$. Assume that
(\ref{sol.ent.mod.basics.k-power.goal}) holds for $k=\ell$. We must prove that
(\ref{sol.ent.mod.basics.k-power.goal}) holds for $k=\ell+1$.

We have assumed that (\ref{sol.ent.mod.basics.k-power.goal}) holds for
$k=\ell$. In other words, we have $a^{\ell}\equiv b^{\ell}\operatorname{mod}%
n$. Also, recall that $a\equiv b\operatorname{mod}n$. Hence,
(\ref{eq.prop.ent.mod.basics.d.3}) (applied to $c=a^{\ell}$ and $d=b^{\ell}$)
yields $aa^{\ell}\equiv bb^{\ell}\operatorname{mod}n$. In other words,
$a^{\ell+1}\equiv b^{\ell+1}\operatorname{mod}n$ (since $aa^{\ell}=a^{\ell+1}$
and $bb^{\ell}=b^{\ell+1}$). In other words,
(\ref{sol.ent.mod.basics.k-power.goal}) holds for $k=\ell+1$. This completes
the induction step. Thus, (\ref{sol.ent.mod.basics.k-power.goal}) is proven by
induction. Therefore, Exercise \ref{exe.ent.mod.basics.k-power} is solved.
\end{proof}

\begin{proof}
[Second solution to Exercise \ref{exe.ent.mod.basics.k-power}.]Recall that%
\begin{equation}
\left(  a-b\right)  \left(  a^{k-1}+a^{k-2}b+a^{k-3}b^{2}+\cdots
+ab^{k-2}+b^{k-1}\right)  =a^{k}-b^{k}
\label{sol.exe.ent.mod.basics.k-power.2nd.gs}%
\end{equation}
for every $k\in\mathbb{N}$. (This is a well-known identity, and it appears
(with $k$ renamed as $n$) as the first half of Exercise 1 on
\href{http://www-users.math.umn.edu/~dgrinber/19s/hw0s.pdf}{homework set \#0}.)

Now, let $k\in\mathbb{N}$. We have assumed that $a\equiv b\operatorname{mod}%
n$. In other words, $n\mid a-b$. In other words, there exists an integer $c$
such that $a-b=nc$. Consider this $c$. Now,
(\ref{sol.exe.ent.mod.basics.k-power.2nd.gs}) yields%
\begin{align*}
a^{k}-b^{k}  &  =\underbrace{\left(  a-b\right)  }_{=nc}\left(  a^{k-1}%
+a^{k-2}b+a^{k-3}b^{2}+\cdots+ab^{k-2}+b^{k-1}\right) \\
&  =nc\left(  a^{k-1}+a^{k-2}b+a^{k-3}b^{2}+\cdots+ab^{k-2}+b^{k-1}\right)  .
\end{align*}
The right hand side of this equality is clearly divisible by $n$. Hence, so is
the left hand side. In other words, $n\mid a^{k}-b^{k}$. In other words,
$a^{k}\equiv b^{k}\operatorname{mod}n$. Hence, Exercise
\ref{exe.ent.mod.basics.k-power} is solved again.
\end{proof}
\end{fineprint}

\subsection{Solution to Exercise \ref{exe.ent.mod.k-sum}}

\begin{fineprint}
\begin{proof}
[Solution to Exercise \ref{exe.ent.mod.k-sum}.]\textbf{(a)} We shall solve
Exercise \ref{exe.ent.mod.k-sum} \textbf{(a)} by induction on $\left\vert
S\right\vert $:

\textit{Induction base:} Exercise \ref{exe.ent.mod.k-sum} \textbf{(a)} holds
whenever $\left\vert S\right\vert =0$\ \ \ \ \footnote{\textit{Proof.} Let
$n$, $S$, $a_{s}$ and $b_{s}$ be as in Exercise \ref{exe.ent.mod.k-sum}, and
assume that $\left\vert S\right\vert =0$. Then, the set $S$ is empty (since
$\left\vert S\right\vert =0$), and thus we have $\sum_{s\in S}a_{s}=\left(
\text{empty sum}\right)  =0$. Similarly, $\sum_{s\in S}b_{s}=0$. Now,
Proposition \ref{prop.ent.mod.basics} \textbf{(a)} yields $0\equiv
0\operatorname{mod}n$. In view of $\sum_{s\in S}a_{s}=0$ and $\sum_{s\in
S}b_{s}=0$, this rewrites as $\sum_{s\in S}a_{s}\equiv\sum_{s\in S}%
b_{s}\operatorname{mod}n$. Thus, Exercise \ref{exe.ent.mod.k-sum} \textbf{(a)}
holds in our case.
\par
So we have shown that Exercise \ref{exe.ent.mod.k-sum} \textbf{(a)} holds
whenever $\left\vert S\right\vert =0$.}. This completes the induction base.

\textit{Induction step:} Fix $k\in\mathbb{N}$. Assume that Exercise
\ref{exe.ent.mod.k-sum} \textbf{(a)} holds whenever $\left\vert S\right\vert
=k$. We must prove that Exercise \ref{exe.ent.mod.k-sum} \textbf{(a)} holds
whenever $\left\vert S\right\vert =k+1$.

We have assumed that Exercise \ref{exe.ent.mod.k-sum} \textbf{(a)} holds
whenever $\left\vert S\right\vert =k$. In other words, the following statement
is true:

\begin{statement}
\textit{Statement 1:} Let $n$, $S$, $a_{s}$ and $b_{s}$ be as in Exercise
\ref{exe.ent.mod.k-sum}. Assume that $\left\vert S\right\vert =k$. Then,
$\sum_{s\in S}a_{s}\equiv\sum_{s\in S}b_{s}\operatorname{mod}n$.
\end{statement}

Now, we must prove that Exercise \ref{exe.ent.mod.k-sum} \textbf{(a)} holds
whenever $\left\vert S\right\vert =k+1$. In other words, we must prove the
following statement:

\begin{statement}
\textit{Statement 2:} Let $n$, $S$, $a_{s}$ and $b_{s}$ be as in Exercise
\ref{exe.ent.mod.k-sum}. Assume that $\left\vert S\right\vert =k+1$. Then,
$\sum_{s\in S}a_{s}\equiv\sum_{s\in S}b_{s}\operatorname{mod}n$.
\end{statement}

[\textit{Proof of Statement 2:} We have $\left\vert S\right\vert =k+1>k\geq0$;
thus, the set $S$ is nonempty. Hence, there exists some $t\in S$. Pick such a
$t$. Thus, $\left\vert S\setminus\left\{  t\right\}  \right\vert =\left\vert
S\right\vert -1=k$ (since $\left\vert S\right\vert =k+1$). Moreover, from
(\ref{eq.exe.ent.mod.k-sum.ass}), we immediately obtain that
\[
a_{s}\equiv b_{s}\operatorname{mod}n\ \ \ \ \ \ \ \ \ \ \text{for each }s\in
S\setminus\left\{  t\right\}
\]
(since each $s\in S\setminus\left\{  t\right\}  $ belongs to $S$). Hence, we
can apply Statement 1 to $S\setminus\left\{  t\right\}  $ instead of $S$. We
thus obtain
\[
\sum_{s\in S\setminus\left\{  t\right\}  }a_{s}\equiv\sum_{s\in S\setminus
\left\{  t\right\}  }b_{s}\operatorname{mod}n.
\]
Also, we have
\[
a_{t}\equiv b_{t}\operatorname{mod}n
\]
(by (\ref{eq.exe.ent.mod.k-sum.ass}), applied to $s=t$). Adding these two
congruences together, we obtain%
\[
\sum_{s\in S\setminus\left\{  t\right\}  }a_{s}+a_{t}\equiv\sum_{s\in
S\setminus\left\{  t\right\}  }b_{s}+b_{t}\operatorname{mod}n.
\]
In view of%
\[
\sum_{s\in S}a_{s}=\sum_{s\in S\setminus\left\{  t\right\}  }a_{s}%
+a_{t}\ \ \ \ \ \ \ \ \ \ \left(
\begin{array}
[c]{c}%
\text{here, we have split off the addend}\\
\text{for }s=t\text{ from the sum}%
\end{array}
\right)
\]
and%
\[
\sum_{s\in S}b_{s}=\sum_{s\in S\setminus\left\{  t\right\}  }b_{s}%
+b_{t}\ \ \ \ \ \ \ \ \ \ \left(
\begin{array}
[c]{c}%
\text{here, we have split off the addend}\\
\text{for }s=t\text{ from the sum}%
\end{array}
\right)  ,
\]
this can be rewritten as%
\[
\sum_{s\in S}a_{s}\equiv\sum_{s\in S}b_{s}\operatorname{mod}n.
\]
This proves Statement 2.]

We have now proven Statement 2; this means that Exercise
\ref{exe.ent.mod.k-sum} \textbf{(a)} holds whenever $\left\vert S\right\vert
=k+1$. This completes the induction step; thus, Exercise
\ref{exe.ent.mod.k-sum} \textbf{(a)} is solved.

\textbf{(b)} The solution to Exercise \ref{exe.ent.mod.k-sum} \textbf{(b)} is
analogous to the one we gave above for Exercise \ref{exe.ent.mod.k-sum}
\textbf{(a)}; the main difference is that we have to replace sums by products
(and $0$ by $1$).
\end{proof}
\end{fineprint}

\subsection{Solution to Exercise \ref{exe.ent.mod.prod-wrong}}

\begin{fineprint}
\begin{proof}
[Solution to Exercise \ref{exe.ent.mod.prod-wrong}.]No, it is not true. For
example, $a_{1}=1$, $a_{2}=1$, $b_{1}=1$, $b_{2}=0$, $n_{1}=0$ and $n_{2}=1$
yield a counterexample.
\end{proof}
\end{fineprint}

\subsection{Solution to Exercise \ref{exe.ent.mod.a+nd}}

\begin{fineprint}
\begin{proof}
[Solution to Exercise \ref{exe.ent.mod.a+nd}.]If $a\equiv b\operatorname{mod}%
n$, then $b\equiv a\operatorname{mod}n$ (by Proposition
\ref{prop.ent.mod.basics} \textbf{(c)}). In other words, the implication
$\left(  a\equiv b\operatorname{mod}n\right)  \Longrightarrow\left(  b\equiv
a\operatorname{mod}n\right)  $ holds. The same argument (but with the roles of
$a$ and $b$ swapped) shows that the implication $\left(  b\equiv
a\operatorname{mod}n\right)  \Longrightarrow\left(  a\equiv
b\operatorname{mod}n\right)  $ holds. Combining these two implications, we
obtain the logical equivalence $\left(  a\equiv b\operatorname{mod}n\right)
\Longleftrightarrow\left(  b\equiv a\operatorname{mod}n\right)  $. Thus, we
have the following chain of logical equivalences:%
\begin{align*}
\left(  a\equiv b\operatorname{mod}n\right)  \  &  \Longleftrightarrow
\ \left(  b\equiv a\operatorname{mod}n\right) \\
&  \Longleftrightarrow\ \left(  n\mid b-a\right)  \ \ \ \ \ \ \ \ \ \ \left(
\text{by the definition of congruence}\right) \\
&  \Longleftrightarrow\ \left(  \text{there exists an integer }d\text{ such
that }b-a=nd\right) \\
&  \ \ \ \ \ \ \ \ \ \ \left(  \text{by the definition of divisibility}\right)
\\
&  \Longleftrightarrow\ \left(  \text{there exists an integer }d\text{ such
that }b=a+nd\right)
\end{align*}
(since the equation $b-a=nd$ for an integer $d$ is equivalent to $b=a+nd$). In
other words, $a\equiv b\operatorname{mod}n$ if and only if there exists some
$d\in\mathbb{Z}$ such that $b=a+nd$. This solves Exercise
\ref{exe.ent.mod.a+nd}.
\end{proof}
\end{fineprint}

\subsection{Solution to Exercise \ref{exe.ent.mod.diff}}

\begin{fineprint}
\begin{proof}
[Solution to Exercise \ref{exe.ent.mod.diff}.]We have $a-b\equiv
c\operatorname{mod}n$ if and only if $n\mid\left(  a-b\right)  -c$ (by the
definition of congruence). Thus, we have the logical equivalence%
\begin{equation}
\left(  a-b\equiv c\operatorname{mod}n\right)  \ \Longleftrightarrow\ \left(
n\mid\left(  a-b\right)  -c\right)  . \label{sol.ent.mod.diff.1}%
\end{equation}


On the other hand, we have $a\equiv b+c\operatorname{mod}n$ if and only if
$n\mid a-\left(  b+c\right)  $ (by the definition of congruence). Thus, we
have the logical equivalence%
\begin{equation}
\left(  a\equiv b+c\operatorname{mod}n\right)  \ \Longleftrightarrow\ \left(
n\mid a-\left(  b+c\right)  \right)  . \label{sol.ent.mod.diff.2}%
\end{equation}


Now, we have the following chain of logical equivalences:%
\begin{align*}
\left(  a-b\equiv c\operatorname{mod}n\right)  \  &  \Longleftrightarrow
\ \left(  n\mid\underbrace{\left(  a-b\right)  -c}_{=a-\left(  b+c\right)
}\right)  \ \ \ \ \ \ \ \ \ \ \left(  \text{by (\ref{sol.ent.mod.diff.1}%
)}\right) \\
&  \Longleftrightarrow\ \left(  n\mid a-\left(  b+c\right)  \right)
\ \Longleftrightarrow\ \left(  a\equiv b+c\operatorname{mod}n\right)
\ \ \ \ \ \ \ \ \ \ \left(  \text{by (\ref{sol.ent.mod.diff.2})}\right)  .
\end{align*}
In other words, we have $a-b\equiv c\operatorname{mod}n$ if and only if
$a\equiv b+c\operatorname{mod}n$. This solves Exercise \ref{exe.ent.mod.diff}.
\end{proof}
\end{fineprint}

\subsection{Solution to Exercise \ref{exe.ent.mod.substitutivity.7div}}

\begin{fineprint}
\begin{proof}
[Solution to Exercise \ref{exe.ent.mod.substitutivity.7div}.]We have
$3^{2n+1}=\left(  \underbrace{3^{2}}_{=9\equiv2\operatorname{mod}7}\right)
^{n}\cdot3\equiv2^{n}\cdot3\operatorname{mod}7$. (This follows from the PSC,
in its extended form that allows $k$-th powers in the expression $A$.
Alternatively, you can argue by hand as follows: We have $3^{2}=9\equiv
2\operatorname{mod}7$. Thus, Exercise \ref{exe.ent.mod.basics.k-power}
(applied to $7$, $3^{2}$, $2$ and $n$ instead of $n$, $a$, $b$ and $k$) yields
$\left(  3^{2}\right)  ^{n}\equiv2^{n}\operatorname{mod}7$. Multiplying this
congruence by the obvious congruence $3\equiv3\operatorname{mod}7$, we obtain
$\left(  3^{2}\right)  ^{n}\cdot3\equiv2^{n}\cdot3\operatorname{mod}7$. Thus,
$3^{2n+1}=\left(  3^{2}\right)  ^{n}\cdot3\equiv2^{n}\cdot3\operatorname{mod}%
7$.)

Hence, again using the PSC, we obtain%
\[
\underbrace{3^{2n+1}}_{\equiv2^{n}\cdot3\operatorname{mod}7}%
+\underbrace{2^{n+2}}_{=2^{n}\cdot2^{2}=2^{n}\cdot4}\equiv2^{n}\cdot
3+2^{n}\cdot4=2^{n}\cdot\underbrace{\left(  3+4\right)  }_{=7}=2^{n}%
\cdot7\equiv0\operatorname{mod}7
\]
(since $2^{n}\cdot7$ is clearly divisible by $7$). In other words,
$7\mid3^{2n+1}+2^{n+2}$. This solves Exercise
\ref{exe.ent.mod.substitutivity.7div}.

[\textit{Remark:} Here is a sketch of a different solution: If we set
$a_{n}=3^{2n+1}+2^{n+2}$ for each $n\in\mathbb{N}$, then we must prove that
$7\mid a_{n}$ for all $n\in\mathbb{N}$. But a straightforward computation
reveals that%
\begin{equation}
a_{n}=11a_{n-1}-18a_{n-2}\ \ \ \ \ \ \ \ \ \ \text{for each }n\geq2.
\label{sol.ent.mod.substitutivity.7div.rec}%
\end{equation}
Thus, once we check that $7\mid a_{0}$ and $7\mid a_{1}$, and then a
straightforward strong induction on $n$ shows that $7\mid a_{n}$ for all
$n\in\mathbb{N}$, which is exactly the claim of Exercise
\ref{exe.ent.mod.substitutivity.7div}. Of course, \textbf{finding} the
relation (\ref{sol.ent.mod.substitutivity.7div.rec}) was the main trick in
this solution; it becomes somewhat natural once you know the theory of linear
recurrences (such as the Fibonacci sequence).]
\end{proof}
\end{fineprint}

\subsection{Solution to Exercise \ref{exe.ent.quo-rem.mod=rem}}

\begin{fineprint}
\begin{proof}
[Solution to Exercise \ref{exe.ent.quo-rem.mod=rem}.]$\Longrightarrow:$ Assume
that $u\equiv v\operatorname{mod}n$. We must prove that $u\%n=v\%n$.

Corollary \ref{cor.ent.quo-rem.remmod} \textbf{(a)} yields that $u\%n\in
\left\{  0,1,\ldots,n-1\right\}  $ and $u\%n\equiv u\operatorname{mod}n$.
Hence, $u\%n\equiv u\equiv v\operatorname{mod}n$.

But Corollary \ref{cor.ent.quo-rem.remmod} \textbf{(c)} (applied to $v$
instead of $u$) yields that if $c\in\left\{  0,1,\ldots,n-1\right\}  $ is such
that $c\equiv v\operatorname{mod}n$, then $c=v\%n$. Applying this to $c=u\%n$,
we obtain $u\%n=v\%n$ (since $u\%n\in\left\{  0,1,\ldots,n-1\right\}  $ and
$u\%n\equiv v\operatorname{mod}n$). This proves the \textquotedblleft%
$\Longrightarrow$\textquotedblright\ direction of Exercise
\ref{exe.ent.quo-rem.mod=rem}.

$\Longleftarrow:$ Assume that $u\%n=v\%n$. We must prove that $u\equiv
v\operatorname{mod}n$.

Corollary \ref{cor.ent.quo-rem.remmod} \textbf{(a)} yields that $u\%n\in
\left\{  0,1,\ldots,n-1\right\}  $ and $u\%n\equiv u\operatorname{mod}n$.
Corollary \ref{cor.ent.quo-rem.remmod} \textbf{(a)} (applied to $v$ instead of
$u$) yields that $v\%n\in\left\{  0,1,\ldots,n-1\right\}  $ and $v\%n\equiv
v\operatorname{mod}n$.

From $u\%n\equiv u\operatorname{mod}n$, we obtain $u\equiv u\%n=v\%n\equiv
v\operatorname{mod}n$. Thus, we have proven $u\equiv v\operatorname{mod}n$.
This proves the \textquotedblleft$\Longleftarrow$\textquotedblright\ direction
of Exercise \ref{exe.ent.quo-rem.mod=rem}.
\end{proof}
\end{fineprint}

\subsection{Solution to Exercise \ref{exe.ent.quo-rem.minrem}}

\begin{fineprint}
\begin{proof}
[Solution to Exercise \ref{exe.ent.quo-rem.minrem}.]\textbf{(a)} Theorem
\ref{thm.ent.quorem.full} shows that there exists a unique pair $\left(
q,r\right)  \in\mathbb{Z}\times\left\{  0,1,\ldots,n-1\right\}  $ such that
$u=qn+r$. Consider this pair $\left(  q,r\right)  $, and denote it by $\left(
s,t\right)  $. Thus, $\left(  s,t\right)  \in\mathbb{Z}\times\left\{
0,1,\ldots,n-1\right\}  $ is a pair satisfying $u=sn+t$. From $\left(
s,t\right)  \in\mathbb{Z}\times\left\{  0,1,\ldots,n-1\right\}  $, we obtain
$s\in\mathbb{Z}$ and $t\in\left\{  0,1,\ldots,n-1\right\}  \subseteq
\mathbb{Z}$.

We are in one of the following two cases:

\textit{Case 1:} We have $t\leq n/2$.

\textit{Case 2:} We have $t>n/2$.

Let us first consider Case 1. In this case, we have $t\leq n/2$. But $t$ is
nonnegative (since $t\in\left\{  0,1,\ldots,n-1\right\}  $); thus, $\left\vert
t\right\vert =t\leq n/2$. So we have $\left(  s,t\right)  \in\mathbb{Z}%
\times\mathbb{Z}$ (since $s\in\mathbb{Z}$ and $t\in\mathbb{Z}$) and $u=sn+t$
and $\left\vert t\right\vert \leq n/2$. Hence, there exists a pair $\left(
q,r\right)  \in\mathbb{Z}\times\mathbb{Z}$ such that $u=qn+r$ and $\left\vert
r\right\vert \leq n/2$ (namely, $\left(  q,r\right)  =\left(  s,t\right)  $).
Thus, Exercise \ref{exe.ent.quo-rem.minrem} \textbf{(a)} is solved in Case 1.

Let us now consider Case 2. In this case, we have $t>n/2$. But $t\in\left\{
0,1,\ldots,n-1\right\}  $, thus $t\leq n-1\leq n$. Hence, $t-n\leq0$. Hence,
$\left\vert t-n\right\vert =-\left(  t-n\right)  =n-\underbrace{t}%
_{>n/2}<n-n/2=n/2$. Therefore, $\left\vert t-n\right\vert \leq n/2$.
Furthermore, $t-n\in\mathbb{Z}$ (since $t\in\mathbb{Z}$ and $n\in\mathbb{Z}$)
and $s+1\in\mathbb{Z}$ (since $s\in\mathbb{Z}$). So we have $\left(
s+1,t-n\right)  \in\mathbb{Z}\times\mathbb{Z}$ (since $s+1\in\mathbb{Z}$ and
$t-n\in\mathbb{Z}$) and $u=\left(  s+1\right)  n+\left(  t-n\right)  $ (since
$\left(  s+1\right)  n+\left(  t-n\right)  =sn+t=u$) and $\left\vert
t-n\right\vert \leq n/2$. Hence, there exists a pair $\left(  q,r\right)
\in\mathbb{Z}\times\mathbb{Z}$ such that $u=qn+r$ and $\left\vert r\right\vert
\leq n/2$ (namely, $\left(  q,r\right)  =\left(  s+1,t-n\right)  $). Thus,
Exercise \ref{exe.ent.quo-rem.minrem} \textbf{(a)} is solved in Case 2.

We have now solved Exercise \ref{exe.ent.quo-rem.minrem} \textbf{(a)} in each
of the two Cases 1 and 2. Since these two Cases cover all possibilities, we
thus conclude that Exercise \ref{exe.ent.quo-rem.minrem} \textbf{(a)} always holds.

\textbf{(b)} For example, if $n=2$ and $u=5$, then both $\left(  2,1\right)  $
and $\left(  3,-1\right)  $ are pairs $\left(  q,r\right)  \in\mathbb{Z}%
\times\mathbb{Z}$ such that $u=qn+r$ and $\left\vert r\right\vert \leq n/2$.

More generally: If $n=2k$ for some positive integer $k$, and if $u\equiv
k\operatorname{mod}n$, then both $\left(  \left(  u-k\right)  /n,k\right)  $
and $\left(  \left(  u+k\right)  /n,-k\right)  $ are pairs $\left(
q,r\right)  \in\mathbb{Z}\times\mathbb{Z}$ such that $u=qn+r$ and $\left\vert
r\right\vert \leq n/2$.

[It is not hard to see that these are the \textbf{only} cases in which the
pair $\left(  q,r\right)  $ from Exercise \ref{exe.ent.quo-rem.minrem}
\textbf{(a)} is not unique.]
\end{proof}
\end{fineprint}

\subsection{Solution to Exercise \ref{exe.ent.quo-rem.u+v}}

\begin{fineprint}
\begin{proof}
[Solution to Exercise \ref{exe.ent.quo-rem.u+v}.]Corollary
\ref{cor.ent.quo-rem.remmod} \textbf{(a)} yields that $u\%n\in\left\{
0,1,\ldots,n-1\right\}  $ and $u\%n\equiv u\operatorname{mod}n$. From
$u\%n\in\left\{  0,1,\ldots,n-1\right\}  $, we conclude that $u\%n$ is an
integer satisfying $0\leq u\%n\leq n-1$.

Corollary \ref{cor.ent.quo-rem.remmod} \textbf{(a)} (applied to $v$ instead of
$u$) yields that $v\%n\in\left\{  0,1,\ldots,n-1\right\}  $ and $v\%n\equiv
v\operatorname{mod}n$. From $v\%n\in\left\{  0,1,\ldots,n-1\right\}  $, we
conclude that $v\%n$ is an integer satisfying $0\leq v\%n\leq n-1$.

Corollary \ref{cor.ent.quo-rem.remmod} \textbf{(a)} (applied to $u+v$ instead
of $u$) yields that $\left(  u+v\right)  \%n\in\left\{  0,1,\ldots
,n-1\right\}  $ and $\left(  u+v\right)  \%n\equiv u+v\operatorname{mod}n$.
From $\left(  u+v\right)  \%n\in\left\{  0,1,\ldots,n-1\right\}  $, we
conclude that $\left(  u+v\right)  \%n$ is an integer satisfying $0\leq\left(
u+v\right)  \%n\leq n-1$.

Adding the congruences $u\%n\equiv u\operatorname{mod}n$ and $v\%n\equiv
v\operatorname{mod}n$ together, we obtain $u\%n+v\%n\equiv
u+v\operatorname{mod}n$. Subtracting the congruence $\left(  u+v\right)
\%n\equiv u+v\operatorname{mod}n$ from this congruence, we obtain
$u\%n+v\%n-\left(  u+v\right)  \%n\equiv\left(  u+v\right)  -\left(
u+v\right)  =0\operatorname{mod}n$. By Proposition \ref{prop.ent.mod.0}
(applied to $a=u\%n+v\%n-\left(  u+v\right)  \%n$), this entails $n\mid
u\%n+v\%n-\left(  u+v\right)  \%n$. In other words, there exists an integer
$c$ such that $u\%n+v\%n-\left(  u+v\right)  \%n=nc$. Consider this $c$.

Hence,%
\[
nc=\underbrace{u\%n}_{\leq n-1<n}+\underbrace{v\%n}_{\leq n-1<n}%
-\underbrace{\left(  u+v\right)  \%n}_{\geq0}<n+n-0=2n=n\cdot2.
\]
We can divide this inequality by $n$ (since $n$ is positive). We thus obtain
$c<2$. Hence, $c\leq1$ (since $c$ is an integer).

On the other hand,
\[
nc=\underbrace{u\%n}_{\geq0}+\underbrace{v\%n}_{\geq0}-\underbrace{\left(
u+v\right)  \%n}_{\leq n-1<n}>0+0-n=-n=n\cdot\left(  -1\right)  .
\]
We can divide this inequality by $n$ (since $n$ is positive). We thus obtain
$c>-1$. Hence, $c\geq0$ (since $c$ is an integer).

Combining $c\geq0$ with $c\leq1$, we obtain $c\in\left\{  0,1\right\}  $
(since $c$ is an integer). In other words, we have $c=0$ or $c=1$. Hence, we
have $nc=n\cdot0=0$ or $nc=n\cdot1=n$. In other words, $nc\in\left\{
0,n\right\}  $. Now, recall that $u\%n+v\%n-\left(  u+v\right)  \%n=nc\in
\left\{  0,n\right\}  $. This solves Exercise \ref{exe.ent.quo-rem.u+v}.
\end{proof}
\end{fineprint}

\subsection{Solution to Exercise \ref{exe.ent.even-odd.1}}

\begin{fineprint}
\begin{proof}
[Solution to Exercise \ref{exe.ent.even-odd.1}.]Corollary
\ref{cor.ent.quo-rem.remmod} \textbf{(b)} (applied to $n=2$) shows that we
have $2\mid u$ if and only if $u\%2=0$. In other words, we have the logical
equivalence
\begin{equation}
\left(  2\mid u\right)  \ \Longleftrightarrow\ \left(  u\%2=0\right)  .
\label{sol.ent.even-odd.1.1}%
\end{equation}


Corollary \ref{cor.ent.quo-rem.remmod} \textbf{(a)} (applied to $n=2$) yields
that $u\%2\in\left\{  0,1,\ldots,2-1\right\}  $ and $u\%2\equiv
u\operatorname{mod}2$. Thus, in particular, $u\%2\in\left\{  0,1,\ldots
,2-1\right\}  =\left\{  0,1\right\}  $. Hence, $u\%2$ is either $0$ or $1$.
Thus, the number $u\%2$ is $1$ if and only if it is not $0$. In other words,
we have the equivalence%
\begin{equation}
\left(  u\%2=1\right)  \ \Longleftrightarrow\ \left(  u\%2\neq0\right)  .
\label{sol.ent.even-odd.1.2}%
\end{equation}


Proposition \ref{prop.ent.mod.0} (applied to $a=u$ and $n=2$) shows that
$u\equiv0\operatorname{mod}2$ if and only if $2\mid u$. In other words, we
have the equivalence%
\begin{equation}
\left(  u\equiv0\operatorname{mod}2\right)  \ \Longleftrightarrow\ \left(
2\mid u\right)  . \label{sol.ent.even-odd.1.3}%
\end{equation}


\textbf{(a)} We have the following chain of equivalences:%
\begin{align*}
\left(  u\text{ is even}\right)  \  &  \Longleftrightarrow\ \left(  u\text{ is
divisible by }2\right)  \ \ \ \ \ \ \ \ \ \ \left(  \text{by the definition of
\textquotedblleft even\textquotedblright}\right) \\
&  \Longleftrightarrow\ \left(  2\mid u\right)  \ \Longleftrightarrow\ \left(
u\%2=0\right)  \ \ \ \ \ \ \ \ \ \ \left(  \text{by
(\ref{sol.ent.even-odd.1.1})}\right)  .
\end{align*}
In other words, $u$ is even if and only if $u\%2=0$. This solves Exercise
\ref{exe.ent.even-odd.1} \textbf{(a)}.

\textbf{(b)} We have the following chain of equivalences:%
\begin{align}
\left(  u\text{ is odd}\right)  \  &  \Longleftrightarrow\ \left(  u\text{ is
not divisible by }2\right)  \ \ \ \ \ \ \ \ \ \ \left(  \text{by the
definition of \textquotedblleft odd\textquotedblright}\right) \nonumber\\
&  \Longleftrightarrow\ \left(  \text{we don't have }2\mid u\right)
\ \Longleftrightarrow\ \left(  \text{we don't have }u\%2=0\right) \nonumber\\
&  \ \ \ \ \ \ \ \ \ \ \left(  \text{because of the equivalence }\left(  2\mid
u\right)  \ \Longleftrightarrow\ \left(  u\%2=0\right)  \right) \nonumber\\
&  \Longleftrightarrow\ \left(  u\%2\neq0\right)
\label{sol.ent.even-odd.1.b.1}\\
&  \Longleftrightarrow\ \left(  u\%2=1\right)  \ \ \ \ \ \ \ \ \ \ \left(
\text{by (\ref{sol.ent.even-odd.1.2})}\right)  .\nonumber
\end{align}
In other words, $u$ is odd if and only if $u\%2=1$. This solves Exercise
\ref{exe.ent.even-odd.1} \textbf{(b)}.

\textbf{(c)} We have the following chain of equivalences:%
\begin{align*}
\left(  u\text{ is even}\right)  \  &  \Longleftrightarrow\ \left(  u\text{ is
divisible by }2\right)  \ \ \ \ \ \ \ \ \ \ \left(  \text{by the definition of
\textquotedblleft even\textquotedblright}\right) \\
&  \Longleftrightarrow\ \left(  2\mid u\right)  \ \Longleftrightarrow\ \left(
u\equiv0\operatorname{mod}2\right)  \ \ \ \ \ \ \ \ \ \ \left(  \text{by
(\ref{sol.ent.even-odd.1.3})}\right)  .
\end{align*}
In other words, $u$ is even if and only if $u\equiv0\operatorname{mod}2$. This
solves Exercise \ref{exe.ent.even-odd.1} \textbf{(c)}.

\textbf{(d)} $\Longrightarrow:$ Assume that $u$ is odd. We must prove that
$u\equiv1\operatorname{mod}2$.

We know that $u$ is odd. In other words, $u\%2=1$ (by Exercise
\ref{exe.ent.even-odd.1} \textbf{(b)}). But recall that $u\%2\equiv
u\operatorname{mod}2$. Thus, $u\equiv u\%2=1\operatorname{mod}2$. This proves
the \textquotedblleft$\Longrightarrow$\textquotedblright\ direction of
Exercise \ref{exe.ent.even-odd.1} \textbf{(d)}.

$\Longleftarrow:$ Assume that $u\equiv1\operatorname{mod}2$. We must prove
that $u$ is odd.

We have $1\equiv u\operatorname{mod}2$ (since $u\equiv1\operatorname{mod}2$)
and $1\in\left\{  0,1,\ldots,2-1\right\}  $. But Corollary
\ref{cor.ent.quo-rem.remmod} \textbf{(c)} (applied to $n=2$) says that if
$c\in\left\{  0,1,\ldots,2-1\right\}  $ satisfies $c\equiv u\operatorname{mod}%
2$, then $c=u\%2$. Applying this to $c=1$, we find $1=u\%2$ (since
$1\in\left\{  0,1,\ldots,2-1\right\}  $ and $1\equiv u\operatorname{mod}2$).
In other words, $u\%2=1$. According to Exercise \ref{exe.ent.even-odd.1}
\textbf{(b)}, this means that $u$ is odd. This proves the \textquotedblleft%
$\Longleftarrow$\textquotedblright\ direction of Exercise
\ref{exe.ent.even-odd.1} \textbf{(d)}.

\textbf{(e)} $\Longrightarrow:$ Assume that $u$ is odd. We must prove that
$u+1$ is even.

We have assumed that $u$ is odd. According to Exercise
\ref{exe.ent.even-odd.1} \textbf{(d)}, this means that $u\equiv
1\operatorname{mod}2$. On the other hand, $1\equiv-1\operatorname{mod}2$
(since $2\mid1-\left(  -1\right)  $). Adding these two congruences together,
we find $u+1\equiv1+\left(  -1\right)  =0\operatorname{mod}2$.

But Exercise \ref{exe.ent.even-odd.1} \textbf{(c)} (applied to $u+1$ instead
of $u$) shows that $u+1$ is even if and only if $u+1\equiv0\operatorname{mod}%
2$. Hence, $u+1$ is even (since $u+1\equiv0\operatorname{mod}2$). This proves
the \textquotedblleft$\Longrightarrow$\textquotedblright\ direction of
Exercise \ref{exe.ent.even-odd.1} \textbf{(e)}.

$\Longleftarrow:$ Assume that $u+1$ is even. We must prove that $u$ is odd.

We know that $u+1$ is even. But Exercise \ref{exe.ent.even-odd.1} \textbf{(c)}
(applied to $u+1$ instead of $u$) shows that $u+1$ is even if and only if
$u+1\equiv0\operatorname{mod}2$. Hence, $u+1\equiv0\operatorname{mod}2$ (since
$u+1$ is even). On the other hand, $-1\equiv1\operatorname{mod}2$ (since
$2\mid\left(  -1\right)  -1$). Adding these two congruences together, we
obtain $\left(  u+1\right)  +\left(  -1\right)  \equiv0+1=1\operatorname{mod}%
2$. In view of $\left(  u+1\right)  +\left(  -1\right)  =u$, this rewrites as
$u\equiv1\operatorname{mod}2$. According to Exercise \ref{exe.ent.even-odd.1}
\textbf{(d)}, this means that $u$ is odd. This proves the \textquotedblleft%
$\Longleftarrow$\textquotedblright\ direction of Exercise
\ref{exe.ent.even-odd.1} \textbf{(e)}.

\textbf{(f)} We have the equivalence $\left(  u\text{ is divisible by
}2\right)  \ \Longleftrightarrow\ \left(  u\text{ is even}\right)  $ (by the
definition of \textquotedblleft even\textquotedblright).

Exercise \ref{exe.ent.even-odd.1} \textbf{(e)} shows that $u$ is odd if and
only if $u+1$ is even. Thus, we have the following chain of equivalences:%
\begin{align*}
&  \ \left(  u+1\text{ is even}\right) \\
&  \Longleftrightarrow\ \left(  u\text{ is odd}\right)  \ \Longleftrightarrow
\ \left(  u\text{ is not divisible by }2\right)  \ \ \ \ \ \ \ \ \ \ \left(
\text{by the definition of \textquotedblleft odd\textquotedblright}\right) \\
&  \Longleftrightarrow\ \left(  u\text{ is not even}\right)
\end{align*}
(because of the equivalence $\left(  u\text{ is divisible by }2\right)
\ \Longleftrightarrow\ \left(  u\text{ is even}\right)  $). In other words,
$u+1$ is even if and only if $u$ is not. In other words, exactly one of the
two numbers $u$ and $u+1$ is even. This solves Exercise
\ref{exe.ent.even-odd.1} \textbf{(f)}.

\textbf{(g)} Exercise \ref{exe.ent.even-odd.1} \textbf{(f)} shows that exactly
one of the two numbers $u$ and $u+1$ is even. Thus, in particular, \textbf{at
least} one of these two numbers is even. Hence, the product $u\left(
u+1\right)  $ has \textbf{at least} one even factor. But a product of any even
integer with any integer is even\footnote{\textit{Proof.} We must prove that
if $a$ is an even integer, and if $b$ is an integer, then the product $ab$ is
even.
\par
So let $a$ be an even integer, and let $b$ be an integer. Then, $a$ is even;
in other words, $2\mid a$ (by the definition of \textquotedblleft
even\textquotedblright). But $a\mid ab$. Hence, $2\mid a\mid ab$; in other
words, $ab$ is even. Qed.}. Hence, a product that has at least one even factor
is always even. Thus, $u\left(  u+1\right)  $ is even (since $u\left(
u+1\right)  $ is a product that has at least one even factor). In other words,
$2\mid u\left(  u+1\right)  $. In other words, $u\left(  u+1\right)
\equiv0\operatorname{mod}2$. This solves Exercise \ref{exe.ent.even-odd.1}
\textbf{(g)}.

\textbf{(h)} We have $u^{2}-\left(  -u\right)  =u^{2}+u=u\left(  u+1\right)
\equiv0\operatorname{mod}2$ (by Exercise \ref{exe.ent.even-odd.1}
\textbf{(g)}). In other words, $2\mid u^{2}-\left(  -u\right)  $. In other
words, $u^{2}\equiv-u\operatorname{mod}2$.

Also, $2\mid\left(  -u\right)  -u$ (since $\left(  -u\right)  -u=2\left(
-u\right)  $ is clearly divisible by $2$); in other words, $-u\equiv
u\operatorname{mod}2$. Hence, $u^{2}\equiv-u\equiv u\operatorname{mod}2$. This
solves Exercise \ref{exe.ent.even-odd.1} \textbf{(h)}.

\textbf{(i)} Exercise \ref{exe.ent.quo-rem.mod=rem} (applied to $n=2$) shows
that $u\equiv v\operatorname{mod}2$ if and only if $u\%2=v\%2$.

We are in one of the following four cases:

\textit{Case 1:} We have $u\%2=0$ and $v\%2=0$.

\textit{Case 2:} We have $u\%2=0$ and $v\%2\neq0$.

\textit{Case 3:} We have $u\%2\neq0$ and $v\%2=0$.

\textit{Case 4:} We have $u\%2\neq0$ and $v\%2\neq0$.

Let us first consider Case 1. In this case, we have $u\%2=0$ and $v\%2=0$.
Thus, $u\%2=0=v\%2$ and therefore $u\equiv v\operatorname{mod}2$ (since we
know that $u\equiv v\operatorname{mod}2$ if and only if $u\%2=v\%2$). But
recall that $u\%2=0$. Equivalently, $u$ is even (because of Exercise
\ref{exe.ent.even-odd.1} \textbf{(a)}). Similarly, from $v\%2=0$, we conclude
that $v$ is even. Thus, $u$ and $v$ are either both odd or both even (namely,
they are both even).

Thus, $u\equiv v\operatorname{mod}2$ holds if and only if $u$ and $v$ are
either both odd or both even (because both statements \textquotedblleft%
$u\equiv v\operatorname{mod}2$\textquotedblright\ and \textquotedblleft$u$ and
$v$ are either both odd or both even\textquotedblright\ hold). Hence, Exercise
\ref{exe.ent.even-odd.1} \textbf{(i)} is solved in Case 1.

Let us now consider Case 2. In this case, we have $u\%2=0$ and $v\%2\neq0$.
Thus, $u\%2=0\neq v\%2$. In other words, \textquotedblleft$u\%2=v\%2$%
\textquotedblright\ is false. Thus, \textquotedblleft$u\equiv
v\operatorname{mod}2$\textquotedblright\ is false as well (since we know that
$u\equiv v\operatorname{mod}2$ if and only if $u\%2=v\%2$). But recall that
$u\%2=0$. Equivalently, $u$ is even (because of Exercise
\ref{exe.ent.even-odd.1} \textbf{(a)}). Hence, $u$ is not odd\footnote{because
an integer is either even or odd (but not both at the same time)}. Thus, $u$
and $v$ are not both even. Also, Exercise \ref{exe.ent.even-odd.1}
\textbf{(a)} (applied to $v$ instead of $u$) shows that $v$ is even if and
only if $v\%2=0$. Since we don't have $v\%2=0$ (because $v\%2\neq0$), we thus
conclude that $v$ is not even. Thus, $u$ and $v$ are not both odd.

So $u$ and $v$ are neither both odd nor both even. In other words, the
statement \textquotedblleft$u$ and $v$ are either both odd or both
even\textquotedblright\ is false.

Thus, $u\equiv v\operatorname{mod}2$ holds if and only if $u$ and $v$ are
either both odd or both even (because both statements \textquotedblleft%
$u\equiv v\operatorname{mod}2$\textquotedblright\ and \textquotedblleft$u$ and
$v$ are either both odd or both even\textquotedblright\ are false). Hence,
Exercise \ref{exe.ent.even-odd.1} \textbf{(i)} is solved in Case 2.

Case 3 is analogous to Case 2 (it differs from Case 2 only in that $u$ and $v$
trade places).

Let us finally consider Case 4. In this case, we have $u\%2\neq0$ and
$v\%2\neq0$. By (\ref{sol.ent.even-odd.1.b.1}), we have the logical
equivalence $\left(  u\text{ is odd}\right)  \ \Longleftrightarrow\ \left(
u\%2\neq0\right)  $. Hence, $u$ is odd (since $u\%2\neq0$). Similarly, $v$ is
odd. Thus, $u$ and $v$ are both odd. Thus, $u$ and $v$ are either both odd or
both even (namely, they are both odd). Moreover, we know that $u$ is odd;
equivalently, $u\%2=1$ (by Exercise \ref{exe.ent.even-odd.1} \textbf{(b)}).
Similarly, $v\%2=1$. Hence, $u\%2=1=v\%2$. Therefore, $u\equiv
v\operatorname{mod}2$ (since we know that $u\equiv v\operatorname{mod}2$ if
and only if $u\%2=v\%2$).

Thus, $u\equiv v\operatorname{mod}2$ holds if and only if $u$ and $v$ are
either both odd or both even (because both statements \textquotedblleft%
$u\equiv v\operatorname{mod}2$\textquotedblright\ and \textquotedblleft$u$ and
$v$ are either both odd or both even\textquotedblright\ hold). Hence, Exercise
\ref{exe.ent.even-odd.1} \textbf{(i)} is solved in Case 4.

We have now solved Exercise \ref{exe.ent.even-odd.1} \textbf{(i)} in all four
Cases 1, 2, 3 and 4. Hence, Exercise \ref{exe.ent.even-odd.1} \textbf{(i)} is solved.
\end{proof}
\end{fineprint}

\subsection{Solution to Exercise \ref{exe.ent.even-odd-sumsq}}

\begin{fineprint}
\begin{proof}
[Solution to Exercise \ref{exe.ent.even-odd-sumsq}.]\textbf{(a)} Let $u$ be an
even integer. Thus, $u$ is even. In other words, $u$ is divisible by $2$. In
other words, there exists some integer $c$ such that $u=2c$. Consider this $c$.

From $u=2c$, we obtain $u^{2}=\left(  2c\right)  ^{2}=4c^{2}$, which is
clearly divisible by $4$. So we have $4\mid u^{2}=u^{2}-0$. In other words,
$u^{2}\equiv0\operatorname{mod}4$. This solves Exercise
\ref{exe.ent.even-odd-sumsq} \textbf{(a)}.

\textbf{(b)} Let $u$ be an odd integer. Thus, $u$ is odd. Equivalently,
$u\equiv1\operatorname{mod}2$ (by Exercise \ref{exe.ent.even-odd.1}
\textbf{(d)}). In other words, $2\mid u-1$. In other words, there exists some
integer $c$ such that $u-1=2c$. Consider this $c$.

From $u-1=2c$, we obtain $u=2c+1$ and thus $u^{2}=\left(  2c+1\right)
^{2}=4c^{2}+4c+1$. Hence, $u^{2}-1=4c^{2}+4c=4\left(  c^{2}+c\right)  $, which
is clearly divisible by $4$. So we have $4\mid u^{2}-1$. In other words,
$u^{2}\equiv1\operatorname{mod}4$. This solves Exercise
\ref{exe.ent.even-odd-sumsq} \textbf{(b)}.

\textbf{(c)} Let $x$ and $y$ be two integers such that $x^{2}+y^{2}%
\equiv3\operatorname{mod}4$. We shall derive a contradiction.

Recall that an integer is always either even or odd. Thus, $x$ is either even
or odd. Similarly, $y$ is either even or odd. Thus, we are in one of the
following four cases:

\textit{Case 1:} The integer $x$ is even, and the integer $y$ is even.

\textit{Case 2:} The integer $x$ is even, and the integer $y$ is odd.

\textit{Case 3:} The integer $x$ is odd, and the integer $y$ is even.

\textit{Case 4:} The integer $x$ is odd, and the integer $y$ is odd.

Let us first consider Case 1. In this case, the integer $x$ is even, and the
integer $y$ is even. Hence, Exercise \ref{exe.ent.even-odd-sumsq} \textbf{(a)}
(applied to $u=x$) yields $x^{2}\equiv0\operatorname{mod}4$ (since $x$ is
even). Also, Exercise \ref{exe.ent.even-odd-sumsq} \textbf{(a)} (applied to
$u=y$) yields $y^{2}\equiv0\operatorname{mod}4$ (since $y$ is even). Thus,
$\underbrace{x^{2}}_{\equiv0\operatorname{mod}4}+\underbrace{y^{2}}%
_{\equiv0\operatorname{mod}4}\equiv0+0=0\operatorname{mod}4$. Hence, $0\equiv
x^{2}+y^{2}\equiv3\operatorname{mod}4$. But Exercise
\ref{exe.ent.quo-rem.mod=rem} (applied to $n=4$, $u=0$ and $v=3$) shows that
$0\equiv3\operatorname{mod}4$ if and only if $0\%4=3\%4$. Hence, $0\%4=3\%4$
(since $0\equiv3\operatorname{mod}4$). This contradicts the fact that
$0\%4=0\neq3=3\%4$. Hence, we have obtained a contradiction in Case 1.

Let us next consider Case 2. In this case, the integer $x$ is even, and the
integer $y$ is odd. Hence, Exercise \ref{exe.ent.even-odd-sumsq} \textbf{(a)}
(applied to $u=x$) yields $x^{2}\equiv0\operatorname{mod}4$ (since $x$ is
even). Also, Exercise \ref{exe.ent.even-odd-sumsq} \textbf{(b)} (applied to
$u=y$) yields $y^{2}\equiv1\operatorname{mod}4$ (since $y$ is odd). Thus,
$\underbrace{x^{2}}_{\equiv0\operatorname{mod}4}+\underbrace{y^{2}}%
_{\equiv1\operatorname{mod}4}\equiv0+1=1\operatorname{mod}4$. Hence, $1\equiv
x^{2}+y^{2}\equiv3\operatorname{mod}4$. But Exercise
\ref{exe.ent.quo-rem.mod=rem} (applied to $n=4$, $u=1$ and $v=3$) shows that
$1\equiv3\operatorname{mod}4$ if and only if $1\%4=3\%4$. Hence, $1\%4=3\%4$
(since $1\equiv3\operatorname{mod}4$). This contradicts the fact that
$1\%4=1\neq3=3\%4$. Hence, we have obtained a contradiction in Case 2.

The arguments in Cases 3 and 4 are completely analogous (in Case 3, we obtain
$x^{2}+y^{2}\equiv1\operatorname{mod}4$ again, whereas in Case 4 we obtain
$x^{2}+y^{2}\equiv2\operatorname{mod}4$). Thus, we have obtained a
contradiction in each of the four Cases 1, 2, 3 and 4. Hence, we always have a contradiction.

Now, forget that we fixed $x$ and $y$. We thus have obtained a contradiction
whenever $x$ and $y$ are two integers such that $x^{2}+y^{2}\equiv
3\operatorname{mod}4$. Thus, there are no such two integers. This solves
Exercise \ref{exe.ent.even-odd-sumsq} \textbf{(c)}.

\textbf{(d)} The solution of Exercise \ref{exe.ent.even-odd-sumsq}
\textbf{(d)} is very similar to the above solution of Exercise
\ref{exe.ent.even-odd-sumsq} \textbf{(c)} (indeed, we have to consider the
same four cases, but this time we don't get a contradiction in Case 4) and is
left to the reader.
\end{proof}
\end{fineprint}

\subsection{Solution to Exercise \ref{exe.ent.Div.set}}

\begin{fineprint}
\begin{proof}
[Solution to Exercise \ref{exe.ent.Div.set}.]Assume that $\left\{  b_{1}%
,b_{2},\ldots,b_{k}\right\}  =\left\{  c_{1},c_{2},\ldots,c_{\ell}\right\}  $.

Let $a$ be an integer. Then, $a$ is a common divisor of $b_{1},b_{2}%
,\ldots,b_{k}$ if and only if $a$ satisfies $\left(  a\mid b_{i}\text{ for all
}i\in\left\{  1,2,\ldots,k\right\}  \right)  $ (by the definition of
\textquotedblleft common divisor\textquotedblright). Hence, we have the
following chain of equivalences:%
\begin{align*}
&  \ \left(  a\text{ is a common divisor of }b_{1},b_{2},\ldots,b_{k}\right)
\\
&  \Longleftrightarrow\ \left(  a\mid b_{i}\text{ for all }i\in\left\{
1,2,\ldots,k\right\}  \right) \\
&  \Longleftrightarrow\ \left(  a\mid b_{1}\text{ and }a\mid b_{2}\text{ and
}\cdots\text{ and }a\mid b_{k}\right) \\
&  \Longleftrightarrow\ \left(  a\mid u\text{ for each }u\in\left\{
b_{1},b_{2},\ldots,b_{k}\right\}  \right)  .
\end{align*}
But $\operatorname*{Div}\left(  b_{1},b_{2},\ldots,b_{k}\right)  $ is the set
of all common divisors of $b_{1},b_{2},\ldots,b_{k}$. Hence, we have
$a\in\operatorname*{Div}\left(  b_{1},b_{2},\ldots,b_{k}\right)  $ if and only
if $a$ is a common divisor of $b_{1},b_{2},\ldots,b_{k}$. Thus, we have the
following chain of equivalences:%
\begin{align}
&  \ \left(  a\in\operatorname*{Div}\left(  b_{1},b_{2},\ldots,b_{k}\right)
\right) \nonumber\\
&  \Longleftrightarrow\ \left(  a\text{ is a common divisor of }b_{1}%
,b_{2},\ldots,b_{k}\right) \nonumber\\
&  \Longleftrightarrow\ \left(  a\mid u\text{ for each }u\in\left\{
b_{1},b_{2},\ldots,b_{k}\right\}  \right)  . \label{sol.ent.Div.set.1}%
\end{align}
The same argument (applied to $\ell$ and $\left(  c_{1},c_{2},\ldots,c_{\ell
}\right)  $ instead of $k$ and $\left(  b_{1},b_{2},\ldots,b_{k}\right)  $)
yields the equivalence%
\begin{align}
&  \ \left(  a\in\operatorname*{Div}\left(  c_{1},c_{2},\ldots,c_{\ell
}\right)  \right) \nonumber\\
&  \Longleftrightarrow\ \left(  a\mid u\text{ for each }u\in\left\{
c_{1},c_{2},\ldots,c_{\ell}\right\}  \right)  . \label{sol.ent.Div.set.2}%
\end{align}


Now, we have the following chain of equivalences:%
\begin{align*}
&  \ \left(  a\in\operatorname*{Div}\left(  b_{1},b_{2},\ldots,b_{k}\right)
\right) \\
&  \Longleftrightarrow\ \left(  a\mid u\text{ for each }u\in
\underbrace{\left\{  b_{1},b_{2},\ldots,b_{k}\right\}  }_{=\left\{
c_{1},c_{2},\ldots,c_{\ell}\right\}  }\right)  \ \ \ \ \ \ \ \ \ \ \left(
\text{by (\ref{sol.ent.Div.set.1})}\right) \\
&  \Longleftrightarrow\ \left(  a\mid u\text{ for each }u\in\left\{
c_{1},c_{2},\ldots,c_{\ell}\right\}  \right) \\
&  \Longleftrightarrow\ \left(  a\in\operatorname*{Div}\left(  c_{1}%
,c_{2},\ldots,c_{\ell}\right)  \right)  \ \ \ \ \ \ \ \ \ \ \left(  \text{by
(\ref{sol.ent.Div.set.2})}\right)  .
\end{align*}


Now, forget that we fixed $a$. We thus have proven the equivalence
\[
\left(  a\in\operatorname*{Div}\left(  b_{1},b_{2},\ldots,b_{k}\right)
\right)  \ \Longleftrightarrow\ \left(  a\in\operatorname*{Div}\left(
c_{1},c_{2},\ldots,c_{\ell}\right)  \right)
\]
for each integer $a$. In other words, an integer $a$ belongs to the set
$\operatorname*{Div}\left(  b_{1},b_{2},\ldots,b_{k}\right)  $ if and only if
it belongs to the set $\operatorname*{Div}\left(  c_{1},c_{2},\ldots,c_{\ell
}\right)  $. In other words, the two sets $\operatorname*{Div}\left(
b_{1},b_{2},\ldots,b_{k}\right)  $ and $\operatorname*{Div}\left(  c_{1}%
,c_{2},\ldots,c_{\ell}\right)  $ contain the exact same integers. Since both
of these sets consist of integers only, this entails that these two sets are
equal. In other words, $\operatorname*{Div}\left(  b_{1},b_{2},\ldots
,b_{k}\right)  =\operatorname*{Div}\left(  c_{1},c_{2},\ldots,c_{\ell}\right)
$. This solves Exercise \ref{exe.ent.Div.set}.
\end{proof}
\end{fineprint}

\subsection{Solution to Exercise \ref{exe.ent.gcd.set}}

\begin{fineprint}
\begin{proof}
[Solution to Exercise \ref{exe.ent.gcd.set}.]Assume that $\left\{  b_{1}%
,b_{2},\ldots,b_{k}\right\}  =\left\{  c_{1},c_{2},\ldots,c_{\ell}\right\}  $.
Then, Exercise \ref{exe.ent.Div.set} yields $\operatorname*{Div}\left(
b_{1},b_{2},\ldots,b_{k}\right)  =\operatorname*{Div}\left(  c_{1}%
,c_{2},\ldots,c_{\ell}\right)  $. Hence, Lemma \ref{lem.ent.gcd.through-Divc}
yields $\gcd\left(  b_{1},b_{2},\ldots,b_{k}\right)  =\gcd\left(  c_{1}%
,c_{2},\ldots,c_{\ell}\right)  $. This solves Exercise \ref{exe.ent.gcd.set}.
\end{proof}
\end{fineprint}

\subsection{Solution to Exercise \ref{exe.ent.gcd.an-1}}

\begin{fineprint}
\begin{proof}
[Solution to Exercise \ref{exe.ent.gcd.an-1}.]\textbf{(a)} Let $a\in
\mathbb{N}$ and $b\in\mathbb{N}$ be such that $b\geq a$.

We have $b-a\geq0$ (since $b\geq a$), hence $b-a\in\mathbb{N}$. Thus,
$u^{b-a}$ is an integer. We have%
\begin{align*}
\left(  u^{b}-1\right)  -\left(  u^{a}-1\right)   &  =u^{b}-u^{a}%
=\underbrace{u^{\left(  b-a\right)  +a}}_{=u^{b-a}u^{a}}-u^{a}%
\ \ \ \ \ \ \ \ \ \ \left(  \text{since }b=\left(  b-a\right)  +a\right) \\
&  =u^{b-a}u^{a}-u^{a}=\left(  u^{b-a}-1\right)  u^{a}.
\end{align*}
Thus, $u^{b-a}-1\mid\left(  u^{b}-1\right)  -\left(  u^{a}-1\right)  $ (since
$u^{a}$ is an integer). In other words, $u^{b}-1\equiv u^{a}%
-1\operatorname{mod}u^{b-a}-1$. This solves Exercise \ref{exe.ent.gcd.an-1}
\textbf{(a)}.

\begin{noncompile}
(Old version of the proof, longer:)

We have $b-a\geq0$ (since $b\geq a$), hence $b-a\in\mathbb{N}$. Thus,
$u^{b-a}$ is an integer. Moreover, $u^{a}u^{b-a}=u^{a+\left(  b-a\right)
}=u^{b}$ (since $a+\left(  b-a\right)  =b$). Now,%
\[
\underbrace{u^{a}\left(  u^{b-a}-1\right)  }_{=u^{a}u^{b-a}-u^{a}}+\left(
u^{a}-1\right)  =u^{a}u^{b-a}-u^{a}+\left(  u^{a}-1\right)  =\underbrace{u^{a}%
u^{b-a}}_{=u^{b}}-1=u^{b}-1.
\]
Hence, $\left(  u^{b}-1\right)  -\left(  u^{a}-1\right)  =u^{a}\left(
u^{b-a}-1\right)  =\left(  u^{b-a}-1\right)  u^{a}$. Thus, $u^{b-a}%
-1\mid\left(  u^{b}-1\right)  -\left(  u^{a}-1\right)  $ (since $u^{a}$ is an
integer). In other words, $u^{b}-1\equiv u^{a}-1\operatorname{mod}u^{b-a}-1$.
This solves Exercise \ref{exe.ent.gcd.an-1} \textbf{(a)}.
\end{noncompile}

\textbf{(b)} The following argument will imitate our proof of Lemma
\ref{lem.ent.gcd.bezout.++} above.

We use strong induction on $a+b$. Thus, we fix an $n\in\mathbb{N}$, and assume
(as induction hypothesis) that Exercise \ref{exe.ent.gcd.an-1} \textbf{(b)}
holds whenever $a+b<n$. We must now prove that Exercise \ref{exe.ent.gcd.an-1}
\textbf{(b)} holds whenever $a+b=n$.

We have assumed that Exercise \ref{exe.ent.gcd.an-1} \textbf{(b)} holds
whenever $a+b<n$. In other words, the following statement holds:

\begin{statement}
\textit{Statement 1:} Let $a\in\mathbb{N}$ and $b\in\mathbb{N}$ be such that
$a+b<n$. Then, $\gcd\left(  u^{a}-1,u^{b}-1\right)  =\left\vert u^{\gcd\left(
a,b\right)  }-1\right\vert $.
\end{statement}

Now, we must prove that Exercise \ref{exe.ent.gcd.an-1} \textbf{(b)} holds
whenever $a+b=n$. Let us first prove this in the case when $b\geq a$:

\begin{statement}
\textit{Statement 2:} Let $a\in\mathbb{N}$ and $b\in\mathbb{N}$ be such that
$a+b=n$ and $b\geq a$. Then, $\gcd\left(  u^{a}-1,u^{b}-1\right)  =\left\vert
u^{\gcd\left(  a,b\right)  }-1\right\vert $.
\end{statement}

[\textit{Proof of Statement 2:} We are in one of the following two cases:

\textit{Case 1:} We have $a=0$.

\textit{Case 2:} We have $a\neq0$.

Let us first consider Case 1. In this case, we have $a=0$. Hence, $u^{a}%
=u^{0}=1$ and thus $u^{a}-1=0$. Thus,%
\begin{align}
\gcd\left(  \underbrace{u^{a}-1}_{=0},u^{b}-1\right)   &  =\gcd\left(
0,u^{b}-1\right)  =\gcd\left(  u^{b}-1,0\right) \nonumber\\
&  \ \ \ \ \ \ \ \ \ \ \left(
\begin{array}
[c]{c}%
\text{by Proposition \ref{prop.ent.gcd.props1} \textbf{(b)}, applied to
}0\text{ and }u^{b}-1\\
\text{instead of }a\text{ and }b
\end{array}
\right) \nonumber\\
&  =\left\vert u^{b}-1\right\vert \label{sol.ent.gcd.an-1.b.s2.pf.1}%
\end{align}
(since Proposition \ref{prop.ent.gcd.props1} \textbf{(a)} (applied to
$u^{b}-1$ instead of $a$) yields $\gcd\left(  u^{b}-1,0\right)  =\gcd\left(
u^{b}-1\right)  =\left\vert u^{b}-1\right\vert $).

But Proposition \ref{prop.ent.gcd.props1} \textbf{(b)} yields $\gcd\left(
a,b\right)  =\gcd\left(  b,\underbrace{a}_{=0}\right)  =\gcd\left(
b,0\right)  $. Now, Proposition \ref{prop.ent.gcd.props1} \textbf{(a)}
(applied to $b$ instead of $a$) yields $\gcd\left(  b,0\right)  =\gcd\left(
b\right)  =\left\vert b\right\vert $. Hence, $\gcd\left(  a,b\right)
=\gcd\left(  b,0\right)  =\left\vert b\right\vert =b$ (since $b$ is
nonnegative). Hence, $\left\vert u^{\gcd\left(  a,b\right)  }-1\right\vert
=\left\vert u^{b}-1\right\vert $. Comparing this equality with
(\ref{sol.ent.gcd.an-1.b.s2.pf.1}), we obtain $\gcd\left(  u^{a}%
-1,u^{b}-1\right)  =\left\vert u^{\gcd\left(  a,b\right)  }-1\right\vert $.
Thus, Statement 2 is proven in Case 1.

Let us next consider Case 2. In this case, we have $a\neq0$. Hence, $a>0$
(since $a\in\mathbb{N}$), so that $a+b>b$. Hence, $b<a+b=n$.

From $b\geq a$, we obtain $b-a\in\mathbb{N}$. Moreover, $a\in\mathbb{N}$ and
$b-a\in\mathbb{N}$ satisfy $a+\left(  b-a\right)  =b<n$. Therefore, we can
apply Statement 1 \textbf{to }$b-a$ \textbf{instead of }$b$. Thus we obtain
that $\gcd\left(  u^{a}-1,u^{b-a}-1\right)  =\left\vert u^{\gcd\left(
a,b-a\right)  }-1\right\vert $.

But Proposition \ref{prop.ent.gcd.props1} \textbf{(c)} (applied to $u=-1$)
yields $\gcd\left(  a,\left(  -1\right)  a+b\right)  =\gcd\left(  a,b\right)
$. This rewrites as $\gcd\left(  a,b-a\right)  =\gcd\left(  a,b\right)  $
(since $\left(  -1\right)  a+b=b-a$).

Recall that $b-a\in\mathbb{N}$. Also, $b\geq b-a$ (since $a\geq0$). Hence,
Exercise \ref{exe.ent.gcd.an-1} \textbf{(a)} (applied to $b-a$ instead of $a$)
yields $u^{b}-1\equiv u^{b-a}-1\operatorname{mod}u^{b-\left(  b-a\right)  }%
-1$. Since $b-\left(  b-a\right)  =a$, this rewrites as $u^{b}-1\equiv
u^{b-a}-1\operatorname{mod}u^{a}-1$. Hence, Proposition
\ref{prop.ent.gcd.props1} \textbf{(d)} (applied to $u^{a}-1$, $u^{b}-1$ and
$u^{b-a}-1$ instead of $a$, $b$ and $c$) yields
\begin{align*}
\gcd\left(  u^{a}-1,u^{b}-1\right)   &  =\gcd\left(  u^{a}-1,u^{b-a}-1\right)
=\left\vert u^{\gcd\left(  a,b-a\right)  }-1\right\vert \\
&  =\left\vert u^{\gcd\left(  a,b\right)  }-1\right\vert
\ \ \ \ \ \ \ \ \ \ \left(  \text{since }\gcd\left(  a,b-a\right)
=\gcd\left(  a,b\right)  \right)  .
\end{align*}
Thus, Statement 2 is proven in Case 2.

We have now proven Statement 2 in both Cases 1 and 2. Hence, Statement 2 is
always proven.]

Now, we can prove that Exercise \ref{exe.ent.gcd.an-1} \textbf{(b)} holds
whenever $a+b=n$:

\begin{statement}
\textit{Statement 3:} Let $a\in\mathbb{N}$ and $b\in\mathbb{N}$ be such that
$a+b=n$. Then, $\gcd\left(  u^{a}-1,u^{b}-1\right)  =\left\vert u^{\gcd\left(
a,b\right)  }-1\right\vert $.
\end{statement}

[\textit{Proof of Statement 3:} We are in one of the following two cases:

\textit{Case 1:} We have $b\geq a$.

\textit{Case 2:} We have $b<a$.

Let us first consider Case 1. In this case, we have $b\geq a$. Hence,
Statement 2 shows that $\gcd\left(  u^{a}-1,u^{b}-1\right)  =\left\vert
u^{\gcd\left(  a,b\right)  }-1\right\vert $. Thus, Statement 3 is proven in
Case 1.

Let us next consider Case 2. In this case, we have $b<a$. Hence, $a>b$, so
that $a\geq b$. This shows that we can apply Statement 2 \textbf{to }%
$b$\textbf{ and }$a$ \textbf{instead of }$a$ \textbf{and }$b$. Thus we obtain
$\gcd\left(  u^{b}-1,u^{a}-1\right)  =\left\vert u^{\gcd\left(  b,a\right)
}-1\right\vert $. But Proposition \ref{prop.ent.gcd.props1} \textbf{(b)}
yields $\gcd\left(  a,b\right)  =\gcd\left(  b,a\right)  $. Moreover,
Proposition \ref{prop.ent.gcd.props1} \textbf{(b)} (applied to $u^{a}-1$ and
$u^{b}-1$ instead of $a$ and $b$) yields%
\[
\gcd\left(  u^{a}-1,u^{b}-1\right)  =\gcd\left(  u^{b}-1,u^{a}-1\right)
=\left\vert u^{\gcd\left(  b,a\right)  }-1\right\vert =\left\vert
u^{\gcd\left(  a,b\right)  }-1\right\vert
\]
(since $\gcd\left(  b,a\right)  =\gcd\left(  a,b\right)  $). Thus, Statement 3
is proven in Case 2.

We have now proven Statement 3 in both Cases 1 and 2. Hence, Statement 3 is
always proven.]

By proving Statement 3, we have shown that Exercise \ref{exe.ent.gcd.an-1}
\textbf{(b)} holds whenever $a+b=n$. This completes the induction step. Thus,
Exercise \ref{exe.ent.gcd.an-1} \textbf{(b)} is proven by strong induction.
\end{proof}
\end{fineprint}

\subsection{Solution to Exercise \ref{exe.ent.gcd.div}}

\begin{fineprint}
\begin{proof}
[Solution to Exercise \ref{exe.ent.gcd.div}.]Proposition
\ref{prop.ent.gcd.props1} \textbf{(f)} (applied to $a=a_{1}$ and $b=a_{2}$)
yields that we have $\gcd\left(  a_{1},a_{2}\right)  \mid a_{1}$ and
$\gcd\left(  a_{1},a_{2}\right)  \mid a_{2}$. Thus, $\gcd\left(  a_{1}%
,a_{2}\right)  \mid a_{1}\mid b_{1}$ and $\gcd\left(  a_{1},a_{2}\right)  \mid
a_{2}\mid b_{2}$.

So we know that $\gcd\left(  a_{1},a_{2}\right)  \mid b_{1}$ and $\gcd\left(
a_{1},a_{2}\right)  \mid b_{2}$. Hence, Lemma \ref{lem.ent.gcd.uniprop}
(applied to $m=\gcd\left(  a_{1},a_{2}\right)  $, $a=b_{1}$ and $b=b_{2}$)
yields $\gcd\left(  a_{1},a_{2}\right)  \mid\gcd\left(  b_{1},b_{2}\right)  $.
This solves Exercise \ref{exe.ent.gcd.div}.
\end{proof}
\end{fineprint}

\subsection{Solution to Exercise \ref{exe.ent.gcd.abs}}

\begin{fineprint}
\begin{proof}
[Solution to Exercise \ref{exe.ent.gcd.abs}.]\textbf{(a)} If $b\geq0$, then
$\left\vert b\right\vert =b$. Hence, if $b\geq0$, then Exercise
\ref{exe.ent.gcd.abs} \textbf{(a)} holds (since $\gcd\left(
a,\underbrace{\left\vert b\right\vert }_{=b}\right)  =\gcd\left(  a,b\right)
$). Thus, for the rest of this solution to Exercise \ref{exe.ent.gcd.abs}
\textbf{(a)}, we WLOG assume that we don't have $b\geq0$. Hence, we have
$b<0$. Thus, $\left\vert b\right\vert =-b$ and therefore $\gcd\left(
a,\underbrace{\left\vert b\right\vert }_{=-b}\right)  =\gcd\left(
a,-b\right)  =\gcd\left(  a,b\right)  $ (by Proposition
\ref{prop.ent.gcd.props1} \textbf{(h)}). This solves Exercise
\ref{exe.ent.gcd.abs} \textbf{(a)}.

\textbf{(b)} If $a\geq0$, then $\left\vert a\right\vert =a$. Hence, if
$a\geq0$, then Exercise \ref{exe.ent.gcd.abs} \textbf{(b)} holds (since
$\gcd\left(  \underbrace{\left\vert a\right\vert }_{=a},b\right)  =\gcd\left(
a,b\right)  $). Thus, for the rest of this solution to Exercise
\ref{exe.ent.gcd.abs} \textbf{(b)}, we WLOG assume that we don't have $a\geq
0$. Hence, we have $a<0$. Thus, $\left\vert a\right\vert =-a$ and therefore
$\gcd\left(  \underbrace{\left\vert a\right\vert }_{=-a},b\right)
=\gcd\left(  -a,b\right)  =\gcd\left(  a,b\right)  $ (by Proposition
\ref{prop.ent.gcd.props1} \textbf{(g)}). This solves Exercise
\ref{exe.ent.gcd.abs} \textbf{(b)}.

\textbf{(c)} Exercise \ref{exe.ent.gcd.abs} \textbf{(b)} (applied to
$\left\vert b\right\vert $ instead of $b$) yields $\gcd\left(  \left\vert
a\right\vert ,\left\vert b\right\vert \right)  =\gcd\left(  a,\left\vert
b\right\vert \right)  =\gcd\left(  a,b\right)  $ (by Exercise
\ref{exe.ent.gcd.abs} \textbf{(a)}). This solves Exercise
\ref{exe.ent.gcd.abs} \textbf{(c)}.
\end{proof}
\end{fineprint}

\subsection{Solution to Exercise \ref{exe.ent.gcd.sa,sb,sc}}

\begin{fineprint}
\begin{proof}
[Solution to Exercise \ref{exe.ent.gcd.sa,sb,sc}.]Corollary
\ref{cor.ent.gcd.sa,sb} yields
\begin{equation}
\gcd\left(  sa,sb\right)  =\left\vert s\right\vert \gcd\left(  a,b\right)  .
\label{sol.ent.gcd.sa,sb,sc.1}%
\end{equation}
But $\gcd\left(  a,b\right)  $ is a nonnegative integer (by the definition of
$\gcd\left(  a,b\right)  $). The equality (\ref{eq.ent.div.abs(xy)}) (applied
to $x=s$ and $y=\gcd\left(  a,b\right)  $) yields%
\begin{align}
\left\vert s\gcd\left(  a,b\right)  \right\vert  &  =\left\vert s\right\vert
\cdot\underbrace{\left\vert \gcd\left(  a,b\right)  \right\vert }%
_{\substack{=\gcd\left(  a,b\right)  \\\text{(since }\gcd\left(  a,b\right)
\text{ is nonnegative)}}}=\left\vert s\right\vert \gcd\left(  a,b\right)
\nonumber\\
&  =\gcd\left(  sa,sb\right)  \ \ \ \ \ \ \ \ \ \ \left(  \text{by
(\ref{sol.ent.gcd.sa,sb,sc.1})}\right)  . \label{sol.ent.gcd.sa,sb,sc.2}%
\end{align}


Now, Theorem \ref{thm.ent.gcd.uniprop-mul} \textbf{(d)} (applied to $3$ and
$\left(  a,b,c\right)  $ instead of $k$ and $\left(  b_{1},b_{2},\ldots
,b_{k}\right)  $) yields%
\begin{equation}
\gcd\left(  a,b,c\right)  =\gcd\left(  \gcd\left(  a,b\right)  ,c\right)  .
\label{sol.ent.gcd.sa,sb,sc.3}%
\end{equation}
The same argument (applied to $sa,sb,sc$ instead of $a,b,c$) yields%
\begin{align*}
&  \gcd\left(  sa,sb,sc\right) \\
&  =\gcd\left(  \underbrace{\gcd\left(  sa,sb\right)  }_{\substack{=\left\vert
s\gcd\left(  a,b\right)  \right\vert \\\text{(by (\ref{sol.ent.gcd.sa,sb,sc.2}%
))}}},sc\right)  =\gcd\left(  \left\vert s\gcd\left(  a,b\right)  \right\vert
,sc\right) \\
&  =\gcd\left(  s\gcd\left(  a,b\right)  ,sc\right)
\ \ \ \ \ \ \ \ \ \ \left(
\begin{array}
[c]{c}%
\text{by Exercise \ref{exe.ent.gcd.abs} \textbf{(b)}, applied to }s\gcd\left(
a,b\right) \\
\text{and }sc\text{ instead of }a\text{ and }b
\end{array}
\right) \\
&  =\left\vert s\right\vert \underbrace{\gcd\left(  \gcd\left(  a,b\right)
,c\right)  }_{\substack{=\gcd\left(  a,b,c\right)  \\\text{(by
(\ref{sol.ent.gcd.sa,sb,sc.3}))}}}\ \ \ \ \ \ \ \ \ \ \left(
\begin{array}
[c]{c}%
\text{by Corollary \ref{cor.ent.gcd.sa,sb}, applied to }\gcd\left(  a,b\right)
\\
\text{and }c\text{ instead of }a\text{ and }b
\end{array}
\right) \\
&  =\left\vert s\right\vert \gcd\left(  a,b,c\right)  .
\end{align*}
This solves Exercise \ref{exe.ent.gcd.sa,sb,sc}.
\end{proof}
\end{fineprint}

\subsection{Solution to Exercise \ref{exe.ent.gcd.sak}}

\begin{fineprint}
\begin{proof}
[Solution to Exercise \ref{exe.ent.gcd.sak}.]We shall show that%
\begin{equation}
\gcd\left(  sa_{1},sa_{2},\ldots,sa_{i}\right)  =\left\vert s\right\vert
\gcd\left(  a_{1},a_{2},\ldots,a_{i}\right)  \label{sol.ent.gcd.sak.1}%
\end{equation}
for each $i\in\left\{  0,1,\ldots,k\right\}  $.

[\textit{Proof of (\ref{sol.ent.gcd.sak.1}):} We proceed by induction on $i$:

\textit{Induction base:} Proposition \ref{prop.ent.gcd.props1} \textbf{(j)}
shows that the greatest common divisor of the empty list of integers is
$\gcd\left(  {}\right)  =0$. Now, comparing $\gcd\left(  sa_{1},sa_{2}%
,\ldots,sa_{0}\right)  =\gcd\left(  {}\right)  =0$ with $\left\vert
s\right\vert \underbrace{\gcd\left(  a_{1},a_{2},\ldots,a_{0}\right)  }%
_{=\gcd\left(  {}\right)  =0}=0$, we obtain $\gcd\left(  sa_{1},sa_{2}%
,\ldots,sa_{0}\right)  =\left\vert s\right\vert \gcd\left(  a_{1},a_{2}%
,\ldots,a_{0}\right)  $. In other words, (\ref{sol.ent.gcd.sak.1}) holds for
$i=0$. This completes the induction base.

\textit{Induction step:} Let $j\in\left\{  1,2,\ldots,k\right\}  $. Assume
that (\ref{sol.ent.gcd.sak.1}) holds for $i=j-1$. We must prove that
(\ref{sol.ent.gcd.sak.1}) holds for $i=j$.

We have assumed that (\ref{sol.ent.gcd.sak.1}) holds for $i=j-1$. In other
words, we have%
\begin{equation}
\gcd\left(  sa_{1},sa_{2},\ldots,sa_{j-1}\right)  =\left\vert s\right\vert
\gcd\left(  a_{1},a_{2},\ldots,a_{j-1}\right)  .
\label{sol.ent.gcd.sak.1.pf.2}%
\end{equation}
But $\gcd\left(  a_{1},a_{2},\ldots,a_{j-1}\right)  $ is a nonnegative integer
(by the definition of $\gcd\left(  a_{1},a_{2},\ldots,a_{j-1}\right)  $). The
equality (\ref{eq.ent.div.abs(xy)}) (applied to $x=s$ and $y=\gcd\left(
a_{1},a_{2},\ldots,a_{j-1}\right)  $) yields%
\begin{align}
\left\vert s\gcd\left(  a_{1},a_{2},\ldots,a_{j-1}\right)  \right\vert  &
=\left\vert s\right\vert \cdot\underbrace{\left\vert \gcd\left(  a_{1}%
,a_{2},\ldots,a_{j-1}\right)  \right\vert }_{\substack{=\gcd\left(
a_{1},a_{2},\ldots,a_{j-1}\right)  \\\text{(since }\gcd\left(  a_{1}%
,a_{2},\ldots,a_{j-1}\right)  \text{ is nonnegative)}}}=\left\vert
s\right\vert \gcd\left(  a_{1},a_{2},\ldots,a_{j-1}\right) \nonumber\\
&  =\gcd\left(  sa_{1},sa_{2},\ldots,sa_{j-1}\right)
\ \ \ \ \ \ \ \ \ \ \left(  \text{by (\ref{sol.ent.gcd.sak.1.pf.2})}\right)  .
\label{sol.ent.gcd.sak.1.pf.3}%
\end{align}


Theorem \ref{thm.ent.gcd.uniprop-mul} \textbf{(d)} (applied to $j$ and $a_{i}$
instead of $k$ and $b_{i}$) yields
\begin{equation}
\gcd\left(  a_{1},a_{2},\ldots,a_{j}\right)  =\gcd\left(  \gcd\left(
a_{1},a_{2},\ldots,a_{j-1}\right)  ,a_{j}\right)  .
\label{sol.ent.gcd.sak.1.pf.5}%
\end{equation}
Theorem \ref{thm.ent.gcd.uniprop-mul} \textbf{(d)} (applied to $j$ and
$sa_{i}$ instead of $k$ and $b_{i}$) yields
\begin{align*}
&  \gcd\left(  sa_{1},sa_{2},\ldots,sa_{j}\right) \\
&  =\gcd\left(  \underbrace{\gcd\left(  sa_{1},sa_{2},\ldots,sa_{j-1}\right)
}_{\substack{=\left\vert s\gcd\left(  a_{1},a_{2},\ldots,a_{j-1}\right)
\right\vert \\\text{(by (\ref{sol.ent.gcd.sak.1.pf.3}))}}},sa_{j}\right) \\
&  =\gcd\left(  \left\vert s\gcd\left(  a_{1},a_{2},\ldots,a_{j-1}\right)
\right\vert ,sa_{j}\right) \\
&  =\gcd\left(  s\gcd\left(  a_{1},a_{2},\ldots,a_{j-1}\right)  ,sa_{j}\right)
\\
&  \ \ \ \ \ \ \ \ \ \ \left(  \text{by Exercise \ref{exe.ent.gcd.abs}
\textbf{(b)}, applied to }s\gcd\left(  a_{1},a_{2},\ldots,a_{j-1}\right)
\text{ and }sa_{j}\text{ instead of }a\text{ and }b\right) \\
&  =\left\vert s\right\vert \underbrace{\gcd\left(  \gcd\left(  a_{1}%
,a_{2},\ldots,a_{j-1}\right)  ,a_{j}\right)  }_{\substack{=\gcd\left(
a_{1},a_{2},\ldots,a_{j}\right)  \\\text{(by (\ref{sol.ent.gcd.sak.1.pf.5}))}%
}}\\
&  \ \ \ \ \ \ \ \ \ \ \left(  \text{by Corollary \ref{cor.ent.gcd.sa,sb},
applied to }\gcd\left(  a_{1},a_{2},\ldots,a_{j-1}\right)  \text{ and }%
a_{j}\text{ instead of }a\text{ and }b\right) \\
&  =\left\vert s\right\vert \gcd\left(  a_{1},a_{2},\ldots,a_{j}\right)  .
\end{align*}
In other words, (\ref{sol.ent.gcd.sak.1}) holds for $i=j$. This completes the
induction step. Thus, (\ref{sol.ent.gcd.sak.1}) is proven.]

Now, (\ref{sol.ent.gcd.sak.1}) (applied to $i=k$) yields $\gcd\left(
sa_{1},sa_{2},\ldots,sa_{k}\right)  =\left\vert s\right\vert \gcd\left(
a_{1},a_{2},\ldots,a_{k}\right)  $. This solves Exercise \ref{exe.ent.gcd.sak}.
\end{proof}
\end{fineprint}

\subsection{Solution to Exercise \ref{exe.ent.coprime.ab-to-ck}}

\begin{fineprint}
\begin{proof}
[Solution to Exercise \ref{exe.ent.coprime.ab-to-ck}.]Let us prove that%
\begin{equation}
a_{1}a_{2}\cdots a_{i}\perp c\ \ \ \ \ \ \ \ \ \ \text{for each }i\in\left\{
0,1,\ldots,k\right\}  . \label{sol.ent.coprime.ab-to-ck.goal}%
\end{equation}


\textit{Proof of (\ref{sol.ent.coprime.ab-to-ck.goal}):} We shall prove
(\ref{sol.ent.coprime.ab-to-ck.goal}) by induction on $i$:

\textit{Induction base:} Proposition \ref{prop.ent.gcd.props1} \textbf{(f)}
(applied to $a=1$ and $b=c$) yields $\gcd\left(  1,c\right)  \mid1$ and thus
$\gcd\left(  1,c\right)  =1$ (by Exercise \ref{exe.ent.div.g|1}, since
$\gcd\left(  1,c\right)  $ is a nonnegative integer). In other words, $1$ is
coprime to $c$. In other words, $1\perp c$. Now, $a_{1}a_{2}\cdots
a_{0}=\left(  \text{empty product}\right)  =1\perp c$. Hence,
(\ref{sol.ent.coprime.ab-to-ck.goal}) holds for $i=0$. This completes the
induction base.

\textit{Induction step:} Let $j\in\left\{  1,2,\ldots,k\right\}  $. Assume
that (\ref{sol.ent.coprime.ab-to-ck.goal}) holds for $i=j-1$. We must now
prove that (\ref{sol.ent.coprime.ab-to-ck.goal}) holds for $i=j$.

We have assumed that (\ref{sol.ent.coprime.ab-to-ck.goal}) holds for $i=j-1$.
In other words, $a_{1}a_{2}\cdots a_{j-1}\perp c$.

We have assumed that each $i\in\left\{  1,2,\ldots,k\right\}  $ satisfies
$a_{i}\perp c$. Applying this to $i=j$, we find $a_{j}\perp c$.

Now we know that $a_{1}a_{2}\cdots a_{j-1}\perp c$ and $a_{j}\perp c$. Hence,
Theorem \ref{thm.ent.coprime.ab-to-c} (applied to $a=a_{1}a_{2}\cdots a_{j-1}$
and $b=a_{j}$) yields $\left(  a_{1}a_{2}\cdots a_{j-1}\right)  a_{j}\perp c$.
In other words, $a_{1}a_{2}\cdots a_{j}\perp c$ (since $a_{1}a_{2}\cdots
a_{j}=\left(  a_{1}a_{2}\cdots a_{j-1}\right)  a_{j}$). In other words,
(\ref{sol.ent.coprime.ab-to-ck.goal}) holds for $i=j$. This completes the
induction step. Thus, (\ref{sol.ent.coprime.ab-to-ck.goal}) is proven by induction.

Now, we can apply (\ref{sol.ent.coprime.ab-to-ck.goal}) to $i=k$. We thus
obtain $a_{1}a_{2}\cdots a_{k}\perp c$. This proves Exercise
\ref{exe.ent.coprime.ab-to-ck}.
\end{proof}
\end{fineprint}

\subsection{Solution to Exercise \ref{exe.ent.coprime.combinek}}

\begin{fineprint}
\begin{proof}
[Solution to Exercise \ref{exe.ent.coprime.combinek}.]We assumed that the
integers $b_{1},b_{2},\ldots,b_{k}$ are mutually coprime. In other words, we
have%
\begin{equation}
b_{i}\perp b_{j}\text{ for all }i,j\in\left\{  1,2,\ldots,k\right\}  \text{
satisfying }i\neq j. \label{sol.ent.coprime.combinek.copr}%
\end{equation}


Let us prove that%
\begin{equation}
b_{1}b_{2}\cdots b_{i}\mid c\ \ \ \ \ \ \ \ \ \ \text{for each }i\in\left\{
0,1,\ldots,k\right\}  . \label{sol.ent.coprime.combinek.goal}%
\end{equation}


\textit{Proof of (\ref{sol.ent.coprime.combinek.goal}):} We shall prove
(\ref{sol.ent.coprime.combinek.goal}) by induction on $i$:

\textit{Induction base:} We have $b_{1}b_{2}\cdots b_{0}=\left(  \text{empty
product}\right)  =1\mid c$. Hence, (\ref{sol.ent.coprime.combinek.goal}) holds
for $i=0$. This completes the induction base.

\textit{Induction step:} Let $j\in\left\{  1,2,\ldots,k\right\}  $. Assume
that (\ref{sol.ent.coprime.combinek.goal}) holds for $i=j-1$. We must now
prove that (\ref{sol.ent.coprime.combinek.goal}) holds for $i=j$.

We have assumed that (\ref{sol.ent.coprime.combinek.goal}) holds for $i=j-1$.
In other words, $b_{1}b_{2}\cdots b_{j-1}\mid c$.

We have assumed that each $i\in\left\{  1,2,\ldots,k\right\}  $ satisfies
$b_{i}\mid c$. Applying this to $i=j$, we find $b_{j}\mid c$.

For each $i\in\left\{  1,2,\ldots,j-1\right\}  $, we have $i\leq j-1<j$ and
thus $i\neq j$ and therefore $b_{i}\perp b_{j}$ (by
(\ref{sol.ent.coprime.combinek.copr})). Hence, Exercise
\ref{exe.ent.coprime.combinek} (applied to $j-1$, $b_{j}$ and $\left(
b_{1},b_{2},\ldots,b_{j-1}\right)  $ instead of $k$, $c$ and $\left(
a_{1},a_{2},\ldots,a_{k}\right)  $) yields $b_{1}b_{2}\cdots b_{j-1}\perp
b_{j}$.

Now we know that $b_{1}b_{2}\cdots b_{j-1}\mid c$ and $b_{j}\mid c$ and
$b_{1}b_{2}\cdots b_{j-1}\perp b_{j}$. Hence, Theorem
\ref{thm.ent.coprime.combine} (applied to $a=b_{1}b_{2}\cdots b_{j-1}$ and
$b=b_{j}$) yields $\left(  b_{1}b_{2}\cdots b_{j-1}\right)  b_{j}\mid c$. In
other words, $b_{1}b_{2}\cdots b_{j}\mid c$ (since $b_{1}b_{2}\cdots
b_{j}=\left(  b_{1}b_{2}\cdots b_{j-1}\right)  b_{j}$). In other words,
(\ref{sol.ent.coprime.combinek.goal}) holds for $i=j$. This completes the
induction step. Thus, (\ref{sol.ent.coprime.combinek.goal}) is proven by induction.

Now, we can apply (\ref{sol.ent.coprime.combinek.goal}) to $i=k$. We thus
obtain $b_{1}b_{2}\cdots b_{k}\mid c$. This proves Exercise
\ref{exe.ent.coprime.combinek}.
\end{proof}
\end{fineprint}

\subsection{Solution to Exercise \ref{exe.ent.coprime.powers}}

\begin{fineprint}
\begin{proof}
[Solution to Exercise \ref{exe.ent.coprime.powers}.]We have $a\perp b$. Thus,
Exercise \ref{exe.ent.coprime.combinek} (applied to $n$, $b$ and $\left(
\underbrace{a,a,\ldots,a}_{n\text{ times}}\right)  $ instead of $k$, $c$ and
$\left(  a_{1},a_{2},\ldots,a_{k}\right)  $) yields that $\underbrace{aa\cdots
a}_{n\text{ times}}\perp b$. In other words, $a^{n}\perp b$.

According to Proposition \ref{prop.ent.coprime.perp-symm} (applied to $a^{n}$
instead of $a$), we have $a^{n}\perp b$ if and only if $b\perp a^{n}$. Thus,
$b\perp a^{n}$ (since $a^{n}\perp b$). Hence, Exercise
\ref{exe.ent.coprime.combinek} (applied to $m$, $a^{n}$ and $\left(
\underbrace{b,b,\ldots,b}_{m\text{ times}}\right)  $ instead of $k$, $c$ and
$\left(  a_{1},a_{2},\ldots,a_{k}\right)  $) yields that $\underbrace{bb\cdots
b}_{m\text{ times}}\perp a^{n}$. In other words, $b^{m}\perp a^{n}$.

According to Proposition \ref{prop.ent.coprime.perp-symm} (applied to $a^{n}$
and $b^{m}$ instead of $a$ and $b$), we have $a^{n}\perp b^{m}$ if and only if
$b^{m}\perp a^{n}$. Hence, $a^{n}\perp b^{m}$ (since $b^{m}\perp a^{n}$). This
solves Exercise \ref{exe.ent.coprime.powers}.
\end{proof}
\end{fineprint}

\subsection{Solution to Exercise \ref{exe.ent.coprime.ab-to-cI}}

\begin{fineprint}
\begin{proof}
[Solution to Exercise \ref{exe.ent.coprime.ab-to-cI}.]Exercise
\ref{exe.ent.coprime.ab-to-ck} and Exercise \ref{exe.ent.coprime.ab-to-cI} say
the same thing: They say that if $c$ is a fixed integer, then a product of
finitely many integers that are coprime to $c$ will also be coprime to $c$.
The difference between these two exercises is merely how the product is
indexed. Thus, deriving Exercise \ref{exe.ent.coprime.ab-to-cI} from Exercise
\ref{exe.ent.coprime.ab-to-ck} is merely a matter of bookkeeping. Let us do
this bookkeeping:

By assumption, we have
\begin{equation}
b_{i}\perp c\ \ \ \ \ \ \ \ \ \ \text{for each }i\in I.
\label{sol.ent.coprime.ab-to-cI.copri}%
\end{equation}


The set $I$ is finite; thus, we can define some $k\in\mathbb{N}$ by
$k=\left\vert I\right\vert $. There exists a bijection $f:\left\{
1,2,\ldots,k\right\}  \rightarrow I$ (since $k=\left\vert I\right\vert $).
Pick such an $f$. Thus, $f\left(  1\right)  ,f\left(  2\right)  ,\ldots
,f\left(  k\right)  $ are the $k$ elements of $I$; hence, $b_{f\left(
1\right)  },b_{f\left(  2\right)  },\ldots,b_{f\left(  k\right)  }$ are $k$
integers. Moreover, each $j\in\left\{  1,2,\ldots,k\right\}  $ satisfies
$b_{f\left(  j\right)  }\perp c$ (by (\ref{sol.ent.coprime.ab-to-cI.copri}),
applied to $i=f\left(  j\right)  $). Renaming the index $j$ as $i$ in this
statement, we obtain: Each $i\in\left\{  1,2,\ldots,k\right\}  $ satisfies
$b_{f\left(  i\right)  }\perp c$. Hence, Exercise
\ref{exe.ent.coprime.ab-to-ck} (applied to $a_{i}=b_{f\left(  i\right)  }$)
shows that
\begin{equation}
b_{f\left(  1\right)  }b_{f\left(  2\right)  }\cdots b_{f\left(  k\right)
}\perp c. \label{sol.ent.coprime.ab-to-cI.copri3}%
\end{equation}


The map $f:\left\{  1,2,\ldots,k\right\}  \rightarrow I$ is a bijection.
Hence, we can substitute $f\left(  j\right)  $ for $i$ in the product
$\prod_{i\in I}b_{i}$. We thus find%
\[
\prod_{i\in I}b_{i}=\prod_{j\in\left\{  1,2,\ldots,k\right\}  }b_{f\left(
j\right)  }=\prod_{j=1}^{k}b_{f\left(  j\right)  }=b_{f\left(  1\right)
}b_{f\left(  2\right)  }\cdots b_{f\left(  k\right)  }.
\]
Thus, (\ref{sol.ent.coprime.ab-to-cI.copri3}) can be rewritten as $\prod_{i\in
I}b_{i}\perp c$. This solves Exercise \ref{exe.ent.coprime.ab-to-cI}.
\end{proof}
\end{fineprint}

\subsection{Solution to Exercise \ref{exe.ent.coprime.b==c}}

\begin{fineprint}
\begin{proof}
[Solution to Exercise \ref{exe.ent.coprime.b==c}.]Assume that $a\perp c$. But
Proposition \ref{prop.ent.coprime.perp-symm} (applied to $c$ instead of $b$)
shows that $a\perp c$ if and only if $c\perp a$. Thus, we have $c\perp a$
(since $a\perp c$). In other words, $c$ is coprime to $a$. In other words,
$\gcd\left(  c,a\right)  =1$ (by the definition of \textquotedblleft
coprime\textquotedblright).

But $a\equiv b\operatorname{mod}c$. Hence, Proposition
\ref{prop.ent.gcd.props1} \textbf{(e)} (applied to $c$, $a$ and $b$ instead of
$a$, $b$ and $c$) yields $\gcd\left(  c,a\right)  =\gcd\left(  c,b\right)  $.
Hence, $\gcd\left(  c,b\right)  =\gcd\left(  c,a\right)  =1$. In other words,
$c$ is coprime to $b$. In other words, $c\perp b$. But Proposition
\ref{prop.ent.coprime.perp-symm} (applied to $c$ instead of $a$) shows that
$c\perp b$ if and only if $b\perp c$. Hence, $b\perp c$ (since $c\perp b$).
This solves Exercise \ref{exe.ent.coprime.b==c}.
\end{proof}
\end{fineprint}

\subsection{Solution to Exercise \ref{exe.ent.coprime.1+2+...+n}}

\begin{fineprint}
\begin{proof}
[Solution to Exercise \ref{exe.ent.coprime.1+2+...+n}.]Proposition
\ref{prop.ent.1+2+...+n} yields $1+2+\cdots+n=\dfrac{n\left(  n+1\right)  }%
{2}$. Thus, we need to prove that%
\[
\dfrac{n\left(  n+1\right)  }{2}\mid1^{d}+2^{d}+\cdots+n^{d}.
\]
This is equivalent to%
\begin{equation}
n\left(  n+1\right)  \mid2\left(  1^{d}+2^{d}+\cdots+n^{d}\right)
\label{sol.ent.coprime.1+2+...+n.g}%
\end{equation}
(by Exercise \ref{exe.ent.div.acbc}, applied to $a=\dfrac{n\left(  n+1\right)
}{2}$, $b=1^{d}+2^{d}+\cdots+n^{d}$ and $c=2$). Hence, it suffices to prove
(\ref{sol.ent.coprime.1+2+...+n.g}).

In order to prove (\ref{sol.ent.coprime.1+2+...+n.g}), it suffices to show
that%
\begin{align}
n  &  \mid2\left(  1^{d}+2^{d}+\cdots+n^{d}\right)
\ \ \ \ \ \ \ \ \ \ \text{and}\label{sol.ent.coprime.1+2+...+n.g1}\\
n+1  &  \mid2\left(  1^{d}+2^{d}+\cdots+n^{d}\right)  .
\label{sol.ent.coprime.1+2+...+n.g2}%
\end{align}
Indeed, the integers $n$ and $n+1$ are coprime (by Example
\ref{exa.ent.coprime.1} \textbf{(c)}, applied to $a=n$); in other words,
$n\perp n+1$. Hence, if we can prove (\ref{sol.ent.coprime.1+2+...+n.g1}) and
(\ref{sol.ent.coprime.1+2+...+n.g2}), then Theorem
\ref{thm.ent.coprime.combine} (applied to $a=n$, $b=n+1$ and $c=2\left(
1^{d}+2^{d}+\cdots+n^{d}\right)  $) will yield $n\left(  n+1\right)
\mid2\left(  1^{d}+2^{d}+\cdots+n^{d}\right)  $; this will prove
(\ref{sol.ent.coprime.1+2+...+n.g}) and therefore complete our solution.

We shall prove (\ref{sol.ent.coprime.1+2+...+n.g2}) first:

\textit{Proof of (\ref{sol.ent.coprime.1+2+...+n.g2}):} We have%
\begin{align}
2\left(  1^{d}+2^{d}+\cdots+n^{d}\right)   &  =\left(  1^{d}+2^{d}%
+\cdots+n^{d}\right)  +\left(  1^{d}+2^{d}+\cdots+n^{d}\right) \nonumber\\
&  =\left(  1^{d}+2^{d}+\cdots+n^{d}\right)  +\left(  n^{d}+\left(
n-1\right)  ^{d}+\cdots+1^{d}\right) \nonumber\\
&  =\sum_{k=1}^{n}k^{d}+\sum_{k=1}^{n}\left(  n+1-k\right)  ^{d}\nonumber\\
&  =\sum_{k=1}^{n}\left(  k^{d}+\left(  n+1-k\right)  ^{d}\right)  .
\label{sol.ent.coprime.1+2+...+n.5}%
\end{align}


But if $k\in\mathbb{Z}$, then Lemma \ref{lem.ent.xd-yd} \textbf{(b)} (applied
to $x=k$ and $y=n+1-k$) shows that $k^{d}+\left(  n+1-k\right)  ^{d}$ is
divisible by $k+\left(  n+1-k\right)  =n+1$. Hence, each addend in the sum on
the right hand side of (\ref{sol.ent.coprime.1+2+...+n.5}) is divisible by
$n+1$. Therefore, the whole sum is divisible by $n+1$ as well. Thus, the left
hand side is divisible by $n+1$, too. In other words, $n+1\mid2\left(
1^{d}+2^{d}+\cdots+n^{d}\right)  $. Thus, (\ref{sol.ent.coprime.1+2+...+n.g2})
is proven.

\textit{Proof of} \textit{(\ref{sol.ent.coprime.1+2+...+n.g1}):} If $n=0$,
then (\ref{sol.ent.coprime.1+2+...+n.g1}) boils down to $0\mid2\cdot0$ (since
empty sums are $0$); this is obvious. Thus, for the rest of this proof, we
WLOG assume that $n\neq0$. Hence, $n$ is a positive integer, and thus
$n-1\in\mathbb{N}$. Therefore, we can apply
(\ref{sol.ent.coprime.1+2+...+n.g2}) to $n-1$ instead of $n$ (since we have
already proven (\ref{sol.ent.coprime.1+2+...+n.g2}) for each $n\in\mathbb{N}%
$). We thus obtain%
\[
n\mid2\left(  1^{d}+2^{d}+\cdots+\left(  n-1\right)  ^{d}\right)  .
\]
In other words, $2\left(  1^{d}+2^{d}+\cdots+\left(  n-1\right)  ^{d}\right)
\equiv0\operatorname{mod}n$. Now,%
\begin{align*}
&  2\left(  1^{d}+2^{d}+\cdots+n^{d}\right)  -2\left(  1^{d}+2^{d}%
+\cdots+\left(  n-1\right)  ^{d}\right) \\
&  =2\cdot\underbrace{\left(  \left(  1^{d}+2^{d}+\cdots+n^{d}\right)
-\left(  1^{d}+2^{d}+\cdots+\left(  n-1\right)  ^{d}\right)  \right)
}_{=n^{d}}\\
&  =2n^{d}=n\cdot2n^{d-1}\ \ \ \ \ \ \ \ \ \ \left(  \text{since }d\geq1\text{
(because }d\text{ is odd)}\right)
\end{align*}
is clearly divisible by $n$. In other words,%
\[
2\left(  1^{d}+2^{d}+\cdots+n^{d}\right)  \equiv2\left(  1^{d}+2^{d}%
+\cdots+\left(  n-1\right)  ^{d}\right)  \operatorname{mod}n.
\]
Hence,
\[
2\left(  1^{d}+2^{d}+\cdots+n^{d}\right)  \equiv2\left(  1^{d}+2^{d}%
+\cdots+\left(  n-1\right)  ^{d}\right)  \equiv0\operatorname{mod}n.
\]
That is, $n\mid2\left(  1^{d}+2^{d}+\cdots+n^{d}\right)  $. This proves
(\ref{sol.ent.coprime.1+2+...+n.g1}).

We have now proven both (\ref{sol.ent.coprime.1+2+...+n.g1}) and
(\ref{sol.ent.coprime.1+2+...+n.g2}). As we have explained, this yields
(\ref{sol.ent.coprime.1+2+...+n.g}), which in turn solves Exercise
\ref{exe.ent.coprime.1+2+...+n}.
\end{proof}
\end{fineprint}

\subsection{Solution to Exercise \ref{exe.ent.coprime.bezout-conv}}

\begin{fineprint}
\begin{proof}
[Solution to Exercise \ref{exe.ent.coprime.bezout-conv}.]Proposition
\ref{prop.ent.gcd.bezout-conv} yields $\gcd\left(  a,b\right)  \mid xa+yb=1$.
But $\gcd\left(  a,b\right)  $ is a nonnegative integer. Hence, Exercise
\ref{exe.ent.div.g|1} (applied to $g=\gcd\left(  a,b\right)  $) yields
$\gcd\left(  a,b\right)  =1$ (since $\gcd\left(  a,b\right)  \mid1$). In other
words, $a$ is coprime to $b$. In other words, $a\perp b$. This solves Exercise
\ref{exe.ent.coprime.bezout-conv}.
\end{proof}
\end{fineprint}

\subsection{Solution to Exercise \ref{exe.ent.coprime.gcdgcd1}}

\begin{fineprint}
\begin{proof}
[Solution to Exercise \ref{exe.ent.coprime.gcdgcd1}.]Let $g=\gcd\left(
x,y\right)  $. Then, $g$ is a nonnegative integer (since any gcd is a
nonnegative integer); thus, $\left\vert g\right\vert =g$.

Theorem \ref{thm.ent.gcd.split} (applied to $2$, $\left(  ux,uy\right)  $, $2$
and $\left(  vx,vy\right)  $ instead of $k$, $\left(  b_{1},b_{2},\ldots
,b_{k}\right)  $, $\ell$ and $\left(  c_{1},c_{2},\ldots,c_{\ell}\right)  $)
yields
\begin{equation}
\gcd\left(  ux,uy,vx,vy\right)  =\gcd\left(  \gcd\left(  ux,uy\right)
,\gcd\left(  vx,vy\right)  \right)  . \label{sol.ent.coprime.gcdgcd1.3}%
\end{equation}


Corollary \ref{cor.ent.gcd.sa,sb} (applied to $s=u$, $a=x$ and $b=y$) yields%
\[
\gcd\left(  ux,uy\right)  =\left\vert u\right\vert \underbrace{\gcd\left(
x,y\right)  }_{=g}=\left\vert u\right\vert g=g\left\vert u\right\vert .
\]
The same argument (applied to $v$ instead of $u$) yields%
\[
\gcd\left(  vx,vy\right)  =g\left\vert v\right\vert .
\]
Now, (\ref{sol.ent.coprime.gcdgcd1.3}) becomes%
\begin{align*}
\gcd\left(  ux,uy,vx,vy\right)   &  =\gcd\left(  \underbrace{\gcd\left(
ux,uy\right)  }_{=g\left\vert u\right\vert },\underbrace{\gcd\left(
vx,vy\right)  }_{=g\left\vert v\right\vert }\right)  =\gcd\left(  g\left\vert
u\right\vert ,g\left\vert v\right\vert \right) \\
&  =\underbrace{\left\vert g\right\vert }_{\substack{=g\\=\gcd\left(
x,y\right)  }}\underbrace{\gcd\left(  \left\vert u\right\vert ,\left\vert
v\right\vert \right)  }_{\substack{=\gcd\left(  u,v\right)  \\\text{(by
Exercise \ref{exe.ent.gcd.abs} \textbf{(c)},}\\\text{applied to }a=u\text{ and
}b=v\text{)}}}\\
&  \ \ \ \ \ \ \ \ \ \ \left(  \text{by Corollary \ref{cor.ent.gcd.sa,sb},
applied to }s=g\text{, }a=\left\vert u\right\vert \text{ and }b=\left\vert
v\right\vert \right) \\
&  =\gcd\left(  x,y\right)  \cdot\gcd\left(  u,v\right)  =\gcd\left(
u,v\right)  \cdot\gcd\left(  x,y\right)  .
\end{align*}
This solves Exercise \ref{exe.ent.coprime.gcdgcd1}.
\end{proof}
\end{fineprint}

\subsection{Solution to Exercise \ref{exe.ent.coprime.gcdgcd2}}

\begin{proof}
[Solution to Exercise \ref{exe.ent.coprime.gcdgcd2}.]\textbf{(a)} Let
$g=\gcd\left(  a,b,c\right)  $. Then, $g=\gcd\left(  a,b,c\right)  \geq0$
(since any gcd is a nonnegative integer) and thus $\left\vert g\right\vert
=g$. But Exercise \ref{exe.ent.gcd.sa,sb,sc} (applied to $s=a$) yields%
\begin{equation}
\gcd\left(  aa,ab,ac\right)  =\left\vert a\right\vert \underbrace{\gcd\left(
a,b,c\right)  }_{=g=\left\vert g\right\vert }=\left\vert a\right\vert
\cdot\left\vert g\right\vert =\left\vert ag\right\vert
\label{sol.ent.coprime.gcdgcd2.a.1}%
\end{equation}
(since (\ref{eq.ent.div.abs(xy)}) yields $\left\vert ag\right\vert =\left\vert
a\right\vert \cdot\left\vert g\right\vert $).

Exercise \ref{exe.ent.coprime.gcdgcd1} (applied to $u=a$, $v=c$, $x=a$ and
$y=b$) yields%
\begin{align*}
&  \gcd\left(  a,c\right)  \cdot\gcd\left(  a,b\right) \\
&  =\gcd\left(  aa,ab,\underbrace{ca}_{=ac},\underbrace{cb}_{=bc}\right)
=\gcd\left(  aa,ab,ac,bc\right) \\
&  =\gcd\left(  \underbrace{\gcd\left(  aa,ab,ac\right)  }%
_{\substack{=\left\vert ag\right\vert \\\text{(by
(\ref{sol.ent.coprime.gcdgcd2.a.1}))}}},bc\right) \\
&  \ \ \ \ \ \ \ \ \ \ \left(
\begin{array}
[c]{c}%
\text{by Theorem \ref{thm.ent.gcd.uniprop-mul} \textbf{(d)}}\\
\text{(applied to }4\text{ and }\left(  aa,ab,ac,bc\right)  \text{ instead of
}k\text{ and }\left(  b_{1},b_{2},\ldots,b_{k}\right)  \text{)}%
\end{array}
\right) \\
&  =\gcd\left(  \left\vert ag\right\vert ,bc\right)  =\gcd\left(
ag,bc\right)
\end{align*}
(by Exercise \ref{exe.ent.gcd.abs} \textbf{(b)}, applied to $ag$ and $bc$
instead of $a$ and $b$). In other words, $\gcd\left(  a,b\right)  \cdot
\gcd\left(  a,c\right)  =\gcd\left(  ag,bc\right)  $. This solves Exercise
\ref{exe.ent.coprime.gcdgcd2} \textbf{(a)}.

\textbf{(b)} Assume that $b\perp c$. Thus, $\gcd\left(  b,c\right)  =1$.

Let $g=\gcd\left(  a,b,c\right)  $. Theorem \ref{thm.ent.gcd.split} (applied
to $1$, $\left(  a\right)  $, $2$ and $\left(  b,c\right)  $ instead of $k$,
$\left(  b_{1},b_{2},\ldots,b_{k}\right)  $, $\ell$ and $\left(  c_{1}%
,c_{2},\ldots,c_{\ell}\right)  $) yields%
\[
\gcd\left(  a,b,c\right)  =\gcd\left(  \gcd\left(  a\right)  ,\underbrace{\gcd
\left(  b,c\right)  }_{=1}\right)  =\gcd\left(  \gcd\left(  a\right)
,1\right)  \mid1
\]
(by Proposition \ref{prop.ent.gcd.props1} \textbf{(f)}, applied to
$\gcd\left(  a\right)  $ and $1$ instead of $a$ and $b$). This rewrites as
$g\mid1$.

But $g=\gcd\left(  a,b,c\right)  $ is a nonnegative integer (since any gcd is
a nonnegative integer). Hence, Exercise \ref{exe.ent.div.g|1} yields $g=1$
(since $g\mid1$). Now, Exercise \ref{exe.ent.coprime.gcdgcd2} \textbf{(a)}
yields
\[
\gcd\left(  a,b\right)  \cdot\gcd\left(  a,c\right)  =\gcd\left(
a\underbrace{g}_{=1},bc\right)  =\gcd\left(  a,bc\right)  .
\]
This solves Exercise \ref{exe.ent.coprime.gcdgcd2} \textbf{(b)}.
\end{proof}

\subsection{Solution to Exercise \ref{exe.ent.coprime.a/g}}

\begin{fineprint}
\begin{proof}
[Solution to Exercise \ref{exe.ent.coprime.a/g}.]We have assumed that $a$ and
$b$ are not both zero. In other words, the two integers $a,b$ are not all
zero. Hence, Definition \ref{def.ent.gcd.gcd} shows that $\gcd\left(
a,b\right)  $ is defined as the largest element of the set
$\operatorname*{Div}\left(  a,b\right)  $ and is a positive integer.

Now, $g=\gcd\left(  a,b\right)  $. Hence, $g$ is a positive integer (since
$\gcd\left(  a,b\right)  $ is a positive integer). Thus, $\left\vert
g\right\vert =g$. Also, $g\neq0$ (since $g$ is positive).

Proposition \ref{prop.ent.gcd.props1} \textbf{(f)} yields $\gcd\left(
a,b\right)  \mid a$ and $\gcd\left(  a,b\right)  \mid b$. Hence,
$g=\gcd\left(  a,b\right)  \mid a$. But Proposition \ref{prop.ent.div.1}
\textbf{(c)} (applied to $g$ and $a$ instead of $a$ and $b$) shows that $g\mid
a$ if and only if $\dfrac{a}{g}\in\mathbb{Z}$. Hence, we have $\dfrac{a}{g}%
\in\mathbb{Z}$ (since $g\mid a$). Similarly, $\dfrac{b}{g}\in\mathbb{Z}$.
Thus, $\dfrac{a}{g}$ and $\dfrac{b}{g}$ are integers.

It remains to prove that $\dfrac{a}{g}\perp\dfrac{b}{g}$. But Corollary
\ref{cor.ent.gcd.sa,sb} (applied to $g$, $\dfrac{a}{g}$ and $\dfrac{b}{g}$
instead of $s$, $a$ and $b$) shows that%
\[
\gcd\left(  g\cdot\dfrac{a}{g},g\cdot\dfrac{b}{g}\right)
=\underbrace{\left\vert g\right\vert }_{=g}\gcd\left(  \dfrac{a}{g},\dfrac
{b}{g}\right)  =g\gcd\left(  \dfrac{a}{g},\dfrac{b}{g}\right)  .
\]
Comparing this with%
\[
\gcd\left(  \underbrace{g\cdot\dfrac{a}{g}}_{=a},\underbrace{g\cdot\dfrac
{b}{g}}_{=b}\right)  =\gcd\left(  a,b\right)  =g,
\]
we obtain $g\gcd\left(  \dfrac{a}{g},\dfrac{b}{g}\right)  =g$. We can cancel
$g$ from this equality (since $g\neq0$), and thus obtain $\gcd\left(
\dfrac{a}{g},\dfrac{b}{g}\right)  =1$. In other words, $\dfrac{a}{g}%
\perp\dfrac{b}{g}$. Thus, the solution of Exercise \ref{exe.ent.coprime.a/g}
is finished.
\end{proof}
\end{fineprint}

\subsection{Solution to Exercise \ref{exe.ent.gcd.akbk}}

\begin{fineprint}
\begin{proof}
[Solution to Exercise \ref{exe.ent.gcd.akbk}.]If $k=0$, then Exercise
\ref{exe.ent.gcd.akbk} holds\footnote{\textit{Proof.} Assume that $k=0$. Thus,
$\left(  \gcd\left(  a,b\right)  \right)  ^{k}=\left(  \gcd\left(  a,b\right)
\right)  ^{0}=1$.
\par
But $1\mid1$. Thus, Proposition \ref{prop.ent.gcd.props1} \textbf{(i)}
(applied to $1$ and $1$ instead of $a$ and $b$) yields $\gcd\left(
1,1\right)  =\left\vert 1\right\vert =1$. From $k=0$, we obtain $\gcd\left(
a^{k},b^{k}\right)  =\gcd\left(  \underbrace{a^{0}}_{=1},\underbrace{b^{0}%
}_{=1}\right)  =\gcd\left(  1,1\right)  =1$. Comparing this with $\left(
\gcd\left(  a,b\right)  \right)  ^{k}=1$, we obtain $\gcd\left(  a^{k}%
,b^{k}\right)  =\left(  \gcd\left(  a,b\right)  \right)  ^{k}$. Hence,
Exercise \ref{exe.ent.gcd.akbk} holds (under the assumption that $k=0$).}.
Hence, for the rest of this solution, we WLOG assume that $k\neq0$. Thus, $k$
is a positive integer (since $k\in\mathbb{N}$); therefore, $0^{k}=0$.

If the integers $a$ and $b$ are both zero, then Exercise
\ref{exe.ent.gcd.akbk} holds\footnote{\textit{Proof.} Assume that $a$ and $b$
are both zero. In other words, $a=0$ and $b=0$. Thus,
\[
\gcd\left(  a^{k},b^{k}\right)  =\gcd\left(  \underbrace{0^{k}}_{=0}%
,\underbrace{0^{k}}_{=0}\right)  =\gcd\left(  0,0\right)  =\left\vert
0\right\vert
\]
(by Proposition \ref{prop.ent.gcd.props1} \textbf{(i)}, applied to $0$ and $0$
instead of $a$ and $b$). Thus, $\gcd\left(  a^{k},b^{k}\right)  =\left\vert
0\right\vert =0$.
\par
But the integers $a,b$ are all zero (since $a=0$ and $b=0$). Thus, the
definition of gcd yields $\gcd\left(  a,b\right)  =0$. Hence, $\left(
\gcd\left(  a,b\right)  \right)  ^{k}=0^{k}=0$. Comparing this with
$\gcd\left(  a^{k},b^{k}\right)  =0$, we obtain $\gcd\left(  a^{k}%
,b^{k}\right)  =\left(  \gcd\left(  a,b\right)  \right)  ^{k}$. Hence,
Exercise \ref{exe.ent.gcd.akbk} holds (under the assumption that $a$ and $b$
are both zero).}. Thus, for the rest of this solution, we WLOG assume that $a$
and $b$ are not both zero. Let $g=\gcd\left(  a,b\right)  $. Then, $g\geq0$
(since any gcd is nonnegative) and therefore $g^{k}\geq0$. But Exercise
\ref{exe.ent.coprime.a/g} yields that $\dfrac{a}{g}$ and $\dfrac{b}{g}$ are
integers satisfying $\dfrac{a}{g}\perp\dfrac{b}{g}$. Therefore, Exercise
\ref{exe.ent.coprime.powers} (applied to $\dfrac{a}{g}$, $\dfrac{b}{g}$, $k$
and $k$ instead of $a$, $b$, $n$ and $m$) yields $\left(  \dfrac{a}{g}\right)
^{k}\perp\left(  \dfrac{b}{g}\right)  ^{k}$. In other words, $\gcd\left(
\left(  \dfrac{a}{g}\right)  ^{k},\left(  \dfrac{b}{g}\right)  ^{k}\right)
=1$.

Note that $\left(  \dfrac{a}{g}\right)  ^{k}$ and $\left(  \dfrac{b}%
{g}\right)  ^{k}$ are integers (since $\dfrac{a}{g}$ and $\dfrac{b}{g}$ are
integers). Thus, Corollary \ref{cor.ent.gcd.sa,sb} (applied to $g^{k}$,
$\left(  \dfrac{a}{g}\right)  ^{k}$ and $\left(  \dfrac{b}{g}\right)  ^{k}$
instead of $s$, $a$ and $b$) yields%
\[
\gcd\left(  g^{k}\left(  \dfrac{a}{g}\right)  ^{k},g^{k}\left(  \dfrac{b}%
{g}\right)  ^{k}\right)  =\underbrace{\left\vert g^{k}\right\vert
}_{\substack{=g^{k}\\\text{(since }g^{k}\geq0\text{)}}}\underbrace{\gcd\left(
\left(  \dfrac{a}{g}\right)  ^{k},\left(  \dfrac{b}{g}\right)  ^{k}\right)
}_{=1}=g^{k}=\left(  \gcd\left(  a,b\right)  \right)  ^{k}%
\]
(since $g=\gcd\left(  a,b\right)  $). Comparing this with%
\[
\gcd\left(  \underbrace{g^{k}\left(  \dfrac{a}{g}\right)  ^{k}}_{=a^{k}%
},\underbrace{g^{k}\left(  \dfrac{b}{g}\right)  ^{k}}_{=b^{k}}\right)
=\gcd\left(  a^{k},b^{k}\right)  ,
\]
we obtain $\gcd\left(  a^{k},b^{k}\right)  =\left(  \gcd\left(  a,b\right)
\right)  ^{k}$. This solves Exercise \ref{exe.ent.gcd.akbk}.
\end{proof}
\end{fineprint}

\subsection{Solution to Exercise \ref{exe.ent.coprime.frac-red}}

\begin{fineprint}
\begin{proof}
[Solution to Exercise \ref{exe.ent.coprime.frac-red}.]We have $r\in\mathbb{Q}%
$. In other words, $r$ is a rational number. Thus, $r$ can be written in the
form $r=x/y$ for some $x\in\mathbb{Z}$ and some nonzero $y\in\mathbb{Z}$ (by
the definition of a rational number). Consider these $x$ and $y$. The integers
$x$ and $y$ are not both zero (since $y$ is nonzero). Let $g=\gcd\left(
x,y\right)  $. Exercise \ref{exe.ent.coprime.a/g} (applied to $a=x$ and $b=y$)
yields that $\dfrac{x}{g}$ and $\dfrac{y}{g}$ are integers satisfying
$\dfrac{x}{g}\perp\dfrac{y}{g}$. These two integers $\dfrac{x}{g}$ and
$\dfrac{y}{g}$ are coprime (since $\dfrac{x}{g}\perp\dfrac{y}{g}$) and satisfy
$r=\dfrac{x}{g}/\dfrac{y}{g}$ (since $\dfrac{x}{g}/\dfrac{y}{g}=x/y=r$).
Hence, there exist two \textbf{coprime} integers $a$ and $b$ satisfying
$r=a/b$ (namely, $a=\dfrac{x}{g}$ and $b=\dfrac{y}{g}$). This solves Exercise
\ref{exe.ent.coprime.frac-red}.
\end{proof}
\end{fineprint}

\subsection{Solution to Exercise \ref{exe.ent.coprime.sqrtu+sqrtv}}

\begin{fineprint}
\begin{proof}
[Solution to Exercise \ref{exe.ent.coprime.sqrtu+sqrtv}.]\textbf{(a)} Let $u$
be a positive integer that is not a perfect square. We must prove that
$\sqrt{u}$ is irrational.

Assume the contrary. Thus, $\sqrt{u}$ is rational. In other words, $\sqrt
{u}\in\mathbb{Q}$. Hence, Exercise \ref{exe.ent.coprime.frac-red} (applied to
$r=\sqrt{u}$) yields that there exist two \textbf{coprime} integers $a$ and
$b$ satisfying $\sqrt{u}=a/b$. Consider these $a$ and $b$.

We have $a\perp b$ (since $a$ and $b$ are coprime). Thus, Exercise
\ref{exe.ent.coprime.powers} (applied to $n=2$ and $m=2$) yields $a^{2}\perp
b^{2}$. In other words, $b^{2}\perp a^{2}$ (by Proposition
\ref{prop.ent.coprime.perp-symm}). In other words, $\gcd\left(  b^{2}%
,a^{2}\right)  =1$. Also, $b^{2}$ is nonnegative (since the square of any real
number is nonnegative).

Squaring both sides of the equality $\sqrt{u}=a/b$, we obtain $u=\left(
a/b\right)  ^{2}=a^{2}/b^{2}$, so that $a^{2}=b^{2}u$. Hence, $b^{2}\mid
a^{2}$ (since $u$ is an integer). Thus, Proposition \ref{prop.ent.gcd.props1}
\textbf{(i)} (applied to $b^{2}$ and $a^{2}$ instead of $a$ and $b$) yields
$\gcd\left(  b^{2},a^{2}\right)  =\left\vert b^{2}\right\vert =b^{2}$ (since
$b^{2}$ is nonnegative). Comparing this with $\gcd\left(  b^{2},a^{2}\right)
=1$, we obtain $b^{2}=1$. Hence, $u=a^{2}/\underbrace{b^{2}}_{=1}=a^{2}$.
Thus, $u$ is a perfect square (since $a$ is an integer). This contradicts the
fact that $u$ is not a perfect square.

This contradiction shows that our assumption was false. Hence, $\sqrt{u}$ is
irrational. This solves Exercise \ref{exe.ent.coprime.sqrtu+sqrtv}
\textbf{(a)}.

\textbf{(b)} Let $u$ and $v$ be two positive integers that are not both
perfect squares. We must prove that $\sqrt{u}+\sqrt{v}$ is irrational.

Assume the contrary. Thus, $\sqrt{u}+\sqrt{v}$ is rational. Denote this
rational number $\sqrt{u}+\sqrt{v}$ by $x$. Thus, $x=\sqrt{u}+\sqrt{v}$, so
that $x-\sqrt{u}=\sqrt{v}$. Squaring both sides of this equality, we obtain
$\left(  x-\sqrt{u}\right)  ^{2}=v$. Hence,%
\[
v=\left(  x-\sqrt{u}\right)  ^{2}=x^{2}-2x\sqrt{u}+\left(  \sqrt{u}\right)
^{2}=x^{2}-2x\sqrt{u}+u.
\]
Subtracting $x^{2}+u$ from both sides of this equation, we obtain%
\begin{equation}
v-\left(  x^{2}+u\right)  =-2x\sqrt{u}.
\label{sol.ent.coprime.sqrtu+sqrtv.b.2}%
\end{equation}


But $x=\sqrt{u}+\sqrt{v}>0$ (since $u$ and $v$ are positive) and thus $x\neq
0$, so that $-2x\neq0$. Hence, we can solve the equation
(\ref{sol.ent.coprime.sqrtu+sqrtv.b.2}) for $\sqrt{u}$; we thus obtain%
\[
\sqrt{u}=\dfrac{v-\left(  x^{2}+u\right)  }{-2x}.
\]
Thus, $\sqrt{u}$ is rational (since $v$, $x$ and $u$ are rational). Therefore,
$u$ must be a perfect square (since otherwise, Exercise
\ref{exe.ent.coprime.sqrtu+sqrtv} \textbf{(a)} would yield that $\sqrt{u}$ is
irrational). Similarly, $v$ must be a perfect square. This shows that both $u$
and $v$ are perfect squares; but this contradicts the fact that $u$ and $v$
are not both perfect squares.

This contradiction shows that our assumption was false. Hence, $\sqrt{u}%
+\sqrt{v}$ is irrational. This solves Exercise
\ref{exe.ent.coprime.sqrtu+sqrtv} \textbf{(b)}.
\end{proof}
\end{fineprint}

\subsection{Solution to Exercise \ref{exe.ent.lcm.lcmabc}}

\begin{fineprint}
\begin{proof}
[First solution to Exercise \ref{exe.ent.lcm.lcmabc}.]Let us prove a more
general fact:

\begin{statement}
\textit{Claim 1:} Let $x,y,z,N$ be four integers such that $ax=by=cz=N$. Then,
$\gcd\left(  a,b,c\right)  \cdot\operatorname{lcm}\left(  x,y,z\right)
=\left\vert N\right\vert $.
\end{statement}

Once we have proven Claim 1, we will immediately obtain Exercise
\ref{exe.ent.lcm.lcmabc} \textbf{(a)} by applying Claim 1 to $x=bc$, $y=ca$,
$z=ab$ and $N=abc$; and we will obtain Exercise \ref{exe.ent.lcm.lcmabc}
\textbf{(b)} easily in a similar way (see below for the details). Thus, let us
focus on proving Claim 1.

\textit{Proof of Claim 1:} If the integers $x,y,z$ are not all nonzero, then
Claim 1 holds\footnote{\textit{Proof.} Assume that the integers $x,y,z$ are
not all nonzero. In other words, $x=0$ or $y=0$ or $z=0$. We thus WLOG assume
that $x=0$ (since the proofs in the two cases $y=0$ and $z=0$ are analogous).
\par
The integers $x,y,z$ are not all nonzero. Hence, Definition
\ref{def.ent.lcm.lcm} yields that their lowest common multiple is $0$. In
other words, $\operatorname{lcm}\left(  x,y,z\right)  =0$.
\par
But $ax=N$, thus $N=a\underbrace{x}_{=0}=0$. Hence, $\left\vert N\right\vert
=\left\vert 0\right\vert =0$. Comparing this with $\gcd\left(  a,b,c\right)
\cdot\underbrace{\operatorname{lcm}\left(  x,y,z\right)  }_{=0}=0$, we obtain
$\gcd\left(  a,b,c\right)  \cdot\operatorname{lcm}\left(  x,y,z\right)
=\left\vert N\right\vert $. Hence, Claim 1 holds, qed.}. Thus, for the rest of
this proof, we WLOG assume that the integers $x,y,z$ are all nonzero. Hence,
$\operatorname{lcm}\left(  x,y,z\right)  $ is the smallest positive element of
the set $\operatorname*{Mul}\left(  x,y,z\right)  $ (by Definition
\ref{def.ent.lcm.lcm}). Thus, $\operatorname{lcm}\left(  x,y,z\right)  $ is a
positive integer.

If the integers $a,b,c$ are all zero, then Claim 1
holds\footnote{\textit{Proof.} Assume that the integers $a,b,c$ are all zero.
Hence, $\gcd\left(  a,b,c\right)  =0$ (by Definition \ref{def.ent.gcd.gcd}).
Also, $a=0$ (since $a,b,c$ are all zero).
\par
But $ax=N$, thus $N=\underbrace{a}_{=0}x=0$. Hence, $\left\vert N\right\vert
=\left\vert 0\right\vert =0$. Comparing this with $\underbrace{\gcd\left(
a,b,c\right)  }_{=0}\cdot\operatorname{lcm}\left(  x,y,z\right)  =0$, we
obtain $\gcd\left(  a,b,c\right)  \cdot\operatorname{lcm}\left(  x,y,z\right)
=\left\vert N\right\vert $. Hence, Claim 1 holds, qed.}. Hence, for the rest
of this proof, we WLOG assume that the integers $a,b,c$ are not all zero.
Hence, $\gcd\left(  a,b,c\right)  $ is a positive integer (by Definition
\ref{def.ent.gcd.gcd}). Denote this positive integer by $g$. Hence,
$g=\gcd\left(  a,b,c\right)  $.

Definition \ref{def.ent.gcd.gcd} also shows that $\gcd\left(  a,b,c\right)  $
is the largest element of the set $\operatorname*{Div}\left(  a,b,c\right)  $
(since $a,b,c$ are not all zero). Hence, $\gcd\left(  a,b,c\right)
\in\operatorname*{Div}\left(  a,b,c\right)  $. In other words, $g\in
\operatorname*{Div}\left(  a,b,c\right)  $ (since $g=\gcd\left(  a,b,c\right)
$). In other words, $g$ is a common divisor of $a,b,c$ (by the definition of
$\operatorname*{Div}\left(  a,b,c\right)  $). In other words, $g$ is an
integer satisfying $\left(  g\mid a\text{ and }g\mid b\text{ and }g\mid
c\right)  $. Thus, $g\mid a\mid ax=N$. In other words, there exists an integer
$h$ such that $N=gh$. Consider this $h$.

It is easy to see that $N\neq0$\ \ \ \ \footnote{\textit{Proof.} Assume the
contrary. Thus, $N=0$. But $x\neq0$ (since $x,y,z$ are nonzero). Hence, from
$ax=N=0$, we obtain $a=0$. Similarly, $b=0$ and $c=0$. Thus, the integers
$a,b,c$ are all zero. This contradicts the fact that the integers $a,b,c$ are
not all zero. This contradiction shows that our assumption was wrong, qed.}.
Now, $gh=N\neq0$ and thus $h\neq0$. Hence, $\left\vert h\right\vert $ is a
positive integer (since $h$ is an integer). Denote this positive integer by
$m$. Thus, $m=\left\vert h\right\vert $.

Also, set $N^{\prime}=\left\vert N\right\vert $. Thus, $N^{\prime}$ is an
integer satisfying%
\begin{align}
N^{\prime}  &  =\left\vert \underbrace{N}_{=gh}\right\vert =\left\vert
gh\right\vert =\underbrace{\left\vert g\right\vert }%
_{\substack{=g\\\text{(since }g\text{ is positive)}}}\cdot
\underbrace{\left\vert h\right\vert }_{=m}\ \ \ \ \ \ \ \ \ \ \left(  \text{by
(\ref{eq.ent.div.abs(xy)})}\right) \nonumber\\
&  =gm. \label{sol.ent.lcm.lcmabc.c1.pf.3}%
\end{align}


Our next goal is to prove that $m=\operatorname{lcm}\left(  x,y,z\right)  $.
First, we shall prove that $m\in\operatorname*{Mul}\left(  x,y,z\right)  $.

Indeed, we have $h\neq0$. Hence, Exercise \ref{exe.ent.div.acbc} (applied to
$g$, $a$ and $h$ instead of $a$, $b$ and $c$) shows that $g\mid a$ holds if
and only if $gh\mid ah$. Hence, $gh\mid ah$ holds (since $g\mid a$ holds).
Now, $xa=ax=N=gh\mid ah=ha$. But $a\neq0$ (since $ax=N\neq0$). Thus, Exercise
\ref{exe.ent.div.acbc} (applied to $x$, $h$ and $a$ instead of $a$, $b$ and
$c$) shows that $x\mid h$ holds if and only if $xa\mid ha$. Hence, $x\mid h$
holds (since $xa\mid ha$ holds). But Exercise \ref{exe.ent.div.aabs}
\textbf{(a)} (applied to $h$ instead of $a$) yields $h\mid\left\vert
h\right\vert =m$. Thus, $x\mid h\mid m$. Similarly, $y\mid m$ and $z\mid m$.
Thus, we have $\left(  x\mid m\text{ and }y\mid m\text{ and }z\mid m\right)
$. In other words, $m$ is a common multiple of $x,y,z$. In other words,
$m\in\operatorname*{Mul}\left(  x,y,z\right)  $. So we know that $m$ is a
positive element of the set $\operatorname*{Mul}\left(  x,y,z\right)  $ (since
$m$ is positive).

We shall now show that $m$ is the smallest positive element of this set.
Indeed, let $w$ be any positive element of $\operatorname*{Mul}\left(
x,y,z\right)  $. We are going to prove that $w\geq m$.

In fact, $w\in\operatorname*{Mul}\left(  x,y,z\right)  $. In other words, $w$
is a common multiple of $x,y,z$. In other words, we have $\left(  x\mid
w\text{ and }y\mid w\text{ and }z\mid w\right)  $. Also, $w\neq0$ (since $w$
is positive).

We have $wa\neq0$ (since $w\neq0$ and $a\neq0$). Hence, the integers
$wa,wb,wc$ are not all zero. Thus, Definition \ref{def.ent.gcd.gcd} shows that
$\gcd\left(  wa,wb,wc\right)  $ is the largest element of the set
$\operatorname*{Div}\left(  wa,wb,wc\right)  $.

We have $a\neq0$. Hence, Exercise \ref{exe.ent.div.acbc} (applied to $x$, $w$
and $a$ instead of $a$, $b$ and $c$) shows that $x\mid w$ holds if and only if
$xa\mid wa$. Hence, $xa\mid wa$ holds (since $x\mid w$). Thus, $N=ax=xa\mid
wa$. But Exercise \ref{exe.ent.div.aabs} \textbf{(b)} (applied to $N$ instead
of $a$) yields $\left\vert N\right\vert \mid N$. In other words, $N^{\prime
}\mid N$ (since $N^{\prime}=\left\vert N\right\vert $). Hence, $N^{\prime}\mid
N\mid wa$. Similarly, $N^{\prime}\mid wb$ and $N^{\prime}\mid wc$. Thus,
$\left(  N^{\prime}\mid wa\text{ and }N^{\prime}\mid wb\text{ and }N^{\prime
}\mid wc\right)  $. In other words, $N^{\prime}$ is a common divisor of
$wa,wb,wc$. In other words, $N^{\prime}\in\operatorname*{Div}\left(
wa,wb,wc\right)  $. Hence, $N^{\prime}\leq\gcd\left(  wa,wb,wc\right)  $
(since $\gcd\left(  wa,wb,wc\right)  $ is the \textbf{largest} element of the
set $\operatorname*{Div}\left(  wa,wb,wc\right)  $). Now,
(\ref{sol.ent.lcm.lcmabc.c1.pf.3}) yields%
\begin{align*}
gm  &  =N^{\prime}\leq\gcd\left(  wa,wb,wc\right)  =\underbrace{\left\vert
w\right\vert }_{\substack{=w\\\text{(since }w\text{ is positive)}%
}}\underbrace{\gcd\left(  a,b,c\right)  }_{=g}\\
&  \ \ \ \ \ \ \ \ \ \ \left(  \text{by Exercise \ref{exe.ent.gcd.sa,sb,sc}
(applied to }s=w\text{)}\right) \\
&  =wg=gw.
\end{align*}
We can divide both sides of this inequality by $g$ (since $g$ is positive),
and thus obtain $m\leq w$. In other words, $w\geq m$.

Now, forget that we fixed $w$. We thus have proven that each positive element
$w$ of the set $\operatorname*{Mul}\left(  x,y,z\right)  $ satisfies $w\geq
m$. Hence, $m$ is the \textbf{smallest} positive element of the set
$\operatorname*{Mul}\left(  x,y,z\right)  $ (since we already know that $m$ is
a positive element of the set $\operatorname*{Mul}\left(  x,y,z\right)  $). In
other words, $m$ is $\operatorname{lcm}\left(  x,y,z\right)  $ (since
$\operatorname{lcm}\left(  x,y,z\right)  $ is the smallest positive element of
the set $\operatorname*{Mul}\left(  x,y,z\right)  $). In other words,
$m=\operatorname{lcm}\left(  x,y,z\right)  $. Hence,
(\ref{sol.ent.lcm.lcmabc.c1.pf.3}) becomes%
\[
N^{\prime}=\underbrace{g}_{=\gcd\left(  a,b,c\right)  }\underbrace{m}%
_{=\operatorname{lcm}\left(  x,y,z\right)  }=\gcd\left(  a,b,c\right)
\cdot\operatorname{lcm}\left(  x,y,z\right)  .
\]
Thus, $\gcd\left(  a,b,c\right)  \cdot\operatorname{lcm}\left(  x,y,z\right)
=N^{\prime}=\left\vert N\right\vert $. This proves Claim 1.

We can now solve the actual exercise:

\textbf{(a)} We have $a\left(  bc\right)  =b\left(  ca\right)  =c\left(
ab\right)  =abc$. Hence, Claim 1 (applied to $x=bc$, $y=ca$, $z=ab$ and
$N=abc$) yields $\gcd\left(  a,b,c\right)  \cdot\operatorname{lcm}\left(
bc,ca,ab\right)  =\left\vert abc\right\vert $. This solves Exercise
\ref{exe.ent.lcm.lcmabc} \textbf{(a)}.

\textbf{(b)} We have $\left(  bc\right)  a=\left(  ca\right)  b=\left(
ab\right)  c=abc$. Hence, Claim 1 (applied to $bc$, $ca$, $ab$, $a$, $b$, $c$
and $abc$ instead of $a$, $b$, $c$, $x$, $y$, $z$ and $N$) yields $\gcd\left(
bc,ca,ab\right)  \cdot\operatorname{lcm}\left(  a,b,c\right)  =\left\vert
abc\right\vert $. Thus, $\operatorname{lcm}\left(  a,b,c\right)  \cdot
\gcd\left(  bc,ca,ab\right)  =\gcd\left(  bc,ca,ab\right)  \cdot
\operatorname{lcm}\left(  a,b,c\right)  =\left\vert abc\right\vert $. This
solves Exercise \ref{exe.ent.lcm.lcmabc} \textbf{(b)}.
\end{proof}
\end{fineprint}

\subsection{Solution to Exercise \ref{exe.ent.lcm.props1}}

\begin{fineprint}
\begin{proof}
[Solution to Exercise \ref{exe.ent.lcm.props1}.]The lowest common multiple of
any set of integers is a nonnegative integers (by Definition
\ref{def.ent.lcm.lcm}). Thus, in particular, $\operatorname{lcm}\left(
a,b\right)  $ and $\operatorname{lcm}\left(  b,a\right)  $ and
$\operatorname{lcm}\left(  -a,b\right)  $ are nonnegative integers.

\textbf{(a)} Proposition \ref{prop.ent.lcm.divides} \textbf{(c)} (applied to
$b$ and $a$ instead of $a$ and $b$) yields $b\mid\operatorname{lcm}\left(
b,a\right)  $ and $a\mid\operatorname{lcm}\left(  b,a\right)  $. Thus,
$a\mid\operatorname{lcm}\left(  b,a\right)  $ and $b\mid\operatorname{lcm}%
\left(  b,a\right)  $. Hence, Lemma \ref{lem.ent.lcm.uniprop} (applied to
$m=\operatorname{lcm}\left(  b,a\right)  $) yields $\operatorname{lcm}\left(
a,b\right)  \mid\operatorname{lcm}\left(  b,a\right)  $. The same argument
(applied to $b$ and $a$ instead of $a$ and $b$) yields $\operatorname{lcm}%
\left(  b,a\right)  \mid\operatorname{lcm}\left(  a,b\right)  $. Hence,
Exercise \ref{exe.ent.div.abba} (applied to $\operatorname{lcm}\left(
a,b\right)  $ and $\operatorname{lcm}\left(  b,a\right)  $ instead of $a$ and
$b$) yields $\left\vert \operatorname{lcm}\left(  a,b\right)  \right\vert
=\left\vert \operatorname{lcm}\left(  b,a\right)  \right\vert
=\operatorname{lcm}\left(  b,a\right)  $ (since $\operatorname{lcm}\left(
b,a\right)  $ is nonnegative). But $\operatorname{lcm}\left(  a,b\right)  $ is
nonnegative; thus, $\left\vert \operatorname{lcm}\left(  a,b\right)
\right\vert =\operatorname{lcm}\left(  a,b\right)  $. Hence,
$\operatorname{lcm}\left(  a,b\right)  =\left\vert \operatorname{lcm}\left(
a,b\right)  \right\vert =\operatorname{lcm}\left(  b,a\right)  $. This solves
Exercise \ref{exe.ent.lcm.props1} \textbf{(a)}.

\textbf{(b)} Proposition \ref{prop.ent.lcm.divides} \textbf{(c)} (applied to
$-a$ instead of $a$) yields $-a\mid\operatorname{lcm}\left(  -a,b\right)  $
and $b\mid\operatorname{lcm}\left(  -a,b\right)  $. But $a\mid-a$ (since
$-a=a\cdot\left(  -1\right)  $). Thus, $a\mid-a\mid\operatorname{lcm}\left(
-a,b\right)  $ and $b\mid\operatorname{lcm}\left(  -a,b\right)  $. Hence,
Lemma \ref{lem.ent.lcm.uniprop} (applied to $m=\operatorname{lcm}\left(
-a,b\right)  $) yields $\operatorname{lcm}\left(  a,b\right)  \mid
\operatorname{lcm}\left(  -a,b\right)  $. The same argument (applied to $-a$
instead of $a$) yields $\operatorname{lcm}\left(  -a,b\right)  \mid
\operatorname{lcm}\left(  -\left(  -a\right)  ,b\right)  $. In view of
$-\left(  -a\right)  =a$, this rewrites as $\operatorname{lcm}\left(
-a,b\right)  \mid\operatorname{lcm}\left(  a,b\right)  $. Hence, Exercise
\ref{exe.ent.div.abba} (applied to $\operatorname{lcm}\left(  a,b\right)  $
and $\operatorname{lcm}\left(  -a,b\right)  $ instead of $a$ and $b$) yields
$\left\vert \operatorname{lcm}\left(  a,b\right)  \right\vert =\left\vert
\operatorname{lcm}\left(  -a,b\right)  \right\vert =\operatorname{lcm}\left(
-a,b\right)  $ (since $\operatorname{lcm}\left(  -a,b\right)  $ is
nonnegative). But $\operatorname{lcm}\left(  a,b\right)  $ is nonnegative;
thus, $\left\vert \operatorname{lcm}\left(  a,b\right)  \right\vert
=\operatorname{lcm}\left(  a,b\right)  $. Hence, $\operatorname{lcm}\left(
a,b\right)  =\left\vert \operatorname{lcm}\left(  a,b\right)  \right\vert
=\operatorname{lcm}\left(  -a,b\right)  $. This solves Exercise
\ref{exe.ent.lcm.props1} \textbf{(b)}.

\textbf{(c)} Exercise \ref{exe.ent.lcm.props1} \textbf{(a)} (applied to $-b$
instead of $b$) yields $\operatorname{lcm}\left(  a,-b\right)
=\operatorname{lcm}\left(  -b,a\right)  =\operatorname{lcm}\left(  b,a\right)
$ (by Exercise \ref{exe.ent.lcm.props1} \textbf{(b)}, applied to $b$ and $a$
instead of $a$ and $b$). But Exercise \ref{exe.ent.lcm.props1} \textbf{(a)}
yields $\operatorname{lcm}\left(  a,b\right)  =\operatorname{lcm}\left(
b,a\right)  =\operatorname{lcm}\left(  a,-b\right)  $ (since
$\operatorname{lcm}\left(  a,-b\right)  =\operatorname{lcm}\left(  b,a\right)
$). This solves Exercise \ref{exe.ent.lcm.props1} \textbf{(c)}.

\textbf{(d)} Let $a,b\in\mathbb{Z}$ satisfy $a\mid b$. Then, $a\mid b$ and
$b\mid b$. Hence, Lemma \ref{lem.ent.lcm.uniprop} (applied to $m=b$) yields
$\operatorname{lcm}\left(  a,b\right)  \mid b$. But Proposition
\ref{prop.ent.lcm.divides} \textbf{(c)} yields $a\mid\operatorname{lcm}\left(
a,b\right)  $ and $b\mid\operatorname{lcm}\left(  a,b\right)  $. Hence,
Exercise \ref{exe.ent.div.abba} (applied to $b$ and $\operatorname{lcm}\left(
a,b\right)  $ instead of $a$ and $b$) yields $\left\vert b\right\vert
=\left\vert \operatorname{lcm}\left(  a,b\right)  \right\vert
=\operatorname{lcm}\left(  a,b\right)  $ (since $\operatorname{lcm}\left(
a,b\right)  $ is nonnegative). In other words, $\operatorname{lcm}\left(
a,b\right)  =\left\vert b\right\vert $. This solves Exercise
\ref{exe.ent.lcm.props1} \textbf{(d)}.
\end{proof}
\end{fineprint}

\subsection{Solution to Exercise \ref{exe.ent.primes.pab-conv}}

\begin{fineprint}
\begin{proof}
[Solution to Exercise \ref{exe.ent.primes.pab-conv}.]The integer $p$ is
positive (since $p>1>0$). Thus, $\left\vert p\right\vert =p$.

Let $d$ be a positive divisor of $p$ other than $1$ and $p$. We shall derive a contradiction.

We know that $d$ is a divisor of $p$ \textbf{other than} $1$ and $p$. Hence,
$d\neq1$ and $d\neq p$.

But $d$ is a divisor of $p$. In other words, there exists an integer $c$ such
that $p=dc$. Consider this $c$.

The integer $d$ is positive, therefore nonzero. Hence, we can solve the
equality $p=dc$ for $c$; thus we find $c=p/d>0$ (since both $p$ and $d$ are
positive). Thus, the integer $c$ is positive; hence, $c\geq1$. Also, $d\geq1$
(since $d$ is a positive integer). Combining this with $d\neq1$, we obtain
$d>1$.

Since $c>0$, we can multiply the inequality $d>1$ by $c$. We thus find
$cd>c\cdot1=c$. Hence, $c<cd=dc=p$. Since $c$ is positive, we have $\left\vert
c\right\vert =c<p$. But $p$ is positive; thus, $\left\vert p\right\vert
=p>\left\vert c\right\vert $ (since $\left\vert c\right\vert <p$).

Since $d>0$, we can multiply the inequality $c\geq1$ by $d$. We thus find
$dc\geq d\cdot1=d$. Hence, $d\leq dc=p$. Combining this with $d\neq p$, we
obtain $d<p$. Since $d$ is positive, we have $\left\vert d\right\vert =d<p$.
But $p$ is positive; thus, $\left\vert p\right\vert =p>\left\vert d\right\vert
$ (since $\left\vert d\right\vert <p$).

We have $p\mid p=dc$. But let us recall that for every $a,b\in\mathbb{Z}$
satisfying $p\mid ab$, we must have $p\mid a$ or $p\mid b$. Applying this to
$a=d$ and $b=c$, we conclude that $p\mid d$ or $p\mid c$.

We have $d\neq0$ (since $d>0$). Hence, if we had $p\mid d$, then we would have
$\left\vert p\right\vert \leq\left\vert d\right\vert $ (by Proposition
\ref{prop.ent.div.1} \textbf{(b)}, applied to $a=p$ and $b=d$); but this would
contradict $\left\vert p\right\vert >\left\vert d\right\vert $. Hence, we
cannot have $p\mid d$.

We have $c\neq0$ (since $c>0$). Hence, if we had $p\mid c$, then we would have
$\left\vert p\right\vert \leq\left\vert c\right\vert $ (by Proposition
\ref{prop.ent.div.1} \textbf{(b)}, applied to $a=p$ and $b=c$); but this would
contradict $\left\vert p\right\vert >\left\vert c\right\vert $. Hence, we
cannot have $p\mid c$.

Thus, we have neither $p\mid d$ nor $p\mid c$. This contradicts the fact that
$p\mid d$ or $p\mid c$.

Now, forget that we have fixed $d$. We thus have found a contradiction for
each positive divisor $d$ of $p$ other than $1$ and $p$. Thus, there exists no
positive divisor $d$ of $p$ other than $1$ and $p$. In other words, each
positive divisor of $p$ is either $1$ or $p$. Thus, the only positive divisors
of $p$ are $1$ and $p$ (since $1$ and $p$ are indeed positive divisors of
$p$). In other words, $p$ is prime (by the definition of \textquotedblleft
prime\textquotedblright). This solves Exercise \ref{exe.ent.primes.pab-conv}.
\end{proof}
\end{fineprint}

\subsection{Solution to Exercise \ref{exe.ent.primes.coprime-to-pk}}

\begin{fineprint}
\begin{proof}
[Solution to Exercise \ref{exe.ent.primes.coprime-to-pk}.]$\Longrightarrow:$
Assume that $a\perp p^{k}$ holds. We must prove that $p\nmid a$.

Assume the contrary. Thus, $p\mid a$. But $k\geq1$ (since $k$ is a positive
integer), so that $1\leq k$. Hence, Exercise \ref{exe.ent.div.powers} (applied
to $p$, $1$ and $k$ instead of $n$, $a$ and $b$) yields $p^{1}\mid p^{k}$. In
other words, $p\mid p^{k}$ (since $p^{1}=p$). Now, Lemma
\ref{lem.ent.gcd.uniprop} (applied to $m=p$ and $b=p^{k}$) yields $p\mid
\gcd\left(  a,p^{k}\right)  $ (since $p\mid a$ and $p\mid p^{k}$). But from
$a\perp p^{k}$, we obtain $\gcd\left(  a,p^{k}\right)  =1$. Hence, $p\mid
\gcd\left(  a,p^{k}\right)  =1$. Thus, Proposition \ref{prop.ent.div.1}
\textbf{(b)} (applied to $p$ and $1$ instead of $a$ and $b$) yields
$\left\vert p\right\vert \leq\left\vert 1\right\vert =1$.

Since $p$ is prime, we have $p>1>0$, so that $\left\vert p\right\vert =p>1$.
This contradicts $\left\vert p\right\vert \leq1$. This contradiction shows
that our assumption was false. Hence, $p\nmid a$ is proven. This concludes the
proof of the \textquotedblleft$\Longrightarrow$\textquotedblright\ direction
of Exercise \ref{exe.ent.primes.coprime-to-pk}.

$\Longleftarrow:$ Assume that $p\nmid a$. We must prove that $a\perp p^{k}$.

Proposition \ref{prop.ent.primes.div-or-coprime} yields that either $p\mid a$
or $p\perp a$. Since $p\mid a$ does not hold (because $p\nmid a$), we thus
conclude that $p\perp a$. But Proposition \ref{prop.ent.coprime.perp-symm}
(applied to $b=p$) yields that $a\perp p$ if and only if $p\perp a$. Hence,
$a\perp p$ (since $p\perp a$). Thus, Exercise \ref{exe.ent.coprime.powers}
(applied to $b=p$, $n=1$ and $m=k$) yields $a^{1}\perp p^{k}$. In other words,
$a\perp p^{k}$. This concludes the proof of the \textquotedblleft%
$\Longleftarrow$\textquotedblright\ direction of Exercise
\ref{exe.ent.primes.coprime-to-pk}.
\end{proof}
\end{fineprint}

\subsection{Solution to Exercise \ref{exe.ent.prime.vp-abs}}

\begin{fineprint}
\begin{proof}
[Solution to Exercise \ref{exe.ent.prime.vp-abs}.]If $n\geq0$, then we have
$\left\vert n\right\vert =n$ and thus $v_{p}\left(  \left\vert n\right\vert
\right)  =v_{p}\left(  n\right)  $. Hence, if $n\geq0$, then Exercise
\ref{exe.ent.prime.vp-abs} holds. Thus, for the rest of this solution, we WLOG
assume that $n<0$. Hence, $\left\vert n\right\vert =-n$.

We have $-1\mid p$ (since $p=\left(  -1\right)  \cdot\left(  -p\right)  $).
Thus, Proposition \ref{prop.ent.gcd.props1} \textbf{(i)} (applied to $-1$ and
$p$ instead of $a$ and $b$) yields $\gcd\left(  -1,p\right)  =\left\vert
-1\right\vert =1$. In other words, $-1\perp p$. Also, $-1=\left(  -1\right)
\cdot p^{0}$. Thus, Lemma \ref{lem.ent.prime.vp-copr} \textbf{(b)} (applied to
$-1$, $0$ and $1$ instead of $n$, $i$ and $w$) yields $v_{p}\left(  -1\right)
=0$. Now, Theorem \ref{thm.ent.prime.vp-ring} \textbf{(a)} (applied to $a=-1$
and $b=n$) yields $v_{p}\left(  \left(  -1\right)  n\right)
=\underbrace{v_{p}\left(  -1\right)  }_{=0}+v_{p}\left(  n\right)  $. In view
of $\left(  -1\right)  n=-n=\left\vert n\right\vert $, this rewrites as
$v_{p}\left(  \left\vert n\right\vert \right)  =v_{p}\left(  n\right)  $. This
solves Exercise \ref{exe.ent.prime.vp-abs}.
\end{proof}
\end{fineprint}

\subsection{Solution to Exercise \ref{exe.ent.primes.vp=vp}}

\begin{fineprint}
\begin{proof}
[Solution to Exercise \ref{exe.ent.primes.vp=vp}.]Applying
(\ref{eq.exe.ent.primes.vp=vp.ass}) to $p=2$, we obtain $v_{2}\left(
n\right)  =v_{2}\left(  m\right)  $ (since $2$ is a prime).

If $n$ is nonzero, then $v_{p}\left(  n\right)  $ is a nonnegative integer for
every prime $p$ (by Definition \ref{def.ent.prime.vp} \textbf{(a)}). Applying
this to $p=2$, we conclude the following: If $n$ is nonzero, then
$v_{2}\left(  n\right)  $ is a nonnegative integer and thus satisfies
$v_{2}\left(  n\right)  \neq\infty$. Thus, we have shown that
\begin{equation}
\text{if }n\text{ is nonzero, then }v_{2}\left(  n\right)  \neq\infty.
\label{sol.ent.primes.vp=vp.1}%
\end{equation}
The same argument (applied to $m$ instead of $n$) shows that%
\begin{equation}
\text{if }m\text{ is nonzero, then }v_{2}\left(  m\right)  \neq\infty.
\label{sol.ent.primes.vp=vp.2}%
\end{equation}


We are in one of the following two cases:

\textit{Case 1:} We have $n=0$.

\textit{Case 2:} We have $n\neq0$.

Let us first consider Case 1. In this case, we have $n=0$. Thus, $v_{2}\left(
n\right)  =v_{2}\left(  0\right)  =\infty$ (by Definition
\ref{def.ent.prime.vp} \textbf{(b)}). Comparing this with $v_{2}\left(
n\right)  =v_{2}\left(  m\right)  $, we obtain $v_{2}\left(  m\right)
=\infty$. But if $m$ was nonzero, then we would have $v_{2}\left(  m\right)
\neq\infty$ (by (\ref{sol.ent.primes.vp=vp.2})), which would contradict
$v_{2}\left(  m\right)  =\infty$. Hence, $m$ cannot be nonzero. In other
words, $m$ must be $0$. Thus, $m=0$. Comparing this with $n=0$, we obtain
$n=m$. Hence, Exercise \ref{exe.ent.primes.vp=vp} is solved in Case 1.

Let us now consider Case 2. In this case, we have $n\neq0$. Thus, $n$ is
nonzero; hence, $v_{2}\left(  n\right)  \neq\infty$ (by
(\ref{sol.ent.primes.vp=vp.1})). If we had $m=0$, then we would have
$v_{2}\left(  n\right)  =v_{2}\left(  \underbrace{m}_{=0}\right)
=v_{2}\left(  0\right)  =\infty$ (by Definition \ref{def.ent.prime.vp}
\textbf{(b)}), which would contradict $v_{2}\left(  n\right)  \neq\infty$.
Thus, we cannot have $m=0$. Hence, $m$ is nonzero.

The integer $n$ is nonzero and nonnegative; thus, the integer $n$ is positive.
Thus, Corollary \ref{cor.ent.primes.can-fac} yields%
\begin{equation}
n=\prod_{p\text{ prime}}\underbrace{p^{v_{p}\left(  n\right)  }}%
_{\substack{=p^{v_{p}\left(  m\right)  }\\\text{(since
(\ref{eq.exe.ent.primes.vp=vp.ass})}\\\text{yields }v_{p}\left(  n\right)
=v_{p}\left(  m\right)  \text{)}}}=\prod_{p\text{ prime}}p^{v_{p}\left(
m\right)  }. \label{sol.ent.primes.vp=vp.5}%
\end{equation}


The integer $m$ is nonzero and nonnegative; thus, the integer $m$ is positive.
Hence, Corollary \ref{cor.ent.primes.can-fac} (applied to $m$ instead of $n$)
yields%
\[
m=\prod_{p\text{ prime}}p^{v_{p}\left(  m\right)  }.
\]
Comparing this with (\ref{sol.ent.primes.vp=vp.5}), we obtain $n=m$. Thus,
Exercise \ref{exe.ent.primes.vp=vp} is solved in Case 2.

We have now solved Exercise \ref{exe.ent.primes.vp=vp} in both of the Cases 1
and 2. Hence, Exercise \ref{exe.ent.primes.vp=vp} always holds.
\end{proof}
\end{fineprint}

\subsection{\label{sect.sols.exe.ent.lcm.lcmabc.2}Second solution to Exercise
\ref{exe.ent.lcm.lcmabc}}

\begin{fineprint}
\begin{proof}
[Second solution to Exercise \ref{exe.ent.lcm.lcmabc} (sketched).]WLOG assume
that $a,b,c$ are nonzero (since otherwise, the claim of Exercise
\ref{exe.ent.lcm.lcmabc} easily reduces to $0=0$). Then, $abc$ is nonzero as
well. Hence, Corollary \ref{cor.ent.primes.can-facZ} yields%
\[
\left\vert abc\right\vert =\prod_{p\text{ prime}}p^{v_{p}\left(  abc\right)
}.
\]
We have%
\begin{align}
&  \underbrace{\gcd\left(  a,b,c\right)  }_{\substack{=\prod\limits_{p\text{
prime}}p^{\min\left\{  v_{p}\left(  a\right)  ,v_{p}\left(  b\right)
,v_{p}\left(  c\right)  \right\}  }\\\text{(by Proposition
\ref{prop.ent.primes.gcd-k})}}}\cdot\underbrace{\operatorname{lcm}\left(
bc,ca,ab\right)  }_{\substack{=\prod\limits_{p\text{ prime}}p^{\max\left\{
v_{p}\left(  bc\right)  ,v_{p}\left(  ca\right)  ,v_{p}\left(  ab\right)
\right\}  }\\\text{(by Proposition \ref{prop.ent.primes.gcd-k})}}}\nonumber\\
&  =\left(  \prod\limits_{p\text{ prime}}p^{\min\left\{  v_{p}\left(
a\right)  ,v_{p}\left(  b\right)  ,v_{p}\left(  c\right)  \right\}  }\right)
\cdot\left(  \prod\limits_{p\text{ prime}}p^{\max\left\{  v_{p}\left(
bc\right)  ,v_{p}\left(  ca\right)  ,v_{p}\left(  ab\right)  \right\}
}\right) \nonumber\\
&  =\prod\limits_{p\text{ prime}}\underbrace{\left(  p^{\min\left\{
v_{p}\left(  a\right)  ,v_{p}\left(  b\right)  ,v_{p}\left(  c\right)
\right\}  }p^{\max\left\{  v_{p}\left(  bc\right)  ,v_{p}\left(  ca\right)
,v_{p}\left(  ab\right)  \right\}  }\right)  }_{=p^{\min\left\{  v_{p}\left(
a\right)  ,v_{p}\left(  b\right)  ,v_{p}\left(  c\right)  \right\}
+\max\left\{  v_{p}\left(  bc\right)  ,v_{p}\left(  ca\right)  ,v_{p}\left(
ab\right)  \right\}  }}\nonumber\\
&  =\prod\limits_{p\text{ prime}}p^{\min\left\{  v_{p}\left(  a\right)
,v_{p}\left(  b\right)  ,v_{p}\left(  c\right)  \right\}  +\max\left\{
v_{p}\left(  bc\right)  ,v_{p}\left(  ca\right)  ,v_{p}\left(  ab\right)
\right\}  }. \label{sol.ent.lcm.lcmabc.2nd.2}%
\end{align}


Let us now fix a prime $p$, and try to simplify \newline$\min\left\{
v_{p}\left(  a\right)  ,v_{p}\left(  b\right)  ,v_{p}\left(  c\right)
\right\}  +\max\left\{  v_{p}\left(  bc\right)  ,v_{p}\left(  ca\right)
,v_{p}\left(  ab\right)  \right\}  $. Indeed, set $u=v_{p}\left(  abc\right)
$. Note that $u\in\mathbb{N}$ (since $abc$ is nonzero).

Theorem \ref{thm.ent.prime.vp-ring} \textbf{(a)} (applied to $ca$ and $b$
instead of $a$ and $b$) yields $v_{p}\left(  cab\right)  =v_{p}\left(
ca\right)  +v_{p}\left(  b\right)  $. Comparing this with $v_{p}\left(
\underbrace{cab}_{=abc}\right)  =v_{p}\left(  abc\right)  =u$, we obtain
$u=v_{p}\left(  ca\right)  +v_{p}\left(  b\right)  $. Subtracting
$v_{p}\left(  b\right)  $ from this equality\footnote{This is allowed, since
$v_{p}\left(  b\right)  \in\mathbb{N}$ (because $b$ is nonzero).}, we obtain
$u-v_{p}\left(  b\right)  =v_{p}\left(  ca\right)  $. Thus, $v_{p}\left(
ca\right)  =u-v_{p}\left(  b\right)  $. Similarly, $v_{p}\left(  ab\right)
=u-v_{p}\left(  c\right)  $ and $v_{p}\left(  bc\right)  =u-v_{p}\left(
a\right)  $. Now,%
\begin{align}
&  \min\left\{  v_{p}\left(  a\right)  ,v_{p}\left(  b\right)  ,v_{p}\left(
c\right)  \right\}  +\max\left\{  \underbrace{v_{p}\left(  bc\right)
}_{=u-v_{p}\left(  a\right)  },\underbrace{v_{p}\left(  ca\right)  }%
_{=u-v_{p}\left(  b\right)  },\underbrace{v_{p}\left(  ab\right)  }%
_{=u-v_{p}\left(  c\right)  }\right\} \nonumber\\
&  =\min\left\{  v_{p}\left(  a\right)  ,v_{p}\left(  b\right)  ,v_{p}\left(
c\right)  \right\}  +\underbrace{\max\left\{  u-v_{p}\left(  a\right)
,u-v_{p}\left(  b\right)  ,u-v_{p}\left(  c\right)  \right\}  }%
_{\substack{=u-\min\left\{  v_{p}\left(  a\right)  ,v_{p}\left(  b\right)
,v_{p}\left(  c\right)  \right\}  \\\text{(since any three reals
}x,y,z\\\text{satisfy }\max\left\{  u-x,u-y,u-z\right\}  =u-\min\left\{
x,y,z\right\}  \text{)}}}\nonumber\\
&  =\min\left\{  v_{p}\left(  a\right)  ,v_{p}\left(  b\right)  ,v_{p}\left(
c\right)  \right\}  +\left(  u-\min\left\{  v_{p}\left(  a\right)
,v_{p}\left(  b\right)  ,v_{p}\left(  c\right)  \right\}  \right) \nonumber\\
&  =u=v_{p}\left(  abc\right)  . \label{sol.ent.lcm.lcmabc.2nd.4}%
\end{align}


Now, forget that we fixed $p$. We thus have proven
(\ref{sol.ent.lcm.lcmabc.2nd.4}) for each prime $p$. Thus,
(\ref{sol.ent.lcm.lcmabc.2nd.2}) becomes%
\begin{align*}
&  \gcd\left(  a,b,c\right)  \cdot\operatorname{lcm}\left(  bc,ca,ab\right) \\
&  =\prod\limits_{p\text{ prime}}\underbrace{p^{\min\left\{  v_{p}\left(
a\right)  ,v_{p}\left(  b\right)  ,v_{p}\left(  c\right)  \right\}
+\max\left\{  v_{p}\left(  bc\right)  ,v_{p}\left(  ca\right)  ,v_{p}\left(
ab\right)  \right\}  }}_{\substack{=p^{v_{p}\left(  abc\right)  }\\\text{(by
(\ref{sol.ent.lcm.lcmabc.2nd.4}))}}}=\prod_{p\text{ prime}}p^{v_{p}\left(
abc\right)  }=\left\vert abc\right\vert .
\end{align*}
This solves Exercise \ref{exe.ent.lcm.lcmabc} \textbf{(a)} again. Similarly we
can re-solve Exercise \ref{exe.ent.lcm.lcmabc} \textbf{(b)}.
\end{proof}

\begin{remark}
Similarly, we could show that any four integers $a,b,c,d$ satisfy
\begin{align*}
\gcd\left(  a,b,c,d\right)  \cdot\operatorname{lcm}\left(
bcd,cda,dab,abc\right)   &  =\left\vert abcd\right\vert
\ \ \ \ \ \ \ \ \ \ \text{and}\\
\operatorname{lcm}\left(  a,b,c,d\right)  \cdot\gcd\left(
bcd,cda,dab,abc\right)   &  =\left\vert abcd\right\vert .
\end{align*}
Indeed, the last equality holds since each prime $p$ satisfies%
\begin{align*}
&  \min\left\{  v_{p}\left(  a\right)  ,v_{p}\left(  b\right)  ,v_{p}\left(
c\right)  ,v_{p}\left(  d\right)  \right\} \\
&  \ \ \ \ \ \ \ \ \ \ +\max\left\{  \underbrace{v_{p}\left(  bcd\right)
}_{=v_{p}\left(  abcd\right)  -v_{p}\left(  a\right)  },\underbrace{v_{p}%
\left(  cda\right)  }_{=v_{p}\left(  abcd\right)  -v_{p}\left(  b\right)
},\underbrace{v_{p}\left(  dab\right)  }_{=v_{p}\left(  abcd\right)
-v_{p}\left(  c\right)  },\underbrace{v_{p}\left(  abc\right)  }%
_{=v_{p}\left(  abcd\right)  -v_{p}\left(  d\right)  }\right\} \\
&  =\min\left\{  v_{p}\left(  a\right)  ,v_{p}\left(  b\right)  ,v_{p}\left(
c\right)  ,v_{p}\left(  d\right)  \right\} \\
&  \ \ \ \ \ \ \ \ \ \ +\underbrace{\max\left\{  v_{p}\left(  abcd\right)
-v_{p}\left(  a\right)  ,v_{p}\left(  abcd\right)  -v_{p}\left(  b\right)
,v_{p}\left(  abcd\right)  -v_{p}\left(  c\right)  ,v_{p}\left(  abcd\right)
-v_{p}\left(  d\right)  \right\}  }_{=v_{p}\left(  abcd\right)  -\min\left\{
v_{p}\left(  a\right)  ,v_{p}\left(  b\right)  ,v_{p}\left(  c\right)
,v_{p}\left(  d\right)  \right\}  }\\
&  =\min\left\{  v_{p}\left(  a\right)  ,v_{p}\left(  b\right)  ,v_{p}\left(
c\right)  ,v_{p}\left(  d\right)  \right\}  +\left(  v_{p}\left(  abcd\right)
-\min\left\{  v_{p}\left(  a\right)  ,v_{p}\left(  b\right)  ,v_{p}\left(
c\right)  ,v_{p}\left(  d\right)  \right\}  \right) \\
&  =v_{p}\left(  abcd\right)
\end{align*}
(assuming that $a,b,c,d$ are nonzero). Similarly, the first equality holds.
You can likewise prove generalizations to $k$ integers.\footnotemark
\end{remark}

\footnotetext{That said, it is probably better (and easier) to generalize
Claim 1 from the first solution of Exercise \ref{exe.ent.lcm.lcmabc} to $k$
integers:
\par
\begin{statement}
\textit{Claim 2:} Let $k>0$. Let $N$ be an integer. Let $a_{1},a_{2}%
,\ldots,a_{k}$ be $k$ integers, and let $x_{1},x_{2},\ldots,x_{k}$ be $k$
integers such that $a_{1}x_{1}=a_{2}x_{2}=\cdots=a_{k}x_{k}=N$. Then,
$\gcd\left(  a_{1},a_{2},\ldots,a_{k}\right)  \cdot\operatorname{lcm}\left(
x_{1},x_{2},\ldots,x_{k}\right)  =\left\vert N\right\vert $.
\end{statement}
\par
This Claim 2 can be proven either by generalizing the proof of Claim 1 from
the solution of Exercise \ref{exe.ent.lcm.lcmabc}, or (again) using
Proposition \ref{prop.ent.primes.gcd}.}
\end{fineprint}

\subsection{Solution to Exercise \ref{exe.ent.primes.gcd.1}}

\begin{fineprint}
\begin{proof}
[Solution to Exercise \ref{exe.ent.primes.gcd.1}.]\textbf{(a)} Forget that we
fixed $p$. We thus must prove that
\begin{equation}
v_{p}\left(  \gcd\left(  n,m\right)  \right)  =\min\left\{  v_{p}\left(
n\right)  ,v_{p}\left(  m\right)  \right\}  \ \ \ \ \ \ \ \ \ \ \text{for each
prime }p\text{.} \label{sol.ent.primes.gcd.1.a.goal}%
\end{equation}


We are in one of the following two cases:

\textit{Case 1:} The integers $n$ and $m$ are both nonzero.

\textit{Case 2:} The integers $n$ and $m$ are not both nonzero.

Let us first consider Case 1. In this case, the integers $n$ and $m$ are both
nonzero. Thus, (\ref{eq.prop.ent.primes.gcd.gcd}) yields%
\[
\gcd\left(  n,m\right)  =\prod_{p\text{ prime}}p^{\min\left\{  v_{p}\left(
n\right)  ,v_{p}\left(  m\right)  \right\}  }.
\]
In particular, the product $\prod_{p\text{ prime}}p^{\min\left\{  v_{p}\left(
n\right)  ,v_{p}\left(  m\right)  \right\}  }$ is well-defined. In other words:

\begin{itemize}
\item The number $\min\left\{  v_{p}\left(  n\right)  ,v_{p}\left(  m\right)
\right\}  $ is a nonnegative integer for each prime $p$;

\item all but finitely many primes $p$ satisfy $\min\left\{  v_{p}\left(
n\right)  ,v_{p}\left(  m\right)  \right\}  =0$.
\end{itemize}

(Both of these facts were proven during our proof of Proposition
\ref{prop.ent.primes.gcd}.)

Hence, Corollary \ref{cor.ent.primes.vp-of-can} (applied to $\gcd\left(
n,m\right)  $ and $\min\left\{  v_{p}\left(  n\right)  ,v_{p}\left(  m\right)
\right\}  $ instead of $n$ and $b_{p}$) shows that%
\[
v_{q}\left(  \gcd\left(  n,m\right)  \right)  =\min\left\{  v_{q}\left(
n\right)  ,v_{q}\left(  m\right)  \right\}  \ \ \ \ \ \ \ \ \ \ \text{for each
prime }q.
\]
Renaming $q$ as $p$ in this statement, we obtain%
\[
v_{p}\left(  \gcd\left(  n,m\right)  \right)  =\min\left\{  v_{p}\left(
n\right)  ,v_{p}\left(  m\right)  \right\}  \ \ \ \ \ \ \ \ \ \ \text{for each
prime }p\text{.}%
\]
Thus, (\ref{sol.ent.primes.gcd.1.a.goal}) is proven in Case 1.

Now, let us consider Case 2. In this case, the integers $n$ and $m$ are not
both nonzero. In other words, we have $n=0$ or $m=0$. Thus, we can WLOG assume
that $m=0$ (because in the case $n=0$, we can swap $n$ with $m$ without
changing the meaning of our claim, since $n$ and $m$ play symmetric
roles\footnote{Here we are using the fact that $\gcd\left(  n,m\right)
=\gcd\left(  m,n\right)  $ (which follows from Proposition
\ref{prop.ent.gcd.props1} \textbf{(b)}).}). Assume this.

Fix a prime $p$. Now, $\gcd\left(  n,\underbrace{m}_{=0}\right)  =\gcd\left(
n,0\right)  =\left\vert n\right\vert $ (since Proposition
\ref{prop.ent.gcd.props1} \textbf{(a)} (applied to $a=n$) yields $\gcd\left(
n,0\right)  =\gcd\left(  n\right)  =\left\vert n\right\vert $). Hence,%
\[
v_{p}\left(  \gcd\left(  n,m\right)  \right)  =v_{p}\left(  \left\vert
n\right\vert \right)  =v_{p}\left(  n\right)  \ \ \ \ \ \ \ \ \ \ \left(
\text{by Exercise \ref{exe.ent.prime.vp-abs}}\right)  .
\]
On the other hand, from $m=0$, we obtain $v_{p}\left(  m\right)  =v_{p}\left(
0\right)  =\infty$ (by Definition \ref{def.ent.prime.vp} \textbf{(b)}). Thus,%
\[
\min\left\{  v_{p}\left(  n\right)  ,\underbrace{v_{p}\left(  m\right)
}_{=\infty}\right\}  =\min\left\{  v_{p}\left(  n\right)  ,\infty\right\}
=v_{p}\left(  n\right)
\]
(by our rules for the symbol $\infty$). Comparing this with $v_{p}\left(
\gcd\left(  n,m\right)  \right)  =v_{p}\left(  n\right)  $, we obtain
$v_{p}\left(  \gcd\left(  n,m\right)  \right)  =\min\left\{  v_{p}\left(
n\right)  ,v_{p}\left(  m\right)  \right\}  $.

Now, forget that we fixed $p$. We thus have proven that $v_{p}\left(
\gcd\left(  n,m\right)  \right)  =\min\left\{  v_{p}\left(  n\right)
,v_{p}\left(  m\right)  \right\}  $ for each prime $p$. Thus,
(\ref{sol.ent.primes.gcd.1.a.goal}) is proven in Case 2.

We have now proven (\ref{sol.ent.primes.gcd.1.a.goal}) in each of the two
Cases 1 and 2. Thus, (\ref{sol.ent.primes.gcd.1.a.goal}) always holds. This
solves Exercise \ref{exe.ent.primes.gcd.1} \textbf{(a)}.

\textbf{(b)} Forget that we fixed $p$. We thus must prove that
\begin{equation}
v_{p}\left(  \operatorname{lcm}\left(  n,m\right)  \right)  =\max\left\{
v_{p}\left(  n\right)  ,v_{p}\left(  m\right)  \right\}
\ \ \ \ \ \ \ \ \ \ \text{for each prime }p\text{.}
\label{sol.ent.primes.gcd.1.b.goal}%
\end{equation}


We are in one of the following two cases:

\textit{Case 1:} The integers $n$ and $m$ are both nonzero.

\textit{Case 2:} The integers $n$ and $m$ are not both nonzero.

Let us first consider Case 1. In this case, the integers $n$ and $m$ are both
nonzero. Thus, (\ref{eq.prop.ent.primes.gcd.lcm}) yields%
\[
\operatorname{lcm}\left(  n,m\right)  =\prod_{p\text{ prime}}p^{\max\left\{
v_{p}\left(  n\right)  ,v_{p}\left(  m\right)  \right\}  }.
\]
In particular, the product $\prod_{p\text{ prime}}p^{\max\left\{  v_{p}\left(
n\right)  ,v_{p}\left(  m\right)  \right\}  }$ is well-defined. In other words:

\begin{itemize}
\item The number $\max\left\{  v_{p}\left(  n\right)  ,v_{p}\left(  m\right)
\right\}  $ is a nonnegative integer for each prime $p$;

\item all but finitely many primes $p$ satisfy $\max\left\{  v_{p}\left(
n\right)  ,v_{p}\left(  m\right)  \right\}  =0$.
\end{itemize}

(Both of these facts were proven during our proof of Proposition
\ref{prop.ent.primes.gcd}.)

Hence, Corollary \ref{cor.ent.primes.vp-of-can} (applied to
$\operatorname{lcm}\left(  n,m\right)  $ and $\max\left\{  v_{p}\left(
n\right)  ,v_{p}\left(  m\right)  \right\}  $ instead of $n$ and $b_{p}$)
shows that%
\[
v_{q}\left(  \operatorname{lcm}\left(  n,m\right)  \right)  =\max\left\{
v_{q}\left(  n\right)  ,v_{q}\left(  m\right)  \right\}
\ \ \ \ \ \ \ \ \ \ \text{for each prime }q.
\]
Renaming $q$ as $p$ in this statement, we obtain%
\[
v_{p}\left(  \operatorname{lcm}\left(  n,m\right)  \right)  =\max\left\{
v_{p}\left(  n\right)  ,v_{p}\left(  m\right)  \right\}
\ \ \ \ \ \ \ \ \ \ \text{for each prime }p\text{.}%
\]
Thus, (\ref{sol.ent.primes.gcd.1.b.goal}) is proven in Case 1.

Now, let us consider Case 2. In this case, the integers $n$ and $m$ are not
both nonzero. In other words, we have $n=0$ or $m=0$. Thus, we can WLOG assume
that $m=0$ (because in the case $n=0$, we can swap $n$ with $m$ without
changing the meaning of our claim, since $n$ and $m$ play symmetric
roles\footnote{Here we are using the fact that $\operatorname{lcm}\left(
n,m\right)  =\operatorname{lcm}\left(  m,n\right)  $ (which follows from
Exercise \ref{exe.ent.lcm.props1} \textbf{(a)}).}). Assume this.

Fix a prime $p$. The numbers $n,m$ are not all nonzero (since $m=0$). Hence,
$\operatorname{lcm}\left(  n,m\right)  =0$ (by the definition of
$\operatorname{lcm}\left(  n,m\right)  $). Thus,%
\[
v_{p}\left(  \operatorname{lcm}\left(  n,m\right)  \right)  =v_{p}\left(
0\right)  =\infty\ \ \ \ \ \ \ \ \ \ \left(  \text{by Definition
\ref{def.ent.prime.vp} \textbf{(b)}}\right)  .
\]
On the other hand, from $m=0$, we obtain $v_{p}\left(  m\right)  =v_{p}\left(
0\right)  =\infty$ (by Definition \ref{def.ent.prime.vp} \textbf{(b)}). Thus,%
\[
\max\left\{  v_{p}\left(  n\right)  ,\underbrace{v_{p}\left(  m\right)
}_{=\infty}\right\}  =\max\left\{  v_{p}\left(  n\right)  ,\infty\right\}
=\infty
\]
(by our rules for the symbol $\infty$). Comparing this with $v_{p}\left(
\operatorname{lcm}\left(  n,m\right)  \right)  =\infty$, we obtain
$v_{p}\left(  \operatorname{lcm}\left(  n,m\right)  \right)  =\max\left\{
v_{p}\left(  n\right)  ,v_{p}\left(  m\right)  \right\}  $.

Now, forget that we fixed $p$. We thus have proven that $v_{p}\left(
\operatorname{lcm}\left(  n,m\right)  \right)  =\max\left\{  v_{p}\left(
n\right)  ,v_{p}\left(  m\right)  \right\}  $ for each prime $p$. Thus,
(\ref{sol.ent.primes.gcd.1.b.goal}) is proven in Case 2.

We have now proven (\ref{sol.ent.primes.gcd.1.b.goal}) in each of the two
Cases 1 and 2. Thus, (\ref{sol.ent.primes.gcd.1.b.goal}) always holds. This
solves Exercise \ref{exe.ent.primes.gcd.1} \textbf{(b)}.
\end{proof}
\end{fineprint}

\subsection{Solution to Exercise \ref{exe.ent.primes.aa-1}}

\begin{fineprint}
\begin{proof}
[Solution to Exercise \ref{exe.ent.primes.aa-1}.]We have $a^{2}\equiv
1\operatorname{mod}p$. In other words, $p\mid a^{2}-1=\left(  a-1\right)
\left(  a+1\right)  $. Hence, Theorem \ref{thm.ent.primes.pab} (applied to
$a-1$ and $a+1$ instead of $a$ and $b$) yields that $p\mid a-1$ or $p\mid
a+1$. In view of the logical equivalences%
\[
\left(  p\mid a-1\right)  \ \Longleftrightarrow\ \left(  a\equiv
1\operatorname{mod}p\right)
\]
and%
\[
\left(  p\mid\underbrace{a+1}_{=a-\left(  -1\right)  }\right)
\ \Longleftrightarrow\ \left(  p\mid a-\left(  -1\right)  \right)
\ \Longleftrightarrow\ \left(  a\equiv-1\operatorname{mod}p\right)  ,
\]
this rewrites as follows: $a\equiv1\operatorname{mod}p$ or $a\equiv
-1\operatorname{mod}p$. This solves Exercise \ref{exe.ent.primes.aa-1}.
\end{proof}
\end{fineprint}

\subsection{Solution to Exercise \ref{exe.ent.phi.pk}}

\begin{fineprint}
\begin{proof}
[Solution to Exercise \ref{exe.ent.phi.pk}.]Let $M$ be the set $\left\{
1p,2p,\ldots,p^{k-1}p\right\}  =\left\{  cp\ \mid\ c\in\left\{  1,2,\ldots
,p^{k-1}\right\}  \right\}  $. This set $M$ has $p^{k-1}$ elements (since the
$p^{k-1}$ numbers $1p,2p,\ldots,p^{k-1}p$ are all distinct). In other words,
$\left\vert M\right\vert =p^{k-1}$. Also, $M\subseteq\left\{  1,2,\ldots
,p^{k}\right\}  $\ \ \ \ \footnote{\textit{Proof.} Let $m\in M$. Thus, $m\in
M=\left\{  1p,2p,\ldots,p^{k-1}p\right\}  $; in other words, $m=cp$ for some
$c\in\left\{  1,2,\ldots,p^{k-1}\right\}  $. Consider this $c$. From
$c\in\left\{  1,2,\ldots,p^{k-1}\right\}  $, we obtain $c\leq p^{k-1}$. We can
multiply this inequality by $p$ (since $p>0$) and thus obtain $cp\leq
p^{k-1}p=p^{k}$. Also, $cp$ is a positive integer (since $c$ and $p$ are
positive integers). Thus, $cp$ is a positive integer and $\leq p^{k}$. In
other words, $cp\in\left\{  1,2,\ldots,p^{k}\right\}  $. Thus, $m=cp\in
\left\{  1,2,\ldots,p^{k}\right\}  $.
\par
Now, forget that we fixed $m$. We thus have shown that $m\in\left\{
1,2,\ldots,p^{k}\right\}  $ for each $m\in M$. In other words, $M\subseteq
\left\{  1,2,\ldots,p^{k}\right\}  $.}. Hence,%
\begin{equation}
\left\vert \left\{  1,2,\ldots,p^{k}\right\}  \setminus M\right\vert
=\underbrace{\left\vert \left\{  1,2,\ldots,p^{k}\right\}  \right\vert
}_{=p^{k}}-\underbrace{\left\vert M\right\vert }_{=p^{k-1}}=p^{k}-p^{k-1}.
\label{sol.ent.phi.pk.0}%
\end{equation}


Next, we claim that%
\begin{equation}
\left\{  i\in\left\{  1,2,\ldots,p^{k}\right\}  \ \mid\ i\perp p^{k}\right\}
\subseteq\left\{  1,2,\ldots,p^{k}\right\}  \setminus M.
\label{sol.ent.phi.pk.1}%
\end{equation}


[\textit{Proof of (\ref{sol.ent.phi.pk.1}):} Let $a\in\left\{  i\in\left\{
1,2,\ldots,p^{k}\right\}  \ \mid\ i\perp p^{k}\right\}  $. In other words, $a$
is an element of $\left\{  1,2,\ldots,p^{k}\right\}  $ and satisfies $a\perp
p^{k}$.

Exercise \ref{exe.ent.primes.coprime-to-pk} shows that $a\perp p^{k}$ holds if
and only if $p\nmid a$. Hence, $p\nmid a$ (since $a\perp p^{k}$), and
therefore $a\notin M$\ \ \ \ \footnote{\textit{Proof.} Assume the contrary.
Thus, $a\in M=\left\{  1p,2p,\ldots,p^{k-1}p\right\}  $. In other words,
$a=cp$ for some $c\in\left\{  1,2,\ldots,p^{k-1}\right\}  $. Consider this
$c$. Clearly, $c$ is an integer; thus, from $a=cp=pc$, we obtain $p\mid a$.
But this contradicts $p\nmid a$. This contradiction shows that our assumption
was false, qed.}. Combining $a\in\left\{  1,2,\ldots,p^{k}\right\}  $ with
$a\notin M$, we obtain $a\in\left\{  1,2,\ldots,p^{k}\right\}  \setminus M$.

Now, forget that we fixed $a$. Thus, we have shown that $a\in\left\{
1,2,\ldots,p^{k}\right\}  \setminus M$ for each $a\in\left\{  i\in\left\{
1,2,\ldots,p^{k}\right\}  \ \mid\ i\perp p^{k}\right\}  $. In other words,
$\left\{  i\in\left\{  1,2,\ldots,p^{k}\right\}  \ \mid\ i\perp p^{k}\right\}
\subseteq\left\{  1,2,\ldots,p^{k}\right\}  \setminus M$. This proves
(\ref{sol.ent.phi.pk.1}).]

Furthermore, we have%
\begin{equation}
\left\{  1,2,\ldots,p^{k}\right\}  \setminus M\subseteq\left\{  i\in\left\{
1,2,\ldots,p^{k}\right\}  \ \mid\ i\perp p^{k}\right\}  .
\label{sol.ent.phi.pk.2}%
\end{equation}


[\textit{Proof of (\ref{sol.ent.phi.pk.2}):} Let $a\in\left\{  1,2,\ldots
,p^{k}\right\}  \setminus M$. In other words, $a\in\left\{  1,2,\ldots
,p^{k}\right\}  $ and $a\notin M$.

We have $p\nmid a$\ \ \ \ \footnote{\textit{Proof.} Assume the contrary. Thus,
$p\mid a$. In other words, $a=pc$ for some integer $c$. Consider this $c$. We
have $a=pc$, thus $c=a/p$ (since $p$ is nonzero). Also, $c=a/p>0$ (since $a$
and $p$ are positive). Hence, $c$ is a positive integer. Furthermore, from
$a\in\left\{  1,2,\ldots,p^{k}\right\}  $, we obtain $a\leq p^{k}$ and thus
$a/p\leq p^{k}/p=p^{k-1}$, so that $c=a/p\leq p^{k-1}$. Thus, $c\in\left\{
1,2,\ldots,p^{k-1}\right\}  $ (since $c$ is a positive integer) and therefore
$cp\in\left\{  1p,2p,\ldots,p^{k-1}p\right\}  =M$ (by the definition of $M$).
Now, $a=pc=cp\in M$; but this contradicts $a\notin M$. This contradiction
shows that our assumption was false, qed.}. But Exercise
\ref{exe.ent.primes.coprime-to-pk} shows that $a\perp p^{k}$ holds if and only
if $p\nmid a$. Hence, $a\perp p^{k}$ (since $p\nmid a$). Now, we know that $a$
is an $i\in\left\{  1,2,\ldots,p^{k}\right\}  $ satisfying $i\perp p^{k}$
(since $a\in\left\{  1,2,\ldots,p^{k}\right\}  $ and $a\perp p^{k}$). In other
words, $a\in\left\{  i\in\left\{  1,2,\ldots,p^{k}\right\}  \ \mid\ i\perp
p^{k}\right\}  $.

Now, forget that we fixed $a$. Thus, we have shown that $a\in\left\{
i\in\left\{  1,2,\ldots,p^{k}\right\}  \ \mid\ i\perp p^{k}\right\}  $ for
each $a\in\left\{  1,2,\ldots,p^{k}\right\}  \setminus M$. In other words,
$\left\{  1,2,\ldots,p^{k}\right\}  \setminus M\subseteq\left\{  i\in\left\{
1,2,\ldots,p^{k}\right\}  \ \mid\ i\perp p^{k}\right\}  $. This proves
(\ref{sol.ent.phi.pk.2}).]

Combining (\ref{sol.ent.phi.pk.1}) with (\ref{sol.ent.phi.pk.2}), we obtain%
\[
\left\{  i\in\left\{  1,2,\ldots,p^{k}\right\}  \ \mid\ i\perp p^{k}\right\}
=\left\{  1,2,\ldots,p^{k}\right\}  \setminus M.
\]


Now, (\ref{eq.def.ent.phi.phi.1}) (applied to $n=p^{k}$) yields%
\begin{align*}
\phi\left(  p^{k}\right)   &  =\left\vert \underbrace{\left\{  i\in\left\{
1,2,\ldots,p^{k}\right\}  \ \mid\ i\perp p^{k}\right\}  }_{=\left\{
1,2,\ldots,p^{k}\right\}  \setminus M}\right\vert =\left\vert \left\{
1,2,\ldots,p^{k}\right\}  \setminus M\right\vert \\
&  =\underbrace{p^{k}}_{=pp^{k-1}}-p^{k-1}\ \ \ \ \ \ \ \ \ \ \left(  \text{by
(\ref{sol.ent.phi.pk.0})}\right) \\
&  =pp^{k-1}-p^{k-1}=\left(  p-1\right)  p^{k-1}.
\end{align*}
This solves Exercise \ref{exe.ent.phi.pk}.
\end{proof}
\end{fineprint}

\subsection{Solution to Exercise \ref{exe.ent.phi.even}}

\begin{fineprint}
\begin{proof}
[Solution to Exercise \ref{exe.ent.phi.even}.]The following solution is mostly
a calque of the proof of Proposition \ref{prop.ent.phi.ghosts} we gave above,
but using subtraction instead of division and using the relation
\textquotedblleft coprime\textquotedblright\ instead of \textquotedblleft
divides\textquotedblright.

Clearly, $n$ is a positive integer (since $n>2$), so that $\phi\left(
n\right)  $ is well-defined.

Let $C=\left\{  i\in\left\{  1,2,\ldots,n\right\}  \ \mid\ i\perp n\right\}
$. An element $c$ of $C$ is said to be

\begin{itemize}
\item \textit{small} if $c<n-c$;

\item \textit{medium} if $c=n-c$;

\item \textit{large} if $c>n-c$.
\end{itemize}

Now, it is easy to see that the set $C$ has no medium
elements\footnote{\textit{Proof.} Let $c$ be a medium element of $C$. We shall
derive a contradiction.
\par
We have $c\in C=\left\{  i\in\left\{  1,2,\ldots,n\right\}  \ \mid\ i\perp
n\right\}  $. In other words, $c$ is an element of $\left\{  1,2,\ldots
,n\right\}  $ and satisfies $c\perp n$. Clearly, the integer $c$ is positive
(since $c\in\left\{  1,2,\ldots,n\right\}  $) and we have $\gcd\left(
c,n\right)  =1$ (since $c\perp n$).
\par
Furthermore, $c$ is medium; in other words, $c=n-c$. Thus, $2c=n$, so that
$n=2c=c\cdot2$. Hence, $c\mid n$. Thus, Proposition \ref{prop.ent.gcd.props1}
\textbf{(i)} (applied to $a=c$ and $b=n$) yields $\gcd\left(  c,n\right)
=\left\vert c\right\vert =c$ (since $c$ is positive). But from $2c=n$, we also
obtain $c=n/2>2/2$ (since $n>2$). Thus, $\gcd\left(  c,n\right)  =c>2/2=1$.
This contradicts $\gcd\left(  c,n\right)  =1$.
\par
Forget that we fixed $c$. We thus have obtained a contradiction for each
medium element $c$ of $C$. Thus, there are no such elements. In other words,
the set $C$ has no medium elements.}. In other words,%
\[
\left\vert \left\{  \text{medium elements of }C\right\}  \right\vert =0.
\]


Furthermore, if $c\in C$, then $n-c\in C$\ \ \ \ \footnote{\textit{Proof.} Let
$c\in C$.
\par
We have $c\in C=\left\{  i\in\left\{  1,2,\ldots,n\right\}  \ \mid\ i\perp
n\right\}  $. In other words, $c$ is an element of $\left\{  1,2,\ldots
,n\right\}  $ and satisfies $c\perp n$. From $c\perp n$, we obtain $n\perp c$
(by Proposition \ref{prop.ent.coprime.perp-symm}) and thus $\gcd\left(
n,c\right)  =1$.
\par
But $n\mid n$. Hence, Proposition \ref{prop.ent.gcd.props1} \textbf{(i)}
(applied to $a=n$ and $b=n$) yields $\gcd\left(  n,n\right)  =\left\vert
n\right\vert =n$ (since $n$ is positive). Thus, $\gcd\left(  n,n\right)
=n>2>1$, so that $\gcd\left(  n,n\right)  \neq1=\gcd\left(  n,c\right)  $ and
therefore $n\neq c$. In other words, $c\neq n$.
\par
Combining $c\in\left\{  1,2,\ldots,n\right\}  $ with $c\neq n$, we find
$c\in\left\{  1,2,\ldots,n\right\}  \setminus\left\{  n\right\}  =\left\{
1,2,\ldots,n-1\right\}  $. Hence, $n-c\in\left\{  1,2,\ldots,n-1\right\}
\subseteq\left\{  1,2,\ldots,n\right\}  $.
\par
We have $\underbrace{n}_{\equiv0\operatorname{mod}n}-c\equiv
-c\operatorname{mod}n$. Hence, Proposition \ref{prop.ent.gcd.props1}
\textbf{(d)} (applied to $n$, $n-c$ and $-c$ instead of $a$, $b$ and $c$)
yields
\begin{align*}
\gcd\left(  n,n-c\right)   &  =\gcd\left(  n,-c\right)  =\gcd\left(
n,c\right)  \ \ \ \ \ \ \ \ \ \ \left(  \text{by Proposition
\ref{prop.ent.gcd.props1} \textbf{(h)} (applied to }a=n\text{ and
}b=-c\text{)}\right) \\
&  =1.
\end{align*}
In other words, $n\perp n-c$. In other words, $n-c\perp n$ (by Proposition
\ref{prop.ent.coprime.perp-symm}).
\par
Combining this with $n-c\in\left\{  1,2,\ldots,n\right\}  $, we conclude that
$n-c$ is an $i\in\left\{  1,2,\ldots,n\right\}  $ satisfying $i\perp n$. In
other words, $n-c\in\left\{  i\in\left\{  1,2,\ldots,n\right\}  \ \mid\ i\perp
n\right\}  =C$. Qed.}. This allows us to define a map%
\begin{align*}
F:C  &  \rightarrow C,\\
c  &  \mapsto n-c.
\end{align*}
This map $F$ has the property that $F\circ F=\operatorname*{id}$, because each
$c\in C$ satisfies%
\begin{align*}
\left(  F\circ F\right)  \left(  c\right)   &  =F\left(  \underbrace{F\left(
c\right)  }_{\substack{=n-c\\\text{(by the definition of }F\text{)}}}\right)
=F\left(  n-c\right) \\
&  =n-\left(  n-c\right)  \ \ \ \ \ \ \ \ \ \ \left(  \text{by the definition
of }F\right) \\
&  =c=\operatorname*{id}\left(  c\right)  .
\end{align*}
Hence, the map $F$ is inverse to itself. Thus, the map $F$ is invertible,
i.e., is a bijection.

It is easy to see that if $c$ is a small element of $C$, then $F\left(
c\right)  $ is a large element of $C$\ \ \ \ \footnote{\textit{Proof.} Let $c$
be a small element of $C$. Thus, $c<n-c$. Hence, $n-c>c=n-\left(  n-c\right)
$. In view of $F\left(  c\right)  =n-c$, this rewrites as $F\left(  c\right)
>n-F\left(  c\right)  $. In other words, $F\left(  c\right)  $ is a large
element of $C$ (by the definition of \textquotedblleft large\textquotedblright%
). Qed.}. Hence, the map%
\begin{align*}
F^{+}:\left\{  \text{small elements of }C\right\}   &  \rightarrow\left\{
\text{large elements of }C\right\}  ,\\
c  &  \mapsto F\left(  c\right)
\end{align*}
is well-defined. Similarly, the map%
\begin{align*}
F^{-}:\left\{  \text{large elements of }C\right\}   &  \rightarrow\left\{
\text{small elements of }C\right\}  ,\\
c  &  \mapsto F\left(  c\right)
\end{align*}
is well-defined. These two maps $F^{+}$ and $F^{-}$ are both restrictions of
the map $F$, and thus are mutually inverse (since the map $F$ is inverse to
itself). Hence, the map $F^{+}$ is invertible, i.e., is a bijection. Thus, we
have found a bijection from $\left\{  \text{small elements of }C\right\}  $ to
$\left\{  \text{large elements of }C\right\}  $ (namely, $F^{+}$). Therefore,%
\[
\left\vert \left\{  \text{small elements of }C\right\}  \right\vert
=\left\vert \left\{  \text{large elements of }C\right\}  \right\vert .
\]


Now, (\ref{eq.def.ent.phi.phi.1}) yields%
\begin{align*}
\phi\left(  n\right)   &  =\left\vert \underbrace{\left\{  i\in\left\{
1,2,\ldots,n\right\}  \ \mid\ i\perp n\right\}  }_{=C}\right\vert =\left\vert
C\right\vert \\
&  =\underbrace{\left\vert \left\{  \text{small elements of }C\right\}
\right\vert }_{=\left\vert \left\{  \text{large elements of }C\right\}
\right\vert }+\underbrace{\left\vert \left\{  \text{medium elements of
}C\right\}  \right\vert }_{=0}+\left\vert \left\{  \text{large elements of
}C\right\}  \right\vert \\
&  \ \ \ \ \ \ \ \ \ \ \left(
\begin{array}
[c]{c}%
\text{since each element of }C\text{ is either small or medium or large}\\
\text{(and there is no overlap between these three classes of elements)}%
\end{array}
\right) \\
&  =\left\vert \left\{  \text{large elements of }C\right\}  \right\vert
+\left\vert \left\{  \text{large elements of }C\right\}  \right\vert \\
&  =2\cdot\left\vert \left\{  \text{large elements of }C\right\}  \right\vert
.
\end{align*}
Thus, $2\mid\phi\left(  n\right)  $ (since $\left\vert \left\{  \text{large
elements of }C\right\}  \right\vert $ is an integer). In other words,
$\phi\left(  n\right)  $ is even. This solves Exercise \ref{exe.ent.phi.even}.
\end{proof}
\end{fineprint}

\subsection{Solution to Exercise \ref{exe.ent.wilson.gauss}}

\begin{fineprint}
\begin{proof}
[Solution to Exercise \ref{exe.ent.wilson.gauss}.]Theorem \ref{thm.ent.wilson}
yields
\[
\left(  p-1\right)  !\equiv-1\equiv p-1\operatorname{mod}p
\]
(since $p-1\equiv-1\operatorname{mod}p$). In other words, $p\mid\left(
p-1\right)  !-\left(  p-1\right)  $.

On the other hand, $p>1$ (since $p$ is a prime). Now, the definition of
$\left(  p-1\right)  !$ yields%
\[
\left(  p-1\right)  !=1\cdot2\cdot\cdots\cdot\left(  p-1\right)  =\left(
1\cdot2\cdot\cdots\cdot\left(  p-2\right)  \right)  \cdot\left(  p-1\right)
.
\]
Subtracting $p-1$ from both sides of this equality, we obtain%
\begin{align*}
\left(  p-1\right)  !-\left(  p-1\right)   &  =\left(  1\cdot2\cdot\cdots
\cdot\left(  p-2\right)  \right)  \cdot\left(  p-1\right)  -\left(  p-1\right)
\\
&  =\left(  1\cdot2\cdot\cdots\cdot\left(  p-2\right)  -1\right)  \cdot\left(
p-1\right) \\
&  =\left(  p-1\right)  \cdot\left(  1\cdot2\cdot\cdots\cdot\left(
p-2\right)  -1\right)  .
\end{align*}
Hence, $p-1\mid\left(  p-1\right)  !-\left(  p-1\right)  $ (since
$1\cdot2\cdot\cdots\cdot\left(  p-2\right)  -1$ is an integer).

Now, it is easy to see that $p-1\perp p$\ \ \ \ \footnote{\textit{Proof.}
Proposition \ref{prop.ent.gcd.props1} \textbf{(c)} (applied to $a=p-1$, $b=1$
and $u=1$) yields $\gcd\left(  p-1,1\left(  p-1\right)  +1\right)
=\gcd\left(  p-1,1\right)  $. But Proposition \ref{prop.ent.gcd.props1}
\textbf{(f)} (applied to $a=p-1$ and $b=1$) yields $\gcd\left(  p-1,1\right)
\mid p-1$ and $\gcd\left(  p-1,1\right)  \mid1$. Since $\gcd\left(
p-1,1\right)  $ is a nonnegative integer satisfying $\gcd\left(  p-1,1\right)
\mid1$, we obtain $\gcd\left(  p-1,1\right)  =1$ (by Exercise
\ref{exe.ent.div.g|1}, applied to $g=\gcd\left(  p-1,1\right)  $). Hence,
\[
\gcd\left(  p-1,\underbrace{p}_{=1\left(  p-1\right)  +1}\right)  =\gcd\left(
p-1,1\left(  p-1\right)  +1\right)  =\gcd\left(  p-1,1\right)  =1.
\]
In other words, $p-1\perp p$.}. Furthermore, recall that $p-1\mid\left(
p-1\right)  !-\left(  p-1\right)  $ and $p\mid\left(  p-1\right)  !-\left(
p-1\right)  $. Hence, Theorem \ref{thm.ent.coprime.combine} (applied to
$a=p-1$, $b=p$ and $c=\left(  p-1\right)  !-\left(  p-1\right)  $) yields%
\begin{equation}
\left(  p-1\right)  p\mid\left(  p-1\right)  !-\left(  p-1\right)  .
\label{sol.ent.wilson.gauss.at}%
\end{equation}


But Proposition \ref{prop.ent.1+2+...+n} (applied to $n=p-1$) yields%
\[
1+2+\cdots+\left(  p-1\right)  =\dfrac{\left(  p-1\right)  \left(  \left(
p-1\right)  +1\right)  }{2}=\dfrac{\left(  p-1\right)  p}{2}.
\]
Hence, $\left(  p-1\right)  p=\left(  1+2+\cdots+\left(  p-1\right)  \right)
\cdot2$, so that
\[
1+2+\cdots+\left(  p-1\right)  \mid\left(  p-1\right)  p\mid\left(
p-1\right)  !-\left(  p-1\right)
\]
(by (\ref{sol.ent.wilson.gauss.at})). In other words, $\left(  p-1\right)
!\equiv p-1\operatorname{mod}1+2+\cdots+\left(  p-1\right)  $. This solves
Exercise \ref{exe.ent.wilson.gauss}.
\end{proof}
\end{fineprint}

\subsection{Solution to Exercise \ref{exe.binom.k!divprod}}

\begin{fineprint}
\begin{proof}
[Solution to Exercise \ref{exe.binom.k!divprod}.]A product of $k$ consecutive
integers always has the form \newline$\left(  a+1\right)  \left(  a+2\right)
\cdots\left(  a+k\right)  $ for some $a\in\mathbb{Z}$. Thus, we must prove
that $\left(  a+1\right)  \left(  a+2\right)  \cdots\left(  a+k\right)  $ is
divisible by $k!$ for each $a\in\mathbb{Z}$.

Let $a\in\mathbb{Z}$. We must prove that $\left(  a+1\right)  \left(
a+2\right)  \cdots\left(  a+k\right)  $ is divisible by $k!$.

Proposition \ref{prop.binom.Z->Z} (applied to $n=a+k$) yields that
$\dbinom{a+k}{k}$ is an integer. Now, the definition of $\dbinom{a+k}{k}$
yields%
\[
\dbinom{a+k}{k}=\dfrac{\left(  a+k\right)  \left(  a+k-1\right)  \left(
a+k-2\right)  \cdots\left(  a+k-k+1\right)  }{k!}.
\]
Multiplying both sides of this equality by $k!$, we find%
\begin{align*}
k!\dbinom{a+k}{k}  &  =\left(  a+k\right)  \left(  a+k-1\right)  \left(
a+k-2\right)  \cdots\left(  a+k-k+1\right) \\
&  =\left(  a+k\right)  \left(  a+k-1\right)  \left(  a+k-2\right)
\cdots\left(  a+1\right) \\
&  =\left(  a+1\right)  \left(  a+2\right)  \cdots\left(  a+k\right)
\end{align*}
(here, we have reversed the order of the factors in the product). Thus,
$\left(  a+1\right)  \left(  a+2\right)  \cdots\left(  a+k\right)
=k!\dbinom{a+k}{k}$. Since $\dbinom{a+k}{k}$ is an integer, this equality
yields that $\left(  a+1\right)  \left(  a+2\right)  \cdots\left(  a+k\right)
$ is divisible by $k!$. This solves Exercise \ref{exe.binom.k!divprod}.
\end{proof}
\end{fineprint}

\subsection{Solution to Exercise \ref{exe.eqrel.eqcl.dj}}

\begin{fineprint}
\begin{proof}
[Solution to Exercise \ref{exe.eqrel.eqcl.dj}.]Let $\alpha$ and $\beta$ be two
equivalence classes of $\sim$. Thus, $\alpha=\left[  x\right]  _{\sim}$ and
$\beta=\left[  y\right]  _{\sim}$ for two elements $x$ and $y$ of $S$ (by the
definition of \textquotedblleft equivalence classes of $\sim$%
\textquotedblright). Consider these $x$ and $y$.

If $x\sim y$, then the classes $\left[  x\right]  _{\sim}$ and $\left[
y\right]  _{\sim}$ are identical (by Theorem \ref{thm.eqrel.eqcl.disj}
\textbf{(a)}). Otherwise, they are disjoint (by Theorem
\ref{thm.eqrel.eqcl.disj} \textbf{(b)}). Thus, in either case, the classes
$\left[  x\right]  _{\sim}$ and $\left[  y\right]  _{\sim}$ are either
identical or disjoint. In view of $\alpha=\left[  x\right]  _{\sim}$ and
$\beta=\left[  y\right]  _{\sim}$, this rewrites as follows: The classes
$\alpha$ and $\beta$ are either identical or disjoint.

Now, forget that we fixed $\alpha$ and $\beta$. We thus have shown that if
$\alpha$ and $\beta$ are two equivalence classes of $\sim$, then $\alpha$ and
$\beta$ are either identical or disjoint. This solves Exercise
\ref{exe.eqrel.eqcl.dj}.
\end{proof}
\end{fineprint}

\subsection{Solution to Exercise \ref{exe.eqrel.eqcl.perm.eq}}

\begin{fineprint}
\begin{proof}
[Solution to Exercise \ref{exe.eqrel.eqcl.perm.eq}.]Indeed:

\begin{itemize}
\item The relation $\underset{\operatorname*{perm}}{\sim}$ is reflexive.

[\textit{Proof:} Informally, this is obvious, because each $k$-tuple is a
permutation of itself (just permute it by leaving all its entries in place).
The formal version of this argument proceeds as follows:

Let $\mathbf{a}\in A^{k}$. Write the $k$-tuple $\mathbf{a}$ in the form
$\mathbf{a}=\left(  a_{1},a_{2},\ldots,a_{k}\right)  $ for some $a_{1}%
,a_{2},\ldots,a_{k}\in A$. Then, $\mathbf{a}=\left(  a_{1},a_{2},\ldots
,a_{k}\right)  =\left(  a_{\operatorname*{id}\left(  1\right)  }%
,a_{\operatorname*{id}\left(  2\right)  },\ldots,a_{\operatorname*{id}\left(
k\right)  }\right)  $. Hence, the $k$-tuple $\mathbf{a}$ has the form $\left(
a_{\sigma\left(  1\right)  },a_{\sigma\left(  2\right)  },\ldots
,a_{\sigma\left(  k\right)  }\right)  $ for some permutation $\sigma$ of the
set $\left\{  1,2,\ldots,k\right\}  $ (namely, for $\sigma=\operatorname*{id}%
$). In other words, $\mathbf{a}$ is a permutation of the $k$-tuple $\left(
a_{1},a_{2},\ldots,a_{k}\right)  $ (by Definition
\ref{def.comb.tuples.perm-tup}). In other words, $\mathbf{a}$ is a permutation
of the $k$-tuple $\mathbf{a}$ (since $\mathbf{a}=\left(  a_{1},a_{2}%
,\ldots,a_{k}\right)  $). In other words, $\mathbf{a}%
\underset{\operatorname*{perm}}{\sim}\mathbf{a}$ (by the definition of the
relation $\underset{\operatorname*{perm}}{\sim}$).

Now, forget that we fixed $\mathbf{a}$. We thus have proven that every
$\mathbf{a}\in A^{k}$ satisfies $\mathbf{a}\underset{\operatorname*{perm}%
}{\sim}\mathbf{a}$. In other words, the relation
$\underset{\operatorname*{perm}}{\sim}$ is reflexive.]

\item The relation $\underset{\operatorname*{perm}}{\sim}$ is symmetric.

[\textit{Proof:} Let $\mathbf{a},\mathbf{b}\in A^{k}$ be such that
$\mathbf{a}\underset{\operatorname*{perm}}{\sim}\mathbf{b}$. We shall prove
that $\mathbf{b}\underset{\operatorname*{perm}}{\sim}\mathbf{a}$.

Write the $k$-tuple $\mathbf{a}$ in the form $\mathbf{a}=\left(  a_{1}%
,a_{2},\ldots,a_{k}\right)  $ for some $a_{1},a_{2},\ldots,a_{k}\in A$. Write
the $k$-tuple $\mathbf{b}$ in the form $\mathbf{b}=\left(  b_{1},b_{2}%
,\ldots,b_{k}\right)  $ for some $b_{1},b_{2},\ldots,b_{k}\in A$. We have
$\mathbf{a}\underset{\operatorname*{perm}}{\sim}\mathbf{b}$. In other words,
$\mathbf{a}$ is a permutation of $\mathbf{b}$ (by the definition of the
relation $\underset{\operatorname*{perm}}{\sim}$). In other words, $\left(
a_{1},a_{2},\ldots,a_{k}\right)  $ is a permutation of $\left(  b_{1}%
,b_{2},\ldots,b_{k}\right)  $ (since $\mathbf{a}=\left(  a_{1},a_{2}%
,\ldots,a_{k}\right)  $ and $\mathbf{b}=\left(  b_{1},b_{2},\ldots
,b_{k}\right)  $). Hence, Proposition \ref{prop.comb.tuples.perm.symm}
(applied to $p_{i}=b_{i}$ and $q_{i}=a_{i}$) shows that $\left(  b_{1}%
,b_{2},\ldots,b_{k}\right)  $ is a permutation of $\left(  a_{1},a_{2}%
,\ldots,a_{k}\right)  $. In other words, $\mathbf{b}$ is a permutation of
$\mathbf{a}$ (since $\mathbf{a}=\left(  a_{1},a_{2},\ldots,a_{k}\right)  $ and
$\mathbf{b}=\left(  b_{1},b_{2},\ldots,b_{k}\right)  $). In other words,
$\mathbf{b}\underset{\operatorname*{perm}}{\sim}\mathbf{a}$.

Forget that we fixed $\mathbf{a}$ and $\mathbf{b}$. We thus have shown that
every $\mathbf{a},\mathbf{b}\in A^{k}$ satisfying $\mathbf{a}%
\underset{\operatorname*{perm}}{\sim}\mathbf{b}$ satisfy $\mathbf{b}%
\underset{\operatorname*{perm}}{\sim}\mathbf{a}$. In other words, the relation
$\underset{\operatorname*{perm}}{\sim}$ is symmetric.]

\item The relation $\underset{\operatorname*{perm}}{\sim}$ is transitive.

[\textit{Proof:} Let $\mathbf{a},\mathbf{b},\mathbf{c}\in A^{k}$ be such that
$\mathbf{a}\underset{\operatorname*{perm}}{\sim}\mathbf{b}$ and $\mathbf{b}%
\underset{\operatorname*{perm}}{\sim}\mathbf{c}$. We shall prove that
$\mathbf{a}\underset{\operatorname*{perm}}{\sim}\mathbf{c}$.

Write the $k$-tuple $\mathbf{a}$ in the form $\mathbf{a}=\left(  a_{1}%
,a_{2},\ldots,a_{k}\right)  $ for some $a_{1},a_{2},\ldots,a_{k}\in A$. Write
the $k$-tuple $\mathbf{b}$ in the form $\mathbf{b}=\left(  b_{1},b_{2}%
,\ldots,b_{k}\right)  $ for some $b_{1},b_{2},\ldots,b_{k}\in A$. Write the
$k$-tuple $\mathbf{c}$ in the form $\mathbf{c}=\left(  c_{1},c_{2}%
,\ldots,c_{k}\right)  $ for some $c_{1},c_{2},\ldots,c_{k}\in A$.

We have $\mathbf{a}\underset{\operatorname*{perm}}{\sim}\mathbf{b}$. In other
words, $\mathbf{a}$ is a permutation of $\mathbf{b}$ (by the definition of the
relation $\underset{\operatorname*{perm}}{\sim}$). In other words, $\left(
a_{1},a_{2},\ldots,a_{k}\right)  $ is a permutation of $\left(  b_{1}%
,b_{2},\ldots,b_{k}\right)  $ (since $\mathbf{a}=\left(  a_{1},a_{2}%
,\ldots,a_{k}\right)  $ and $\mathbf{b}=\left(  b_{1},b_{2},\ldots
,b_{k}\right)  $). In other words, the $k$-tuple $\left(  a_{1},a_{2}%
,\ldots,a_{k}\right)  $ has the form $\left(  b_{\sigma\left(  1\right)
},b_{\sigma\left(  2\right)  },\ldots,b_{\sigma\left(  k\right)  }\right)  $
for some permutation $\sigma$ of the set $\left\{  1,2,\ldots,k\right\}  $ (by
Definition \ref{def.comb.tuples.perm-tup}). Consider this $\sigma$, and denote
it by $\lambda$. Thus, $\lambda$ is a permutation of $\left\{  1,2,\ldots
,k\right\}  $ and has the property that $\left(  a_{1},a_{2},\ldots
,a_{k}\right)  =\left(  b_{\lambda\left(  1\right)  },b_{\lambda\left(
2\right)  },\ldots,b_{\lambda\left(  k\right)  }\right)  $. Likewise, we can
find a permutation $\mu$ of $\left\{  1,2,\ldots,k\right\}  $ with the
property that $\left(  b_{1},b_{2},\ldots,b_{k}\right)  =\left(  c_{\mu\left(
1\right)  },c_{\mu\left(  2\right)  },\ldots,c_{\mu\left(  k\right)  }\right)
$ (because of our assumption that $\mathbf{b}\underset{\operatorname*{perm}%
}{\sim}\mathbf{c}$). Consider this $\mu$ as well.

Now $\mu$ and $\lambda$ are permutations of the set $\left\{  1,2,\ldots
,k\right\}  $, that is, bijective maps $\left\{  1,2,\ldots,k\right\}
\rightarrow\left\{  1,2,\ldots,k\right\}  $. Hence, their composition
$\mu\circ\lambda$ is a bijective map $\left\{  1,2,\ldots,k\right\}
\rightarrow\left\{  1,2,\ldots,k\right\}  $ as well, i.e., is a permutation of
the set $\left\{  1,2,\ldots,k\right\}  $.

Recall that $\left(  b_{1},b_{2},\ldots,b_{k}\right)  =\left(  c_{\mu\left(
1\right)  },c_{\mu\left(  2\right)  },\ldots,c_{\mu\left(  k\right)  }\right)
$. In other words, each $j\in\left\{  1,2,\ldots,k\right\}  $ satisfies%
\begin{equation}
b_{j}=c_{\mu\left(  j\right)  }. \label{sol.eqrel.eqcl.perm.eq.trans-bc}%
\end{equation}


Also, $\left(  a_{1},a_{2},\ldots,a_{k}\right)  =\left(  b_{\lambda\left(
1\right)  },b_{\lambda\left(  2\right)  },\ldots,b_{\lambda\left(  k\right)
}\right)  $. Hence, each $i\in\left\{  1,2,\ldots,k\right\}  $ satisfies%
\begin{align*}
a_{i}  &  =b_{\lambda\left(  i\right)  }=c_{\mu\left(  \lambda\left(
i\right)  \right)  }\ \ \ \ \ \ \ \ \ \ \left(  \text{by
(\ref{sol.eqrel.eqcl.perm.eq.trans-bc}), applied to }j=\lambda\left(
i\right)  \right) \\
&  =c_{\left(  \mu\circ\lambda\right)  \left(  i\right)  }.
\end{align*}
In other words, we have $\left(  a_{1},a_{2},\ldots,a_{k}\right)  =\left(
c_{\left(  \mu\circ\lambda\right)  \left(  1\right)  },c_{\left(  \mu
\circ\lambda\right)  \left(  2\right)  },\ldots,c_{\left(  \mu\circ
\lambda\right)  \left(  k\right)  }\right)  $. Hence, the $k$-tuple $\left(
a_{1},a_{2},\ldots,a_{k}\right)  $ has the form $\left(  c_{\sigma\left(
1\right)  },c_{\sigma\left(  2\right)  },\ldots,c_{\sigma\left(  k\right)
}\right)  $ for some permutation $\sigma$ of the set $\left\{  1,2,\ldots
,k\right\}  $ (namely, for $\sigma=\mu\circ\lambda$). In other words, the
$k$-tuple $\left(  a_{1},a_{2},\ldots,a_{k}\right)  $ is a permutation of
$\left(  c_{1},c_{2},\ldots,c_{k}\right)  $ (by Definition
\ref{def.comb.tuples.perm-tup}). In other words, $\mathbf{a}$ is a permutation
of $\mathbf{c}$ (since $\mathbf{a}=\left(  a_{1},a_{2},\ldots,a_{k}\right)  $
and $\mathbf{c}=\left(  c_{1},c_{2},\ldots,c_{k}\right)  $). In other words,
$\mathbf{a}\underset{\operatorname*{perm}}{\sim}\mathbf{c}$.

Forget that we fixed $\mathbf{a},\mathbf{b},\mathbf{c}$. We thus have shown
that every $\mathbf{a},\mathbf{b},\mathbf{c}\in A^{k}$ satisfying
$\mathbf{a}\underset{\operatorname*{perm}}{\sim}\mathbf{b}$ and $\mathbf{b}%
\underset{\operatorname*{perm}}{\sim}\mathbf{c}$ satisfy $\mathbf{a}%
\underset{\operatorname*{perm}}{\sim}\mathbf{c}$. In other words, the relation
$\underset{\operatorname*{perm}}{\sim}$ is transitive.]
\end{itemize}

We now know that the relation $\underset{\operatorname*{perm}}{\sim}$ is
reflexive, symmetric and transitive. In other words,
$\underset{\operatorname*{perm}}{\sim}$ is an equivalence relation. This
solves Exercise \ref{exe.eqrel.eqcl.perm.eq}.
\end{proof}
\end{fineprint}

\subsection{Solution to Exercise \ref{exe.eqrel.quot.wp}}

\begin{fineprint}
\begin{proof}
[Solution to Exercise \ref{exe.eqrel.quot.wp}.]\textbf{(a)} Let $r$ be a
nonzero rational number. We must prove that the integer $w_{p}\left(
r\right)  $ is well-defined. Recall that we have defined $w_{p}\left(
r\right)  $ by setting $w_{p}\left(  r\right)  =v_{p}\left(  a\right)
-v_{p}\left(  b\right)  $, where we write $r$ in the form $r=a/b$ for two
nonzero integers $a$ and $b$. In order to prove that $w_{p}\left(  r\right)  $
is well-defined, we must thus verify the following three claims:

\begin{statement}
\textit{Claim 1:} It is possible to write $r$ in the form $r=a/b$ for two
nonzero integers $a$ and $b$.
\end{statement}

\begin{statement}
\textit{Claim 2:} If we write $r$ in the form $r=a/b$ for two nonzero integers
$a$ and $b$, then $v_{p}\left(  a\right)  -v_{p}\left(  b\right)  $ is a
well-defined integer.\footnote{This needs saying, because $p$-valuations can
be $\infty$ and thus their differences may fail to be well-defined integers
(for example, $\infty-\infty$ is not even well-defined).}
\end{statement}

\begin{statement}
\textit{Claim 3:} If we write $r$ in the form $r=a/b$ for two nonzero integers
$a$ and $b$, then the integer $v_{p}\left(  a\right)  -v_{p}\left(  b\right)
$ depends only on $p$ and $r$ (but not on $a$ and $b$).
\end{statement}

Claim 1 and Claim 2 are easy to verify:

[\textit{Proof of Claim 1:} We know that $r$ is a rational number. Hence, we
can write $r$ in the form $r=c/d$ for some integer $c$ and some nonzero
integer $d$. Consider these $c$ and $d$. If we had $c=0$, then we would have
$r=\underbrace{c}_{=0}/d=0$; but this would contradict the fact that $r$ is
nonzero. Hence, we cannot have $c=0$. Thus, $c$ is nonzero. Thus, there exist
two nonzero integers $a$ and $b$ such that $r=a/b$ (namely, $a=c$ and $b=d$).
In other words, it is possible to write $r$ in the form $r=a/b$ for two
nonzero integers $a$ and $b$. This proves Claim 1.]

[\textit{Proof of Claim 2:} Assume that $r$ is written in the form $r=a/b$ for
two nonzero integers $a$ and $b$. Definition \ref{def.ent.prime.vp}
\textbf{(a)} shows that $v_{p}\left(  n\right)  \in\mathbb{N}$ for each
nonzero integer $n$. Thus, $v_{p}\left(  a\right)  \in\mathbb{N}$ (since $a$
is nonzero) and $v_{p}\left(  b\right)  \in\mathbb{N}$ (since $b$ is nonzero).
Hence, $\underbrace{v_{p}\left(  a\right)  }_{\in\mathbb{N}}-\underbrace{v_{p}%
\left(  b\right)  }_{\in\mathbb{N}}\in\mathbb{Z}$. In other words,
$v_{p}\left(  a\right)  -v_{p}\left(  b\right)  $ is a well-defined integer.
This proves Claim 2.]

It remains to prove Claim 3. Clearly, Claim 3 can be restated as folllows:

\begin{statement}
\textit{Claim 4:} Let $\left(  a_{1},b_{1}\right)  $ and $\left(  a_{2}%
,b_{2}\right)  $ be two pairs $\left(  a,b\right)  $ of nonzero integers $a$
and $b$ satisfying $r=a/b$. Then, $v_{p}\left(  a_{1}\right)  -v_{p}\left(
b_{1}\right)  =v_{p}\left(  a_{2}\right)  -v_{p}\left(  b_{2}\right)  $.
\end{statement}

[\textit{Proof of Claim 4:} We have assumed that $\left(  a_{1},b_{1}\right)
$ is a pair $\left(  a,b\right)  $ of nonzero integers $a$ and $b$ satisfying
$r=a/b$. In other words, $\left(  a_{1},b_{1}\right)  $ is a pair of nonzero
integers satisfying $r=a_{1}/b_{1}$. Similarly, $\left(  a_{2},b_{2}\right)  $
is a pair of nonzero integers satisfying $r=a_{2}/b_{2}$.

We have $r=a_{1}/b_{1}$, thus $a_{1}/b_{1}=r=a_{2}/b_{2}$. Multiplying this
equality by $b_{1}b_{2}$, we find $a_{1}b_{2}=a_{2}b_{1}$. Theorem
\ref{thm.ent.prime.vp-ring} \textbf{(a)} (applied to $a=a_{1}$ and $b=b_{2}$)
yields $v_{p}\left(  a_{1}b_{2}\right)  =v_{p}\left(  a_{1}\right)
+v_{p}\left(  b_{2}\right)  $. Theorem \ref{thm.ent.prime.vp-ring}
\textbf{(a)} (applied to $a=a_{2}$ and $b=b_{1}$) yields $v_{p}\left(
a_{2}b_{1}\right)  =v_{p}\left(  a_{2}\right)  +v_{p}\left(  b_{1}\right)  $.
Now, from $v_{p}\left(  a_{1}b_{2}\right)  =v_{p}\left(  a_{1}\right)
+v_{p}\left(  b_{2}\right)  $, we obtain%
\begin{equation}
v_{p}\left(  a_{1}\right)  +v_{p}\left(  b_{2}\right)  =v_{p}\left(
\underbrace{a_{1}b_{2}}_{=a_{2}b_{1}}\right)  =v_{p}\left(  a_{2}b_{1}\right)
=v_{p}\left(  a_{2}\right)  +v_{p}\left(  b_{1}\right)  .
\label{sol.eqrel.quot.wp.a.3}%
\end{equation}
But $b_{1}$ is a nonzero integer (since $\left(  a_{1},b_{1}\right)  $ is a
pair of nonzero integers); thus, $v_{p}\left(  b_{1}\right)  \in\mathbb{N}$
(since Definition \ref{def.ent.prime.vp} \textbf{(a)} shows that $v_{p}\left(
n\right)  \in\mathbb{N}$ for each nonzero integer $n$). Similarly,
$v_{p}\left(  b_{2}\right)  \in\mathbb{N}$. Hence, $\underbrace{v_{p}\left(
b_{1}\right)  }_{\in\mathbb{N}}+\underbrace{v_{p}\left(  b_{2}\right)  }%
_{\in\mathbb{N}}\in\mathbb{N}$. Thus, we can subtract $v_{p}\left(
b_{1}\right)  +v_{p}\left(  b_{2}\right)  $ from both sides of the equality
(\ref{sol.eqrel.quot.wp.a.3}). We thus obtain $v_{p}\left(  a_{1}\right)
-v_{p}\left(  b_{1}\right)  =v_{p}\left(  a_{2}\right)  -v_{p}\left(
b_{2}\right)  $. This proves Claim 4.]

As we recall, Claim 4 is just a restatement of Claim 1. Hence, Claim 1 is
proven (since Claim 4 is proven). From Claims 1, 2 and 3, we conclude that
$w_{p}\left(  r\right)  $ is well-defined. Thus, Exercise
\ref{exe.eqrel.quot.wp} \textbf{(a)} is solved.

Let us state a consequence of the definition of $w_{p}\left(  r\right)  $: If
$r$ is a nonzero rational number, and if $a$ and $b$ are two nonzero integers
satisfying $r=a/b$, then%
\begin{equation}
w_{p}\left(  r\right)  =v_{p}\left(  a\right)  -v_{p}\left(  b\right)  .
\label{sol.eqrel.quot.wp.a.cons}%
\end{equation}


\textbf{(b)} Let $n$ be a nonzero integer. We must prove that $w_{p}\left(
n\right)  =v_{p}\left(  n\right)  $.

We know that $n$ and $1$ are two nonzero integers satisfying $n=n/1$. Hence,
(\ref{sol.eqrel.quot.wp.a.cons}) (applied to $r=n$, $a=n$ and $b=1$) yields%
\[
w_{p}\left(  n\right)  =v_{p}\left(  n\right)  -\underbrace{v_{p}\left(
1\right)  }_{\substack{=0\\\text{(by Theorem \ref{thm.ent.prime.vp-ring}
\textbf{(c)})}}}=v_{p}\left(  n\right)  .
\]
This solves Exercise \ref{exe.eqrel.quot.wp} \textbf{(b)}.

\textbf{(c)} Let $a$ and $b$ be two nonzero rational numbers. We must show
that $w_{p}\left(  ab\right)  =w_{p}\left(  a\right)  +w_{p}\left(  b\right)
$.

We know that $a$ is a rational number. Thus, we can write $a$ in the form
$a=u_{1}/v_{1}$ for some integer $u_{1}$ and some nonzero integer $v_{1}$.
Consider these $u_{1}$ and $v_{1}$. If we had $u_{1}=0$, then we would have
$a=\underbrace{u_{1}}_{=0}/v_{1}=0$, which would contradict the assumption
that $a$ is nonzero. Hence, we do not have $u_{1}=0$. In other words, $u_{1}$
is nonzero. Thus, (\ref{sol.eqrel.quot.wp.a.cons}) (applied to $a$, $u_{1}$
and $v_{1}$ instead of $r$, $a$ and $b$) yields
\begin{equation}
w_{p}\left(  a\right)  =v_{p}\left(  u_{1}\right)  -v_{p}\left(  v_{1}\right)
. \label{sol.eqrel.quot.wp.c.wpa=}%
\end{equation}


We know that $b$ is a rational number. Thus, we can write $b$ in the form
$b=u_{2}/v_{2}$ for some integer $u_{2}$ and some nonzero integer $v_{2}$.
Consider these $u_{2}$ and $v_{2}$. If we had $u_{2}=0$, then we would have
$b=\underbrace{u_{2}}_{=0}/v_{2}=0$, which would contradict the assumption
that $b$ is nonzero. Hence, we do not have $u_{2}=0$. In other words, $u_{2}$
is nonzero. Thus, (\ref{sol.eqrel.quot.wp.a.cons}) (applied to $b$, $u_{2}$
and $v_{2}$ instead of $r$, $a$ and $b$) yields
\begin{equation}
w_{p}\left(  b\right)  =v_{p}\left(  u_{2}\right)  -v_{p}\left(  v_{2}\right)
. \label{sol.eqrel.quot.wp.c.wpb=}%
\end{equation}


From $a=u_{1}/v_{1}$ and $b=u_{2}/v_{2}$, we obtain%
\[
ab=\left(  u_{1}/v_{1}\right)  \left(  u_{2}/v_{2}\right)  =\left(  u_{1}%
u_{2}\right)  /\left(  v_{1}v_{2}\right)  .
\]
Moreover, the integer $u_{1}u_{2}$ is nonzero (since $u_{1}$ and $u_{2}$ are
nonzero), and the integer $v_{1}v_{2}$ is nonzero (since $v_{1}$ and $v_{2}$
are nonzero). Hence, (\ref{sol.eqrel.quot.wp.a.cons}) (applied to $ab$,
$u_{1}u_{2}$ and $v_{1}v_{2}$ instead of $r$, $a$ and $b$) yields
\begin{align*}
w_{p}\left(  ab\right)   &  =\underbrace{v_{p}\left(  u_{1}u_{2}\right)
}_{\substack{=v_{p}\left(  u_{1}\right)  +v_{p}\left(  u_{2}\right)
\\\text{(by Theorem \ref{thm.ent.prime.vp-ring} \textbf{(a),}}\\\text{applied
to }u_{1}\text{ and }u_{2}\text{ instead of }a\text{ and }b\text{)}%
}}-\underbrace{v_{p}\left(  v_{1}v_{2}\right)  }_{\substack{=v_{p}\left(
v_{1}\right)  +v_{p}\left(  v_{2}\right)  \\\text{(by Theorem
\ref{thm.ent.prime.vp-ring} \textbf{(a),}}\\\text{applied to }v_{1}\text{ and
}v_{2}\text{ instead of }a\text{ and }b\text{)}}}\\
&  =\left(  v_{p}\left(  u_{1}\right)  +v_{p}\left(  u_{2}\right)  \right)
-\left(  v_{p}\left(  v_{1}\right)  +v_{p}\left(  v_{2}\right)  \right) \\
&  =\underbrace{\left(  v_{p}\left(  u_{1}\right)  -v_{p}\left(  v_{1}\right)
\right)  }_{\substack{=w_{p}\left(  a\right)  \\\text{(by
(\ref{sol.eqrel.quot.wp.c.wpa=}))}}}+\underbrace{\left(  v_{p}\left(
u_{2}\right)  -v_{p}\left(  v_{2}\right)  \right)  }_{\substack{=w_{p}\left(
b\right)  \\\text{(by (\ref{sol.eqrel.quot.wp.c.wpb=}))}}}\\
&  =w_{p}\left(  a\right)  +w_{p}\left(  b\right)  .
\end{align*}
This solves Exercise \ref{exe.eqrel.quot.wp} \textbf{(c)}.

\textbf{(d)} Let $a$ and $b$ be two nonzero rational numbers such that
$a+b\neq0$. We must show that $w_{p}\left(  a+b\right)  \geq\min\left\{
w_{p}\left(  a\right)  ,w_{p}\left(  b\right)  \right\}  $.

Note that $a+b$ is a nonzero rational number (since $a+b\neq0$); thus,
$w_{p}\left(  a+b\right)  $ is well-defined.

We know that $a$ is a rational number. Thus, we can write $a$ in the form
$a=u_{1}/v_{1}$ for some integer $u_{1}$ and some nonzero integer $v_{1}$.
Consider these $u_{1}$ and $v_{1}$. Then, $u_{1}$ is nonzero (this is proven
in the same way as in our solution to Exercise \ref{exe.eqrel.quot.wp}
\textbf{(c)}). Thus, (\ref{sol.eqrel.quot.wp.a.cons}) (applied to $a$, $u_{1}$
and $v_{1}$ instead of $r$, $a$ and $b$) yields
\begin{equation}
w_{p}\left(  a\right)  =v_{p}\left(  u_{1}\right)  -v_{p}\left(  v_{1}\right)
. \label{sol.eqrel.quot.wp.d.wpa=}%
\end{equation}


We know that $b$ is a rational number. Thus, we can write $b$ in the form
$b=u_{2}/v_{2}$ for some integer $u_{2}$ and some nonzero integer $v_{2}$.
Consider these $u_{2}$ and $v_{2}$. Then, $u_{2}$ is nonzero (this is proven
in the same way as in our solution to Exercise \ref{exe.eqrel.quot.wp}
\textbf{(c)}). Thus, (\ref{sol.eqrel.quot.wp.a.cons}) (applied to $b$, $u_{2}$
and $v_{2}$ instead of $r$, $a$ and $b$) yields
\begin{equation}
w_{p}\left(  b\right)  =v_{p}\left(  u_{2}\right)  -v_{p}\left(  v_{2}\right)
. \label{sol.eqrel.quot.wp.d.wpb=}%
\end{equation}


From $a=u_{1}/v_{1}$ and $b=u_{2}/v_{2}$, we obtain%
\[
a+b=\left(  u_{1}/v_{1}\right)  +\left(  u_{2}/v_{2}\right)  =\left(
u_{1}v_{2}+u_{2}v_{1}\right)  /\left(  v_{1}v_{2}\right)  .
\]
Moreover, the integer $u_{1}v_{2}+u_{2}v_{1}$ is nonzero (because otherwise,
we would have $u_{1}v_{2}+u_{2}v_{1}=0$ and therefore $a+b=\underbrace{\left(
u_{1}v_{2}+u_{2}v_{1}\right)  }_{=0}/\left(  v_{1}v_{2}\right)  =0$, which
would contradict $a+b\neq0$), and the integer $v_{1}v_{2}$ is nonzero (since
$v_{1}$ and $v_{2}$ are nonzero). Hence, (\ref{sol.eqrel.quot.wp.a.cons})
(applied to $a+b$, $u_{1}v_{2}+u_{2}v_{1}$ and $v_{1}v_{2}$ instead of $r$,
$a$ and $b$) yields
\begin{align}
w_{p}\left(  a+b\right)   &  =\underbrace{v_{p}\left(  u_{1}v_{2}+u_{2}%
v_{1}\right)  }_{\substack{\geq\min\left\{  v_{p}\left(  u_{1}v_{2}\right)
,v_{p}\left(  u_{2}v_{1}\right)  \right\}  \\\text{(by Theorem
\ref{thm.ent.prime.vp-ring} \textbf{(b),}}\\\text{applied to }u_{1}v_{2}\text{
and }u_{2}v_{1}\text{ instead of }a\text{ and }b\text{)}}}-\underbrace{v_{p}%
\left(  v_{1}v_{2}\right)  }_{\substack{=v_{p}\left(  v_{1}\right)
+v_{p}\left(  v_{2}\right)  \\\text{(by Theorem \ref{thm.ent.prime.vp-ring}
\textbf{(a),}}\\\text{applied to }v_{1}\text{ and }v_{2}\text{ instead of
}a\text{ and }b\text{)}}}\nonumber\\
&  \geq\min\left\{  \underbrace{v_{p}\left(  u_{1}v_{2}\right)  }%
_{\substack{=v_{p}\left(  u_{1}\right)  +v_{p}\left(  v_{2}\right)
\\\text{(by Theorem \ref{thm.ent.prime.vp-ring} \textbf{(a),}}\\\text{applied
to }u_{1}\text{ and }v_{2}\\\text{instead of }a\text{ and }b\text{)}%
}},\underbrace{v_{p}\left(  u_{2}v_{1}\right)  }_{\substack{=v_{p}\left(
u_{2}\right)  +v_{p}\left(  v_{1}\right)  \\\text{(by Theorem
\ref{thm.ent.prime.vp-ring} \textbf{(a),}}\\\text{applied to }u_{2}\text{ and
}v_{1}\\\text{instead of }a\text{ and }b\text{)}}}\right\}  -\left(
v_{p}\left(  v_{1}\right)  +v_{p}\left(  v_{2}\right)  \right) \nonumber\\
&  =\min\left\{  v_{p}\left(  u_{1}\right)  +v_{p}\left(  v_{2}\right)
,v_{p}\left(  u_{2}\right)  +v_{p}\left(  v_{1}\right)  \right\}  -\left(
v_{p}\left(  v_{1}\right)  +v_{p}\left(  v_{2}\right)  \right)  .
\label{sol.eqrel.quot.wp.d.6}%
\end{align}


But it is easy to see that any three numbers $i,j,k\in\mathbb{N}$ satisfy%
\begin{equation}
\min\left\{  i,j\right\}  -k=\min\left\{  i-k,j-k\right\}
\label{sol.eqrel.quot.wp.d.min-}%
\end{equation}
\footnote{\textit{Proof of (\ref{sol.eqrel.quot.wp.d.min-}):} Let
$i,j,k\in\mathbb{N}$ be three numbers. We must prove the equaltity
(\ref{sol.eqrel.quot.wp.d.min-}). We can WLOG assume that $i\leq j$ (since $i$
and $j$ play symmetric roles in our claim, and thus swapping $i$ with $j$ will
not change anything). Assume this. Hence, $\underbrace{i}_{\leq j}-k\leq j-k$,
thus $\min\left\{  i-k,j-k\right\}  =i-k$. Comparing this with
$\underbrace{\min\left\{  i,j\right\}  }_{\substack{=i\\\text{(since }i\leq
j\text{)}}}-k=i-k$, we obtain $\min\left\{  i,j\right\}  -k=\min\left\{
i-k,j-k\right\}  $. This proves (\ref{sol.eqrel.quot.wp.d.min-}).}. Also, it
is easy to see that the three numbers $v_{p}\left(  u_{1}\right)
+v_{p}\left(  v_{2}\right)  ,v_{p}\left(  u_{2}\right)  +v_{p}\left(
v_{1}\right)  ,v_{p}\left(  v_{1}\right)  +v_{p}\left(  v_{2}\right)  $ belong
to $\mathbb{N}$ (since $u_{1},u_{2},v_{1},v_{2}$ are all nonzero). Hence,
(\ref{sol.eqrel.quot.wp.d.min-}) (applied to $i=v_{p}\left(  u_{1}\right)
+v_{p}\left(  v_{2}\right)  $, $j=v_{p}\left(  u_{2}\right)  +v_{p}\left(
v_{1}\right)  $ and $k=v_{p}\left(  v_{1}\right)  +v_{p}\left(  v_{2}\right)
$) yields%
\begin{align*}
&  \min\left\{  v_{p}\left(  u_{1}\right)  +v_{p}\left(  v_{2}\right)
,v_{p}\left(  u_{2}\right)  +v_{p}\left(  v_{1}\right)  \right\}  -\left(
v_{p}\left(  v_{1}\right)  +v_{p}\left(  v_{2}\right)  \right) \\
&  =\min\left\{  \underbrace{v_{p}\left(  u_{1}\right)  +v_{p}\left(
v_{2}\right)  -\left(  v_{p}\left(  v_{1}\right)  +v_{p}\left(  v_{2}\right)
\right)  }_{\substack{=v_{p}\left(  u_{1}\right)  -v_{p}\left(  v_{1}\right)
=w_{p}\left(  a\right)  \\\text{(by (\ref{sol.eqrel.quot.wp.d.wpa=}))}%
}},\underbrace{v_{p}\left(  u_{2}\right)  +v_{p}\left(  v_{1}\right)  -\left(
v_{p}\left(  v_{1}\right)  +v_{p}\left(  v_{2}\right)  \right)  }%
_{\substack{=v_{p}\left(  u_{2}\right)  -v_{p}\left(  v_{2}\right)
=w_{p}\left(  b\right)  \\\text{(by (\ref{sol.eqrel.quot.wp.d.wpb=}))}%
}}\right\} \\
&  =\min\left\{  w_{p}\left(  a\right)  ,w_{p}\left(  b\right)  \right\}  .
\end{align*}
Thus, (\ref{sol.eqrel.quot.wp.d.6}) becomes%
\begin{align*}
w_{p}\left(  a+b\right)   &  \geq\min\left\{  v_{p}\left(  u_{1}\right)
+v_{p}\left(  v_{2}\right)  ,v_{p}\left(  u_{2}\right)  +v_{p}\left(
v_{1}\right)  \right\}  -\left(  v_{p}\left(  v_{1}\right)  +v_{p}\left(
v_{2}\right)  \right) \\
&  =\min\left\{  w_{p}\left(  a\right)  ,w_{p}\left(  b\right)  \right\}  .
\end{align*}
This solves Exercise \ref{exe.eqrel.quot.wp} \textbf{(d)}.
\end{proof}
\end{fineprint}

\begin{thebibliography}{999999999}                                                                                        %


\bibitem[Armstr18]{Armstrong}Drew Armstrong, \textit{Abstract Algebra I},
2018.\newline\url{http://www.math.miami.edu/~armstrong/561fa18.php}

\bibitem[Artin10]{Artin}Michael Artin, \textit{Algebra}, 2nd edition, Pearson 2010.

\bibitem[Boreic08]{Boreic08}Iurie Boreico, \textit{Linear Independence of
Radicals}, The Harvard College Mathematics Review 2.1 (2008).\newline\url{http://citeseerx.ist.psu.edu/viewdoc/download?doi=10.1.1.630.1024&rep=rep1&type=pdf}

\bibitem[Bosch18]{Bosch}Siegfried Bosch, \textit{Algebra -- From the Viewpoint
of Galois Theory}, Springer 2018. \newline\url{https://www.springer.com/la/book/9783319951768}

\bibitem[Burton10]{Burton}David M. Burton, \textit{Elementary Number Theory},
7th edition, McGraw-Hill 2010.

\bibitem[Conrad*]{Conrad*}Keith Conrad, \textit{Expository notes
(\textquotedblleft blurbs\textquotedblright)}.\newline\url{https://kconrad.math.uconn.edu/blurbs/}

\bibitem[ConradE]{Conrad-Euler}Keith Conrad, \textit{Euler's theorem}.\newline\url{https://kconrad.math.uconn.edu/blurbs/ugradnumthy/eulerthm.pdf}

\bibitem[ConradG]{Conrad-Gauss}Keith Conrad, \textit{The Gaussian
integers}.\newline\url{http://www.math.uconn.edu/~kconrad/blurbs/ugradnumthy/Zinotes.pdf}

\bibitem[ConradI]{Conrad-Induction}Keith Conrad, \textit{Examples of proofs by
induction}.\newline\url{https://kconrad.math.uconn.edu/blurbs/proofs/induction.pdf}

\bibitem[ConradW]{Conrad-Well}Keith Conrad, \textit{Well-defined
functions}.\newline\url{https://kconrad.math.uconn.edu/blurbs/proofs/welldefined.pdf}

\bibitem[daSilv12]{daSilv12}%
\href{https://math.stackexchange.com/users/10704/}{Patrick Da Silva},
\textit{\href{https://math.stackexchange.com/questions/108296/polynomial-in-mathbbqx-sending-integers-to-integers}{\textit{Polynomial
in }$\mathbb{Q}\left[  x\right]  $\textit{ sending integers to integers?},
math.stackexchange answer \#108318}}.

\bibitem[Day16]{Day}Martin V. Day, \textit{An Introduction to Proofs and the
Mathematical Vernacular}, 7 December 2016.\newline%
\url{https://www.math.vt.edu/people/day/ProofsBook/IPaMV.pdf} .

\bibitem[DumFoo04]{Dummit-Foote}David S. Dummit, Richard M. Foote,
\textit{Abstract Algebra}, 3rd edition, Wiley 2004. \newline See
\url{http://www.cems.uvm.edu/~rfoote/errata_3rd_edition.pdf} for errata.

\bibitem[Galvin17]{Galvin}David Galvin, \textit{Basic discrete mathematics},
13 December 2017.\newline%
\url{http://www-users.math.umn.edu/~dgrinber/comb/60610lectures2017-Galvin.pdf}
\newline(The URL might change, and the text may get updated. In order to
reliably obtain the version of 13 December 2017, you can use the archive.org
Wayback Machine:
\url{https://web.archive.org/web/20180205122609/http://www-users.math.umn.edu/~dgrinber/comb/60610lectures2017-Galvin.pdf}
.)

\bibitem[GalQua17]{Gallier-RSA}Jean Gallier, Jocelyn Quaintance, \textit{Notes
on Primality Testing And Public Key Cryptography, Part 1}, 8 November
2017.\newline\url{https://www.cis.upenn.edu/~jean/RSA-primality-testing.pdf}

\bibitem[Goodma16]{Goodman}Frederick M. Goodman, \textit{Algebra: Abstract and
Concrete}, edition 2.6, 12 October 2016.\newline\url{http://homepage.divms.uiowa.edu/~goodman/algebrabook.dir/algebrabook.html}

\bibitem[Granvi05]{Granvi05}Andrew Granville, \textit{Binomial coefficients
modulo prime powers}, preprint.\newline\url{https://web.archive.org/web/20181024055320/http://ebooks.bharathuniv.ac.in/gdlc1/gdlc1/Engineering Merged Library v3.0/Andrew Granville/Binomial Coefficients Modulo Prime Powers (5579)/Binomial Coefficients Modulo Prime Powers - Andrew Granville.pdf}

\bibitem[Grinbe15]{detnotes}Darij Grinberg, \textit{Notes on the combinatorial
fundamentals of algebra}, 10 January 2019.\newline%
\url{http://www.cip.ifi.lmu.de/~grinberg/primes2015/sols.pdf} \newline The
numbering of theorems and formulas in this link might shift when the project
gets updated; for a \textquotedblleft frozen\textquotedblright\ version whose
numbering is guaranteed to match that in the citations above, see
\url{https://github.com/darijgr/detnotes/releases/tag/2019-01-10} .

\bibitem[Grinbe16]{floor}Darij Grinberg, \textit{18.781 (Spring 2016): Floor
and arithmetic functions}, 19 June 2016.\newline\url{http://www.cip.ifi.lmu.de/~grinberg/floor.pdf}

\bibitem[Grinbe17]{lucas}Darij Grinberg, \textit{The Lucas and Babbage
congruences}, 10 January 2019.\newline\url{http://www.cip.ifi.lmu.de/~grinberg/lucascong.pdf}

\bibitem[GrKnPa94]{GKP}Ronald L. Graham, Donald E. Knuth, Oren Patashnik,
\textit{Concrete Mathematics, Second Edition}, Addison-Wesley 1994.\newline
See \url{https://www-cs-faculty.stanford.edu/~knuth/gkp.html} for errata.

\bibitem[Hammac18]{Hammack}Richard Hammack, \textit{Book of Proof}, 3rd
edition 2018.\newline\url{http://www.people.vcu.edu/~rhammack/BookOfProof/}

\bibitem[Heffer17]{Hefferon}Jim Hefferon, \textit{Linear Algebra}, 3rd edition
2017.\newline\url{http://joshua.smcvt.edu/linearalgebra/}

\bibitem[Knapp16a]{Knapp1}Anthony W. Knapp, \textit{Basic Algebra}, digital
2nd edition 2016. \newline\url{http://www.math.stonybrook.edu/~aknapp/download.html}

\bibitem[Knapp16b]{Knapp2}Anthony W. Knapp, \textit{Advanced Algebra}, digital
2nd edition 2016. \newline\url{http://www.math.stonybrook.edu/~aknapp/download.html}

\bibitem[LaNaSc16]{LaNaSc16}Isaiah Lankham, Bruno Nachtergaele, Anne
Schilling, \textit{Linear Algebra As an Introduction to Abstract Mathematics},
2016.\newline\url{https://www.math.ucdavis.edu/~anne/linear_algebra/mat67_course_notes.pdf}

\bibitem[LeLeMe18]{LeLeMe}Eric Lehman, F. Thomson Leighton, Albert R. Meyer,
\textit{Mathematics for Computer Science}, revised Tuesday 6th June
2018.\newline\url{https://courses.csail.mit.edu/6.042/spring18/mcs.pdf} .

\bibitem[Loehr11]{Loehr-BC}%
\href{http://www.math.vt.edu/people/nloehr/bijbook.html}{Nicholas A. Loehr,
\textit{Bijective Combinatorics}, Chapman \& Hall/CRC 2011.}

\bibitem[Mestro14]{Mestro14}\href{https://arxiv.org/abs/1409.3820v1}{Romeo
Me\v{s}trovi\'{c}, \textit{Lucas' theorem: its generalizations, extensions and
applications (1878--2014)}, arXiv:1409.3820v1.}

\bibitem[NiZuMo91]{NiZuMo91}Ivan Niven, Herbert S. Zuckerman, Hugh L.
Montgomery, \textit{An Introduction to the Theory of Numbers}, 5th edition 1991.

\bibitem[Pinter10]{Pinter}Charles C. Pinter, \textit{A book of abstract
algebra}, 2nd edition, Dover 2010.\newline\url{https://www.amazon.com/Book-Abstract-Algebra-Second-Mathematics/dp/0486474178}

\bibitem[Polya19]{Polya19}\href{https://eudml.org/doc/149483}{Georg P\'{o}lya,
\textit{\"{U}ber ganzwertige Polynome in algebraischen Zahlk\"{o}rpern},
Journal f\"{u}r die Reine und Angewandte Mathematik (Crelle's Journal),
\textbf{149} (1919), pp. 97--116}.

\bibitem[Siksek15]{Siksek}Samir Siksek, \textit{Introduction to Abstract
Algebra}, 2015.\newline\url{http://homepages.warwick.ac.uk/staff/S.Siksek/teaching/aa/aanotes.pdf}

\bibitem[Strick13]{Strickland}Neil Strickland, \textit{Linear mathematics for
applications}, 2013.\newline\url{https://neil-strickland.staff.shef.ac.uk/courses/MAS201/MAS201.pdf}

\bibitem[Swanso18]{Swanso18}Irena Swanson, \textit{Introduction to Analysis},
with construction of the number systems, 21 August 2018.\newline\url{http://people.reed.edu/~iswanson/analysisconstructR.pdf}

\bibitem[UspHea39]{Uspensky-Heaslet}J. V. Uspensky, M. A. Heaslet,
\textit{Elementary Number Theory}, McGraw-Hill 1939.

\bibitem[Waerde91a]{Waerden1}B.L. van der Waerden, \textit{Algebra, Volume I},
translated 7th edition, Springer 1991.

\bibitem[Waerde91b]{Waerden2}B.L. van der Waerden, \textit{Algebra, Volume
II}, translated 5th edition, Springer 1991.
\end{thebibliography}


\end{document}